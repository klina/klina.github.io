<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <title>高丽娜的博客</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="看书，听音乐，c++">
<meta property="og:type" content="website">
<meta property="og:title" content="高丽娜的博客">
<meta property="og:url" content="http://klina.github.io/index.html">
<meta property="og:site_name" content="高丽娜的博客">
<meta property="og:description" content="看书，听音乐，c++">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="高丽娜的博客">
<meta name="twitter:description" content="看书，听音乐，c++">
  
    <link rel="alternate" href="/atom.xml" title="高丽娜的博客" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  
    <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  
  <link rel="stylesheet" href="/css/style.css">
  

</head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">高丽娜的博客</a>
      </h1>
      
        <h2 id="subtitle-wrap">
          <a href="/" id="subtitle">记录学习经历，偶尔写心情，治疗拖延症</a>
        </h2>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS-каналы"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="Поиск"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" results="0" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="http://klina.github.io"></form>
      </div>
    </div>
  </div>
</header>
      <div class="outer">
        <section id="main">
  
    <article id="post-ForDummies" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2016/04/20/ForDummies/" class="article-date">
  <time datetime="2016-04-20T02:48:04.803Z" itemprop="datePublished">2016-04-20</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>&lt;!DOCTYPE html&gt;</p>
<html lang="en" class=" is-copy-enabled"><br>  <head prefix="og: http://ogp.me/ns# fb: http://ogp.me/ns/fb# object: http://ogp.me/ns/object# article: http://ogp.me/ns/article# profile: http://ogp.me/ns/profile#"><br>    <meta charset="utf-8"><br><br>    <link crossorigin="anonymous" href="https://assets-cdn.github.com/assets/frameworks-4ca81a569e4b382193f26989979660344b2a86c1039cf44e471d2cdfb70c9ce4.css" integrity="sha256-TKgaVp5LOCGT8mmJl5ZgNEsqhsEDnPRORx0s37cMnOQ=" media="all" rel="stylesheet"><br>    <link crossorigin="anonymous" href="https://assets-cdn.github.com/assets/github-4129627c8cf63edb7480badb70e1a5a8eba9dd069ef776cb5f075a5f2d4047f8.css" integrity="sha256-QSlifIz2Ptt0gLrbcOGlqOup3Qae93bLXwdaXy1AR/g=" media="all" rel="stylesheet"><br><br><br><br>    <link crossorigin="anonymous" href="https://assets-cdn.github.com/assets/site-2d5d1699983d8dd7c384c67dfc183fbace8e3a24866e8822069d599f68e71fb2.css" integrity="sha256-LV0WmZg9jdfDhMZ9/Bg/us6OOiSGbogiBp1Zn2jnH7I=" media="all" rel="stylesheet"><br><br>    <link as="script" href="https://assets-cdn.github.com/assets/frameworks-b0c85b6eac5426cd1652deca19bc585e688aacec370c4541ab7f13cb5af4dc00.js" rel="preload"><br><br>    <link as="script" href="https://assets-cdn.github.com/assets/github-124b3847a604fc0e15d55e822321b3cf526c993bdad6b191fecde06505751064.js" rel="preload"><br><br>    <meta http-equiv="X-UA-Compatible" content="IE=edge"><br>    <meta http-equiv="Content-Language" content="en"><br>    <meta name="viewport" content="width=1020"><br><br><br>    <title>googletest/ForDummies.md at master · google/googletest · GitHub</title><br>    <link rel="search" type="application/opensearchdescription+xml" href="/opensearch.xml" title="GitHub"><br>    <link rel="fluid-icon" href="https://github.com/fluidicon.png" title="GitHub"><br>    <link rel="apple-touch-icon" href="/apple-touch-icon.png"><br>    <link rel="apple-touch-icon" sizes="57x57" href="/apple-touch-icon-57x57.png"><br>    <link rel="apple-touch-icon" sizes="60x60" href="/apple-touch-icon-60x60.png"><br>    <link rel="apple-touch-icon" sizes="72x72" href="/apple-touch-icon-72x72.png"><br>    <link rel="apple-touch-icon" sizes="76x76" href="/apple-touch-icon-76x76.png"><br>    <link rel="apple-touch-icon" sizes="114x114" href="/apple-touch-icon-114x114.png"><br>    <link rel="apple-touch-icon" sizes="120x120" href="/apple-touch-icon-120x120.png"><br>    <link rel="apple-touch-icon" sizes="144x144" href="/apple-touch-icon-144x144.png"><br>    <link rel="apple-touch-icon" sizes="152x152" href="/apple-touch-icon-152x152.png"><br>    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon-180x180.png"><br>    <meta property="fb:app_id" content="1401488693436528"><br><br>      <meta content="https://avatars2.githubusercontent.com/u/1342004?v=3&amp;s=400" name="twitter:image:src"><meta content="@github" name="twitter:site"><meta content="summary" name="twitter:card"><meta content="google/googletest" name="twitter:title"><meta content="googletest - Google Test" name="twitter:description"><br>      <meta content="https://avatars2.githubusercontent.com/u/1342004?v=3&amp;s=400" property="og:image"><meta content="GitHub" property="og:site_name"><meta content="object" property="og:type"><meta content="google/googletest" property="og:title"><meta content="https://github.com/google/googletest" property="og:url"><meta content="googletest - Google Test" property="og:description"><br>      <meta name="browser-stats-url" content="https://api.github.com/_private/browser/stats"><br>    <meta name="browser-errors-url" content="https://api.github.com/_private/browser/errors"><br>    <link rel="assets" href="https://assets-cdn.github.com/"><br><br>    <meta name="pjax-timeout" content="1000"><br><br><br>    <meta name="msapplication-TileImage" content="/windows-tile.png"><br>    <meta name="msapplication-TileColor" content="#ffffff"><br>    <meta name="selected-link" value="repo_source" data-pjax-transient=""><br><br>    <meta name="google-site-verification" content="KT5gs8h0wvaagLKAVWq8bbeNwnZZK1r1XQysX3xurLU"><br><meta name="google-site-verification" content="ZzhVyEFwb7w3e0-uOTltm8Jsck2F5StVihD0exw2fsA"><br>    <meta name="google-analytics" content="UA-3769691-2"><br><br><meta content="collector.githubapp.com" name="octolytics-host"><meta content="github" name="octolytics-app-id"><meta content="3E9F4DA5:5EFF:1C6C7F82:5715E6D2" name="octolytics-dimension-request_id"><br><meta content="/&lt;user-name&gt;/&lt;repo-name&gt;/blob/show" data-pjax-transient="true" name="analytics-location"><br><br><br><br>  <meta class="js-ga-set" name="dimension1" content="Logged Out"><br><br><br><br>        <meta name="hostname" content="github.com"><br>    <meta name="user-login" content=""><br><br>        <meta name="expected-hostname" content="github.com"><br>      <meta name="js-proxy-site-detection-payload" content="YTkwNzA2N2E0ODVkN2EzMjJjNmY4Y2E1NjRiMDc1ZWQ4MDk2MjIwMjFkMTVkMWM0ZTRkYTNlOTUzMDIzODE2MHx7InJlbW90ZV9hZGRyZXNzIjoiNjIuMTU5Ljc3LjE2NSIsInJlcXVlc3RfaWQiOiIzRTlGNERBNTo1RUZGOjFDNkM3RjgyOjU3MTVFNkQyIiwidGltZXN0YW1wIjoxNDYxMDUzMTM4fQ=="><br><br><br>      <link rel="mask-icon" href="https://assets-cdn.github.com/pinned-octocat.svg" color="#4078c0"><br>      <link rel="icon" type="image/x-icon" href="https://assets-cdn.github.com/favicon.ico"><br><br>    <meta content="8cb1221b98aea525b7168ab311b77ee96e0e8987" name="form-nonce"><br><br>    <meta http-equiv="x-pjax-version" content="dc812ac6dabadd5440144e9805d8c8fd"><br><br><br><br>  <meta name="description" content="googletest - Google Test"><br>  <meta name="go-import" content="github.com/google/googletest git https://github.com/google/googletest.git"><br><br>  <meta content="1342004" name="octolytics-dimension-user_id"><meta content="google" name="octolytics-dimension-user_login"><meta content="39840932" name="octolytics-dimension-repository_id"><meta content="google/googletest" name="octolytics-dimension-repository_nwo"><meta content="true" name="octolytics-dimension-repository_public"><meta content="false" name="octolytics-dimension-repository_is_fork"><meta content="39840932" name="octolytics-dimension-repository_network_root_id"><meta content="google/googletest" name="octolytics-dimension-repository_network_root_nwo"><br>  <link href="https://github.com/google/googletest/commits/master.atom" rel="alternate" title="Recent Commits to googletest:master" type="application/atom+xml"><br><br><br>      <link rel="canonical" href="https://github.com/google/googletest/blob/master/googlemock/docs/ForDummies.md" data-pjax-transient=""><br>  </head><br><br><br>  <body class="logged-out   env-production windows vis-public page-blob"><br>    <div id="js-pjax-loader-bar" class="pjax-loader-bar"></div><br>    <a href="#start-of-content" tabindex="1" class="accessibility-aid js-skip-to-content">Skip to content</a><br><br><br><br><br><br><br><br>          <header class="site-header js-details-container" role="banner"><br>  <div class="container-responsive"><br>    <a class="header-logo-invertocat" href="https://github.com/" aria-label="Homepage" data-ga-click="(Logged out) Header, go to homepage, icon:logo-wordmark" target="_blank" rel="external"><br>      <svg aria-hidden="true" class="octicon octicon-mark-github" height="32" version="1.1" viewbox="0 0 16 16" width="32"><path d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59 0.4 0.07 0.55-0.17 0.55-0.38 0-0.19-0.01-0.82-0.01-1.49-2.01 0.37-2.53-0.49-2.69-0.94-0.09-0.23-0.48-0.94-0.82-1.13-0.28-0.15-0.68-0.52-0.01-0.53 0.63-0.01 1.08 0.58 1.23 0.82 0.72 1.21 1.87 0.87 2.33 0.66 0.07-0.52 0.28-0.87 0.51-1.07-1.78-0.2-3.64-0.89-3.64-3.95 0-0.87 0.31-1.59 0.82-2.15-0.08-0.2-0.36-1.02 0.08-2.12 0 0 0.67-0.21 2.2 0.82 0.64-0.18 1.32-0.27 2-0.27 0.68 0 1.36 0.09 2 0.27 1.53-1.04 2.2-0.82 2.2-0.82 0.44 1.1 0.16 1.92 0.08 2.12 0.51 0.56 0.82 1.27 0.82 2.15 0 3.07-1.87 3.75-3.65 3.95 0.29 0.25 0.54 0.73 0.54 1.48 0 1.07-0.01 1.93-0.01 2.2 0 0.21 0.15 0.46 0.55 0.38C13.71 14.53 16 11.53 16 8 16 3.58 12.42 0 8 0z"/></svg><br>    </a><br><br>    <button class="btn-link right site-header-toggle js-details-target" type="button" aria-label="Toggle navigation"><br>      <svg aria-hidden="true" class="octicon octicon-three-bars" height="24" version="1.1" viewbox="0 0 12 16" width="18"><path d="M11.41 9H0.59c-0.59 0-0.59-0.41-0.59-1s0-1 0.59-1h10.81c0.59 0 0.59 0.41 0.59 1s0 1-0.59 1z m0-4H0.59c-0.59 0-0.59-0.41-0.59-1s0-1 0.59-1h10.81c0.59 0 0.59 0.41 0.59 1s0 1-0.59 1zM0.59 11h10.81c0.59 0 0.59 0.41 0.59 1s0 1-0.59 1H0.59c-0.59 0-0.59-0.41-0.59-1s0-1 0.59-1z"/></svg><br>    </button><br><br>    <div class="site-header-menu"><br>      <nav class="site-header-nav site-header-nav-main"><br>        <a href="/personal" class="js-selected-navigation-item nav-item nav-item-personal" data-ga-click="Header, click, Nav menu - item:personal" data-selected-links="/personal /personal"><br>          Personal<br></a>        <a href="/open-source" class="js-selected-navigation-item nav-item nav-item-opensource" data-ga-click="Header, click, Nav menu - item:opensource" data-selected-links="/open-source /open-source"><br>          Open source<br></a>        <a href="/business" class="js-selected-navigation-item nav-item nav-item-business" data-ga-click="Header, click, Nav menu - item:business" data-selected-links="/business /business/features /business/customers /business"><br>          Business<br></a>        <a href="/explore" class="js-selected-navigation-item nav-item nav-item-explore" data-ga-click="Header, click, Nav menu - item:explore" data-selected-links="/explore /trending /trending/developers /integrations /integrations/feature/code /integrations/feature/collaborate /integrations/feature/ship /explore"><br>          Explore<br></a>      </nav><br><br>      <div class="site-header-actions"><br>            <a class="btn btn-primary site-header-actions-btn" href="/join?source=header-repo" data-ga-click="(Logged out) Header, clicked Sign up, text:sign-up">Sign up</a><br>          <a class="btn site-header-actions-btn mr-2" href="/login?return_to=%2Fgoogle%2Fgoogletest%2Fblob%2Fmaster%2Fgooglemock%2Fdocs%2FForDummies.md" data-ga-click="(Logged out) Header, clicked Sign in, text:sign-in">Sign in</a><br>      </div><br><br>        <nav class="site-header-nav site-header-nav-secondary"><br>          <a class="nav-item" href="/pricing">Pricing</a><br>          <a class="nav-item" href="/blog">Blog</a><br>          <a class="nav-item" href="https://help.github.com" target="_blank" rel="external">Support</a><br>          <a class="nav-item header-search-link" href="https://github.com/search" target="_blank" rel="external">Search GitHub</a><br>              <div class="header-search scoped-search site-scoped-search js-site-search" role="search"><br>  <!-- </textarea> --><!-- '"` --><form accept-charset="UTF-8" action="/google/googletest/search" class="js-site-search-form" data-scoped-search-url="/google/googletest/search" data-unscoped-search-url="/search" method="get"><div style="margin:0;padding:0;display:inline"><input name="utf8" type="hidden" value="&#x2713;"></div><br>    <label class="form-control header-search-wrapper js-chromeless-input-container"><br>      <div class="header-search-scope">This repository</div><br>      <input type="text" class="form-control header-search-input js-site-search-focus js-site-search-field is-clearable" data-hotkey="s" name="q" placeholder="Search" aria-label="Search this repository" data-unscoped-placeholder="Search GitHub" data-scoped-placeholder="Search" tabindex="1" autocapitalize="off"><br>    </label><br></form></div><br><br>        </nav><br>    </div><br>  </div><br></header><br><br><br><br>    <div id="start-of-content" class="accessibility-aid"></div><br><br>      <div id="js-flash-container"><br></div><br><br><br>    <div role="main" class="main-content"><br>        <div itemscope="" itemtype="http://schema.org/SoftwareSourceCode"><br>    <div id="js-repo-pjax-container" data-pjax-container=""><br><br><div class="pagehead repohead instapaper_ignore readability-menu experiment-repo-nav"><br>  <div class="container repohead-details-container"><br><br><br><br><ul class="pagehead-actions"><br><br>  <li><br>      <a href="/login?return_to=%2Fgoogle%2Fgoogletest" class="btn btn-sm btn-with-count tooltipped tooltipped-n" aria-label="You must be signed in to watch a repository" rel="nofollow"><br>    <svg aria-hidden="true" class="octicon octicon-eye" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M8.06 2C3 2 0 8 0 8s3 6 8.06 6c4.94 0 7.94-6 7.94-6S13 2 8.06 2z m-0.06 10c-2.2 0-4-1.78-4-4 0-2.2 1.8-4 4-4 2.22 0 4 1.8 4 4 0 2.22-1.78 4-4 4z m2-4c0 1.11-0.89 2-2 2s-2-0.89-2-2 0.89-2 2-2 2 0.89 2 2z"/></svg><br>    Watch<br>  </a><br>  <a class="social-count" href="/google/googletest/watchers"><br>    258<br>  </a><br><br>  </li><br><br>  <li><br>      <a href="/login?return_to=%2Fgoogle%2Fgoogletest" class="btn btn-sm btn-with-count tooltipped tooltipped-n" aria-label="You must be signed in to star a repository" rel="nofollow"><br>    <svg aria-hidden="true" class="octicon octicon-star" height="16" version="1.1" viewbox="0 0 14 16" width="14"><path d="M14 6l-4.9-0.64L7 1 4.9 5.36 0 6l3.6 3.26L2.67 14l4.33-2.33 4.33 2.33L10.4 9.26 14 6z"/></svg><br>    Star<br>  </a><br><br>    <a class="social-count js-social-count" href="/google/googletest/stargazers"><br>      1,987<br>    </a><br><br>  </li><br><br>  <li><br>      <a href="/login?return_to=%2Fgoogle%2Fgoogletest" class="btn btn-sm btn-with-count tooltipped tooltipped-n" aria-label="You must be signed in to fork a repository" rel="nofollow"><br>        <svg aria-hidden="true" class="octicon octicon-repo-forked" height="16" version="1.1" viewbox="0 0 10 16" width="10"><path d="M8 1c-1.11 0-2 0.89-2 2 0 0.73 0.41 1.38 1 1.72v1.28L5 8 3 6v-1.28c0.59-0.34 1-0.98 1-1.72 0-1.11-0.89-2-2-2S0 1.89 0 3c0 0.73 0.41 1.38 1 1.72v1.78l3 3v1.78c-0.59 0.34-1 0.98-1 1.72 0 1.11 0.89 2 2 2s2-0.89 2-2c0-0.73-0.41-1.38-1-1.72V9.5l3-3V4.72c0.59-0.34 1-0.98 1-1.72 0-1.11-0.89-2-2-2zM2 4.2c-0.66 0-1.2-0.55-1.2-1.2s0.55-1.2 1.2-1.2 1.2 0.55 1.2 1.2-0.55 1.2-1.2 1.2z m3 10c-0.66 0-1.2-0.55-1.2-1.2s0.55-1.2 1.2-1.2 1.2 0.55 1.2 1.2-0.55 1.2-1.2 1.2z m3-10c-0.66 0-1.2-0.55-1.2-1.2s0.55-1.2 1.2-1.2 1.2 0.55 1.2 1.2-0.55 1.2-1.2 1.2z"/></svg><br>        Fork<br>      </a><br><br>    <a href="/google/googletest/network" class="social-count"><br>      704<br>    </a><br>  </li><br></ul><br><br>    <h1 class="entry-title public "><br>  <svg aria-hidden="true" class="octicon octicon-repo" height="16" version="1.1" viewbox="0 0 12 16" width="12"><path d="M4 9h-1v-1h1v1z m0-3h-1v1h1v-1z m0-2h-1v1h1v-1z m0-2h-1v1h1v-1z m8-1v12c0 0.55-0.45 1-1 1H6v2l-1.5-1.5-1.5 1.5V14H1c-0.55 0-1-0.45-1-1V1C0 0.45 0.45 0 1 0h10c0.55 0 1 0.45 1 1z m-1 10H1v2h2v-1h3v1h5V11z m0-10H2v9h9V1z"/></svg><br>  <span class="author" itemprop="author"><a href="/google" class="url fn" rel="author">google</a></span><!--
--><span class="path-divider">/</span><!--
--><strong itemprop="name"><a href="/google/googletest" data-pjax="#js-repo-pjax-container">googletest</a></strong><br><br></h1><br><br>  </div><br>  <div class="container"><br><br><nav class="reponav js-repo-nav js-sidenav-container-pjax" itemscope="" itemtype="http://schema.org/BreadcrumbList" role="navigation" data-pjax="#js-repo-pjax-container"><br><br>  <span itemscope="" itemtype="http://schema.org/ListItem" itemprop="itemListElement"><br>    <a href="/google/googletest" aria-selected="true" class="js-selected-navigation-item selected reponav-item" data-hotkey="g c" data-selected-links="repo_source repo_downloads repo_commits repo_releases repo_tags repo_branches /google/googletest" itemprop="url"><br>      <svg aria-hidden="true" class="octicon octicon-code" height="16" version="1.1" viewbox="0 0 14 16" width="14"><path d="M9.5 3l-1.5 1.5 3.5 3.5L8 11.5l1.5 1.5 4.5-5L9.5 3zM4.5 3L0 8l4.5 5 1.5-1.5L2.5 8l3.5-3.5L4.5 3z"/></svg><br>      <span itemprop="name">Code</span><br>      <meta itemprop="position" content="1"><br></a>  </span><br><br>    <span itemscope="" itemtype="http://schema.org/ListItem" itemprop="itemListElement"><br>      <a href="/google/googletest/issues" class="js-selected-navigation-item reponav-item" data-hotkey="g i" data-selected-links="repo_issues repo_labels repo_milestones /google/googletest/issues" itemprop="url"><br>        <svg aria-hidden="true" class="octicon octicon-issue-opened" height="16" version="1.1" viewbox="0 0 14 16" width="14"><path d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7S10.14 13.7 7 13.7 1.3 11.14 1.3 8s2.56-5.7 5.7-5.7m0-1.3C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7S10.86 1 7 1z m1 3H6v5h2V4z m0 6H6v2h2V10z"/></svg><br>        <span itemprop="name">Issues</span><br>        <span class="counter">247</span><br>        <meta itemprop="position" content="2"><br></a>    </span><br><br>  <span itemscope="" itemtype="http://schema.org/ListItem" itemprop="itemListElement"><br>    <a href="/google/googletest/pulls" class="js-selected-navigation-item reponav-item" data-hotkey="g p" data-selected-links="repo_pulls /google/googletest/pulls" itemprop="url"><br>      <svg aria-hidden="true" class="octicon octicon-git-pull-request" height="16" version="1.1" viewbox="0 0 12 16" width="12"><path d="M11 11.28c0-1.73 0-6.28 0-6.28-0.03-0.78-0.34-1.47-0.94-2.06s-1.28-0.91-2.06-0.94c0 0-1.02 0-1 0V0L4 3l3 3V4h1c0.27 0.02 0.48 0.11 0.69 0.31s0.3 0.42 0.31 0.69v6.28c-0.59 0.34-1 0.98-1 1.72 0 1.11 0.89 2 2 2s2-0.89 2-2c0-0.73-0.41-1.38-1-1.72z m-1 2.92c-0.66 0-1.2-0.55-1.2-1.2s0.55-1.2 1.2-1.2 1.2 0.55 1.2 1.2-0.55 1.2-1.2 1.2zM4 3c0-1.11-0.89-2-2-2S0 1.89 0 3c0 0.73 0.41 1.38 1 1.72 0 1.55 0 5.56 0 6.56-0.59 0.34-1 0.98-1 1.72 0 1.11 0.89 2 2 2s2-0.89 2-2c0-0.73-0.41-1.38-1-1.72V4.72c0.59-0.34 1-0.98 1-1.72z m-0.8 10c0 0.66-0.55 1.2-1.2 1.2s-1.2-0.55-1.2-1.2 0.55-1.2 1.2-1.2 1.2 0.55 1.2 1.2z m-1.2-8.8c-0.66 0-1.2-0.55-1.2-1.2s0.55-1.2 1.2-1.2 1.2 0.55 1.2 1.2-0.55 1.2-1.2 1.2z"/></svg><br>      <span itemprop="name">Pull requests</span><br>      <span class="counter">42</span><br>      <meta itemprop="position" content="3"><br></a>  </span><br><br><br>  <a href="/google/googletest/pulse" class="js-selected-navigation-item reponav-item" data-selected-links="pulse /google/googletest/pulse"><br>    <svg aria-hidden="true" class="octicon octicon-pulse" height="16" version="1.1" viewbox="0 0 14 16" width="14"><path d="M11.5 8L8.8 5.4 6.6 8.5 5.5 1.6 2.38 8H0V10h3.6L4.5 8.2l0.9 5.4L9 8.5l1.6 1.5H14V8H11.5z"/></svg><br>    Pulse<br></a><br>  <a href="/google/googletest/graphs" class="js-selected-navigation-item reponav-item" data-selected-links="repo_graphs repo_contributors /google/googletest/graphs"><br>    <svg aria-hidden="true" class="octicon octicon-graph" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M16 14v1H0V0h1v14h15z m-11-1H3V8h2v5z m4 0H7V3h2v10z m4 0H11V6h2v7z"/></svg><br>    Graphs<br></a><br><br></nav><br><br>  </div><br></div><br><br><div class="container new-discussion-timeline experiment-repo-nav"><br>  <div class="repository-content"><br><br><br><br><a href="/google/googletest/blob/d225acc90bc3a8c420a9bcd1f033033c1ccd7fe0/googlemock/docs/ForDummies.md" class="hidden js-permalink-shortcut" data-hotkey="y">Permalink</a><br><br><!-- blob contrib key: blob_contributors:v21:c531daaa5017769a23bb59c2a2584a19 --><br><br><div class="file-navigation js-zeroclipboard-container"><br><br><div class="select-menu branch-select-menu js-menu-container js-select-menu left"><br>  <button class="btn btn-sm select-menu-button js-menu-target css-truncate" data-hotkey="w" title="master" type="button" aria-label="Switch branches or tags" tabindex="0" aria-haspopup="true"><br>    <i>Branch:</i><br>    <span class="js-select-button css-truncate-target">master</span><br>  </button><br><br>  <div class="select-menu-modal-holder js-menu-content js-navigation-container" data-pjax="" aria-hidden="true"><br><br>    <div class="select-menu-modal"><br>      <div class="select-menu-header"><br>        <svg aria-label="Close" class="octicon octicon-x js-menu-close" height="16" role="img" version="1.1" viewbox="0 0 12 16" width="12"><path d="M7.48 8l3.75 3.75-1.48 1.48-3.75-3.75-3.75 3.75-1.48-1.48 3.75-3.75L0.77 4.25l1.48-1.48 3.75 3.75 3.75-3.75 1.48 1.48-3.75 3.75z"/></svg><br>        <span class="select-menu-title">Switch branches/tags</span><br>      </div><br><br>      <div class="select-menu-filters"><br>        <div class="select-menu-text-filter"><br>          <input type="text" aria-label="Filter branches/tags" id="context-commitish-filter-field" class="form-control js-filterable-field js-navigation-enable" placeholder="Filter branches/tags"><br>        </div><br>        <div class="select-menu-tabs"><br>          <ul><br>            <li class="select-menu-tab"><br>              <a href="#" data-tab-filter="branches" data-filter-placeholder="Filter branches/tags" class="js-select-menu-tab" role="tab">Branches</a><br>            </li><br>            <li class="select-menu-tab"><br>              <a href="#" data-tab-filter="tags" data-filter-placeholder="Find a tag…" class="js-select-menu-tab" role="tab">Tags</a><br>            </li><br>          </ul><br>        </div><br>      </div><br><br>      <div class="select-menu-list select-menu-tab-bucket js-select-menu-tab-bucket" data-tab-filter="branches" role="menu"><br><br>        <div data-filterable-for="context-commitish-filter-field" data-filterable-type="substring"><br><br><br>            <a class="select-menu-item js-navigation-item js-navigation-open " href="/google/googletest/blob/BillyDonahue-patch-1/googlemock/docs/ForDummies.md" data-name="BillyDonahue-patch-1" data-skip-pjax="true" rel="nofollow"><br>              <svg aria-hidden="true" class="octicon octicon-check select-menu-item-icon" height="16" version="1.1" viewbox="0 0 12 16" width="12"><path d="M12 5L4 13 0 9l1.5-1.5 2.5 2.5 6.5-6.5 1.5 1.5z"/></svg><br>              <span class="select-menu-item-text css-truncate-target js-select-menu-filter-text" title="BillyDonahue-patch-1"><br>                BillyDonahue-patch-1<br>              </span><br>            </a><br>            <a class="select-menu-item js-navigation-item js-navigation-open selected" href="/google/googletest/blob/master/googlemock/docs/ForDummies.md" data-name="master" data-skip-pjax="true" rel="nofollow"><br>              <svg aria-hidden="true" class="octicon octicon-check select-menu-item-icon" height="16" version="1.1" viewbox="0 0 12 16" width="12"><path d="M12 5L4 13 0 9l1.5-1.5 2.5 2.5 6.5-6.5 1.5 1.5z"/></svg><br>              <span class="select-menu-item-text css-truncate-target js-select-menu-filter-text" title="master"><br>                master<br>              </span><br>            </a><br>        </div><br><br>          <div class="select-menu-no-results">Nothing to show</div><br>      </div><br><br>      <div class="select-menu-list select-menu-tab-bucket js-select-menu-tab-bucket" data-tab-filter="tags"><br>        <div data-filterable-for="context-commitish-filter-field" data-filterable-type="substring"><br><br><br>            <a class="select-menu-item js-navigation-item js-navigation-open " href="/google/googletest/tree/release-1.7.0/googlemock/docs/ForDummies.md" data-name="release-1.7.0" data-skip-pjax="true" rel="nofollow"><br>              <svg aria-hidden="true" class="octicon octicon-check select-menu-item-icon" height="16" version="1.1" viewbox="0 0 12 16" width="12"><path d="M12 5L4 13 0 9l1.5-1.5 2.5 2.5 6.5-6.5 1.5 1.5z"/></svg><br>              <span class="select-menu-item-text css-truncate-target" title="release-1.7.0"><br>                release-1.7.0<br>              </span><br>            </a><br>            <a class="select-menu-item js-navigation-item js-navigation-open " href="/google/googletest/tree/release-1.6.0/googlemock/docs/ForDummies.md" data-name="release-1.6.0" data-skip-pjax="true" rel="nofollow"><br>              <svg aria-hidden="true" class="octicon octicon-check select-menu-item-icon" height="16" version="1.1" viewbox="0 0 12 16" width="12"><path d="M12 5L4 13 0 9l1.5-1.5 2.5 2.5 6.5-6.5 1.5 1.5z"/></svg><br>              <span class="select-menu-item-text css-truncate-target" title="release-1.6.0"><br>                release-1.6.0<br>              </span><br>            </a><br>            <a class="select-menu-item js-navigation-item js-navigation-open " href="/google/googletest/tree/release-1.5.0/googlemock/docs/ForDummies.md" data-name="release-1.5.0" data-skip-pjax="true" rel="nofollow"><br>              <svg aria-hidden="true" class="octicon octicon-check select-menu-item-icon" height="16" version="1.1" viewbox="0 0 12 16" width="12"><path d="M12 5L4 13 0 9l1.5-1.5 2.5 2.5 6.5-6.5 1.5 1.5z"/></svg><br>              <span class="select-menu-item-text css-truncate-target" title="release-1.5.0"><br>                release-1.5.0<br>              </span><br>            </a><br>            <a class="select-menu-item js-navigation-item js-navigation-open " href="/google/googletest/tree/release-1.4.0/googlemock/docs/ForDummies.md" data-name="release-1.4.0" data-skip-pjax="true" rel="nofollow"><br>              <svg aria-hidden="true" class="octicon octicon-check select-menu-item-icon" height="16" version="1.1" viewbox="0 0 12 16" width="12"><path d="M12 5L4 13 0 9l1.5-1.5 2.5 2.5 6.5-6.5 1.5 1.5z"/></svg><br>              <span class="select-menu-item-text css-truncate-target" title="release-1.4.0"><br>                release-1.4.0<br>              </span><br>            </a><br>            <a class="select-menu-item js-navigation-item js-navigation-open " href="/google/googletest/tree/release-1.3.0/googlemock/docs/ForDummies.md" data-name="release-1.3.0" data-skip-pjax="true" rel="nofollow"><br>              <svg aria-hidden="true" class="octicon octicon-check select-menu-item-icon" height="16" version="1.1" viewbox="0 0 12 16" width="12"><path d="M12 5L4 13 0 9l1.5-1.5 2.5 2.5 6.5-6.5 1.5 1.5z"/></svg><br>              <span class="select-menu-item-text css-truncate-target" title="release-1.3.0"><br>                release-1.3.0<br>              </span><br>            </a><br>            <a class="select-menu-item js-navigation-item js-navigation-open " href="/google/googletest/tree/release-1.2.1/googlemock/docs/ForDummies.md" data-name="release-1.2.1" data-skip-pjax="true" rel="nofollow"><br>              <svg aria-hidden="true" class="octicon octicon-check select-menu-item-icon" height="16" version="1.1" viewbox="0 0 12 16" width="12"><path d="M12 5L4 13 0 9l1.5-1.5 2.5 2.5 6.5-6.5 1.5 1.5z"/></svg><br>              <span class="select-menu-item-text css-truncate-target" title="release-1.2.1"><br>                release-1.2.1<br>              </span><br>            </a><br>            <a class="select-menu-item js-navigation-item js-navigation-open " href="/google/googletest/tree/release-1.2.0/googlemock/docs/ForDummies.md" data-name="release-1.2.0" data-skip-pjax="true" rel="nofollow"><br>              <svg aria-hidden="true" class="octicon octicon-check select-menu-item-icon" height="16" version="1.1" viewbox="0 0 12 16" width="12"><path d="M12 5L4 13 0 9l1.5-1.5 2.5 2.5 6.5-6.5 1.5 1.5z"/></svg><br>              <span class="select-menu-item-text css-truncate-target" title="release-1.2.0"><br>                release-1.2.0<br>              </span><br>            </a><br>            <a class="select-menu-item js-navigation-item js-navigation-open " href="/google/googletest/tree/release-1.1.0/googlemock/docs/ForDummies.md" data-name="release-1.1.0" data-skip-pjax="true" rel="nofollow"><br>              <svg aria-hidden="true" class="octicon octicon-check select-menu-item-icon" height="16" version="1.1" viewbox="0 0 12 16" width="12"><path d="M12 5L4 13 0 9l1.5-1.5 2.5 2.5 6.5-6.5 1.5 1.5z"/></svg><br>              <span class="select-menu-item-text css-truncate-target" title="release-1.1.0"><br>                release-1.1.0<br>              </span><br>            </a><br>            <a class="select-menu-item js-navigation-item js-navigation-open " href="/google/googletest/tree/release-1.0.1/googlemock/docs/ForDummies.md" data-name="release-1.0.1" data-skip-pjax="true" rel="nofollow"><br>              <svg aria-hidden="true" class="octicon octicon-check select-menu-item-icon" height="16" version="1.1" viewbox="0 0 12 16" width="12"><path d="M12 5L4 13 0 9l1.5-1.5 2.5 2.5 6.5-6.5 1.5 1.5z"/></svg><br>              <span class="select-menu-item-text css-truncate-target" title="release-1.0.1"><br>                release-1.0.1<br>              </span><br>            </a><br>            <a class="select-menu-item js-navigation-item js-navigation-open " href="/google/googletest/tree/release-1.0.0/googlemock/docs/ForDummies.md" data-name="release-1.0.0" data-skip-pjax="true" rel="nofollow"><br>              <svg aria-hidden="true" class="octicon octicon-check select-menu-item-icon" height="16" version="1.1" viewbox="0 0 12 16" width="12"><path d="M12 5L4 13 0 9l1.5-1.5 2.5 2.5 6.5-6.5 1.5 1.5z"/></svg><br>              <span class="select-menu-item-text css-truncate-target" title="release-1.0.0"><br>                release-1.0.0<br>              </span><br>            </a><br>        </div><br><br>        <div class="select-menu-no-results">Nothing to show</div><br>      </div><br><br>    </div><br>  </div><br></div><br><br>  <div class="btn-group right"><br>    <a href="/google/googletest/find/master" class="js-pjax-capture-input btn btn-sm" data-pjax="" data-hotkey="t"><br>      Find file<br>    </a><br>    <button aria-label="Copy file path to clipboard" class="js-zeroclipboard btn btn-sm zeroclipboard-button tooltipped tooltipped-s" data-copied-hint="Copied!" type="button">Copy path</button><br>  </div><br>  <div class="breadcrumb js-zeroclipboard-target"><br>    <span class="repo-root js-repo-root"><span class="js-path-segment"><a href="/google/googletest"><span>googletest</span></a></span></span><span class="separator">/</span><span class="js-path-segment"><a href="/google/googletest/tree/master/googlemock"><span>googlemock</span></a></span><span class="separator">/</span><span class="js-path-segment"><a href="/google/googletest/tree/master/googlemock/docs"><span>docs</span></a></span><span class="separator">/</span><strong class="final-path">ForDummies.md</strong><br>  </div><br></div><br><br><br>  <div class="commit-tease"><br>      <span class="right"><br>        <a class="commit-tease-sha" href="/google/googletest/commit/83d3b47acf8ab7ca010cacd9bc9f06bcabe69c38" data-pjax=""><br>          83d3b47<br>        </a><br>        <time datetime="2016-02-21T15:52:09Z" is="relative-time">Feb 21, 2016</time><br>      </span><br>      <div><br>        <img alt="@paul-wilkinson" class="avatar" height="20" src="https://avatars1.githubusercontent.com/u/7225429?v=3&amp;s=40" width="20"><br>        <a href="/paul-wilkinson" class="user-mention" rel="contributor">paul-wilkinson</a><br>          <a href="/google/googletest/commit/83d3b47acf8ab7ca010cacd9bc9f06bcabe69c38" class="message" data-pjax="true" title="Fix formatting in AdvancedGuide.md

Put occurrences of &quot;#include&quot; in a code span so they are not interpreted
as headers.

Other documents were not broken because the #include was not at the
start of the line, but put them in code spans anyway just in case the
text gets refilled in the future.">Fix formatting in AdvancedGuide.md</a><br>      </div><br><br>    <div class="commit-tease-contributors"><br>      <button type="button" class="btn-link muted-link contributors-toggle" data-facebox="#blob_contributors_box"><br>        <strong>2</strong><br>         contributors<br>      </button><br>          <a class="avatar-link tooltipped tooltipped-s" aria-label="paul-wilkinson" href="/google/googletest/commits/master/googlemock/docs/ForDummies.md?author=paul-wilkinson"><img alt="@paul-wilkinson" class="avatar" height="20" src="https://avatars1.githubusercontent.com/u/7225429?v=3&amp;s=40" width="20"> </a><br>    <a class="avatar-link tooltipped tooltipped-s" aria-label="BillyDonahue" href="/google/googletest/commits/master/googlemock/docs/ForDummies.md?author=BillyDonahue"><img alt="@BillyDonahue" class="avatar" height="20" src="https://avatars2.githubusercontent.com/u/8611652?v=3&amp;s=40" width="20"> </a><br><br><br>    </div><br><br>    <div id="blob_contributors_box" style="display:none"><br>      <h2 class="facebox-header" data-facebox-id="facebox-header">Users who have contributed to this file</h2><br>      <ul class="facebox-user-list" data-facebox-id="facebox-description"><br>          <li class="facebox-user-list-item"><br>            <img alt="@paul-wilkinson" height="24" src="https://avatars3.githubusercontent.com/u/7225429?v=3&amp;s=48" width="24"><br>            <a href="/paul-wilkinson">paul-wilkinson</a><br>          </li><br>          <li class="facebox-user-list-item"><br>            <img alt="@BillyDonahue" height="24" src="https://avatars0.githubusercontent.com/u/8611652?v=3&amp;s=48" width="24"><br>            <a href="/BillyDonahue">BillyDonahue</a><br>          </li><br>      </ul><br>    </div><br>  </div><br><br><div class="file"><br>  <div class="file-header"><br>  <div class="file-actions"><br><br>    <div class="btn-group"><br>      <a href="/google/googletest/raw/master/googlemock/docs/ForDummies.md" class="btn btn-sm " id="raw-url">Raw</a><br>        <a href="/google/googletest/blame/master/googlemock/docs/ForDummies.md" class="btn btn-sm js-update-url-with-hash">Blame</a><br>      <a href="/google/googletest/commits/master/googlemock/docs/ForDummies.md" class="btn btn-sm " rel="nofollow">History</a><br>    </div><br><br>        <a class="btn-octicon tooltipped tooltipped-nw" href="https://windows.github.com" aria-label="Open this file in GitHub Desktop" data-ga-click="Repository, open with desktop, type:windows" target="_blank" rel="external"><br>            <svg aria-hidden="true" class="octicon octicon-device-desktop" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M15 2H1c-0.55 0-1 0.45-1 1v9c0 0.55 0.45 1 1 1h5.34c-0.25 0.61-0.86 1.39-2.34 2h8c-1.48-0.61-2.09-1.39-2.34-2h5.34c0.55 0 1-0.45 1-1V3c0-0.55-0.45-1-1-1z m0 9H1V3h14v8z"/></svg><br>        </a><br><br>        <button type="button" class="btn-octicon disabled tooltipped tooltipped-nw" aria-label="You must be signed in to make or propose changes"><br>          <svg aria-hidden="true" class="octicon octicon-pencil" height="16" version="1.1" viewbox="0 0 14 16" width="14"><path d="M0 12v3h3l8-8-3-3L0 12z m3 2H1V12h1v1h1v1z m10.3-9.3l-1.3 1.3-3-3 1.3-1.3c0.39-0.39 1.02-0.39 1.41 0l1.59 1.59c0.39 0.39 0.39 1.02 0 1.41z"/></svg><br>        </button><br>        <button type="button" class="btn-octicon btn-octicon-danger disabled tooltipped tooltipped-nw" aria-label="You must be signed in to make or propose changes"><br>          <svg aria-hidden="true" class="octicon octicon-trashcan" height="16" version="1.1" viewbox="0 0 12 16" width="12"><path d="M10 2H8c0-0.55-0.45-1-1-1H4c-0.55 0-1 0.45-1 1H1c-0.55 0-1 0.45-1 1v1c0 0.55 0.45 1 1 1v9c0 0.55 0.45 1 1 1h7c0.55 0 1-0.45 1-1V5c0.55 0 1-0.45 1-1v-1c0-0.55-0.45-1-1-1z m-1 12H2V5h1v8h1V5h1v8h1V5h1v8h1V5h1v9z m1-10H1v-1h9v1z"/></svg><br>        </button><br>  </div><br><br>  <div class="file-info"><br>      440 lines (320 sloc)<br>      <span class="file-info-divider"></span><br>    29.4 KB<br>  </div><br></div><br><br><br>  <div id="readme" class="readme blob instapaper_body"><br>    <article class="markdown-body entry-content" itemprop="text"><p>(<strong>Note:</strong> If you get compiler errors that you don’t understand, be sure to consult <a href="/google/googletest/blob/master/googlemock/docs/FrequentlyAskedQuestions.md#how-am-i-supposed-to-make-sense-of-these-horrible-template-errors">Google Mock Doctor</a>.)</p><br><br><h1><a id="user-content-what-is-google-c-mocking-framework" class="anchor" href="#what-is-google-c-mocking-framework" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"/></svg></a>What Is Google C++ Mocking Framework?</h1><br><br><p>When you write a prototype or test, often it’s not feasible or wise to rely on real objects entirely. A <strong>mock object</strong> implements the same interface as a real object (so it can be used as one), but lets you specify at run time how it will be used and what it should do (which methods will be called? in which order? how many times? with what arguments? what will they return? etc).</p><br><br><p><strong>Note:</strong> It is easy to confuse the term <em>fake objects</em> with mock objects. Fakes and mocks actually mean very different things in the Test-Driven Development (TDD) community:</p><br><br><ul><br><li><strong>Fake</strong> objects have working implementations, but usually take some shortcut (perhaps to make the operations less expensive), which makes them not suitable for production. An in-memory file system would be an example of a fake.</li><br><li><strong>Mocks</strong> are objects pre-programmed with <em>expectations</em>, which form a specification of the calls they are expected to receive.</li><br></ul><br><br><p>If all this seems too abstract for you, don’t worry - the most important thing to remember is that a mock allows you to check the <em>interaction</em> between itself and code that uses it. The difference between fakes and mocks will become much clearer once you start to use mocks.</p><br><br><p><strong>Google C++ Mocking Framework</strong> (or <strong>Google Mock</strong> for short) is a library (sometimes we also call it a “framework” to make it sound cool) for creating mock classes and using them. It does to C++ what <a href="http://www.jmock.org/" target="_blank" rel="external">jMock</a> and <a href="http://www.easymock.org/" target="_blank" rel="external">EasyMock</a> do to Java.</p><br><br><p>Using Google Mock involves three basic steps:</p><br><br><ol><br><li>Use some simple macros to describe the interface you want to mock, and they will expand to the implementation of your mock class;</li><br><li>Create some mock objects and specify its expectations and behavior using an intuitive syntax;</li><br><li>Exercise code that uses the mock objects. Google Mock will catch any violation of the expectations as soon as it arises.</li><br></ol><br><br><h1><a id="user-content-why-google-mock" class="anchor" href="#why-google-mock" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"/></svg></a>Why Google Mock?</h1><br><br><p>While mock objects help you remove unnecessary dependencies in tests and make them fast and reliable, using mocks manually in C++ is <em>hard</em>:</p><br><br><ul><br><li>Someone has to implement the mocks. The job is usually tedious and error-prone. No wonder people go great distance to avoid it.</li><br><li>The quality of those manually written mocks is a bit, uh, unpredictable. You may see some really polished ones, but you may also see some that were hacked up in a hurry and have all sorts of ad hoc restrictions.</li><br><li>The knowledge you gained from using one mock doesn’t transfer to the next.</li><br></ul><br><br><p>In contrast, Java and Python programmers have some fine mock frameworks, which automate the creation of mocks. As a result, mocking is a proven effective technique and widely adopted practice in those communities. Having the right tool absolutely makes the difference.</p><br><br><p>Google Mock was built to help C++ programmers. It was inspired by <a href="http://www.jmock.org/" target="_blank" rel="external">jMock</a> and <a href="http://www.easymock.org/" target="_blank" rel="external">EasyMock</a>, but designed with C++’s specifics in mind. It is your friend if any of the following problems is bothering you:</p><br><br><ul><br><li>You are stuck with a sub-optimal design and wish you had done more prototyping before it was too late, but prototyping in C++ is by no means “rapid”.</li><br><li>Your tests are slow as they depend on too many libraries or use expensive resources (e.g. a database).</li><br><li>Your tests are brittle as some resources they use are unreliable (e.g. the network).</li><br><li>You want to test how your code handles a failure (e.g. a file checksum error), but it’s not easy to cause one.</li><br><li>You need to make sure that your module interacts with other modules in the right way, but it’s hard to observe the interaction; therefore you resort to observing the side effects at the end of the action, which is awkward at best.</li><br><li>You want to “mock out” your dependencies, except that they don’t have mock implementations yet; and, frankly, you aren’t thrilled by some of those hand-written mocks.</li><br></ul><br><br><p>We encourage you to use Google Mock as:</p><br><br><ul><br><li>a <em>design</em> tool, for it lets you experiment with your interface design early and often. More iterations lead to better designs!</li><br><li>a <em>testing</em> tool to cut your tests’ outbound dependencies and probe the interaction between your module and its collaborators.</li><br></ul><br><br><h1><a id="user-content-getting-started" class="anchor" href="#getting-started" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"/></svg></a>Getting Started</h1><br><br><p>Using Google Mock is easy! Inside your C++ source file, just <code>#include</code> <code>“gtest/gtest.h”</code> and <code>“gmock/gmock.h”</code>, and you are ready to go.</p><br><br><h1><a id="user-content-a-case-for-mock-turtles" class="anchor" href="#a-case-for-mock-turtles" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"/></svg></a>A Case for Mock Turtles</h1><br><br><p>Let’s look at an example. Suppose you are developing a graphics program that relies on a LOGO-like API for drawing. How would you test that it does the right thing? Well, you can run it and compare the screen with a golden screen snapshot, but let’s admit it: tests like this are expensive to run and fragile (What if you just upgraded to a shiny new graphics card that has better anti-aliasing? Suddenly you have to update all your golden images.). It would be too painful if all your tests are like this. Fortunately, you learned about Dependency Injection and know the right thing to do: instead of having your application talk to the drawing API directly, wrap the API in an interface (say, <code>Turtle</code>) and code to that interface:</p><br><br><pre><code>class Turtle {<br>  …<br>  virtual ~Turtle() {}<br>  virtual void PenUp() = 0;<br>  virtual void PenDown() = 0;<br>  virtual void Forward(int distance) = 0;<br>  virtual void Turn(int degrees) = 0;<br>  virtual void GoTo(int x, int y) = 0;<br>  virtual int GetX() const = 0;<br>  virtual int GetY() const = 0;<br>};<br></code></pre><br><br><p>(Note that the destructor of <code>Turtle</code> <strong>must</strong> be virtual, as is the case for <strong>all</strong> classes you intend to inherit from - otherwise the destructor of the derived class will not be called when you delete an object through a base pointer, and you’ll get corrupted program states like memory leaks.)</p><br><br><p>You can control whether the turtle’s movement will leave a trace using <code>PenUp()</code> and <code>PenDown()</code>, and control its movement using <code>Forward()</code>, <code>Turn()</code>, and <code>GoTo()</code>. Finally, <code>GetX()</code> and <code>GetY()</code> tell you the current position of the turtle.</p><br><br><p>Your program will normally use a real implementation of this interface. In tests, you can use a mock implementation instead. This allows you to easily check what drawing primitives your program is calling, with what arguments, and in which order. Tests written this way are much more robust (they won’t break because your new machine does anti-aliasing differently), easier to read and maintain (the intent of a test is expressed in the code, not in some binary images), and run <em>much, much faster</em>.</p><br><br><h1><a id="user-content-writing-the-mock-class" class="anchor" href="#writing-the-mock-class" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"/></svg></a>Writing the Mock Class</h1><br><br><p>If you are lucky, the mocks you need to use have already been implemented by some nice people. If, however, you find yourself in the position to write a mock class, relax - Google Mock turns this task into a fun game! (Well, almost.)</p><br><br><h2><a id="user-content-how-to-define-it" class="anchor" href="#how-to-define-it" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"/></svg></a>How to Define It</h2><br><br><p>Using the <code>Turtle</code> interface as example, here are the simple steps you need to follow:</p><br><br><ol><br><li>Derive a class <code>MockTurtle</code> from <code>Turtle</code>.</li><br><li>Take a <em>virtual</em> function of <code>Turtle</code> (while it’s possible to <a href="/google/googletest/blob/master/googlemock/docs/CookBook.md#mocking-nonvirtual-methods">mock non-virtual methods using templates</a>, it’s much more involved). Count how many arguments it has.</li><br><li>In the <code>public:</code> section of the child class, write <code>MOCK_METHODn();</code> (or <code>MOCK_CONST_METHODn();</code> if you are mocking a <code>const</code> method), where <code>n</code> is the number of the arguments; if you counted wrong, shame on you, and a compiler error will tell you so.</li><br><li>Now comes the fun part: you take the function signature, cut-and-paste the <em>function name</em> as the <em>first</em> argument to the macro, and leave what’s left as the <em>second</em> argument (in case you’re curious, this is the <em>type of the function</em>).</li><br><li>Repeat until all virtual functions you want to mock are done.</li><br></ol><br><br><p>After the process, you should have something like:</p><br><br><pre><code>#include “gmock/gmock.h”  // Brings in Google Mock.<br>class MockTurtle : public Turtle {<br> public:<br>  …<br>  MOCK_METHOD0(PenUp, void());<br>  MOCK_METHOD0(PenDown, void());<br>  MOCK_METHOD1(Forward, void(int distance));<br>  MOCK_METHOD1(Turn, void(int degrees));<br>  MOCK_METHOD2(GoTo, void(int x, int y));<br>  MOCK_CONST_METHOD0(GetX, int());<br>  MOCK_CONST_METHOD0(GetY, int());<br>};<br></code></pre><br><br><p>You don’t need to define these mock methods somewhere else - the <code>MOCK_METHOD<em></em></code> macros will generate the definitions for you. It’s that simple! Once you get the hang of it, you can pump out mock classes faster than your source-control system can handle your check-ins.</p><br><br><p><strong>Tip:</strong> If even this is too much work for you, you’ll find the<br><code>gmock_gen.py</code> tool in Google Mock’s <code>scripts/generator/</code> directory (courtesy of the <a href="http://code.google.com/p/cppclean/" target="_blank" rel="external">cppclean</a> project) useful.  This command-line<br>tool requires that you have Python 2.4 installed.  You give it a C++ file and the name of an abstract class defined in it,<br>and it will print the definition of the mock class for you.  Due to the<br>complexity of the C++ language, this script may not always work, but<br>it can be quite handy when it does.  For more details, read the <a href="/google/googletest/blob/master/googlemock/scripts/generator/README">user documentation</a>.</p><br><br><h2><a id="user-content-where-to-put-it" class="anchor" href="#where-to-put-it" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"/></svg></a>Where to Put It</h2><br><br><p>When you define a mock class, you need to decide where to put its definition. Some people put it in a <code>_test.cc</code>. This is fine when the interface being mocked (say, <code>Foo</code>) is owned by the same person or team. Otherwise, when the owner of <code>Foo</code> changes it, your test could break. (You can’t really expect <code>Foo</code>‘s maintainer to fix every test that uses <code>Foo</code>, can you?)</p><br><br><p>So, the rule of thumb is: if you need to mock <code>Foo</code> and it’s owned by others, define the mock class in <code>Foo</code>‘s package (better, in a <code>testing</code> sub-package such that you can clearly separate production code and testing utilities), and put it in a <code>mock_foo.h</code>. Then everyone can reference <code>mock_foo.h</code> from their tests. If <code>Foo</code> ever changes, there is only one copy of <code>MockFoo</code> to change, and only tests that depend on the changed methods need to be fixed.</p><br><br><p>Another way to do it: you can introduce a thin layer <code>FooAdaptor</code> on top of <code>Foo</code> and code to this new interface. Since you own <code>FooAdaptor</code>, you can absorb changes in <code>Foo</code> much more easily. While this is more work initially, carefully choosing the adaptor interface can make your code easier to write and more readable (a net win in the long run), as you can choose <code>FooAdaptor</code> to fit your specific domain much better than <code>Foo</code> does.</p><br><br><h1><a id="user-content-using-mocks-in-tests" class="anchor" href="#using-mocks-in-tests" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"/></svg></a>Using Mocks in Tests</h1><br><br><p>Once you have a mock class, using it is easy. The typical work flow is:</p><br><br><ol><br><li>Import the Google Mock names from the <code>testing</code> namespace such that you can use them unqualified (You only have to do it once per file. Remember that namespaces are a good idea and good for your health.).</li><br><li>Create some mock objects.</li><br><li>Specify your expectations on them (How many times will a method be called? With what arguments? What should it do? etc.).</li><br><li>Exercise some code that uses the mocks; optionally, check the result using Google Test assertions. If a mock method is called more than expected or with wrong arguments, you’ll get an error immediately.</li><br><li>When a mock is destructed, Google Mock will automatically check whether all expectations on it have been satisfied.</li><br></ol><br><br><p>Here’s an example:</p><br><br><pre><code>#include “path/to/mock-turtle.h”<br>#include “gmock/gmock.h”<br>#include “gtest/gtest.h”<br>using ::testing::AtLeast;                     // #1<br><br>TEST(PainterTest, CanDrawSomething) {<br>  MockTurtle turtle;                          // #2<br>  EXPECT_CALL(turtle, PenDown())              // #3<br>      .Times(AtLeast(1));<br><br>  Painter painter(&amp;turtle);                   // #4<br><br>  EXPECT_TRUE(painter.DrawCircle(0, 0, 10));<br>}                                             // #5<br><br>int main(int argc, char<strong> argv) {<br>  // The following line must be executed to initialize Google Mock<br>  // (and Google Test) before running the tests.<br>  ::testing::InitGoogleMock(&amp;argc, argv);<br>  return RUN_ALL_TESTS();<br>}<br></strong></code></pre><br><br><p>As you might have guessed, this test checks that <code>PenDown()</code> is called at least once. If the <code>painter</code> object didn’t call this method, your test will fail with a message like this:</p><br><br><pre><code>path/to/my_test.cc:119: Failure<br>Actual function call count doesn’t match this expectation:<br>Actually: never called;<br>Expected: called at least once.<br></code></pre><br><br><p><strong>Tip 1:</strong> If you run the test from an Emacs buffer, you can hit <code>&lt;Enter&gt;</code> on the line number displayed in the error message to jump right to the failed expectation.</p><br><br><p><strong>Tip 2:</strong> If your mock objects are never deleted, the final verification won’t happen. Therefore it’s a good idea to use a heap leak checker in your tests when you allocate mocks on the heap.</p><br><br><p><strong>Important note:</strong> Google Mock requires expectations to be set <strong>before</strong> the mock functions are called, otherwise the behavior is <strong>undefined</strong>. In particular, you mustn’t interleave <code>EXPECT_CALL()</code>s and calls to the mock functions.</p><br><br><p>This means <code>EXPECT_CALL()</code> should be read as expecting that a call will occur <em>in the future</em>, not that a call has occurred. Why does Google Mock work like that? Well, specifying the expectation beforehand allows Google Mock to report a violation as soon as it arises, when the context (stack trace, etc) is still available. This makes debugging much easier.</p><br><br><p>Admittedly, this test is contrived and doesn’t do much. You can easily achieve the same effect without using Google Mock. However, as we shall reveal soon, Google Mock allows you to do <em>much more</em> with the mocks.</p><br><br><h2><a id="user-content-using-google-mock-with-any-testing-framework" class="anchor" href="#using-google-mock-with-any-testing-framework" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"/></svg></a>Using Google Mock with Any Testing Framework</h2><br><br><p>If you want to use something other than Google Test (e.g. <a href="http://sourceforge.net/projects/cppunit/" target="_blank" rel="external">CppUnit</a> or<br><a href="http://cxxtest.tigris.org/" target="_blank" rel="external">CxxTest</a>) as your testing framework, just change the <code>main()</code> function in the previous section to:</p><br><br><pre><code>int main(int argc, char argv) {<br>  // The following line causes Google Mock to throw an exception on failure,<br>  // which will be interpreted by your testing framework as a test failure.<br>  ::testing::GTEST_FLAG(throw_on_failure) = true;<br>  ::testing::InitGoogleMock(&amp;argc, argv);<br>  … whatever your testing framework requires …<br>}<br></code></pre><br><br><p>This approach has a catch: it makes Google Mock throw an exception<br>from a mock object’s destructor sometimes.  With some compilers, this<br>sometimes causes the test program to crash.  You’ll still be able to<br>notice that the test has failed, but it’s not a graceful failure.</p><br><br><p>A better solution is to use Google Test’s<br><a href="/google/googletest/blob/master/googletest/docs/AdvancedGuide.md#extending-google-test-by-handling-test-events">event listener API</a><br>to report a test failure to your testing framework properly.  You’ll need to<br>implement the <code>OnTestPartResult()</code> method of the event listener interface, but it<br>should be straightforward.</p><br><br><p>If this turns out to be too much work, we suggest that you stick with<br>Google Test, which works with Google Mock seamlessly (in fact, it is<br>technically part of Google Mock.).  If there is a reason that you<br>cannot use Google Test, please let us know.</p><br><br><h1><a id="user-content-setting-expectations" class="anchor" href="#setting-expectations" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"/></svg></a>Setting Expectations</h1><br><br><p>The key to using a mock object successfully is to set the <em>right expectations</em> on it. If you set the expectations too strict, your test will fail as the result of unrelated changes. If you set them too loose, bugs can slip through. You want to do it just right such that your test can catch exactly the kind of bugs you intend it to catch. Google Mock provides the necessary means for you to do it “just right.”</p><br><br><h2><a id="user-content-general-syntax" class="anchor" href="#general-syntax" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"/></svg></a>General Syntax</h2><br><br><p>In Google Mock we use the <code>EXPECT_CALL()</code> macro to set an expectation on a mock method. The general syntax is:</p><br><br><pre><code>EXPECT_CALL(mock_object, method(matchers))<br>    .Times(cardinality)<br>    .WillOnce(action)<br>    .WillRepeatedly(action);<br></code></pre><br><br><p>The macro has two arguments: first the mock object, and then the method and its arguments. Note that the two are separated by a comma (<code>,</code>), not a period (<code>.</code>). (Why using a comma? The answer is that it was necessary for technical reasons.)</p><br><br><p>The macro can be followed by some optional <em>clauses</em> that provide more information about the expectation. We’ll discuss how each clause works in the coming sections.</p><br><br><p>This syntax is designed to make an expectation read like English. For example, you can probably guess that</p><br><br><pre><code>using ::testing::Return;…<br>EXPECT_CALL(turtle, GetX())<br>    .Times(5)<br>    .WillOnce(Return(100))<br>    .WillOnce(Return(150))<br>    .WillRepeatedly(Return(200));<br></code></pre><br><br><p>says that the <code>turtle</code> object’s <code>GetX()</code> method will be called five times, it will return 100 the first time, 150 the second time, and then 200 every time. Some people like to call this style of syntax a Domain-Specific Language (DSL).</p><br><br><p><strong>Note:</strong> Why do we use a macro to do this? It serves two purposes: first it makes expectations easily identifiable (either by <code>grep</code> or by a human reader), and second it allows Google Mock to include the source file location of a failed expectation in messages, making debugging easier.</p><br><br><h2><a id="user-content-matchers-what-arguments-do-we-expect" class="anchor" href="#matchers-what-arguments-do-we-expect" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"/></svg></a>Matchers: What Arguments Do We Expect?</h2><br><br><p>When a mock function takes arguments, we must specify what arguments we are expecting; for example:</p><br><br><pre><code>// Expects the turtle to move forward by 100 units.<br>EXPECT<em>CALL(turtle, Forward(100));<br></em></code></pre><br><br><p>Sometimes you may not want to be too specific (Remember that talk about tests being too rigid? Over specification leads to brittle tests and obscures the intent of tests. Therefore we encourage you to specify only what’s necessary - no more, no less.). If you care to check that <code>Forward()</code> will be called but aren’t interested in its actual argument, write <code></code> as the argument, which means “anything goes”:</p><br><br><pre><code>using ::testing::_;<br>…<br>// Expects the turtle to move forward.<br>EXPECT<em>CALL(turtle, Forward(</em>));<br></code></pre><br><br><p><code>_</code> is an instance of what we call <strong>matchers</strong>. A matcher is like a predicate and can test whether an argument is what we’d expect. You can use a matcher inside <code>EXPECT_CALL()</code> wherever a function argument is expected.</p><br><br><p>A list of built-in matchers can be found in the <a href="/google/googletest/blob/master/googlemock/docs/CheatSheet.md">CheatSheet</a>. For example, here’s the <code>Ge</code> (greater than or equal) matcher:</p><br><br><pre><code>using ::testing::Ge;…<br>EXPECT_CALL(turtle, Forward(Ge(100)));<br></code></pre><br><br><p>This checks that the turtle will be told to go forward by at least 100 units.</p><br><br><h2><a id="user-content-cardinalities-how-many-times-will-it-be-called" class="anchor" href="#cardinalities-how-many-times-will-it-be-called" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"/></svg></a>Cardinalities: How Many Times Will It Be Called?</h2><br><br><p>The first clause we can specify following an <code>EXPECT_CALL()</code> is <code>Times()</code>. We call its argument a <strong>cardinality</strong> as it tells <em>how many times</em> the call should occur. It allows us to repeat an expectation many times without actually writing it as many times. More importantly, a cardinality can be “fuzzy”, just like a matcher can be. This allows a user to express the intent of a test exactly.</p><br><br><p>An interesting special case is when we say <code>Times(0)</code>. You may have guessed - it means that the function shouldn’t be called with the given arguments at all, and Google Mock will report a Google Test failure whenever the function is (wrongfully) called.</p><br><br><p>We’ve seen <code>AtLeast(n)</code> as an example of fuzzy cardinalities earlier. For the list of built-in cardinalities you can use, see the <a href="/google/googletest/blob/master/googlemock/docs/CheatSheet.md">CheatSheet</a>.</p><br><br><p>The <code>Times()</code> clause can be omitted. <strong>If you omit <code>Times()</code>, Google Mock will infer the cardinality for you.</strong> The rules are easy to remember:</p><br><br><ul><br><li>If <strong>neither</strong> <code>WillOnce()</code> <strong>nor</strong> <code>WillRepeatedly()</code> is in the <code>EXPECT_CALL()</code>, the inferred cardinality is <code>Times(1)</code>.</li><br><li>If there are <code>n WillOnce()</code>‘s but <strong>no</strong> <code>WillRepeatedly()</code>, where <code>n</code> &gt;= 1, the cardinality is <code>Times(n)</code>.</li><br><li>If there are <code>n WillOnce()</code>‘s and <strong>one</strong> <code>WillRepeatedly()</code>, where <code>n</code> &gt;= 0, the cardinality is <code>Times(AtLeast(n))</code>.</li><br></ul><br><br><p><strong>Quick quiz:</strong> what do you think will happen if a function is expected to be called twice but actually called four times?</p><br><br><h2><a id="user-content-actions-what-should-it-do" class="anchor" href="#actions-what-should-it-do" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"/></svg></a>Actions: What Should It Do?</h2><br><br><p>Remember that a mock object doesn’t really have a working implementation? We as users have to tell it what to do when a method is invoked. This is easy in Google Mock.</p><br><br><p>First, if the return type of a mock function is a built-in type or a pointer, the function has a <strong>default action</strong> (a <code>void</code> function will just return, a <code>bool</code> function will return <code>false</code>, and other functions will return 0). In addition, in C++ 11 and above, a mock function whose return type is default-constructible (i.e. has a default constructor) has a default action of returning a default-constructed value.  If you don’t say anything, this behavior will be used.</p><br><br><p>Second, if a mock function doesn’t have a default action, or the default action doesn’t suit you, you can specify the action to be taken each time the expectation matches using a series of <code>WillOnce()</code> clauses followed by an optional <code>WillRepeatedly()</code>. For example,</p><br><br><pre><code>using ::testing::Return;…<br>EXPECT_CALL(turtle, GetX())<br>    .WillOnce(Return(100))<br>    .WillOnce(Return(200))<br>    .WillOnce(Return(300));<br></code></pre><br><br><p>This says that <code>turtle.GetX()</code> will be called <em>exactly three times</em> (Google Mock inferred this from how many <code>WillOnce()</code> clauses we’ve written, since we didn’t explicitly write <code>Times()</code>), and will return 100, 200, and 300 respectively.</p><br><br><pre><code>using ::testing::Return;…<br>EXPECT_CALL(turtle, GetY())<br>    .WillOnce(Return(100))<br>    .WillOnce(Return(200))<br>    .WillRepeatedly(Return(300));<br></code></pre><br><br><p>says that <code>turtle.GetY()</code> will be called <em>at least twice</em> (Google Mock knows this as we’ve written two <code>WillOnce()</code> clauses and a <code>WillRepeatedly()</code> while having no explicit <code>Times()</code>), will return 100 the first time, 200 the second time, and 300 from the third time on.</p><br><br><p>Of course, if you explicitly write a <code>Times()</code>, Google Mock will not try to infer the cardinality itself. What if the number you specified is larger than there are <code>WillOnce()</code> clauses? Well, after all <code>WillOnce()</code>s are used up, Google Mock will do the <em>default</em> action for the function every time (unless, of course, you have a <code>WillRepeatedly()</code>.).</p><br><br><p>What can we do inside <code>WillOnce()</code> besides <code>Return()</code>? You can return a reference using <code>ReturnRef(variable)</code>, or invoke a pre-defined function, among <a href="/google/googletest/blob/master/googlemock/docs/CheatSheet.md#actions">others</a>.</p><br><br><p><strong>Important note:</strong> The <code>EXPECT_CALL()</code> statement evaluates the action clause only once, even though the action may be performed many times. Therefore you must be careful about side effects. The following may not do what you want:</p><br><br><pre><code>int n = 100;<br>EXPECT_CALL(turtle, GetX())<br>.Times(4)<br>.WillRepeatedly(Return(n++));<br></code></pre><br><br><p>Instead of returning 100, 101, 102, …, consecutively, this mock function will always return 100 as <code>n++</code> is only evaluated once. Similarly, <code>Return(new Foo)</code> will create a new <code>Foo</code> object when the <code>EXPECT_CALL()</code> is executed, and will return the same pointer every time. If you want the side effect to happen every time, you need to define a custom action, which we’ll teach in the <a href="/google/googletest/blob/master/googlemock/docs/CookBook.md">CookBook</a>.</p><br><br><p>Time for another quiz! What do you think the following means?</p><br><br><pre><code>using ::testing::Return;…<br>EXPECT<em>CALL(turtle, GetY())<br>.Times(4)<br>.WillOnce(Return(100));<br></em></code></pre><br><br><p>Obviously <code>turtle.GetY()</code> is expected to be called four times. But if you think it will return 100 every time, think twice! Remember that one <code>WillOnce()</code> clause will be consumed each time the function is invoked and the default action will be taken afterwards. So the right answer is that <code>turtle.GetY()</code> will return 100 the first time, but <strong>return 0 from the second time on</strong>, as returning 0 is the default action for <code>int</code> functions.</p><br><br><h2><a id="user-content-using-multiple-expectations" class="anchor" href="#using-multiple-expectations" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"/></svg></a>Using Multiple Expectations</h2><br><br><p>So far we’ve only shown examples where you have a single expectation. More realistically, you’re going to specify expectations on multiple mock methods, which may be from multiple mock objects.</p><br><br><p>By default, when a mock method is invoked, Google Mock will search the expectations in the <strong>reverse order</strong> they are defined, and stop when an active expectation that matches the arguments is found (you can think of it as “newer rules override older ones.”). If the matching expectation cannot take any more calls, you will get an upper-bound-violated failure. Here’s an example:</p><br><br><pre><code>using ::testing::;…<br>EXPECT<em>CALL(turtle, Forward(</em>));  // #1<br>EXPECT_CALL(turtle, Forward(10))  // #2<br>    .Times(2);<br></code></pre><br><br><p>If <code>Forward(10)</code> is called three times in a row, the third time it will be an error, as the last matching expectation (#2) has been saturated. If, however, the third <code>Forward(10)</code> call is replaced by <code>Forward(20)</code>, then it would be OK, as now #1 will be the matching expectation.</p><br><br><p><strong>Side note:</strong> Why does Google Mock search for a match in the <em>reverse</em> order of the expectations? The reason is that this allows a user to set up the default expectations in a mock object’s constructor or the test fixture’s set-up phase and then customize the mock by writing more specific expectations in the test body. So, if you have two expectations on the same method, you want to put the one with more specific matchers <strong>after</strong> the other, or the more specific rule would be shadowed by the more general one that comes after it.</p><br><br><h2><a id="user-content-ordered-vs-unordered-calls" class="anchor" href="#ordered-vs-unordered-calls" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"/></svg></a>Ordered vs Unordered Calls</h2><br><br><p>By default, an expectation can match a call even though an earlier expectation hasn’t been satisfied. In other words, the calls don’t have to occur in the order the expectations are specified.</p><br><br><p>Sometimes, you may want all the expected calls to occur in a strict order. To say this in Google Mock is easy:</p><br><br><pre><code>using ::testing::InSequence;…<br>TEST(FooTest, DrawsLineSegment) {<br>  …<br>  {<br>    InSequence dummy;<br><br>    EXPECT_CALL(turtle, PenDown());<br>    EXPECT_CALL(turtle, Forward(100));<br>    EXPECT_CALL(turtle, PenUp());<br>  }<br>  Foo();<br>}<br></code></pre><br><br><p>By creating an object of type <code>InSequence</code>, all expectations in its scope are put into a <em>sequence</em> and have to occur <em>sequentially</em>. Since we are just relying on the constructor and destructor of this object to do the actual work, its name is really irrelevant.</p><br><br><p>In this example, we test that <code>Foo()</code> calls the three expected functions in the order as written. If a call is made out-of-order, it will be an error.</p><br><br><p>(What if you care about the relative order of some of the calls, but not all of them? Can you specify an arbitrary partial order? The answer is … yes! If you are impatient, the details can be found in the <a href="/google/googletest/blob/master/googlemock/docs/CookBook#Expecting_Partially_Ordered_Calls.md">CookBook</a>.)</p><br><br><h2><a id="user-content-all-expectations-are-sticky-unless-said-otherwise" class="anchor" href="#all-expectations-are-sticky-unless-said-otherwise" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"/></svg></a>All Expectations Are Sticky (Unless Said Otherwise)</h2><br><br><p>Now let’s do a quick quiz to see how well you can use this mock stuff already. How would you test that the turtle is asked to go to the origin <em>exactly twice</em> (you want to ignore any other instructions it receives)?</p><br><br><p>After you’ve come up with your answer, take a look at ours and compare notes (solve it yourself first - don’t cheat!):</p><br><br><pre><code>using ::testing::_;…<br>EXPECT<em>CALL(turtle, GoTo(</em>, _))  // #1<br>    .Times(AnyNumber());<br>EXPECT_CALL(turtle, GoTo(0, 0))  // #2<br>    .Times(2);<br></code></pre><br><br><p>Suppose <code>turtle.GoTo(0, 0)</code> is called three times. In the third time, Google Mock will see that the arguments match expectation #2 (remember that we always pick the last matching expectation). Now, since we said that there should be only two such calls, Google Mock will report an error immediately. This is basically what we’ve told you in the “Using Multiple Expectations” section above.</p><br><br><p>This example shows that <strong>expectations in Google Mock are “sticky” by default</strong>, in the sense that they remain active even after we have reached their invocation upper bounds. This is an important rule to remember, as it affects the meaning of the spec, and is <strong>different</strong> to how it’s done in many other mocking frameworks (Why’d we do that? Because we think our rule makes the common cases easier to express and understand.).</p><br><br><p>Simple? Let’s see if you’ve really understood it: what does the following code say?</p><br><br><pre><code>using ::testing::Return;<br>…<br>for (int i = n; i &gt; 0; i–) {<br>  EXPECT_CALL(turtle, GetX())<br>      .WillOnce(Return(10<em>i));<br>}<br></em></code></pre><br><br><p>If you think it says that <code>turtle.GetX()</code> will be called <code>n</code> times and will return 10, 20, 30, …, consecutively, think twice! The problem is that, as we said, expectations are sticky. So, the second time <code>turtle.GetX()</code> is called, the last (latest) <code>EXPECT_CALL()</code> statement will match, and will immediately lead to an “upper bound exceeded” error - this piece of code is not very useful!</p><br><br><p>One correct way of saying that <code>turtle.GetX()</code> will return 10, 20, 30, …, is to explicitly say that the expectations are <em>not</em> sticky. In other words, they should <em>retire</em> as soon as they are saturated:</p><br><br><pre><code>using ::testing::Return;<br>…<br>for (int i = n; i &gt; 0; i–) {<br>  EXPECT_CALL(turtle, GetX())<br>    .WillOnce(Return(10i))<br>    .RetiresOnSaturation();<br>}<br></code></pre><br><br><p>And, there’s a better way to do it: in this case, we expect the calls to occur in a specific order, and we line up the actions to match the order. Since the order is important here, we should make it explicit using a sequence:</p><br><br><pre><code>using ::testing::InSequence;<br>using ::testing::Return;<br>…<br>{<br>  InSequence s;<br><br>  for (int i = 1; i &lt;= n; i++) {<br>    EXPECT_CALL(turtle, GetX())<br>        .WillOnce(Return(10*i))<br>        .RetiresOnSaturation();<br>  }<br>}<br></code></pre><br><br><p>By the way, the other situation where an expectation may <em>not</em> be sticky is when it’s in a sequence - as soon as another expectation that comes after it in the sequence has been used, it automatically retires (and will never be used to match any call).</p><br><br><h2><a id="user-content-uninteresting-calls" class="anchor" href="#uninteresting-calls" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"/></svg></a>Uninteresting Calls</h2><br><br><p>A mock object may have many methods, and not all of them are that interesting. For example, in some tests we may not care about how many times <code>GetX()</code> and <code>GetY()</code> get called.</p><br><br><p>In Google Mock, if you are not interested in a method, just don’t say anything about it. If a call to this method occurs, you’ll see a warning in the test output, but it won’t be a failure.</p><br><br><h1><a id="user-content-what-now" class="anchor" href="#what-now" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"/></svg></a>What Now?</h1><br><br><p>Congratulations! You’ve learned enough about Google Mock to start using it. Now, you might want to join the <a href="http://groups.google.com/group/googlemock" target="_blank" rel="external">googlemock</a> discussion group and actually write some tests using Google Mock - it will be fun. Hey, it may even be addictive - you’ve been warned.</p><br><br><p>Then, if you feel like increasing your mock quotient, you should move on to the <a href="/google/googletest/blob/master/googlemock/docs/CookBook.md">CookBook</a>. You can learn many advanced features of Google Mock there – and advance your level of enjoyment and testing bliss.</p><br></article><br>  </div><br><br></div><br><br><button type="button" data-facebox="#jump-to-line" data-facebox-class="linejump" data-hotkey="l" class="hidden">Jump to Line</button><br><div id="jump-to-line" style="display:none"><br>  <!-- </textarea> --><!-- '"` --><form accept-charset="UTF-8" action="" class="js-jump-to-line-form" method="get"><div style="margin:0;padding:0;display:inline"><input name="utf8" type="hidden" value="&#x2713;"></div><br>    <input class="form-control linejump-input js-jump-to-line-field" type="text" placeholder="Jump to line&hellip;" aria-label="Jump to line" autofocus><br>    <button type="submit" class="btn">Go</button><br></form></div><br><br>  </div><br>  <div class="modal-backdrop"></div><br></div><br><br><br>    </div><br>  </div><br><br>    </div><br><br>        <div class="container site-footer-container"><br>  <div class="site-footer" role="contentinfo"><br>    <ul class="site-footer-links right"><br>        <li><a href="https://status.github.com/" data-ga-click="Footer, go to status, text:status" target="_blank" rel="external">Status</a></li><br>      <li><a href="https://developer.github.com" data-ga-click="Footer, go to api, text:api" target="_blank" rel="external">API</a></li><br>      <li><a href="https://training.github.com" data-ga-click="Footer, go to training, text:training" target="_blank" rel="external">Training</a></li><br>      <li><a href="https://shop.github.com" data-ga-click="Footer, go to shop, text:shop" target="_blank" rel="external">Shop</a></li><br>        <li><a href="https://github.com/blog" data-ga-click="Footer, go to blog, text:blog" target="_blank" rel="external">Blog</a></li><br>        <li><a href="https://github.com/about" data-ga-click="Footer, go to about, text:about" target="_blank" rel="external">About</a></li><br><br>    </ul><br><br>    <a href="https://github.com" aria-label="Homepage" class="site-footer-mark" target="_blank" rel="external"><br>      <svg aria-hidden="true" class="octicon octicon-mark-github" height="24" title="GitHub " version="1.1" viewbox="0 0 16 16" width="24"><path d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59 0.4 0.07 0.55-0.17 0.55-0.38 0-0.19-0.01-0.82-0.01-1.49-2.01 0.37-2.53-0.49-2.69-0.94-0.09-0.23-0.48-0.94-0.82-1.13-0.28-0.15-0.68-0.52-0.01-0.53 0.63-0.01 1.08 0.58 1.23 0.82 0.72 1.21 1.87 0.87 2.33 0.66 0.07-0.52 0.28-0.87 0.51-1.07-1.78-0.2-3.64-0.89-3.64-3.95 0-0.87 0.31-1.59 0.82-2.15-0.08-0.2-0.36-1.02 0.08-2.12 0 0 0.67-0.21 2.2 0.82 0.64-0.18 1.32-0.27 2-0.27 0.68 0 1.36 0.09 2 0.27 1.53-1.04 2.2-0.82 2.2-0.82 0.44 1.1 0.16 1.92 0.08 2.12 0.51 0.56 0.82 1.27 0.82 2.15 0 3.07-1.87 3.75-3.65 3.95 0.29 0.25 0.54 0.73 0.54 1.48 0 1.07-0.01 1.93-0.01 2.2 0 0.21 0.15 0.46 0.55 0.38C13.71 14.53 16 11.53 16 8 16 3.58 12.42 0 8 0z"/></svg><br></a><br>    <ul class="site-footer-links"><br>      <li>&copy; 2016 <span title="0.04298s from github-fe124-cp1-prd.iad.github.net">GitHub</span>, Inc.</li><br>        <li><a href="https://github.com/site/terms" data-ga-click="Footer, go to terms, text:terms" target="_blank" rel="external">Terms</a></li><br>        <li><a href="https://github.com/site/privacy" data-ga-click="Footer, go to privacy, text:privacy" target="_blank" rel="external">Privacy</a></li><br>        <li><a href="https://github.com/security" data-ga-click="Footer, go to security, text:security" target="_blank" rel="external">Security</a></li><br>        <li><a href="https://github.com/contact" data-ga-click="Footer, go to contact, text:contact" target="_blank" rel="external">Contact</a></li><br>        <li><a href="https://help.github.com" data-ga-click="Footer, go to help, text:help" target="_blank" rel="external">Help</a></li><br>    </ul><br>  </div><br></div><br><br><br><br><br><br><br>    <div id="ajax-error-message" class="ajax-error-message flash flash-error"><br>      <svg aria-hidden="true" class="octicon octicon-alert" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M15.72 12.5l-6.85-11.98C8.69 0.21 8.36 0.02 8 0.02s-0.69 0.19-0.87 0.5l-6.85 11.98c-0.18 0.31-0.18 0.69 0 1C0.47 13.81 0.8 14 1.15 14h13.7c0.36 0 0.69-0.19 0.86-0.5S15.89 12.81 15.72 12.5zM9 12H7V10h2V12zM9 9H7V5h2V9z"/></svg><br>      <button type="button" class="flash-close js-flash-close js-ajax-error-dismiss" aria-label="Dismiss error"><br>        <svg aria-hidden="true" class="octicon octicon-x" height="16" version="1.1" viewbox="0 0 12 16" width="12"><path d="M7.48 8l3.75 3.75-1.48 1.48-3.75-3.75-3.75 3.75-1.48-1.48 3.75-3.75L0.77 4.25l1.48-1.48 3.75 3.75 3.75-3.75 1.48 1.48-3.75 3.75z"/></svg><br>      </button><br>      Something went wrong with that request. Please try again.<br>    </div><br><br><br><br>      <script crossorigin="anonymous" integrity="sha256-sMhbbqxUJs0WUt7KGbxYXmiKrOw3DEVBq38Ty1r03AA=" src="https://assets-cdn.github.com/assets/frameworks-b0c85b6eac5426cd1652deca19bc585e688aacec370c4541ab7f13cb5af4dc00.js"></script><br>      <script async="async" crossorigin="anonymous" integrity="sha256-Eks4R6YE/A4V1V6CIyGzz1JsmTva1rGR/s3gZQV1EGQ=" src="https://assets-cdn.github.com/assets/github-124b3847a604fc0e15d55e822321b3cf526c993bdad6b191fecde06505751064.js"></script><br><br><br><br><br><br>    <div class="js-stale-session-flash stale-session-flash flash flash-warn flash-banner hidden"><br>      <svg aria-hidden="true" class="octicon octicon-alert" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M15.72 12.5l-6.85-11.98C8.69 0.21 8.36 0.02 8 0.02s-0.69 0.19-0.87 0.5l-6.85 11.98c-0.18 0.31-0.18 0.69 0 1C0.47 13.81 0.8 14 1.15 14h13.7c0.36 0 0.69-0.19 0.86-0.5S15.89 12.81 15.72 12.5zM9 12H7V10h2V12zM9 9H7V5h2V9z"/></svg><br>      <span class="signed-in-tab-flash">You signed in with another tab or window. <a href="">Reload</a> to refresh your session.</span><br>      <span class="signed-out-tab-flash">You signed out in another tab or window. <a href="">Reload</a> to refresh your session.</span><br>    </div><br>    <div class="facebox" id="facebox" style="display:none;"><br>  <div class="facebox-popup"><br>    <div class="facebox-content" role="dialog" aria-labelledby="facebox-header" aria-describedby="facebox-description"><br>    </div><br>    <button type="button" class="facebox-close js-facebox-close" aria-label="Close modal"><br>      <svg aria-hidden="true" class="octicon octicon-x" height="16" version="1.1" viewbox="0 0 12 16" width="12"><path d="M7.48 8l3.75 3.75-1.48 1.48-3.75-3.75-3.75 3.75-1.48-1.48 3.75-3.75L0.77 4.25l1.48-1.48 3.75 3.75 3.75-3.75 1.48 1.48-3.75 3.75z"/></svg><br>    </button><br>  </div><br></div><br><br>  </body><br></html>


      
    </div>
    <footer class="article-footer">
      <a data-url="http://klina.github.io/2016/04/20/ForDummies/" data-id="cin89ld650005roigaxb5pxyz" class="article-share-link">Поделиться</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-FrequentlyAskedQuestions" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2016/04/20/FrequentlyAskedQuestions/" class="article-date">
  <time datetime="2016-04-20T02:47:32.134Z" itemprop="datePublished">2016-04-20</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>&lt;!DOCTYPE html&gt;</p>
<html lang="en" class=" is-copy-enabled"><br>  <head prefix="og: http://ogp.me/ns# fb: http://ogp.me/ns/fb# object: http://ogp.me/ns/object# article: http://ogp.me/ns/article# profile: http://ogp.me/ns/profile#"><br>    <meta charset="utf-8"><br><br>    <link crossorigin="anonymous" href="https://assets-cdn.github.com/assets/frameworks-4ca81a569e4b382193f26989979660344b2a86c1039cf44e471d2cdfb70c9ce4.css" integrity="sha256-TKgaVp5LOCGT8mmJl5ZgNEsqhsEDnPRORx0s37cMnOQ=" media="all" rel="stylesheet"><br>    <link crossorigin="anonymous" href="https://assets-cdn.github.com/assets/github-4129627c8cf63edb7480badb70e1a5a8eba9dd069ef776cb5f075a5f2d4047f8.css" integrity="sha256-QSlifIz2Ptt0gLrbcOGlqOup3Qae93bLXwdaXy1AR/g=" media="all" rel="stylesheet"><br><br><br><br>    <link crossorigin="anonymous" href="https://assets-cdn.github.com/assets/site-2d5d1699983d8dd7c384c67dfc183fbace8e3a24866e8822069d599f68e71fb2.css" integrity="sha256-LV0WmZg9jdfDhMZ9/Bg/us6OOiSGbogiBp1Zn2jnH7I=" media="all" rel="stylesheet"><br><br>    <link as="script" href="https://assets-cdn.github.com/assets/frameworks-b0c85b6eac5426cd1652deca19bc585e688aacec370c4541ab7f13cb5af4dc00.js" rel="preload"><br><br>    <link as="script" href="https://assets-cdn.github.com/assets/github-124b3847a604fc0e15d55e822321b3cf526c993bdad6b191fecde06505751064.js" rel="preload"><br><br>    <meta http-equiv="X-UA-Compatible" content="IE=edge"><br>    <meta http-equiv="Content-Language" content="en"><br>    <meta name="viewport" content="width=1020"><br><br><br>    <title>googletest/FrequentlyAskedQuestions.md at master · google/googletest · GitHub</title><br>    <link rel="search" type="application/opensearchdescription+xml" href="/opensearch.xml" title="GitHub"><br>    <link rel="fluid-icon" href="https://github.com/fluidicon.png" title="GitHub"><br>    <link rel="apple-touch-icon" href="/apple-touch-icon.png"><br>    <link rel="apple-touch-icon" sizes="57x57" href="/apple-touch-icon-57x57.png"><br>    <link rel="apple-touch-icon" sizes="60x60" href="/apple-touch-icon-60x60.png"><br>    <link rel="apple-touch-icon" sizes="72x72" href="/apple-touch-icon-72x72.png"><br>    <link rel="apple-touch-icon" sizes="76x76" href="/apple-touch-icon-76x76.png"><br>    <link rel="apple-touch-icon" sizes="114x114" href="/apple-touch-icon-114x114.png"><br>    <link rel="apple-touch-icon" sizes="120x120" href="/apple-touch-icon-120x120.png"><br>    <link rel="apple-touch-icon" sizes="144x144" href="/apple-touch-icon-144x144.png"><br>    <link rel="apple-touch-icon" sizes="152x152" href="/apple-touch-icon-152x152.png"><br>    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon-180x180.png"><br>    <meta property="fb:app_id" content="1401488693436528"><br><br>      <meta content="https://avatars2.githubusercontent.com/u/1342004?v=3&amp;s=400" name="twitter:image:src"><meta content="@github" name="twitter:site"><meta content="summary" name="twitter:card"><meta content="google/googletest" name="twitter:title"><meta content="googletest - Google Test" name="twitter:description"><br>      <meta content="https://avatars2.githubusercontent.com/u/1342004?v=3&amp;s=400" property="og:image"><meta content="GitHub" property="og:site_name"><meta content="object" property="og:type"><meta content="google/googletest" property="og:title"><meta content="https://github.com/google/googletest" property="og:url"><meta content="googletest - Google Test" property="og:description"><br>      <meta name="browser-stats-url" content="https://api.github.com/_private/browser/stats"><br>    <meta name="browser-errors-url" content="https://api.github.com/_private/browser/errors"><br>    <link rel="assets" href="https://assets-cdn.github.com/"><br><br>    <meta name="pjax-timeout" content="1000"><br><br><br>    <meta name="msapplication-TileImage" content="/windows-tile.png"><br>    <meta name="msapplication-TileColor" content="#ffffff"><br>    <meta name="selected-link" value="repo_source" data-pjax-transient=""><br><br>    <meta name="google-site-verification" content="KT5gs8h0wvaagLKAVWq8bbeNwnZZK1r1XQysX3xurLU"><br><meta name="google-site-verification" content="ZzhVyEFwb7w3e0-uOTltm8Jsck2F5StVihD0exw2fsA"><br>    <meta name="google-analytics" content="UA-3769691-2"><br><br><meta content="collector.githubapp.com" name="octolytics-host"><meta content="github" name="octolytics-app-id"><meta content="3E9F4DA5:5EFF:1C6CE9A6:5715E715" name="octolytics-dimension-request_id"><br><meta content="/&lt;user-name&gt;/&lt;repo-name&gt;/blob/show" data-pjax-transient="true" name="analytics-location"><br><br><br><br>  <meta class="js-ga-set" name="dimension1" content="Logged Out"><br><br><br><br>        <meta name="hostname" content="github.com"><br>    <meta name="user-login" content=""><br><br>        <meta name="expected-hostname" content="github.com"><br>      <meta name="js-proxy-site-detection-payload" content="MzE5MjhkMDg3N2UwMWU4NTliOTNjZjg2MzBmOWEzNzdhOWZlMzlhZDBlMzQ5YzRkZDgxYTM1NzJlODZlOTYyZnx7InJlbW90ZV9hZGRyZXNzIjoiNjIuMTU5Ljc3LjE2NSIsInJlcXVlc3RfaWQiOiIzRTlGNERBNTo1RUZGOjFDNkNFOUE2OjU3MTVFNzE1IiwidGltZXN0YW1wIjoxNDYxMDUzMjEyfQ=="><br><br><br>      <link rel="mask-icon" href="https://assets-cdn.github.com/pinned-octocat.svg" color="#4078c0"><br>      <link rel="icon" type="image/x-icon" href="https://assets-cdn.github.com/favicon.ico"><br><br>    <meta content="8cb1221b98aea525b7168ab311b77ee96e0e8987" name="form-nonce"><br><br>    <meta http-equiv="x-pjax-version" content="dc812ac6dabadd5440144e9805d8c8fd"><br><br><br><br>  <meta name="description" content="googletest - Google Test"><br>  <meta name="go-import" content="github.com/google/googletest git https://github.com/google/googletest.git"><br><br>  <meta content="1342004" name="octolytics-dimension-user_id"><meta content="google" name="octolytics-dimension-user_login"><meta content="39840932" name="octolytics-dimension-repository_id"><meta content="google/googletest" name="octolytics-dimension-repository_nwo"><meta content="true" name="octolytics-dimension-repository_public"><meta content="false" name="octolytics-dimension-repository_is_fork"><meta content="39840932" name="octolytics-dimension-repository_network_root_id"><meta content="google/googletest" name="octolytics-dimension-repository_network_root_nwo"><br>  <link href="https://github.com/google/googletest/commits/master.atom" rel="alternate" title="Recent Commits to googletest:master" type="application/atom+xml"><br><br><br>      <link rel="canonical" href="https://github.com/google/googletest/blob/master/googlemock/docs/FrequentlyAskedQuestions.md" data-pjax-transient=""><br>  </head><br><br><br>  <body class="logged-out   env-production windows vis-public page-blob"><br>    <div id="js-pjax-loader-bar" class="pjax-loader-bar"></div><br>    <a href="#start-of-content" tabindex="1" class="accessibility-aid js-skip-to-content">Skip to content</a><br><br><br><br><br><br><br><br>          <header class="site-header js-details-container" role="banner"><br>  <div class="container-responsive"><br>    <a class="header-logo-invertocat" href="https://github.com/" aria-label="Homepage" data-ga-click="(Logged out) Header, go to homepage, icon:logo-wordmark" target="_blank" rel="external"><br>      <svg aria-hidden="true" class="octicon octicon-mark-github" height="32" version="1.1" viewbox="0 0 16 16" width="32"><path d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59 0.4 0.07 0.55-0.17 0.55-0.38 0-0.19-0.01-0.82-0.01-1.49-2.01 0.37-2.53-0.49-2.69-0.94-0.09-0.23-0.48-0.94-0.82-1.13-0.28-0.15-0.68-0.52-0.01-0.53 0.63-0.01 1.08 0.58 1.23 0.82 0.72 1.21 1.87 0.87 2.33 0.66 0.07-0.52 0.28-0.87 0.51-1.07-1.78-0.2-3.64-0.89-3.64-3.95 0-0.87 0.31-1.59 0.82-2.15-0.08-0.2-0.36-1.02 0.08-2.12 0 0 0.67-0.21 2.2 0.82 0.64-0.18 1.32-0.27 2-0.27 0.68 0 1.36 0.09 2 0.27 1.53-1.04 2.2-0.82 2.2-0.82 0.44 1.1 0.16 1.92 0.08 2.12 0.51 0.56 0.82 1.27 0.82 2.15 0 3.07-1.87 3.75-3.65 3.95 0.29 0.25 0.54 0.73 0.54 1.48 0 1.07-0.01 1.93-0.01 2.2 0 0.21 0.15 0.46 0.55 0.38C13.71 14.53 16 11.53 16 8 16 3.58 12.42 0 8 0z"/></svg><br>    </a><br><br>    <button class="btn-link right site-header-toggle js-details-target" type="button" aria-label="Toggle navigation"><br>      <svg aria-hidden="true" class="octicon octicon-three-bars" height="24" version="1.1" viewbox="0 0 12 16" width="18"><path d="M11.41 9H0.59c-0.59 0-0.59-0.41-0.59-1s0-1 0.59-1h10.81c0.59 0 0.59 0.41 0.59 1s0 1-0.59 1z m0-4H0.59c-0.59 0-0.59-0.41-0.59-1s0-1 0.59-1h10.81c0.59 0 0.59 0.41 0.59 1s0 1-0.59 1zM0.59 11h10.81c0.59 0 0.59 0.41 0.59 1s0 1-0.59 1H0.59c-0.59 0-0.59-0.41-0.59-1s0-1 0.59-1z"/></svg><br>    </button><br><br>    <div class="site-header-menu"><br>      <nav class="site-header-nav site-header-nav-main"><br>        <a href="/personal" class="js-selected-navigation-item nav-item nav-item-personal" data-ga-click="Header, click, Nav menu - item:personal" data-selected-links="/personal /personal"><br>          Personal<br></a>        <a href="/open-source" class="js-selected-navigation-item nav-item nav-item-opensource" data-ga-click="Header, click, Nav menu - item:opensource" data-selected-links="/open-source /open-source"><br>          Open source<br></a>        <a href="/business" class="js-selected-navigation-item nav-item nav-item-business" data-ga-click="Header, click, Nav menu - item:business" data-selected-links="/business /business/features /business/customers /business"><br>          Business<br></a>        <a href="/explore" class="js-selected-navigation-item nav-item nav-item-explore" data-ga-click="Header, click, Nav menu - item:explore" data-selected-links="/explore /trending /trending/developers /integrations /integrations/feature/code /integrations/feature/collaborate /integrations/feature/ship /explore"><br>          Explore<br></a>      </nav><br><br>      <div class="site-header-actions"><br>            <a class="btn btn-primary site-header-actions-btn" href="/join?source=header-repo" data-ga-click="(Logged out) Header, clicked Sign up, text:sign-up">Sign up</a><br>          <a class="btn site-header-actions-btn mr-2" href="/login?return_to=%2Fgoogle%2Fgoogletest%2Fblob%2Fmaster%2Fgooglemock%2Fdocs%2FFrequentlyAskedQuestions.md" data-ga-click="(Logged out) Header, clicked Sign in, text:sign-in">Sign in</a><br>      </div><br><br>        <nav class="site-header-nav site-header-nav-secondary"><br>          <a class="nav-item" href="/pricing">Pricing</a><br>          <a class="nav-item" href="/blog">Blog</a><br>          <a class="nav-item" href="https://help.github.com" target="_blank" rel="external">Support</a><br>          <a class="nav-item header-search-link" href="https://github.com/search" target="_blank" rel="external">Search GitHub</a><br>              <div class="header-search scoped-search site-scoped-search js-site-search" role="search"><br>  <!-- </textarea> --><!-- '"` --><form accept-charset="UTF-8" action="/google/googletest/search" class="js-site-search-form" data-scoped-search-url="/google/googletest/search" data-unscoped-search-url="/search" method="get"><div style="margin:0;padding:0;display:inline"><input name="utf8" type="hidden" value="&#x2713;"></div><br>    <label class="form-control header-search-wrapper js-chromeless-input-container"><br>      <div class="header-search-scope">This repository</div><br>      <input type="text" class="form-control header-search-input js-site-search-focus js-site-search-field is-clearable" data-hotkey="s" name="q" placeholder="Search" aria-label="Search this repository" data-unscoped-placeholder="Search GitHub" data-scoped-placeholder="Search" tabindex="1" autocapitalize="off"><br>    </label><br></form></div><br><br>        </nav><br>    </div><br>  </div><br></header><br><br><br><br>    <div id="start-of-content" class="accessibility-aid"></div><br><br>      <div id="js-flash-container"><br></div><br><br><br>    <div role="main" class="main-content"><br>        <div itemscope="" itemtype="http://schema.org/SoftwareSourceCode"><br>    <div id="js-repo-pjax-container" data-pjax-container=""><br><br><div class="pagehead repohead instapaper_ignore readability-menu experiment-repo-nav"><br>  <div class="container repohead-details-container"><br><br><br><br><ul class="pagehead-actions"><br><br>  <li><br>      <a href="/login?return_to=%2Fgoogle%2Fgoogletest" class="btn btn-sm btn-with-count tooltipped tooltipped-n" aria-label="You must be signed in to watch a repository" rel="nofollow"><br>    <svg aria-hidden="true" class="octicon octicon-eye" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M8.06 2C3 2 0 8 0 8s3 6 8.06 6c4.94 0 7.94-6 7.94-6S13 2 8.06 2z m-0.06 10c-2.2 0-4-1.78-4-4 0-2.2 1.8-4 4-4 2.22 0 4 1.8 4 4 0 2.22-1.78 4-4 4z m2-4c0 1.11-0.89 2-2 2s-2-0.89-2-2 0.89-2 2-2 2 0.89 2 2z"/></svg><br>    Watch<br>  </a><br>  <a class="social-count" href="/google/googletest/watchers"><br>    258<br>  </a><br><br>  </li><br><br>  <li><br>      <a href="/login?return_to=%2Fgoogle%2Fgoogletest" class="btn btn-sm btn-with-count tooltipped tooltipped-n" aria-label="You must be signed in to star a repository" rel="nofollow"><br>    <svg aria-hidden="true" class="octicon octicon-star" height="16" version="1.1" viewbox="0 0 14 16" width="14"><path d="M14 6l-4.9-0.64L7 1 4.9 5.36 0 6l3.6 3.26L2.67 14l4.33-2.33 4.33 2.33L10.4 9.26 14 6z"/></svg><br>    Star<br>  </a><br><br>    <a class="social-count js-social-count" href="/google/googletest/stargazers"><br>      1,987<br>    </a><br><br>  </li><br><br>  <li><br>      <a href="/login?return_to=%2Fgoogle%2Fgoogletest" class="btn btn-sm btn-with-count tooltipped tooltipped-n" aria-label="You must be signed in to fork a repository" rel="nofollow"><br>        <svg aria-hidden="true" class="octicon octicon-repo-forked" height="16" version="1.1" viewbox="0 0 10 16" width="10"><path d="M8 1c-1.11 0-2 0.89-2 2 0 0.73 0.41 1.38 1 1.72v1.28L5 8 3 6v-1.28c0.59-0.34 1-0.98 1-1.72 0-1.11-0.89-2-2-2S0 1.89 0 3c0 0.73 0.41 1.38 1 1.72v1.78l3 3v1.78c-0.59 0.34-1 0.98-1 1.72 0 1.11 0.89 2 2 2s2-0.89 2-2c0-0.73-0.41-1.38-1-1.72V9.5l3-3V4.72c0.59-0.34 1-0.98 1-1.72 0-1.11-0.89-2-2-2zM2 4.2c-0.66 0-1.2-0.55-1.2-1.2s0.55-1.2 1.2-1.2 1.2 0.55 1.2 1.2-0.55 1.2-1.2 1.2z m3 10c-0.66 0-1.2-0.55-1.2-1.2s0.55-1.2 1.2-1.2 1.2 0.55 1.2 1.2-0.55 1.2-1.2 1.2z m3-10c-0.66 0-1.2-0.55-1.2-1.2s0.55-1.2 1.2-1.2 1.2 0.55 1.2 1.2-0.55 1.2-1.2 1.2z"/></svg><br>        Fork<br>      </a><br><br>    <a href="/google/googletest/network" class="social-count"><br>      704<br>    </a><br>  </li><br></ul><br><br>    <h1 class="entry-title public "><br>  <svg aria-hidden="true" class="octicon octicon-repo" height="16" version="1.1" viewbox="0 0 12 16" width="12"><path d="M4 9h-1v-1h1v1z m0-3h-1v1h1v-1z m0-2h-1v1h1v-1z m0-2h-1v1h1v-1z m8-1v12c0 0.55-0.45 1-1 1H6v2l-1.5-1.5-1.5 1.5V14H1c-0.55 0-1-0.45-1-1V1C0 0.45 0.45 0 1 0h10c0.55 0 1 0.45 1 1z m-1 10H1v2h2v-1h3v1h5V11z m0-10H2v9h9V1z"/></svg><br>  <span class="author" itemprop="author"><a href="/google" class="url fn" rel="author">google</a></span><!--
--><span class="path-divider">/</span><!--
--><strong itemprop="name"><a href="/google/googletest" data-pjax="#js-repo-pjax-container">googletest</a></strong><br><br></h1><br><br>  </div><br>  <div class="container"><br><br><nav class="reponav js-repo-nav js-sidenav-container-pjax" itemscope="" itemtype="http://schema.org/BreadcrumbList" role="navigation" data-pjax="#js-repo-pjax-container"><br><br>  <span itemscope="" itemtype="http://schema.org/ListItem" itemprop="itemListElement"><br>    <a href="/google/googletest" aria-selected="true" class="js-selected-navigation-item selected reponav-item" data-hotkey="g c" data-selected-links="repo_source repo_downloads repo_commits repo_releases repo_tags repo_branches /google/googletest" itemprop="url"><br>      <svg aria-hidden="true" class="octicon octicon-code" height="16" version="1.1" viewbox="0 0 14 16" width="14"><path d="M9.5 3l-1.5 1.5 3.5 3.5L8 11.5l1.5 1.5 4.5-5L9.5 3zM4.5 3L0 8l4.5 5 1.5-1.5L2.5 8l3.5-3.5L4.5 3z"/></svg><br>      <span itemprop="name">Code</span><br>      <meta itemprop="position" content="1"><br></a>  </span><br><br>    <span itemscope="" itemtype="http://schema.org/ListItem" itemprop="itemListElement"><br>      <a href="/google/googletest/issues" class="js-selected-navigation-item reponav-item" data-hotkey="g i" data-selected-links="repo_issues repo_labels repo_milestones /google/googletest/issues" itemprop="url"><br>        <svg aria-hidden="true" class="octicon octicon-issue-opened" height="16" version="1.1" viewbox="0 0 14 16" width="14"><path d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7S10.14 13.7 7 13.7 1.3 11.14 1.3 8s2.56-5.7 5.7-5.7m0-1.3C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7S10.86 1 7 1z m1 3H6v5h2V4z m0 6H6v2h2V10z"/></svg><br>        <span itemprop="name">Issues</span><br>        <span class="counter">247</span><br>        <meta itemprop="position" content="2"><br></a>    </span><br><br>  <span itemscope="" itemtype="http://schema.org/ListItem" itemprop="itemListElement"><br>    <a href="/google/googletest/pulls" class="js-selected-navigation-item reponav-item" data-hotkey="g p" data-selected-links="repo_pulls /google/googletest/pulls" itemprop="url"><br>      <svg aria-hidden="true" class="octicon octicon-git-pull-request" height="16" version="1.1" viewbox="0 0 12 16" width="12"><path d="M11 11.28c0-1.73 0-6.28 0-6.28-0.03-0.78-0.34-1.47-0.94-2.06s-1.28-0.91-2.06-0.94c0 0-1.02 0-1 0V0L4 3l3 3V4h1c0.27 0.02 0.48 0.11 0.69 0.31s0.3 0.42 0.31 0.69v6.28c-0.59 0.34-1 0.98-1 1.72 0 1.11 0.89 2 2 2s2-0.89 2-2c0-0.73-0.41-1.38-1-1.72z m-1 2.92c-0.66 0-1.2-0.55-1.2-1.2s0.55-1.2 1.2-1.2 1.2 0.55 1.2 1.2-0.55 1.2-1.2 1.2zM4 3c0-1.11-0.89-2-2-2S0 1.89 0 3c0 0.73 0.41 1.38 1 1.72 0 1.55 0 5.56 0 6.56-0.59 0.34-1 0.98-1 1.72 0 1.11 0.89 2 2 2s2-0.89 2-2c0-0.73-0.41-1.38-1-1.72V4.72c0.59-0.34 1-0.98 1-1.72z m-0.8 10c0 0.66-0.55 1.2-1.2 1.2s-1.2-0.55-1.2-1.2 0.55-1.2 1.2-1.2 1.2 0.55 1.2 1.2z m-1.2-8.8c-0.66 0-1.2-0.55-1.2-1.2s0.55-1.2 1.2-1.2 1.2 0.55 1.2 1.2-0.55 1.2-1.2 1.2z"/></svg><br>      <span itemprop="name">Pull requests</span><br>      <span class="counter">42</span><br>      <meta itemprop="position" content="3"><br></a>  </span><br><br><br>  <a href="/google/googletest/pulse" class="js-selected-navigation-item reponav-item" data-selected-links="pulse /google/googletest/pulse"><br>    <svg aria-hidden="true" class="octicon octicon-pulse" height="16" version="1.1" viewbox="0 0 14 16" width="14"><path d="M11.5 8L8.8 5.4 6.6 8.5 5.5 1.6 2.38 8H0V10h3.6L4.5 8.2l0.9 5.4L9 8.5l1.6 1.5H14V8H11.5z"/></svg><br>    Pulse<br></a><br>  <a href="/google/googletest/graphs" class="js-selected-navigation-item reponav-item" data-selected-links="repo_graphs repo_contributors /google/googletest/graphs"><br>    <svg aria-hidden="true" class="octicon octicon-graph" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M16 14v1H0V0h1v14h15z m-11-1H3V8h2v5z m4 0H7V3h2v10z m4 0H11V6h2v7z"/></svg><br>    Graphs<br></a><br><br></nav><br><br>  </div><br></div><br><br><div class="container new-discussion-timeline experiment-repo-nav"><br>  <div class="repository-content"><br><br><br><br><a href="/google/googletest/blob/d225acc90bc3a8c420a9bcd1f033033c1ccd7fe0/googlemock/docs/FrequentlyAskedQuestions.md" class="hidden js-permalink-shortcut" data-hotkey="y">Permalink</a><br><br><!-- blob contrib key: blob_contributors:v21:c388ad1695d3081409ef7a358f6129c5 --><br><br><div class="file-navigation js-zeroclipboard-container"><br><br><div class="select-menu branch-select-menu js-menu-container js-select-menu left"><br>  <button class="btn btn-sm select-menu-button js-menu-target css-truncate" data-hotkey="w" title="master" type="button" aria-label="Switch branches or tags" tabindex="0" aria-haspopup="true"><br>    <i>Branch:</i><br>    <span class="js-select-button css-truncate-target">master</span><br>  </button><br><br>  <div class="select-menu-modal-holder js-menu-content js-navigation-container" data-pjax="" aria-hidden="true"><br><br>    <div class="select-menu-modal"><br>      <div class="select-menu-header"><br>        <svg aria-label="Close" class="octicon octicon-x js-menu-close" height="16" role="img" version="1.1" viewbox="0 0 12 16" width="12"><path d="M7.48 8l3.75 3.75-1.48 1.48-3.75-3.75-3.75 3.75-1.48-1.48 3.75-3.75L0.77 4.25l1.48-1.48 3.75 3.75 3.75-3.75 1.48 1.48-3.75 3.75z"/></svg><br>        <span class="select-menu-title">Switch branches/tags</span><br>      </div><br><br>      <div class="select-menu-filters"><br>        <div class="select-menu-text-filter"><br>          <input type="text" aria-label="Filter branches/tags" id="context-commitish-filter-field" class="form-control js-filterable-field js-navigation-enable" placeholder="Filter branches/tags"><br>        </div><br>        <div class="select-menu-tabs"><br>          <ul><br>            <li class="select-menu-tab"><br>              <a href="#" data-tab-filter="branches" data-filter-placeholder="Filter branches/tags" class="js-select-menu-tab" role="tab">Branches</a><br>            </li><br>            <li class="select-menu-tab"><br>              <a href="#" data-tab-filter="tags" data-filter-placeholder="Find a tag…" class="js-select-menu-tab" role="tab">Tags</a><br>            </li><br>          </ul><br>        </div><br>      </div><br><br>      <div class="select-menu-list select-menu-tab-bucket js-select-menu-tab-bucket" data-tab-filter="branches" role="menu"><br><br>        <div data-filterable-for="context-commitish-filter-field" data-filterable-type="substring"><br><br><br>            <a class="select-menu-item js-navigation-item js-navigation-open " href="/google/googletest/blob/BillyDonahue-patch-1/googlemock/docs/FrequentlyAskedQuestions.md" data-name="BillyDonahue-patch-1" data-skip-pjax="true" rel="nofollow"><br>              <svg aria-hidden="true" class="octicon octicon-check select-menu-item-icon" height="16" version="1.1" viewbox="0 0 12 16" width="12"><path d="M12 5L4 13 0 9l1.5-1.5 2.5 2.5 6.5-6.5 1.5 1.5z"/></svg><br>              <span class="select-menu-item-text css-truncate-target js-select-menu-filter-text" title="BillyDonahue-patch-1"><br>                BillyDonahue-patch-1<br>              </span><br>            </a><br>            <a class="select-menu-item js-navigation-item js-navigation-open selected" href="/google/googletest/blob/master/googlemock/docs/FrequentlyAskedQuestions.md" data-name="master" data-skip-pjax="true" rel="nofollow"><br>              <svg aria-hidden="true" class="octicon octicon-check select-menu-item-icon" height="16" version="1.1" viewbox="0 0 12 16" width="12"><path d="M12 5L4 13 0 9l1.5-1.5 2.5 2.5 6.5-6.5 1.5 1.5z"/></svg><br>              <span class="select-menu-item-text css-truncate-target js-select-menu-filter-text" title="master"><br>                master<br>              </span><br>            </a><br>        </div><br><br>          <div class="select-menu-no-results">Nothing to show</div><br>      </div><br><br>      <div class="select-menu-list select-menu-tab-bucket js-select-menu-tab-bucket" data-tab-filter="tags"><br>        <div data-filterable-for="context-commitish-filter-field" data-filterable-type="substring"><br><br><br>            <a class="select-menu-item js-navigation-item js-navigation-open " href="/google/googletest/tree/release-1.7.0/googlemock/docs/FrequentlyAskedQuestions.md" data-name="release-1.7.0" data-skip-pjax="true" rel="nofollow"><br>              <svg aria-hidden="true" class="octicon octicon-check select-menu-item-icon" height="16" version="1.1" viewbox="0 0 12 16" width="12"><path d="M12 5L4 13 0 9l1.5-1.5 2.5 2.5 6.5-6.5 1.5 1.5z"/></svg><br>              <span class="select-menu-item-text css-truncate-target" title="release-1.7.0"><br>                release-1.7.0<br>              </span><br>            </a><br>            <a class="select-menu-item js-navigation-item js-navigation-open " href="/google/googletest/tree/release-1.6.0/googlemock/docs/FrequentlyAskedQuestions.md" data-name="release-1.6.0" data-skip-pjax="true" rel="nofollow"><br>              <svg aria-hidden="true" class="octicon octicon-check select-menu-item-icon" height="16" version="1.1" viewbox="0 0 12 16" width="12"><path d="M12 5L4 13 0 9l1.5-1.5 2.5 2.5 6.5-6.5 1.5 1.5z"/></svg><br>              <span class="select-menu-item-text css-truncate-target" title="release-1.6.0"><br>                release-1.6.0<br>              </span><br>            </a><br>            <a class="select-menu-item js-navigation-item js-navigation-open " href="/google/googletest/tree/release-1.5.0/googlemock/docs/FrequentlyAskedQuestions.md" data-name="release-1.5.0" data-skip-pjax="true" rel="nofollow"><br>              <svg aria-hidden="true" class="octicon octicon-check select-menu-item-icon" height="16" version="1.1" viewbox="0 0 12 16" width="12"><path d="M12 5L4 13 0 9l1.5-1.5 2.5 2.5 6.5-6.5 1.5 1.5z"/></svg><br>              <span class="select-menu-item-text css-truncate-target" title="release-1.5.0"><br>                release-1.5.0<br>              </span><br>            </a><br>            <a class="select-menu-item js-navigation-item js-navigation-open " href="/google/googletest/tree/release-1.4.0/googlemock/docs/FrequentlyAskedQuestions.md" data-name="release-1.4.0" data-skip-pjax="true" rel="nofollow"><br>              <svg aria-hidden="true" class="octicon octicon-check select-menu-item-icon" height="16" version="1.1" viewbox="0 0 12 16" width="12"><path d="M12 5L4 13 0 9l1.5-1.5 2.5 2.5 6.5-6.5 1.5 1.5z"/></svg><br>              <span class="select-menu-item-text css-truncate-target" title="release-1.4.0"><br>                release-1.4.0<br>              </span><br>            </a><br>            <a class="select-menu-item js-navigation-item js-navigation-open " href="/google/googletest/tree/release-1.3.0/googlemock/docs/FrequentlyAskedQuestions.md" data-name="release-1.3.0" data-skip-pjax="true" rel="nofollow"><br>              <svg aria-hidden="true" class="octicon octicon-check select-menu-item-icon" height="16" version="1.1" viewbox="0 0 12 16" width="12"><path d="M12 5L4 13 0 9l1.5-1.5 2.5 2.5 6.5-6.5 1.5 1.5z"/></svg><br>              <span class="select-menu-item-text css-truncate-target" title="release-1.3.0"><br>                release-1.3.0<br>              </span><br>            </a><br>            <a class="select-menu-item js-navigation-item js-navigation-open " href="/google/googletest/tree/release-1.2.1/googlemock/docs/FrequentlyAskedQuestions.md" data-name="release-1.2.1" data-skip-pjax="true" rel="nofollow"><br>              <svg aria-hidden="true" class="octicon octicon-check select-menu-item-icon" height="16" version="1.1" viewbox="0 0 12 16" width="12"><path d="M12 5L4 13 0 9l1.5-1.5 2.5 2.5 6.5-6.5 1.5 1.5z"/></svg><br>              <span class="select-menu-item-text css-truncate-target" title="release-1.2.1"><br>                release-1.2.1<br>              </span><br>            </a><br>            <a class="select-menu-item js-navigation-item js-navigation-open " href="/google/googletest/tree/release-1.2.0/googlemock/docs/FrequentlyAskedQuestions.md" data-name="release-1.2.0" data-skip-pjax="true" rel="nofollow"><br>              <svg aria-hidden="true" class="octicon octicon-check select-menu-item-icon" height="16" version="1.1" viewbox="0 0 12 16" width="12"><path d="M12 5L4 13 0 9l1.5-1.5 2.5 2.5 6.5-6.5 1.5 1.5z"/></svg><br>              <span class="select-menu-item-text css-truncate-target" title="release-1.2.0"><br>                release-1.2.0<br>              </span><br>            </a><br>            <a class="select-menu-item js-navigation-item js-navigation-open " href="/google/googletest/tree/release-1.1.0/googlemock/docs/FrequentlyAskedQuestions.md" data-name="release-1.1.0" data-skip-pjax="true" rel="nofollow"><br>              <svg aria-hidden="true" class="octicon octicon-check select-menu-item-icon" height="16" version="1.1" viewbox="0 0 12 16" width="12"><path d="M12 5L4 13 0 9l1.5-1.5 2.5 2.5 6.5-6.5 1.5 1.5z"/></svg><br>              <span class="select-menu-item-text css-truncate-target" title="release-1.1.0"><br>                release-1.1.0<br>              </span><br>            </a><br>            <a class="select-menu-item js-navigation-item js-navigation-open " href="/google/googletest/tree/release-1.0.1/googlemock/docs/FrequentlyAskedQuestions.md" data-name="release-1.0.1" data-skip-pjax="true" rel="nofollow"><br>              <svg aria-hidden="true" class="octicon octicon-check select-menu-item-icon" height="16" version="1.1" viewbox="0 0 12 16" width="12"><path d="M12 5L4 13 0 9l1.5-1.5 2.5 2.5 6.5-6.5 1.5 1.5z"/></svg><br>              <span class="select-menu-item-text css-truncate-target" title="release-1.0.1"><br>                release-1.0.1<br>              </span><br>            </a><br>            <a class="select-menu-item js-navigation-item js-navigation-open " href="/google/googletest/tree/release-1.0.0/googlemock/docs/FrequentlyAskedQuestions.md" data-name="release-1.0.0" data-skip-pjax="true" rel="nofollow"><br>              <svg aria-hidden="true" class="octicon octicon-check select-menu-item-icon" height="16" version="1.1" viewbox="0 0 12 16" width="12"><path d="M12 5L4 13 0 9l1.5-1.5 2.5 2.5 6.5-6.5 1.5 1.5z"/></svg><br>              <span class="select-menu-item-text css-truncate-target" title="release-1.0.0"><br>                release-1.0.0<br>              </span><br>            </a><br>        </div><br><br>        <div class="select-menu-no-results">Nothing to show</div><br>      </div><br><br>    </div><br>  </div><br></div><br><br>  <div class="btn-group right"><br>    <a href="/google/googletest/find/master" class="js-pjax-capture-input btn btn-sm" data-pjax="" data-hotkey="t"><br>      Find file<br>    </a><br>    <button aria-label="Copy file path to clipboard" class="js-zeroclipboard btn btn-sm zeroclipboard-button tooltipped tooltipped-s" data-copied-hint="Copied!" type="button">Copy path</button><br>  </div><br>  <div class="breadcrumb js-zeroclipboard-target"><br>    <span class="repo-root js-repo-root"><span class="js-path-segment"><a href="/google/googletest"><span>googletest</span></a></span></span><span class="separator">/</span><span class="js-path-segment"><a href="/google/googletest/tree/master/googlemock"><span>googlemock</span></a></span><span class="separator">/</span><span class="js-path-segment"><a href="/google/googletest/tree/master/googlemock/docs"><span>docs</span></a></span><span class="separator">/</span><strong class="final-path">FrequentlyAskedQuestions.md</strong><br>  </div><br></div><br><br><br>  <div class="commit-tease"><br>      <span class="right"><br>        <a class="commit-tease-sha" href="/google/googletest/commit/a470862dbe806b4e55232d6aa637a4bd94b800f8" data-pjax=""><br>          a470862<br>        </a><br>        <time datetime="2015-12-08T15:02:50Z" is="relative-time">Dec 8, 2015</time><br>      </span><br>      <div><br>        <img alt="" class="avatar" height="20" src="https://2.gravatar.com/avatar/0c5dbc6456ec61e451fab49a1ae31091?d=https%3A%2F%2Fassets-cdn.github.com%2Fimages%2Fgravatars%2Fgravatar-user-420.png&amp;r=x&amp;s=140" width="20"><br>        <span class="user-mention">Paul Rosset</span><br>          <a href="/google/googletest/commit/a470862dbe806b4e55232d6aa637a4bd94b800f8" class="message" data-pjax="true" title="fixed link in googlemock documentation">fixed link in googlemock documentation</a><br>      </div><br><br>    <div class="commit-tease-contributors"><br>      <button type="button" class="btn-link muted-link contributors-toggle" data-facebox="#blob_contributors_box"><br>        <strong>1</strong><br>         contributor<br>      </button><br><br>    </div><br><br>    <div id="blob_contributors_box" style="display:none"><br>      <h2 class="facebox-header" data-facebox-id="facebox-header">Users who have contributed to this file</h2><br>      <ul class="facebox-user-list" data-facebox-id="facebox-description"><br>          <li class="facebox-user-list-item"><br>            <img alt="@BillyDonahue" height="24" src="https://avatars0.githubusercontent.com/u/8611652?v=3&amp;s=48" width="24"><br>            <a href="/BillyDonahue">BillyDonahue</a><br>          </li><br>      </ul><br>    </div><br>  </div><br><br><div class="file"><br>  <div class="file-header"><br>  <div class="file-actions"><br><br>    <div class="btn-group"><br>      <a href="/google/googletest/raw/master/googlemock/docs/FrequentlyAskedQuestions.md" class="btn btn-sm " id="raw-url">Raw</a><br>        <a href="/google/googletest/blame/master/googlemock/docs/FrequentlyAskedQuestions.md" class="btn btn-sm js-update-url-with-hash">Blame</a><br>      <a href="/google/googletest/commits/master/googlemock/docs/FrequentlyAskedQuestions.md" class="btn btn-sm " rel="nofollow">History</a><br>    </div><br><br>        <a class="btn-octicon tooltipped tooltipped-nw" href="https://windows.github.com" aria-label="Open this file in GitHub Desktop" data-ga-click="Repository, open with desktop, type:windows" target="_blank" rel="external"><br>            <svg aria-hidden="true" class="octicon octicon-device-desktop" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M15 2H1c-0.55 0-1 0.45-1 1v9c0 0.55 0.45 1 1 1h5.34c-0.25 0.61-0.86 1.39-2.34 2h8c-1.48-0.61-2.09-1.39-2.34-2h5.34c0.55 0 1-0.45 1-1V3c0-0.55-0.45-1-1-1z m0 9H1V3h14v8z"/></svg><br>        </a><br><br>        <button type="button" class="btn-octicon disabled tooltipped tooltipped-nw" aria-label="You must be signed in to make or propose changes"><br>          <svg aria-hidden="true" class="octicon octicon-pencil" height="16" version="1.1" viewbox="0 0 14 16" width="14"><path d="M0 12v3h3l8-8-3-3L0 12z m3 2H1V12h1v1h1v1z m10.3-9.3l-1.3 1.3-3-3 1.3-1.3c0.39-0.39 1.02-0.39 1.41 0l1.59 1.59c0.39 0.39 0.39 1.02 0 1.41z"/></svg><br>        </button><br>        <button type="button" class="btn-octicon btn-octicon-danger disabled tooltipped tooltipped-nw" aria-label="You must be signed in to make or propose changes"><br>          <svg aria-hidden="true" class="octicon octicon-trashcan" height="16" version="1.1" viewbox="0 0 12 16" width="12"><path d="M10 2H8c0-0.55-0.45-1-1-1H4c-0.55 0-1 0.45-1 1H1c-0.55 0-1 0.45-1 1v1c0 0.55 0.45 1 1 1v9c0 0.55 0.45 1 1 1h7c0.55 0 1-0.45 1-1V5c0.55 0 1-0.45 1-1v-1c0-0.55-0.45-1-1-1z m-1 12H2V5h1v8h1V5h1v8h1V5h1v8h1V5h1v9z m1-10H1v-1h9v1z"/></svg><br>        </button><br>  </div><br><br>  <div class="file-info"><br>      629 lines (516 sloc)<br>      <span class="file-info-divider"></span><br>    22.8 KB<br>  </div><br></div><br><br><br>  <div id="readme" class="readme blob instapaper_body"><br>    <article class="markdown-body entry-content" itemprop="text"><p>Please send your questions to the<br><a href="http://groups.google.com/group/googlemock" target="_blank" rel="external">googlemock</a> discussion<br>group. If you need help with compiler errors, make sure you have<br>tried <a href="#How_am_I_supposed_to_make_sense_of_these_horrible_template_error.md">Google Mock Doctor</a> first.</p><br><br><h2><a id="user-content-when-i-call-a-method-on-my-mock-object-the-method-for-the-real-object-is-invoked-instead--whats-the-problem" class="anchor" href="#when-i-call-a-method-on-my-mock-object-the-method-for-the-real-object-is-invoked-instead--whats-the-problem" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"/></svg></a>When I call a method on my mock object, the method for the real object is invoked instead.  What’s the problem?</h2><br><br><p>In order for a method to be mocked, it must be <em>virtual</em>, unless you use the <a href="/google/googletest/blob/master/googlemock/docs/CookBook.md#mocking-nonvirtual-methods">high-perf dependency injection technique</a>.</p><br><br><h2><a id="user-content-i-wrote-some-matchers--after-i-upgraded-to-a-new-version-of-google-mock-they-no-longer-compile--whats-going-on" class="anchor" href="#i-wrote-some-matchers--after-i-upgraded-to-a-new-version-of-google-mock-they-no-longer-compile--whats-going-on" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"/></svg></a>I wrote some matchers.  After I upgraded to a new version of Google Mock, they no longer compile.  What’s going on?</h2><br><br><p>After version 1.4.0 of Google Mock was released, we had an idea on how<br>to make it easier to write matchers that can generate informative<br>messages efficiently.  We experimented with this idea and liked what<br>we saw.  Therefore we decided to implement it.</p><br><br><p>Unfortunately, this means that if you have defined your own matchers<br>by implementing <code>MatcherInterface</code> or using <code>MakePolymorphicMatcher()</code>,<br>your definitions will no longer compile.  Matchers defined using the<br><code>MATCHER<em></em></code> family of macros are not affected.</p><br><br><p>Sorry for the hassle if your matchers are affected.  We believe it’s<br>in everyone’s long-term interest to make this change sooner than<br>later.  Fortunately, it’s usually not hard to migrate an existing<br>matcher to the new API.  Here’s what you need to do:</p><br><br><p>If you wrote your matcher like this:</p><br><br><pre><code>// Old matcher definition that doesn’t work with the latest<br>// Google Mock.<br>using ::testing::MatcherInterface;<br>…<br>class MyWonderfulMatcher : public MatcherInterface&lt;MyType&gt; {<br> public:<br>  …<br>  virtual bool Matches(MyType value) const {<br>    // Returns true if value matches.<br>    return value.GetFoo() &gt; 5;<br>  }<br>  …<br>};<br></code></pre><br><br><p>you’ll need to change it to:</p><br><br><pre><code>// New matcher definition that works with the latest Google Mock.<br>using ::testing::MatcherInterface;<br>using ::testing::MatchResultListener;<br>…<br>class MyWonderfulMatcher : public MatcherInterface&lt;MyType&gt; {<br> public:<br>  …<br>  virtual bool MatchAndExplain(MyType value,<br>                               MatchResultListener listener) const {<br>    // Returns true if value matches.<br>    return value.GetFoo() &gt; 5;<br>  }<br>  …<br>};<br></code></pre><br><br><p>(i.e. rename <code>Matches()</code> to <code>MatchAndExplain()</code> and give it a second<br>argument of type <code>MatchResultListener<em></em></code>.)</p><br><br><p>If you were also using <code>ExplainMatchResultTo()</code> to improve the matcher<br>message:</p><br><br><pre><code>// Old matcher definition that doesn’t work with the lastest<br>// Google Mock.<br>using ::testing::MatcherInterface;<br>…<br>class MyWonderfulMatcher : public MatcherInterface&lt;MyType&gt; {<br> public:<br>  …<br>  virtual bool Matches(MyType value) const {<br>    // Returns true if value matches.<br>    return value.GetFoo() &gt; 5;<br>  }<br><br>  virtual void ExplainMatchResultTo(MyType value,<br>                                    ::std::ostream os) const {<br>    // Prints some helpful information to os to help<br>    // a user understand why value matches (or doesn’t match).<br>    <em>os &lt;&lt; “the Foo property is “ &lt;&lt; value.GetFoo();<br>  }<br>  …<br>};<br></em></code></pre><br><br><p>you should move the logic of <code>ExplainMatchResultTo()</code> into<br><code>MatchAndExplain()</code>, using the <code>MatchResultListener</code> argument where<br>the <code>::std::ostream</code> was used:</p><br><br><pre><code>// New matcher definition that works with the latest Google Mock.<br>using ::testing::MatcherInterface;<br>using ::testing::MatchResultListener;<br>…<br>class MyWonderfulMatcher : public MatcherInterface&lt;MyType&gt; {<br> public:<br>  …<br>  virtual bool MatchAndExplain(MyType value,<br>                               MatchResultListener listener) const {<br>    // Returns true if value matches.<br>    <em>listener &lt;&lt; “the Foo property is “ &lt;&lt; value.GetFoo();<br>    return value.GetFoo() &gt; 5;<br>  }<br>  …<br>};<br></em></code></pre><br><br><p>If your matcher is defined using <code>MakePolymorphicMatcher()</code>:</p><br><br><pre><code>// Old matcher definition that doesn’t work with the latest<br>// Google Mock.<br>using ::testing::MakePolymorphicMatcher;<br>…<br>class MyGreatMatcher {<br> public:<br>  …<br>  bool Matches(MyType value) const {<br>    // Returns true if value matches.<br>    return value.GetBar() &lt; 42;<br>  }<br>  …<br>};<br>… MakePolymorphicMatcher(MyGreatMatcher()) …<br></code></pre><br><br><p>you should rename the <code>Matches()</code> method to <code>MatchAndExplain()</code> and<br>add a <code>MatchResultListener</code> argument (the same as what you need to do<br>for matchers defined by implementing <code>MatcherInterface</code>):</p><br><br><pre><code>// New matcher definition that works with the latest Google Mock.<br>using ::testing::MakePolymorphicMatcher;<br>using ::testing::MatchResultListener;<br>…<br>class MyGreatMatcher {<br> public:<br>  …<br>  bool MatchAndExplain(MyType value,<br>                       MatchResultListener<em> listener) const {<br>    // Returns true if value matches.<br>    return value.GetBar() &lt; 42;<br>  }<br>  …<br>};<br>… MakePolymorphicMatcher(MyGreatMatcher()) …<br></em></code></pre><br><br><p>If your polymorphic matcher uses <code>ExplainMatchResultTo()</code> for better<br>failure messages:</p><br><br><pre><code>// Old matcher definition that doesn’t work with the latest<br>// Google Mock.<br>using ::testing::MakePolymorphicMatcher;<br>…<br>class MyGreatMatcher {<br> public:<br>  …<br>  bool Matches(MyType value) const {<br>    // Returns true if value matches.<br>    return value.GetBar() &lt; 42;<br>  }<br>  …<br>};<br>void ExplainMatchResultTo(const MyGreatMatcher&amp; matcher,<br>                          MyType value,<br>                          ::std::ostream os) {<br>  // Prints some helpful information to os to help<br>  // a user understand why value matches (or doesn’t match).<br>  <em>os &lt;&lt; “the Bar property is “ &lt;&lt; value.GetBar();<br>}<br>… MakePolymorphicMatcher(MyGreatMatcher()) …<br></em></code></pre><br><br><p>you’ll need to move the logic inside <code>ExplainMatchResultTo()</code> to<br><code>MatchAndExplain()</code>:</p><br><br><pre><code>// New matcher definition that works with the latest Google Mock.<br>using ::testing::MakePolymorphicMatcher;<br>using ::testing::MatchResultListener;<br>…<br>class MyGreatMatcher {<br> public:<br>  …<br>  bool MatchAndExplain(MyType value,<br>                       MatchResultListener listener) const {<br>    // Returns true if value matches.<br>    <em>listener &lt;&lt; “the Bar property is “ &lt;&lt; value.GetBar();<br>    return value.GetBar() &lt; 42;<br>  }<br>  …<br>};<br>… MakePolymorphicMatcher(MyGreatMatcher()) …<br></em></code></pre><br><br><p>For more information, you can read these<br><a href="/google/googletest/blob/master/googlemock/docs/CookBook.md#writing-new-monomorphic-matchers">two</a><br><a href="/google/googletest/blob/master/googlemock/docs/CookBook.md#writing-new-polymorphic-matchers">recipes</a><br>from the cookbook.  As always, you<br>are welcome to post questions on <code>googlemock@googlegroups.com</code> if you<br>need any help.</p><br><br><h2><a id="user-content-when-using-google-mock-do-i-have-to-use-google-test-as-the-testing-framework--i-have-my-favorite-testing-framework-and-dont-want-to-switch" class="anchor" href="#when-using-google-mock-do-i-have-to-use-google-test-as-the-testing-framework--i-have-my-favorite-testing-framework-and-dont-want-to-switch" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"/></svg></a>When using Google Mock, do I have to use Google Test as the testing framework?  I have my favorite testing framework and don’t want to switch.</h2><br><br><p>Google Mock works out of the box with Google Test.  However, it’s easy<br>to configure it to work with any testing framework of your choice.<br><a href="/google/googletest/blob/master/googlemock/docs/ForDummies.md#using-google-mock-with-any-testing-framework">Here</a> is how.</p><br><br><h2><a id="user-content-how-am-i-supposed-to-make-sense-of-these-horrible-template-errors" class="anchor" href="#how-am-i-supposed-to-make-sense-of-these-horrible-template-errors" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"/></svg></a>How am I supposed to make sense of these horrible template errors?</h2><br><br><p>If you are confused by the compiler errors gcc threw at you,<br>try consulting the <em>Google Mock Doctor</em> tool first.  What it does is to<br>scan stdin for gcc error messages, and spit out diagnoses on the<br>problems (we call them diseases) your code has.</p><br><br><p>To “install”, run command:</p><br><br><pre><code>alias gmd=’&lt;path to googlemock&gt;/scripts/gmock_doctor.py’<br></code></pre><br><br><p>To use it, do:</p><br><br><pre><code>&lt;your-favorite-build-command&gt; &lt;your-test&gt; 2&gt;&amp;1 | gmd<br></code></pre><br><br><p>For example:</p><br><br><pre><code>make my_test 2&gt;&amp;1 | gmd<br></code></pre><br><br><p>Or you can run <code>gmd</code> and copy-n-paste gcc’s error messages to it.</p><br><br><h2><a id="user-content-can-i-mock-a-variadic-function" class="anchor" href="#can-i-mock-a-variadic-function" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"/></svg></a>Can I mock a variadic function?</h2><br><br><p>You cannot mock a variadic function (i.e. a function taking ellipsis<br>(<code>…</code>) arguments) directly in Google Mock.</p><br><br><p>The problem is that in general, there is <em>no way</em> for a mock object to<br>know how many arguments are passed to the variadic method, and what<br>the arguments’ types are.  Only the <em>author of the base class</em> knows<br>the protocol, and we cannot look into his head.</p><br><br><p>Therefore, to mock such a function, the <em>user</em> must teach the mock<br>object how to figure out the number of arguments and their types.  One<br>way to do it is to provide overloaded versions of the function.</p><br><br><p>Ellipsis arguments are inherited from C and not really a C++ feature.<br>They are unsafe to use and don’t work with arguments that have<br>constructors or destructors.  Therefore we recommend to avoid them in<br>C++ as much as possible.</p><br><br><h2><a id="user-content-msvc-gives-me-warning-c4301-or-c4373-when-i-define-a-mock-method-with-a-const-parameter--why" class="anchor" href="#msvc-gives-me-warning-c4301-or-c4373-when-i-define-a-mock-method-with-a-const-parameter--why" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"/></svg></a>MSVC gives me warning C4301 or C4373 when I define a mock method with a const parameter.  Why?</h2><br><br><p>If you compile this using Microsoft Visual C++ 2005 SP1:</p><br><br><pre><code>class Foo {<br>  …<br>  virtual void Bar(const int i) = 0;<br>};<br><br>class MockFoo : public Foo {<br>  …<br>  MOCK_METHOD1(Bar, void(const int i));<br>};<br></code></pre><br><br><p>You may get the following warning:</p><br><br><pre><code>warning C4301: ‘MockFoo::Bar’: overriding virtual function only differs from ‘Foo::Bar’ by const/volatile qualifier<br></code></pre><br><br><p>This is a MSVC bug.  The same code compiles fine with gcc ,for<br>example.  If you use Visual C++ 2008 SP1, you would get the warning:</p><br><br><pre><code>warning C4373: ‘MockFoo::Bar’: virtual function overrides ‘Foo::Bar’, previous versions of the compiler did not override when parameters only differed by const/volatile qualifiers<br></code></pre><br><br><p>In C++, if you <em>declare</em> a function with a <code>const</code> parameter, the<br><code>const</code> modifier is <em>ignored</em>.  Therefore, the <code>Foo</code> base class above<br>is equivalent to:</p><br><br><pre><code>class Foo {<br>  …<br>  virtual void Bar(int i) = 0;  // int or const int?  Makes no difference.<br>};<br></code></pre><br><br><p>In fact, you can <em>declare</em> Bar() with an <code>int</code> parameter, and <em>define</em><br>it with a <code>const int</code> parameter.  The compiler will still match them<br>up.</p><br><br><p>Since making a parameter <code>const</code> is meaningless in the method<br><em>declaration</em>, we recommend to remove it in both <code>Foo</code> and <code>MockFoo</code>.<br>That should workaround the VC bug.</p><br><br><p>Note that we are talking about the <em>top-level</em> <code>const</code> modifier here.<br>If the function parameter is passed by pointer or reference, declaring<br>the <em>pointee</em> or <em>referee</em> as <code>const</code> is still meaningful.  For<br>example, the following two declarations are <em>not</em> equivalent:</p><br><br><pre><code>void Bar(int p);        // Neither p nor <em>p is const.<br>void Bar(const int</em> p);  // p is not const, but <em>p is.<br></em></code></pre><br><br><h2><a id="user-content-i-have-a-huge-mock-class-and-microsoft-visual-c-runs-out-of-memory-when-compiling-it--what-can-i-do" class="anchor" href="#i-have-a-huge-mock-class-and-microsoft-visual-c-runs-out-of-memory-when-compiling-it--what-can-i-do" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"/></svg></a>I have a huge mock class, and Microsoft Visual C++ runs out of memory when compiling it.  What can I do?</h2><br><br><p>We’ve noticed that when the <code>/clr</code> compiler flag is used, Visual C++<br>uses 5~6 times as much memory when compiling a mock class.  We suggest<br>to avoid <code>/clr</code> when compiling native C++ mocks.</p><br><br><h2><a id="user-content-i-cant-figure-out-why-google-mock-thinks-my-expectations-are-not-satisfied--what-should-i-do" class="anchor" href="#i-cant-figure-out-why-google-mock-thinks-my-expectations-are-not-satisfied--what-should-i-do" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"/></svg></a>I can’t figure out why Google Mock thinks my expectations are not satisfied.  What should I do?</h2><br><br><p>You might want to run your test with<br><code>–gmock_verbose=info</code>.  This flag lets Google Mock print a trace<br>of every mock function call it receives.  By studying the trace,<br>you’ll gain insights on why the expectations you set are not met.</p><br><br><h2><a id="user-content-how-can-i-assert-that-a-function-is-never-called" class="anchor" href="#how-can-i-assert-that-a-function-is-never-called" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"/></svg></a>How can I assert that a function is NEVER called?</h2><br><br><pre><code>EXPECT<em>CALL(foo, Bar(</em>))<br>    .Times(0);<br></code></pre><br><br><h2><a id="user-content-i-have-a-failed-test-where-google-mock-tells-me-twice-that-a-particular-expectation-is-not-satisfied--isnt-this-redundant" class="anchor" href="#i-have-a-failed-test-where-google-mock-tells-me-twice-that-a-particular-expectation-is-not-satisfied--isnt-this-redundant" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"/></svg></a>I have a failed test where Google Mock tells me TWICE that a particular expectation is not satisfied.  Isn’t this redundant?</h2><br><br><p>When Google Mock detects a failure, it prints relevant information<br>(the mock function arguments, the state of relevant expectations, and<br>etc) to help the user debug.  If another failure is detected, Google<br>Mock will do the same, including printing the state of relevant<br>expectations.</p><br><br><p>Sometimes an expectation’s state didn’t change between two failures,<br>and you’ll see the same description of the state twice.  They are<br>however <em>not</em> redundant, as they refer to <em>different points in time</em>.<br>The fact they are the same <em>is</em> interesting information.</p><br><br><h2><a id="user-content-i-get-a-heap-check-failure-when-using-a-mock-object-but-using-a-real-object-is-fine--what-can-be-wrong" class="anchor" href="#i-get-a-heap-check-failure-when-using-a-mock-object-but-using-a-real-object-is-fine--what-can-be-wrong" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"/></svg></a>I get a heap check failure when using a mock object, but using a real object is fine.  What can be wrong?</h2><br><br><p>Does the class (hopefully a pure interface) you are mocking have a<br>virtual destructor?</p><br><br><p>Whenever you derive from a base class, make sure its destructor is<br>virtual.  Otherwise Bad Things will happen.  Consider the following<br>code:</p><br><br><pre><code>class Base {<br> public:<br>  // Not virtual, but should be.<br>  ~Base() { … }<br>  …<br>};<br><br>class Derived : public Base {<br> public:<br>  …<br> private:<br>  std::string value_;<br>};<br><br>…<br>  Base p = new Derived;<br>  …<br>  delete p;  // Surprise! ~Base() will be called, but ~Derived() will not<br>             // - value_ is leaked.<br></code></pre><br><br><p>By changing <code>~Base()</code> to virtual, <code>~Derived()</code> will be correctly<br>called when <code>delete p</code> is executed, and the heap checker<br>will be happy.</p><br><br><h2><a id="user-content-the-newer-expectations-override-older-ones-rule-makes-writing-expectations-awkward--why-does-google-mock-do-that" class="anchor" href="#the-newer-expectations-override-older-ones-rule-makes-writing-expectations-awkward--why-does-google-mock-do-that" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"/></svg></a>The “newer expectations override older ones” rule makes writing expectations awkward.  Why does Google Mock do that?</h2><br><br><p>When people complain about this, often they are referring to code like:</p><br><br><pre><code>// foo.Bar() should be called twice, return 1 the first time, and return<br>// 2 the second time.  However, I have to write the expectations in the<br>// reverse order.  This sucks big time!!!<br>EXPECT_CALL(foo, Bar())<br>    .WillOnce(Return(2))<br>    .RetiresOnSaturation();<br>EXPECT_CALL(foo, Bar())<br>    .WillOnce(Return(1))<br>    .RetiresOnSaturation();<br></code></pre><br><br><p>The problem is that they didn’t pick the <strong>best</strong> way to express the test’s<br>intent.</p><br><br><p>By default, expectations don’t have to be matched in <em>any</em> particular<br>order.  If you want them to match in a certain order, you need to be<br>explicit.  This is Google Mock’s (and jMock’s) fundamental philosophy: it’s<br>easy to accidentally over-specify your tests, and we want to make it<br>harder to do so.</p><br><br><p>There are two better ways to write the test spec.  You could either<br>put the expectations in sequence:</p><br><br><pre><code>// foo.Bar() should be called twice, return 1 the first time, and return<br>// 2 the second time.  Using a sequence, we can write the expectations<br>// in their natural order.<br>{<br>  InSequence s;<br>  EXPECT_CALL(foo, Bar())<br>      .WillOnce(Return(1))<br>      .RetiresOnSaturation();<br>  EXPECT_CALL(foo, Bar())<br>      .WillOnce(Return(2))<br>      .RetiresOnSaturation();<br>}<br></code></pre><br><br><p>or you can put the sequence of actions in the same expectation:</p><br><br><pre><code>// foo.Bar() should be called twice, return 1 the first time, and return<br>// 2 the second time.<br>EXPECT_CALL(foo, Bar())<br>    .WillOnce(Return(1))<br>    .WillOnce(Return(2))<br>    .RetiresOnSaturation();<br></code></pre><br><br><p>Back to the original questions: why does Google Mock search the<br>expectations (and <code>ON_CALL</code>s) from back to front?  Because this<br>allows a user to set up a mock’s behavior for the common case early<br>(e.g. in the mock’s constructor or the test fixture’s set-up phase)<br>and customize it with more specific rules later.  If Google Mock<br>searches from front to back, this very useful pattern won’t be<br>possible.</p><br><br><h2><a id="user-content-google-mock-prints-a-warning-when-a-function-without-expect_call-is-called-even-if-i-have-set-its-behavior-using-on_call--would-it-be-reasonable-not-to-show-the-warning-in-this-case" class="anchor" href="#google-mock-prints-a-warning-when-a-function-without-expect_call-is-called-even-if-i-have-set-its-behavior-using-on_call--would-it-be-reasonable-not-to-show-the-warning-in-this-case" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"/></svg></a>Google Mock prints a warning when a function without EXPECT_CALL is called, even if I have set its behavior using ON_CALL.  Would it be reasonable not to show the warning in this case?</h2><br><br><p>When choosing between being neat and being safe, we lean toward the<br>latter.  So the answer is that we think it’s better to show the<br>warning.</p><br><br><p>Often people write <code>ON_CALL</code>s in the mock object’s<br>constructor or <code>SetUp()</code>, as the default behavior rarely changes from<br>test to test.  Then in the test body they set the expectations, which<br>are often different for each test.  Having an <code>ON_CALL</code> in the set-up<br>part of a test doesn’t mean that the calls are expected.  If there’s<br>no <code>EXPECT_CALL</code> and the method is called, it’s possibly an error.  If<br>we quietly let the call go through without notifying the user, bugs<br>may creep in unnoticed.</p><br><br><p>If, however, you are sure that the calls are OK, you can write</p><br><br><pre><code>EXPECT<em>CALL(foo, Bar(</em>))<br>    .WillRepeatedly(…);<br></code></pre><br><br><p>instead of</p><br><br><pre><code>ON<em>CALL(foo, Bar(</em>))<br>    .WillByDefault(…);<br></code></pre><br><br><p>This tells Google Mock that you do expect the calls and no warning should be<br>printed.</p><br><br><p>Also, you can control the verbosity using the <code>–gmock_verbose</code> flag.<br>If you find the output too noisy when debugging, just choose a less<br>verbose level.</p><br><br><h2><a id="user-content-how-can-i-delete-the-mock-functions-argument-in-an-action" class="anchor" href="#how-can-i-delete-the-mock-functions-argument-in-an-action" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"/></svg></a>How can I delete the mock function’s argument in an action?</h2><br><br><p>If you find yourself needing to perform some action that’s not<br>supported by Google Mock directly, remember that you can define your own<br>actions using<br><a href="/google/googletest/blob/master/googlemock/docs/CookBook.md#writing-new-actions">MakeAction()</a> or<br><a href="/google/googletest/blob/master/googlemock/docs/CookBook.md#writing_new_polymorphic_actions">MakePolymorphicAction()</a>,<br>or you can write a stub function and invoke it using<br><a href="/google/googletest/blob/master/googlemock/docs/CookBook.md#using-functions_methods_functors">Invoke()</a>.</p><br><br><h2><a id="user-content-mock_methodns-second-argument-looks-funny--why-dont-you-use-the-mock_methodnmethod-return_type-arg_1--arg_n-syntax" class="anchor" href="#mock_methodns-second-argument-looks-funny--why-dont-you-use-the-mock_methodnmethod-return_type-arg_1--arg_n-syntax" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"/></svg></a>MOCK_METHODn()’s second argument looks funny.  Why don’t you use the MOCK_METHODn(Method, return_type, arg_1, …, arg_n) syntax?</h2><br><br><p>What?!  I think it’s beautiful. :-)</p><br><br><p>While which syntax looks more natural is a subjective matter to some<br>extent, Google Mock’s syntax was chosen for several practical advantages it<br>has.</p><br><br><p>Try to mock a function that takes a map as an argument:</p><br><br><pre><code>virtual int GetSize(const map&lt;int, std::string&gt;&amp; m);<br></code></pre><br><br><p>Using the proposed syntax, it would be:</p><br><br><pre><code>MOCK_METHOD1(GetSize, int, const map&lt;int, std::string&gt;&amp; m);<br></code></pre><br><br><p>Guess what?  You’ll get a compiler error as the compiler thinks that<br><code>const map&lt;int, std::string&gt;&amp; m</code> are <strong>two</strong>, not one, arguments. To work<br>around this you can use <code>typedef</code> to give the map type a name, but<br>that gets in the way of your work.  Google Mock’s syntax avoids this<br>problem as the function’s argument types are protected inside a pair<br>of parentheses:</p><br><br><pre><code>// This compiles fine.<br>MOCK_METHOD1(GetSize, int(const map&lt;int, std::string&gt;&amp; m));<br></code></pre><br><br><p>You still need a <code>typedef</code> if the return type contains an unprotected<br>comma, but that’s much rarer.</p><br><br><p>Other advantages include:</p><br><br><ol><br><li><code>MOCK_METHOD1(Foo, int, bool)</code> can leave a reader wonder whether the method returns <code>int</code> or <code>bool</code>, while there won’t be such confusion using Google Mock’s syntax.</li><br><li>The way Google Mock describes a function type is nothing new, although many people may not be familiar with it.  The same syntax was used in C, and the <code>function</code> library in <code>tr1</code> uses this syntax extensively.  Since <code>tr1</code> will become a part of the new version of STL, we feel very comfortable to be consistent with it.</li><br><li>The function type syntax is also used in other parts of Google Mock’s API (e.g. the action interface) in order to make the implementation tractable. A user needs to learn it anyway in order to utilize Google Mock’s more advanced features.  We’d as well stick to the same syntax in <code>MOCK_METHOD*</code>!</li><br></ol><br><br><h2><a id="user-content-my-code-calls-a-staticglobal-function--can-i-mock-it" class="anchor" href="#my-code-calls-a-staticglobal-function--can-i-mock-it" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"/></svg></a>My code calls a static/global function.  Can I mock it?</h2><br><br><p>You can, but you need to make some changes.</p><br><br><p>In general, if you find yourself needing to mock a static function,<br>it’s a sign that your modules are too tightly coupled (and less<br>flexible, less reusable, less testable, etc).  You are probably better<br>off defining a small interface and call the function through that<br>interface, which then can be easily mocked.  It’s a bit of work<br>initially, but usually pays for itself quickly.</p><br><br><p>This Google Testing Blog<br><a href="http://googletesting.blogspot.com/2008/06/defeat-static-cling.html" target="_blank" rel="external">post</a><br>says it excellently.  Check it out.</p><br><br><h2><a id="user-content-my-mock-object-needs-to-do-complex-stuff--its-a-lot-of-pain-to-specify-the-actions--google-mock-sucks" class="anchor" href="#my-mock-object-needs-to-do-complex-stuff--its-a-lot-of-pain-to-specify-the-actions--google-mock-sucks" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"/></svg></a>My mock object needs to do complex stuff.  It’s a lot of pain to specify the actions.  Google Mock sucks!</h2><br><br><p>I know it’s not a question, but you get an answer for free any way. :-)</p><br><br><p>With Google Mock, you can create mocks in C++ easily.  And people might be<br>tempted to use them everywhere. Sometimes they work great, and<br>sometimes you may find them, well, a pain to use. So, what’s wrong in<br>the latter case?</p><br><br><p>When you write a test without using mocks, you exercise the code and<br>assert that it returns the correct value or that the system is in an<br>expected state.  This is sometimes called “state-based testing”.</p><br><br><p>Mocks are great for what some call “interaction-based” testing:<br>instead of checking the system state at the very end, mock objects<br>verify that they are invoked the right way and report an error as soon<br>as it arises, giving you a handle on the precise context in which the<br>error was triggered.  This is often more effective and economical to<br>do than state-based testing.</p><br><br><p>If you are doing state-based testing and using a test double just to<br>simulate the real object, you are probably better off using a fake.<br>Using a mock in this case causes pain, as it’s not a strong point for<br>mocks to perform complex actions.  If you experience this and think<br>that mocks suck, you are just not using the right tool for your<br>problem. Or, you might be trying to solve the wrong problem. :-)</p><br><br><h2><a id="user-content-i-got-a-warning-uninteresting-function-call-encountered---default-action-taken--should-i-panic" class="anchor" href="#i-got-a-warning-uninteresting-function-call-encountered---default-action-taken--should-i-panic" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"/></svg></a>I got a warning “Uninteresting function call encountered - default action taken..”  Should I panic?</h2><br><br><p>By all means, NO!  It’s just an FYI.</p><br><br><p>What it means is that you have a mock function, you haven’t set any<br>expectations on it (by Google Mock’s rule this means that you are not<br>interested in calls to this function and therefore it can be called<br>any number of times), and it is called.  That’s OK - you didn’t say<br>it’s not OK to call the function!</p><br><br><p>What if you actually meant to disallow this function to be called, but<br>forgot to write <code>EXPECT_CALL(foo, Bar()).Times(0)</code>?  While<br>one can argue that it’s the user’s fault, Google Mock tries to be nice and<br>prints you a note.</p><br><br><p>So, when you see the message and believe that there shouldn’t be any<br>uninteresting calls, you should investigate what’s going on.  To make<br>your life easier, Google Mock prints the function name and arguments<br>when an uninteresting call is encountered.</p><br><br><h2><a id="user-content-i-want-to-define-a-custom-action--should-i-use-invoke-or-implement-the-action-interface" class="anchor" href="#i-want-to-define-a-custom-action--should-i-use-invoke-or-implement-the-action-interface" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"/></svg></a>I want to define a custom action.  Should I use Invoke() or implement the action interface?</h2><br><br><p>Either way is fine - you want to choose the one that’s more convenient<br>for your circumstance.</p><br><br><p>Usually, if your action is for a particular function type, defining it<br>using <code>Invoke()</code> should be easier; if your action can be used in<br>functions of different types (e.g. if you are defining<br><code>Return(value)</code>), <code>MakePolymorphicAction()</code> is<br>easiest.  Sometimes you want precise control on what types of<br>functions the action can be used in, and implementing<br><code>ActionInterface</code> is the way to go here. See the implementation of<br><code>Return()</code> in <code>include/gmock/gmock-actions.h</code> for an example.</p><br><br><h2><a id="user-content-im-using-the-set-argument-pointee-action-and-the-compiler-complains-about-conflicting-return-type-specified--what-does-it-mean" class="anchor" href="#im-using-the-set-argument-pointee-action-and-the-compiler-complains-about-conflicting-return-type-specified--what-does-it-mean" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"/></svg></a>I’m using the set-argument-pointee action, and the compiler complains about “conflicting return type specified”.  What does it mean?</h2><br><br><p>You got this error as Google Mock has no idea what value it should return<br>when the mock method is called.  <code>SetArgPointee()</code> says what the<br>side effect is, but doesn’t say what the return value should be.  You<br>need <code>DoAll()</code> to chain a <code>SetArgPointee()</code> with a <code>Return()</code>.</p><br><br><p>See this <a href="/google/googletest/blob/master/googlemock/docs/CookBook.md#mocking_side_effects">recipe</a> for more details and an example.</p><br><br><h2><a id="user-content-my-question-is-not-in-your-faq" class="anchor" href="#my-question-is-not-in-your-faq" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"/></svg></a>My question is not in your FAQ!</h2><br><br><p>If you cannot find the answer to your question in this FAQ, there are<br>some other resources you can use:</p><br><br><ol><br><li>read other <a href="/google/googletest/blob/master/googlemock/docs/Documentation.md">documentation</a>,</li><br><li>search the mailing list <a href="http://groups.google.com/group/googlemock/topics" target="_blank" rel="external">archive</a>,</li><br><li>ask it on <a href="mailto:googlemock@googlegroups.com" target="_blank" rel="external">googlemock@googlegroups.com</a> and someone will answer it (to prevent spam, we require you to join the <a href="http://groups.google.com/group/googlemock" target="_blank" rel="external">discussion group</a> before you can post.).</li><br></ol><br><br><p>Please note that creating an issue in the<br><a href="https://github.com/google/googletest/issues" target="_blank" rel="external">issue tracker</a> is <em>not</em><br>a good way to get your answer, as it is monitored infrequently by a<br>very small number of people.</p><br><br><p>When asking a question, it’s helpful to provide as much of the<br>following information as possible (people cannot help you if there’s<br>not enough information in your question):</p><br><br><ul><br><li>the version (or the revision number if you check out from SVN directly) of Google Mock you use (Google Mock is under active development, so it’s possible that your problem has been solved in a later version),</li><br><li>your operating system,</li><br><li>the name and version of your compiler,</li><br><li>the complete command line flags you give to your compiler,</li><br><li>the complete compiler error messages (if the question is about compilation),</li><br><li>the <em>actual</em> code (ideally, a minimal but complete program) that has the problem you encounter.</li><br></ul><br></article><br>  </div><br><br></div><br><br><button type="button" data-facebox="#jump-to-line" data-facebox-class="linejump" data-hotkey="l" class="hidden">Jump to Line</button><br><div id="jump-to-line" style="display:none"><br>  <!-- </textarea> --><!-- '"` --><form accept-charset="UTF-8" action="" class="js-jump-to-line-form" method="get"><div style="margin:0;padding:0;display:inline"><input name="utf8" type="hidden" value="&#x2713;"></div><br>    <input class="form-control linejump-input js-jump-to-line-field" type="text" placeholder="Jump to line&hellip;" aria-label="Jump to line" autofocus><br>    <button type="submit" class="btn">Go</button><br></form></div><br><br>  </div><br>  <div class="modal-backdrop"></div><br></div><br><br><br>    </div><br>  </div><br><br>    </div><br><br>        <div class="container site-footer-container"><br>  <div class="site-footer" role="contentinfo"><br>    <ul class="site-footer-links right"><br>        <li><a href="https://status.github.com/" data-ga-click="Footer, go to status, text:status" target="_blank" rel="external">Status</a></li><br>      <li><a href="https://developer.github.com" data-ga-click="Footer, go to api, text:api" target="_blank" rel="external">API</a></li><br>      <li><a href="https://training.github.com" data-ga-click="Footer, go to training, text:training" target="_blank" rel="external">Training</a></li><br>      <li><a href="https://shop.github.com" data-ga-click="Footer, go to shop, text:shop" target="_blank" rel="external">Shop</a></li><br>        <li><a href="https://github.com/blog" data-ga-click="Footer, go to blog, text:blog" target="_blank" rel="external">Blog</a></li><br>        <li><a href="https://github.com/about" data-ga-click="Footer, go to about, text:about" target="_blank" rel="external">About</a></li><br><br>    </ul><br><br>    <a href="https://github.com" aria-label="Homepage" class="site-footer-mark" target="_blank" rel="external"><br>      <svg aria-hidden="true" class="octicon octicon-mark-github" height="24" title="GitHub " version="1.1" viewbox="0 0 16 16" width="24"><path d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59 0.4 0.07 0.55-0.17 0.55-0.38 0-0.19-0.01-0.82-0.01-1.49-2.01 0.37-2.53-0.49-2.69-0.94-0.09-0.23-0.48-0.94-0.82-1.13-0.28-0.15-0.68-0.52-0.01-0.53 0.63-0.01 1.08 0.58 1.23 0.82 0.72 1.21 1.87 0.87 2.33 0.66 0.07-0.52 0.28-0.87 0.51-1.07-1.78-0.2-3.64-0.89-3.64-3.95 0-0.87 0.31-1.59 0.82-2.15-0.08-0.2-0.36-1.02 0.08-2.12 0 0 0.67-0.21 2.2 0.82 0.64-0.18 1.32-0.27 2-0.27 0.68 0 1.36 0.09 2 0.27 1.53-1.04 2.2-0.82 2.2-0.82 0.44 1.1 0.16 1.92 0.08 2.12 0.51 0.56 0.82 1.27 0.82 2.15 0 3.07-1.87 3.75-3.65 3.95 0.29 0.25 0.54 0.73 0.54 1.48 0 1.07-0.01 1.93-0.01 2.2 0 0.21 0.15 0.46 0.55 0.38C13.71 14.53 16 11.53 16 8 16 3.58 12.42 0 8 0z"/></svg><br></a><br>    <ul class="site-footer-links"><br>      <li>&copy; 2016 <span title="0.04717s from github-fe151-cp1-prd.iad.github.net">GitHub</span>, Inc.</li><br>        <li><a href="https://github.com/site/terms" data-ga-click="Footer, go to terms, text:terms" target="_blank" rel="external">Terms</a></li><br>        <li><a href="https://github.com/site/privacy" data-ga-click="Footer, go to privacy, text:privacy" target="_blank" rel="external">Privacy</a></li><br>        <li><a href="https://github.com/security" data-ga-click="Footer, go to security, text:security" target="_blank" rel="external">Security</a></li><br>        <li><a href="https://github.com/contact" data-ga-click="Footer, go to contact, text:contact" target="_blank" rel="external">Contact</a></li><br>        <li><a href="https://help.github.com" data-ga-click="Footer, go to help, text:help" target="_blank" rel="external">Help</a></li><br>    </ul><br>  </div><br></div><br><br><br><br><br><br><br>    <div id="ajax-error-message" class="ajax-error-message flash flash-error"><br>      <svg aria-hidden="true" class="octicon octicon-alert" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M15.72 12.5l-6.85-11.98C8.69 0.21 8.36 0.02 8 0.02s-0.69 0.19-0.87 0.5l-6.85 11.98c-0.18 0.31-0.18 0.69 0 1C0.47 13.81 0.8 14 1.15 14h13.7c0.36 0 0.69-0.19 0.86-0.5S15.89 12.81 15.72 12.5zM9 12H7V10h2V12zM9 9H7V5h2V9z"/></svg><br>      <button type="button" class="flash-close js-flash-close js-ajax-error-dismiss" aria-label="Dismiss error"><br>        <svg aria-hidden="true" class="octicon octicon-x" height="16" version="1.1" viewbox="0 0 12 16" width="12"><path d="M7.48 8l3.75 3.75-1.48 1.48-3.75-3.75-3.75 3.75-1.48-1.48 3.75-3.75L0.77 4.25l1.48-1.48 3.75 3.75 3.75-3.75 1.48 1.48-3.75 3.75z"/></svg><br>      </button><br>      Something went wrong with that request. Please try again.<br>    </div><br><br><br><br>      <script crossorigin="anonymous" integrity="sha256-sMhbbqxUJs0WUt7KGbxYXmiKrOw3DEVBq38Ty1r03AA=" src="https://assets-cdn.github.com/assets/frameworks-b0c85b6eac5426cd1652deca19bc585e688aacec370c4541ab7f13cb5af4dc00.js"></script><br>      <script async="async" crossorigin="anonymous" integrity="sha256-Eks4R6YE/A4V1V6CIyGzz1JsmTva1rGR/s3gZQV1EGQ=" src="https://assets-cdn.github.com/assets/github-124b3847a604fc0e15d55e822321b3cf526c993bdad6b191fecde06505751064.js"></script><br><br><br><br><br><br>    <div class="js-stale-session-flash stale-session-flash flash flash-warn flash-banner hidden"><br>      <svg aria-hidden="true" class="octicon octicon-alert" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M15.72 12.5l-6.85-11.98C8.69 0.21 8.36 0.02 8 0.02s-0.69 0.19-0.87 0.5l-6.85 11.98c-0.18 0.31-0.18 0.69 0 1C0.47 13.81 0.8 14 1.15 14h13.7c0.36 0 0.69-0.19 0.86-0.5S15.89 12.81 15.72 12.5zM9 12H7V10h2V12zM9 9H7V5h2V9z"/></svg><br>      <span class="signed-in-tab-flash">You signed in with another tab or window. <a href="">Reload</a> to refresh your session.</span><br>      <span class="signed-out-tab-flash">You signed out in another tab or window. <a href="">Reload</a> to refresh your session.</span><br>    </div><br>    <div class="facebox" id="facebox" style="display:none;"><br>  <div class="facebox-popup"><br>    <div class="facebox-content" role="dialog" aria-labelledby="facebox-header" aria-describedby="facebox-description"><br>    </div><br>    <button type="button" class="facebox-close js-facebox-close" aria-label="Close modal"><br>      <svg aria-hidden="true" class="octicon octicon-x" height="16" version="1.1" viewbox="0 0 12 16" width="12"><path d="M7.48 8l3.75 3.75-1.48 1.48-3.75-3.75-3.75 3.75-1.48-1.48 3.75-3.75L0.77 4.25l1.48-1.48 3.75 3.75 3.75-3.75 1.48 1.48-3.75 3.75z"/></svg><br>    </button><br>  </div><br></div><br><br>  </body><br></html>


      
    </div>
    <footer class="article-footer">
      <a data-url="http://klina.github.io/2016/04/20/FrequentlyAskedQuestions/" data-id="cin89ld6f0006roig9dfli2lo" class="article-share-link">Поделиться</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-KnownIssues" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2016/04/20/KnownIssues/" class="article-date">
  <time datetime="2016-04-20T02:47:09.162Z" itemprop="datePublished">2016-04-20</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>&lt;!DOCTYPE html&gt;</p>
<html lang="en" class=" is-copy-enabled"><br>  <head prefix="og: http://ogp.me/ns# fb: http://ogp.me/ns/fb# object: http://ogp.me/ns/object# article: http://ogp.me/ns/article# profile: http://ogp.me/ns/profile#"><br>    <meta charset="utf-8"><br><br>    <link crossorigin="anonymous" href="https://assets-cdn.github.com/assets/frameworks-4ca81a569e4b382193f26989979660344b2a86c1039cf44e471d2cdfb70c9ce4.css" integrity="sha256-TKgaVp5LOCGT8mmJl5ZgNEsqhsEDnPRORx0s37cMnOQ=" media="all" rel="stylesheet"><br>    <link crossorigin="anonymous" href="https://assets-cdn.github.com/assets/github-4129627c8cf63edb7480badb70e1a5a8eba9dd069ef776cb5f075a5f2d4047f8.css" integrity="sha256-QSlifIz2Ptt0gLrbcOGlqOup3Qae93bLXwdaXy1AR/g=" media="all" rel="stylesheet"><br><br><br><br>    <link crossorigin="anonymous" href="https://assets-cdn.github.com/assets/site-2d5d1699983d8dd7c384c67dfc183fbace8e3a24866e8822069d599f68e71fb2.css" integrity="sha256-LV0WmZg9jdfDhMZ9/Bg/us6OOiSGbogiBp1Zn2jnH7I=" media="all" rel="stylesheet"><br><br>    <link as="script" href="https://assets-cdn.github.com/assets/frameworks-b0c85b6eac5426cd1652deca19bc585e688aacec370c4541ab7f13cb5af4dc00.js" rel="preload"><br><br>    <link as="script" href="https://assets-cdn.github.com/assets/github-124b3847a604fc0e15d55e822321b3cf526c993bdad6b191fecde06505751064.js" rel="preload"><br><br>    <meta http-equiv="X-UA-Compatible" content="IE=edge"><br>    <meta http-equiv="Content-Language" content="en"><br>    <meta name="viewport" content="width=1020"><br><br><br>    <title>googletest/KnownIssues.md at master · google/googletest · GitHub</title><br>    <link rel="search" type="application/opensearchdescription+xml" href="/opensearch.xml" title="GitHub"><br>    <link rel="fluid-icon" href="https://github.com/fluidicon.png" title="GitHub"><br>    <link rel="apple-touch-icon" href="/apple-touch-icon.png"><br>    <link rel="apple-touch-icon" sizes="57x57" href="/apple-touch-icon-57x57.png"><br>    <link rel="apple-touch-icon" sizes="60x60" href="/apple-touch-icon-60x60.png"><br>    <link rel="apple-touch-icon" sizes="72x72" href="/apple-touch-icon-72x72.png"><br>    <link rel="apple-touch-icon" sizes="76x76" href="/apple-touch-icon-76x76.png"><br>    <link rel="apple-touch-icon" sizes="114x114" href="/apple-touch-icon-114x114.png"><br>    <link rel="apple-touch-icon" sizes="120x120" href="/apple-touch-icon-120x120.png"><br>    <link rel="apple-touch-icon" sizes="144x144" href="/apple-touch-icon-144x144.png"><br>    <link rel="apple-touch-icon" sizes="152x152" href="/apple-touch-icon-152x152.png"><br>    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon-180x180.png"><br>    <meta property="fb:app_id" content="1401488693436528"><br><br>      <meta content="https://avatars2.githubusercontent.com/u/1342004?v=3&amp;s=400" name="twitter:image:src"><meta content="@github" name="twitter:site"><meta content="summary" name="twitter:card"><meta content="google/googletest" name="twitter:title"><meta content="googletest - Google Test" name="twitter:description"><br>      <meta content="https://avatars2.githubusercontent.com/u/1342004?v=3&amp;s=400" property="og:image"><meta content="GitHub" property="og:site_name"><meta content="object" property="og:type"><meta content="google/googletest" property="og:title"><meta content="https://github.com/google/googletest" property="og:url"><meta content="googletest - Google Test" property="og:description"><br>      <meta name="browser-stats-url" content="https://api.github.com/_private/browser/stats"><br>    <meta name="browser-errors-url" content="https://api.github.com/_private/browser/errors"><br>    <link rel="assets" href="https://assets-cdn.github.com/"><br><br>    <meta name="pjax-timeout" content="1000"><br><br><br>    <meta name="msapplication-TileImage" content="/windows-tile.png"><br>    <meta name="msapplication-TileColor" content="#ffffff"><br>    <meta name="selected-link" value="repo_source" data-pjax-transient=""><br><br>    <meta name="google-site-verification" content="KT5gs8h0wvaagLKAVWq8bbeNwnZZK1r1XQysX3xurLU"><br><meta name="google-site-verification" content="ZzhVyEFwb7w3e0-uOTltm8Jsck2F5StVihD0exw2fsA"><br>    <meta name="google-analytics" content="UA-3769691-2"><br><br><meta content="collector.githubapp.com" name="octolytics-host"><meta content="github" name="octolytics-app-id"><meta content="3E9F4DA5:5EFF:1C6CF43C:5715E71C" name="octolytics-dimension-request_id"><br><meta content="/&lt;user-name&gt;/&lt;repo-name&gt;/blob/show" data-pjax-transient="true" name="analytics-location"><br><br><br><br>  <meta class="js-ga-set" name="dimension1" content="Logged Out"><br><br><br><br>        <meta name="hostname" content="github.com"><br>    <meta name="user-login" content=""><br><br>        <meta name="expected-hostname" content="github.com"><br>      <meta name="js-proxy-site-detection-payload" content="YzUwNDU5YWYzYTBhNTQ0YWNiZjkxNjYwNzdhNjgyMmM4NzZmZmYzOWE5YzZlOGE5MjM0MzU0YjQ2ZGYzY2EwZXx7InJlbW90ZV9hZGRyZXNzIjoiNjIuMTU5Ljc3LjE2NSIsInJlcXVlc3RfaWQiOiIzRTlGNERBNTo1RUZGOjFDNkNGNDNDOjU3MTVFNzFDIiwidGltZXN0YW1wIjoxNDYxMDUzMjE2fQ=="><br><br><br>      <link rel="mask-icon" href="https://assets-cdn.github.com/pinned-octocat.svg" color="#4078c0"><br>      <link rel="icon" type="image/x-icon" href="https://assets-cdn.github.com/favicon.ico"><br><br>    <meta content="8cb1221b98aea525b7168ab311b77ee96e0e8987" name="form-nonce"><br><br>    <meta http-equiv="x-pjax-version" content="dc812ac6dabadd5440144e9805d8c8fd"><br><br><br><br>  <meta name="description" content="googletest - Google Test"><br>  <meta name="go-import" content="github.com/google/googletest git https://github.com/google/googletest.git"><br><br>  <meta content="1342004" name="octolytics-dimension-user_id"><meta content="google" name="octolytics-dimension-user_login"><meta content="39840932" name="octolytics-dimension-repository_id"><meta content="google/googletest" name="octolytics-dimension-repository_nwo"><meta content="true" name="octolytics-dimension-repository_public"><meta content="false" name="octolytics-dimension-repository_is_fork"><meta content="39840932" name="octolytics-dimension-repository_network_root_id"><meta content="google/googletest" name="octolytics-dimension-repository_network_root_nwo"><br>  <link href="https://github.com/google/googletest/commits/master.atom" rel="alternate" title="Recent Commits to googletest:master" type="application/atom+xml"><br><br><br>      <link rel="canonical" href="https://github.com/google/googletest/blob/master/googlemock/docs/KnownIssues.md" data-pjax-transient=""><br>  </head><br><br><br>  <body class="logged-out   env-production windows vis-public page-blob"><br>    <div id="js-pjax-loader-bar" class="pjax-loader-bar"></div><br>    <a href="#start-of-content" tabindex="1" class="accessibility-aid js-skip-to-content">Skip to content</a><br><br><br><br><br><br><br><br>          <header class="site-header js-details-container" role="banner"><br>  <div class="container-responsive"><br>    <a class="header-logo-invertocat" href="https://github.com/" aria-label="Homepage" data-ga-click="(Logged out) Header, go to homepage, icon:logo-wordmark" target="_blank" rel="external"><br>      <svg aria-hidden="true" class="octicon octicon-mark-github" height="32" version="1.1" viewbox="0 0 16 16" width="32"><path d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59 0.4 0.07 0.55-0.17 0.55-0.38 0-0.19-0.01-0.82-0.01-1.49-2.01 0.37-2.53-0.49-2.69-0.94-0.09-0.23-0.48-0.94-0.82-1.13-0.28-0.15-0.68-0.52-0.01-0.53 0.63-0.01 1.08 0.58 1.23 0.82 0.72 1.21 1.87 0.87 2.33 0.66 0.07-0.52 0.28-0.87 0.51-1.07-1.78-0.2-3.64-0.89-3.64-3.95 0-0.87 0.31-1.59 0.82-2.15-0.08-0.2-0.36-1.02 0.08-2.12 0 0 0.67-0.21 2.2 0.82 0.64-0.18 1.32-0.27 2-0.27 0.68 0 1.36 0.09 2 0.27 1.53-1.04 2.2-0.82 2.2-0.82 0.44 1.1 0.16 1.92 0.08 2.12 0.51 0.56 0.82 1.27 0.82 2.15 0 3.07-1.87 3.75-3.65 3.95 0.29 0.25 0.54 0.73 0.54 1.48 0 1.07-0.01 1.93-0.01 2.2 0 0.21 0.15 0.46 0.55 0.38C13.71 14.53 16 11.53 16 8 16 3.58 12.42 0 8 0z"/></svg><br>    </a><br><br>    <button class="btn-link right site-header-toggle js-details-target" type="button" aria-label="Toggle navigation"><br>      <svg aria-hidden="true" class="octicon octicon-three-bars" height="24" version="1.1" viewbox="0 0 12 16" width="18"><path d="M11.41 9H0.59c-0.59 0-0.59-0.41-0.59-1s0-1 0.59-1h10.81c0.59 0 0.59 0.41 0.59 1s0 1-0.59 1z m0-4H0.59c-0.59 0-0.59-0.41-0.59-1s0-1 0.59-1h10.81c0.59 0 0.59 0.41 0.59 1s0 1-0.59 1zM0.59 11h10.81c0.59 0 0.59 0.41 0.59 1s0 1-0.59 1H0.59c-0.59 0-0.59-0.41-0.59-1s0-1 0.59-1z"/></svg><br>    </button><br><br>    <div class="site-header-menu"><br>      <nav class="site-header-nav site-header-nav-main"><br>        <a href="/personal" class="js-selected-navigation-item nav-item nav-item-personal" data-ga-click="Header, click, Nav menu - item:personal" data-selected-links="/personal /personal"><br>          Personal<br></a>        <a href="/open-source" class="js-selected-navigation-item nav-item nav-item-opensource" data-ga-click="Header, click, Nav menu - item:opensource" data-selected-links="/open-source /open-source"><br>          Open source<br></a>        <a href="/business" class="js-selected-navigation-item nav-item nav-item-business" data-ga-click="Header, click, Nav menu - item:business" data-selected-links="/business /business/features /business/customers /business"><br>          Business<br></a>        <a href="/explore" class="js-selected-navigation-item nav-item nav-item-explore" data-ga-click="Header, click, Nav menu - item:explore" data-selected-links="/explore /trending /trending/developers /integrations /integrations/feature/code /integrations/feature/collaborate /integrations/feature/ship /explore"><br>          Explore<br></a>      </nav><br><br>      <div class="site-header-actions"><br>            <a class="btn btn-primary site-header-actions-btn" href="/join?source=header-repo" data-ga-click="(Logged out) Header, clicked Sign up, text:sign-up">Sign up</a><br>          <a class="btn site-header-actions-btn mr-2" href="/login?return_to=%2Fgoogle%2Fgoogletest%2Fblob%2Fmaster%2Fgooglemock%2Fdocs%2FKnownIssues.md" data-ga-click="(Logged out) Header, clicked Sign in, text:sign-in">Sign in</a><br>      </div><br><br>        <nav class="site-header-nav site-header-nav-secondary"><br>          <a class="nav-item" href="/pricing">Pricing</a><br>          <a class="nav-item" href="/blog">Blog</a><br>          <a class="nav-item" href="https://help.github.com" target="_blank" rel="external">Support</a><br>          <a class="nav-item header-search-link" href="https://github.com/search" target="_blank" rel="external">Search GitHub</a><br>              <div class="header-search scoped-search site-scoped-search js-site-search" role="search"><br>  <!-- </textarea> --><!-- '"` --><form accept-charset="UTF-8" action="/google/googletest/search" class="js-site-search-form" data-scoped-search-url="/google/googletest/search" data-unscoped-search-url="/search" method="get"><div style="margin:0;padding:0;display:inline"><input name="utf8" type="hidden" value="&#x2713;"></div><br>    <label class="form-control header-search-wrapper js-chromeless-input-container"><br>      <div class="header-search-scope">This repository</div><br>      <input type="text" class="form-control header-search-input js-site-search-focus js-site-search-field is-clearable" data-hotkey="s" name="q" placeholder="Search" aria-label="Search this repository" data-unscoped-placeholder="Search GitHub" data-scoped-placeholder="Search" tabindex="1" autocapitalize="off"><br>    </label><br></form></div><br><br>        </nav><br>    </div><br>  </div><br></header><br><br><br><br>    <div id="start-of-content" class="accessibility-aid"></div><br><br>      <div id="js-flash-container"><br></div><br><br><br>    <div role="main" class="main-content"><br>        <div itemscope="" itemtype="http://schema.org/SoftwareSourceCode"><br>    <div id="js-repo-pjax-container" data-pjax-container=""><br><br><div class="pagehead repohead instapaper_ignore readability-menu experiment-repo-nav"><br>  <div class="container repohead-details-container"><br><br><br><br><ul class="pagehead-actions"><br><br>  <li><br>      <a href="/login?return_to=%2Fgoogle%2Fgoogletest" class="btn btn-sm btn-with-count tooltipped tooltipped-n" aria-label="You must be signed in to watch a repository" rel="nofollow"><br>    <svg aria-hidden="true" class="octicon octicon-eye" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M8.06 2C3 2 0 8 0 8s3 6 8.06 6c4.94 0 7.94-6 7.94-6S13 2 8.06 2z m-0.06 10c-2.2 0-4-1.78-4-4 0-2.2 1.8-4 4-4 2.22 0 4 1.8 4 4 0 2.22-1.78 4-4 4z m2-4c0 1.11-0.89 2-2 2s-2-0.89-2-2 0.89-2 2-2 2 0.89 2 2z"/></svg><br>    Watch<br>  </a><br>  <a class="social-count" href="/google/googletest/watchers"><br>    258<br>  </a><br><br>  </li><br><br>  <li><br>      <a href="/login?return_to=%2Fgoogle%2Fgoogletest" class="btn btn-sm btn-with-count tooltipped tooltipped-n" aria-label="You must be signed in to star a repository" rel="nofollow"><br>    <svg aria-hidden="true" class="octicon octicon-star" height="16" version="1.1" viewbox="0 0 14 16" width="14"><path d="M14 6l-4.9-0.64L7 1 4.9 5.36 0 6l3.6 3.26L2.67 14l4.33-2.33 4.33 2.33L10.4 9.26 14 6z"/></svg><br>    Star<br>  </a><br><br>    <a class="social-count js-social-count" href="/google/googletest/stargazers"><br>      1,987<br>    </a><br><br>  </li><br><br>  <li><br>      <a href="/login?return_to=%2Fgoogle%2Fgoogletest" class="btn btn-sm btn-with-count tooltipped tooltipped-n" aria-label="You must be signed in to fork a repository" rel="nofollow"><br>        <svg aria-hidden="true" class="octicon octicon-repo-forked" height="16" version="1.1" viewbox="0 0 10 16" width="10"><path d="M8 1c-1.11 0-2 0.89-2 2 0 0.73 0.41 1.38 1 1.72v1.28L5 8 3 6v-1.28c0.59-0.34 1-0.98 1-1.72 0-1.11-0.89-2-2-2S0 1.89 0 3c0 0.73 0.41 1.38 1 1.72v1.78l3 3v1.78c-0.59 0.34-1 0.98-1 1.72 0 1.11 0.89 2 2 2s2-0.89 2-2c0-0.73-0.41-1.38-1-1.72V9.5l3-3V4.72c0.59-0.34 1-0.98 1-1.72 0-1.11-0.89-2-2-2zM2 4.2c-0.66 0-1.2-0.55-1.2-1.2s0.55-1.2 1.2-1.2 1.2 0.55 1.2 1.2-0.55 1.2-1.2 1.2z m3 10c-0.66 0-1.2-0.55-1.2-1.2s0.55-1.2 1.2-1.2 1.2 0.55 1.2 1.2-0.55 1.2-1.2 1.2z m3-10c-0.66 0-1.2-0.55-1.2-1.2s0.55-1.2 1.2-1.2 1.2 0.55 1.2 1.2-0.55 1.2-1.2 1.2z"/></svg><br>        Fork<br>      </a><br><br>    <a href="/google/googletest/network" class="social-count"><br>      704<br>    </a><br>  </li><br></ul><br><br>    <h1 class="entry-title public "><br>  <svg aria-hidden="true" class="octicon octicon-repo" height="16" version="1.1" viewbox="0 0 12 16" width="12"><path d="M4 9h-1v-1h1v1z m0-3h-1v1h1v-1z m0-2h-1v1h1v-1z m0-2h-1v1h1v-1z m8-1v12c0 0.55-0.45 1-1 1H6v2l-1.5-1.5-1.5 1.5V14H1c-0.55 0-1-0.45-1-1V1C0 0.45 0.45 0 1 0h10c0.55 0 1 0.45 1 1z m-1 10H1v2h2v-1h3v1h5V11z m0-10H2v9h9V1z"/></svg><br>  <span class="author" itemprop="author"><a href="/google" class="url fn" rel="author">google</a></span><!--
--><span class="path-divider">/</span><!--
--><strong itemprop="name"><a href="/google/googletest" data-pjax="#js-repo-pjax-container">googletest</a></strong><br><br></h1><br><br>  </div><br>  <div class="container"><br><br><nav class="reponav js-repo-nav js-sidenav-container-pjax" itemscope="" itemtype="http://schema.org/BreadcrumbList" role="navigation" data-pjax="#js-repo-pjax-container"><br><br>  <span itemscope="" itemtype="http://schema.org/ListItem" itemprop="itemListElement"><br>    <a href="/google/googletest" aria-selected="true" class="js-selected-navigation-item selected reponav-item" data-hotkey="g c" data-selected-links="repo_source repo_downloads repo_commits repo_releases repo_tags repo_branches /google/googletest" itemprop="url"><br>      <svg aria-hidden="true" class="octicon octicon-code" height="16" version="1.1" viewbox="0 0 14 16" width="14"><path d="M9.5 3l-1.5 1.5 3.5 3.5L8 11.5l1.5 1.5 4.5-5L9.5 3zM4.5 3L0 8l4.5 5 1.5-1.5L2.5 8l3.5-3.5L4.5 3z"/></svg><br>      <span itemprop="name">Code</span><br>      <meta itemprop="position" content="1"><br></a>  </span><br><br>    <span itemscope="" itemtype="http://schema.org/ListItem" itemprop="itemListElement"><br>      <a href="/google/googletest/issues" class="js-selected-navigation-item reponav-item" data-hotkey="g i" data-selected-links="repo_issues repo_labels repo_milestones /google/googletest/issues" itemprop="url"><br>        <svg aria-hidden="true" class="octicon octicon-issue-opened" height="16" version="1.1" viewbox="0 0 14 16" width="14"><path d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7S10.14 13.7 7 13.7 1.3 11.14 1.3 8s2.56-5.7 5.7-5.7m0-1.3C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7S10.86 1 7 1z m1 3H6v5h2V4z m0 6H6v2h2V10z"/></svg><br>        <span itemprop="name">Issues</span><br>        <span class="counter">247</span><br>        <meta itemprop="position" content="2"><br></a>    </span><br><br>  <span itemscope="" itemtype="http://schema.org/ListItem" itemprop="itemListElement"><br>    <a href="/google/googletest/pulls" class="js-selected-navigation-item reponav-item" data-hotkey="g p" data-selected-links="repo_pulls /google/googletest/pulls" itemprop="url"><br>      <svg aria-hidden="true" class="octicon octicon-git-pull-request" height="16" version="1.1" viewbox="0 0 12 16" width="12"><path d="M11 11.28c0-1.73 0-6.28 0-6.28-0.03-0.78-0.34-1.47-0.94-2.06s-1.28-0.91-2.06-0.94c0 0-1.02 0-1 0V0L4 3l3 3V4h1c0.27 0.02 0.48 0.11 0.69 0.31s0.3 0.42 0.31 0.69v6.28c-0.59 0.34-1 0.98-1 1.72 0 1.11 0.89 2 2 2s2-0.89 2-2c0-0.73-0.41-1.38-1-1.72z m-1 2.92c-0.66 0-1.2-0.55-1.2-1.2s0.55-1.2 1.2-1.2 1.2 0.55 1.2 1.2-0.55 1.2-1.2 1.2zM4 3c0-1.11-0.89-2-2-2S0 1.89 0 3c0 0.73 0.41 1.38 1 1.72 0 1.55 0 5.56 0 6.56-0.59 0.34-1 0.98-1 1.72 0 1.11 0.89 2 2 2s2-0.89 2-2c0-0.73-0.41-1.38-1-1.72V4.72c0.59-0.34 1-0.98 1-1.72z m-0.8 10c0 0.66-0.55 1.2-1.2 1.2s-1.2-0.55-1.2-1.2 0.55-1.2 1.2-1.2 1.2 0.55 1.2 1.2z m-1.2-8.8c-0.66 0-1.2-0.55-1.2-1.2s0.55-1.2 1.2-1.2 1.2 0.55 1.2 1.2-0.55 1.2-1.2 1.2z"/></svg><br>      <span itemprop="name">Pull requests</span><br>      <span class="counter">42</span><br>      <meta itemprop="position" content="3"><br></a>  </span><br><br><br>  <a href="/google/googletest/pulse" class="js-selected-navigation-item reponav-item" data-selected-links="pulse /google/googletest/pulse"><br>    <svg aria-hidden="true" class="octicon octicon-pulse" height="16" version="1.1" viewbox="0 0 14 16" width="14"><path d="M11.5 8L8.8 5.4 6.6 8.5 5.5 1.6 2.38 8H0V10h3.6L4.5 8.2l0.9 5.4L9 8.5l1.6 1.5H14V8H11.5z"/></svg><br>    Pulse<br></a><br>  <a href="/google/googletest/graphs" class="js-selected-navigation-item reponav-item" data-selected-links="repo_graphs repo_contributors /google/googletest/graphs"><br>    <svg aria-hidden="true" class="octicon octicon-graph" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M16 14v1H0V0h1v14h15z m-11-1H3V8h2v5z m4 0H7V3h2v10z m4 0H11V6h2v7z"/></svg><br>    Graphs<br></a><br><br></nav><br><br>  </div><br></div><br><br><div class="container new-discussion-timeline experiment-repo-nav"><br>  <div class="repository-content"><br><br><br><br><a href="/google/googletest/blob/d225acc90bc3a8c420a9bcd1f033033c1ccd7fe0/googlemock/docs/KnownIssues.md" class="hidden js-permalink-shortcut" data-hotkey="y">Permalink</a><br><br><!-- blob contrib key: blob_contributors:v21:f62c240fd531aeeeba15498330b1c365 --><br><br><div class="file-navigation js-zeroclipboard-container"><br><br><div class="select-menu branch-select-menu js-menu-container js-select-menu left"><br>  <button class="btn btn-sm select-menu-button js-menu-target css-truncate" data-hotkey="w" title="master" type="button" aria-label="Switch branches or tags" tabindex="0" aria-haspopup="true"><br>    <i>Branch:</i><br>    <span class="js-select-button css-truncate-target">master</span><br>  </button><br><br>  <div class="select-menu-modal-holder js-menu-content js-navigation-container" data-pjax="" aria-hidden="true"><br><br>    <div class="select-menu-modal"><br>      <div class="select-menu-header"><br>        <svg aria-label="Close" class="octicon octicon-x js-menu-close" height="16" role="img" version="1.1" viewbox="0 0 12 16" width="12"><path d="M7.48 8l3.75 3.75-1.48 1.48-3.75-3.75-3.75 3.75-1.48-1.48 3.75-3.75L0.77 4.25l1.48-1.48 3.75 3.75 3.75-3.75 1.48 1.48-3.75 3.75z"/></svg><br>        <span class="select-menu-title">Switch branches/tags</span><br>      </div><br><br>      <div class="select-menu-filters"><br>        <div class="select-menu-text-filter"><br>          <input type="text" aria-label="Filter branches/tags" id="context-commitish-filter-field" class="form-control js-filterable-field js-navigation-enable" placeholder="Filter branches/tags"><br>        </div><br>        <div class="select-menu-tabs"><br>          <ul><br>            <li class="select-menu-tab"><br>              <a href="#" data-tab-filter="branches" data-filter-placeholder="Filter branches/tags" class="js-select-menu-tab" role="tab">Branches</a><br>            </li><br>            <li class="select-menu-tab"><br>              <a href="#" data-tab-filter="tags" data-filter-placeholder="Find a tag…" class="js-select-menu-tab" role="tab">Tags</a><br>            </li><br>          </ul><br>        </div><br>      </div><br><br>      <div class="select-menu-list select-menu-tab-bucket js-select-menu-tab-bucket" data-tab-filter="branches" role="menu"><br><br>        <div data-filterable-for="context-commitish-filter-field" data-filterable-type="substring"><br><br><br>            <a class="select-menu-item js-navigation-item js-navigation-open " href="/google/googletest/blob/BillyDonahue-patch-1/googlemock/docs/KnownIssues.md" data-name="BillyDonahue-patch-1" data-skip-pjax="true" rel="nofollow"><br>              <svg aria-hidden="true" class="octicon octicon-check select-menu-item-icon" height="16" version="1.1" viewbox="0 0 12 16" width="12"><path d="M12 5L4 13 0 9l1.5-1.5 2.5 2.5 6.5-6.5 1.5 1.5z"/></svg><br>              <span class="select-menu-item-text css-truncate-target js-select-menu-filter-text" title="BillyDonahue-patch-1"><br>                BillyDonahue-patch-1<br>              </span><br>            </a><br>            <a class="select-menu-item js-navigation-item js-navigation-open selected" href="/google/googletest/blob/master/googlemock/docs/KnownIssues.md" data-name="master" data-skip-pjax="true" rel="nofollow"><br>              <svg aria-hidden="true" class="octicon octicon-check select-menu-item-icon" height="16" version="1.1" viewbox="0 0 12 16" width="12"><path d="M12 5L4 13 0 9l1.5-1.5 2.5 2.5 6.5-6.5 1.5 1.5z"/></svg><br>              <span class="select-menu-item-text css-truncate-target js-select-menu-filter-text" title="master"><br>                master<br>              </span><br>            </a><br>        </div><br><br>          <div class="select-menu-no-results">Nothing to show</div><br>      </div><br><br>      <div class="select-menu-list select-menu-tab-bucket js-select-menu-tab-bucket" data-tab-filter="tags"><br>        <div data-filterable-for="context-commitish-filter-field" data-filterable-type="substring"><br><br><br>            <a class="select-menu-item js-navigation-item js-navigation-open " href="/google/googletest/tree/release-1.7.0/googlemock/docs/KnownIssues.md" data-name="release-1.7.0" data-skip-pjax="true" rel="nofollow"><br>              <svg aria-hidden="true" class="octicon octicon-check select-menu-item-icon" height="16" version="1.1" viewbox="0 0 12 16" width="12"><path d="M12 5L4 13 0 9l1.5-1.5 2.5 2.5 6.5-6.5 1.5 1.5z"/></svg><br>              <span class="select-menu-item-text css-truncate-target" title="release-1.7.0"><br>                release-1.7.0<br>              </span><br>            </a><br>            <a class="select-menu-item js-navigation-item js-navigation-open " href="/google/googletest/tree/release-1.6.0/googlemock/docs/KnownIssues.md" data-name="release-1.6.0" data-skip-pjax="true" rel="nofollow"><br>              <svg aria-hidden="true" class="octicon octicon-check select-menu-item-icon" height="16" version="1.1" viewbox="0 0 12 16" width="12"><path d="M12 5L4 13 0 9l1.5-1.5 2.5 2.5 6.5-6.5 1.5 1.5z"/></svg><br>              <span class="select-menu-item-text css-truncate-target" title="release-1.6.0"><br>                release-1.6.0<br>              </span><br>            </a><br>            <a class="select-menu-item js-navigation-item js-navigation-open " href="/google/googletest/tree/release-1.5.0/googlemock/docs/KnownIssues.md" data-name="release-1.5.0" data-skip-pjax="true" rel="nofollow"><br>              <svg aria-hidden="true" class="octicon octicon-check select-menu-item-icon" height="16" version="1.1" viewbox="0 0 12 16" width="12"><path d="M12 5L4 13 0 9l1.5-1.5 2.5 2.5 6.5-6.5 1.5 1.5z"/></svg><br>              <span class="select-menu-item-text css-truncate-target" title="release-1.5.0"><br>                release-1.5.0<br>              </span><br>            </a><br>            <a class="select-menu-item js-navigation-item js-navigation-open " href="/google/googletest/tree/release-1.4.0/googlemock/docs/KnownIssues.md" data-name="release-1.4.0" data-skip-pjax="true" rel="nofollow"><br>              <svg aria-hidden="true" class="octicon octicon-check select-menu-item-icon" height="16" version="1.1" viewbox="0 0 12 16" width="12"><path d="M12 5L4 13 0 9l1.5-1.5 2.5 2.5 6.5-6.5 1.5 1.5z"/></svg><br>              <span class="select-menu-item-text css-truncate-target" title="release-1.4.0"><br>                release-1.4.0<br>              </span><br>            </a><br>            <a class="select-menu-item js-navigation-item js-navigation-open " href="/google/googletest/tree/release-1.3.0/googlemock/docs/KnownIssues.md" data-name="release-1.3.0" data-skip-pjax="true" rel="nofollow"><br>              <svg aria-hidden="true" class="octicon octicon-check select-menu-item-icon" height="16" version="1.1" viewbox="0 0 12 16" width="12"><path d="M12 5L4 13 0 9l1.5-1.5 2.5 2.5 6.5-6.5 1.5 1.5z"/></svg><br>              <span class="select-menu-item-text css-truncate-target" title="release-1.3.0"><br>                release-1.3.0<br>              </span><br>            </a><br>            <a class="select-menu-item js-navigation-item js-navigation-open " href="/google/googletest/tree/release-1.2.1/googlemock/docs/KnownIssues.md" data-name="release-1.2.1" data-skip-pjax="true" rel="nofollow"><br>              <svg aria-hidden="true" class="octicon octicon-check select-menu-item-icon" height="16" version="1.1" viewbox="0 0 12 16" width="12"><path d="M12 5L4 13 0 9l1.5-1.5 2.5 2.5 6.5-6.5 1.5 1.5z"/></svg><br>              <span class="select-menu-item-text css-truncate-target" title="release-1.2.1"><br>                release-1.2.1<br>              </span><br>            </a><br>            <a class="select-menu-item js-navigation-item js-navigation-open " href="/google/googletest/tree/release-1.2.0/googlemock/docs/KnownIssues.md" data-name="release-1.2.0" data-skip-pjax="true" rel="nofollow"><br>              <svg aria-hidden="true" class="octicon octicon-check select-menu-item-icon" height="16" version="1.1" viewbox="0 0 12 16" width="12"><path d="M12 5L4 13 0 9l1.5-1.5 2.5 2.5 6.5-6.5 1.5 1.5z"/></svg><br>              <span class="select-menu-item-text css-truncate-target" title="release-1.2.0"><br>                release-1.2.0<br>              </span><br>            </a><br>            <a class="select-menu-item js-navigation-item js-navigation-open " href="/google/googletest/tree/release-1.1.0/googlemock/docs/KnownIssues.md" data-name="release-1.1.0" data-skip-pjax="true" rel="nofollow"><br>              <svg aria-hidden="true" class="octicon octicon-check select-menu-item-icon" height="16" version="1.1" viewbox="0 0 12 16" width="12"><path d="M12 5L4 13 0 9l1.5-1.5 2.5 2.5 6.5-6.5 1.5 1.5z"/></svg><br>              <span class="select-menu-item-text css-truncate-target" title="release-1.1.0"><br>                release-1.1.0<br>              </span><br>            </a><br>            <a class="select-menu-item js-navigation-item js-navigation-open " href="/google/googletest/tree/release-1.0.1/googlemock/docs/KnownIssues.md" data-name="release-1.0.1" data-skip-pjax="true" rel="nofollow"><br>              <svg aria-hidden="true" class="octicon octicon-check select-menu-item-icon" height="16" version="1.1" viewbox="0 0 12 16" width="12"><path d="M12 5L4 13 0 9l1.5-1.5 2.5 2.5 6.5-6.5 1.5 1.5z"/></svg><br>              <span class="select-menu-item-text css-truncate-target" title="release-1.0.1"><br>                release-1.0.1<br>              </span><br>            </a><br>            <a class="select-menu-item js-navigation-item js-navigation-open " href="/google/googletest/tree/release-1.0.0/googlemock/docs/KnownIssues.md" data-name="release-1.0.0" data-skip-pjax="true" rel="nofollow"><br>              <svg aria-hidden="true" class="octicon octicon-check select-menu-item-icon" height="16" version="1.1" viewbox="0 0 12 16" width="12"><path d="M12 5L4 13 0 9l1.5-1.5 2.5 2.5 6.5-6.5 1.5 1.5z"/></svg><br>              <span class="select-menu-item-text css-truncate-target" title="release-1.0.0"><br>                release-1.0.0<br>              </span><br>            </a><br>        </div><br><br>        <div class="select-menu-no-results">Nothing to show</div><br>      </div><br><br>    </div><br>  </div><br></div><br><br>  <div class="btn-group right"><br>    <a href="/google/googletest/find/master" class="js-pjax-capture-input btn btn-sm" data-pjax="" data-hotkey="t"><br>      Find file<br>    </a><br>    <button aria-label="Copy file path to clipboard" class="js-zeroclipboard btn btn-sm zeroclipboard-button tooltipped tooltipped-s" data-copied-hint="Copied!" type="button">Copy path</button><br>  </div><br>  <div class="breadcrumb js-zeroclipboard-target"><br>    <span class="repo-root js-repo-root"><span class="js-path-segment"><a href="/google/googletest"><span>googletest</span></a></span></span><span class="separator">/</span><span class="js-path-segment"><a href="/google/googletest/tree/master/googlemock"><span>googlemock</span></a></span><span class="separator">/</span><span class="js-path-segment"><a href="/google/googletest/tree/master/googlemock/docs"><span>docs</span></a></span><span class="separator">/</span><strong class="final-path">KnownIssues.md</strong><br>  </div><br></div><br><br><include-fragment class="commit-tease" src="/google/googletest/contributors/master/googlemock/docs/KnownIssues.md"><br>  <div><br>    Fetching contributors&hellip;<br>  </div><br><br>  <div class="commit-tease-contributors"><br>    <img alt="" class="loader-loading left" height="16" src="https://assets-cdn.github.com/images/spinners/octocat-spinner-32-EAF2F5.gif" width="16"><br>    <span class="loader-error">Cannot retrieve contributors at this time</span><br>  </div><br></include-fragment><br><div class="file"><br>  <div class="file-header"><br>  <div class="file-actions"><br><br>    <div class="btn-group"><br>      <a href="/google/googletest/raw/master/googlemock/docs/KnownIssues.md" class="btn btn-sm " id="raw-url">Raw</a><br>        <a href="/google/googletest/blame/master/googlemock/docs/KnownIssues.md" class="btn btn-sm js-update-url-with-hash">Blame</a><br>      <a href="/google/googletest/commits/master/googlemock/docs/KnownIssues.md" class="btn btn-sm " rel="nofollow">History</a><br>    </div><br><br>        <a class="btn-octicon tooltipped tooltipped-nw" href="https://windows.github.com" aria-label="Open this file in GitHub Desktop" data-ga-click="Repository, open with desktop, type:windows" target="_blank" rel="external"><br>            <svg aria-hidden="true" class="octicon octicon-device-desktop" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M15 2H1c-0.55 0-1 0.45-1 1v9c0 0.55 0.45 1 1 1h5.34c-0.25 0.61-0.86 1.39-2.34 2h8c-1.48-0.61-2.09-1.39-2.34-2h5.34c0.55 0 1-0.45 1-1V3c0-0.55-0.45-1-1-1z m0 9H1V3h14v8z"/></svg><br>        </a><br><br>        <button type="button" class="btn-octicon disabled tooltipped tooltipped-nw" aria-label="You must be signed in to make or propose changes"><br>          <svg aria-hidden="true" class="octicon octicon-pencil" height="16" version="1.1" viewbox="0 0 14 16" width="14"><path d="M0 12v3h3l8-8-3-3L0 12z m3 2H1V12h1v1h1v1z m10.3-9.3l-1.3 1.3-3-3 1.3-1.3c0.39-0.39 1.02-0.39 1.41 0l1.59 1.59c0.39 0.39 0.39 1.02 0 1.41z"/></svg><br>        </button><br>        <button type="button" class="btn-octicon btn-octicon-danger disabled tooltipped tooltipped-nw" aria-label="You must be signed in to make or propose changes"><br>          <svg aria-hidden="true" class="octicon octicon-trashcan" height="16" version="1.1" viewbox="0 0 12 16" width="12"><path d="M10 2H8c0-0.55-0.45-1-1-1H4c-0.55 0-1 0.45-1 1H1c-0.55 0-1 0.45-1 1v1c0 0.55 0.45 1 1 1v9c0 0.55 0.45 1 1 1h7c0.55 0 1-0.45 1-1V5c0.55 0 1-0.45 1-1v-1c0-0.55-0.45-1-1-1z m-1 12H2V5h1v8h1V5h1v8h1V5h1v8h1V5h1v9z m1-10H1v-1h9v1z"/></svg><br>        </button><br>  </div><br><br>  <div class="file-info"><br>      19 lines (9 sloc)<br>      <span class="file-info-divider"></span><br>    1.49 KB<br>  </div><br></div><br><br><br>  <div id="readme" class="readme blob instapaper_body"><br>    <article class="markdown-body entry-content" itemprop="text"><p>As any non-trivial software system, Google Mock has some known limitations and problems.  We are working on improving it, and welcome your help!  The follow is a list of issues we know about.</p><br><br><h2><a id="user-content-readme-contains-outdated-information-on-google-mocks-compatibility-with-other-testing-frameworks" class="anchor" href="#readme-contains-outdated-information-on-google-mocks-compatibility-with-other-testing-frameworks" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"/></svg></a>README contains outdated information on Google Mock’s compatibility with other testing frameworks</h2><br><br><p>The <code>README</code> file in release 1.1.0 still says that Google Mock only works with Google Test.  Actually, you can configure Google Mock to work with any testing framework you choose.</p><br><br><h2><a id="user-content-tests-failing-on-machines-using-power-pc-cpus-eg-some-macs" class="anchor" href="#tests-failing-on-machines-using-power-pc-cpus-eg-some-macs" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"/></svg></a>Tests failing on machines using Power PC CPUs (e.g. some Macs)</h2><br><br><p><code>gmock_output_test</code> and <code>gmock-printers_test</code> are known to fail with Power PC CPUs.  This is due to portability issues with these tests, and is not an indication of problems in Google Mock itself.  You can safely ignore them.</p><br><br><h2><a id="user-content-failed-to-resolve-libgtestso0-in-tests-when-built-against-installed-google-test" class="anchor" href="#failed-to-resolve-libgtestso0-in-tests-when-built-against-installed-google-test" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"/></svg></a>Failed to resolve libgtest.so.0 in tests when built against installed Google Test</h2><br><br><p>This only applies if you manually built and installed Google Test, and then built a Google Mock against it (either explicitly, or because gtest-config was in your path post-install). In this situation, Libtool has a known issue with certain systems’ ldconfig setup:</p><br><br><p><a href="http://article.gmane.org/gmane.comp.sysutils.automake.general/9025" target="_blank" rel="external">http://article.gmane.org/gmane.comp.sysutils.automake.general/9025</a></p><br><br><p>This requires a manual run of “sudo ldconfig” after the “sudo make install” for Google Test before any binaries which link against it can be executed. This isn’t a bug in our install, but we should at least have documented it or hacked a work-around into our install. We should have one of these solutions in our next release.</p><br></article><br>  </div><br><br></div><br><br><button type="button" data-facebox="#jump-to-line" data-facebox-class="linejump" data-hotkey="l" class="hidden">Jump to Line</button><br><div id="jump-to-line" style="display:none"><br>  <!-- </textarea> --><!-- '"` --><form accept-charset="UTF-8" action="" class="js-jump-to-line-form" method="get"><div style="margin:0;padding:0;display:inline"><input name="utf8" type="hidden" value="&#x2713;"></div><br>    <input class="form-control linejump-input js-jump-to-line-field" type="text" placeholder="Jump to line&hellip;" aria-label="Jump to line" autofocus><br>    <button type="submit" class="btn">Go</button><br></form></div><br><br>  </div><br>  <div class="modal-backdrop"></div><br></div><br><br><br>    </div><br>  </div><br><br>    </div><br><br>        <div class="container site-footer-container"><br>  <div class="site-footer" role="contentinfo"><br>    <ul class="site-footer-links right"><br>        <li><a href="https://status.github.com/" data-ga-click="Footer, go to status, text:status" target="_blank" rel="external">Status</a></li><br>      <li><a href="https://developer.github.com" data-ga-click="Footer, go to api, text:api" target="_blank" rel="external">API</a></li><br>      <li><a href="https://training.github.com" data-ga-click="Footer, go to training, text:training" target="_blank" rel="external">Training</a></li><br>      <li><a href="https://shop.github.com" data-ga-click="Footer, go to shop, text:shop" target="_blank" rel="external">Shop</a></li><br>        <li><a href="https://github.com/blog" data-ga-click="Footer, go to blog, text:blog" target="_blank" rel="external">Blog</a></li><br>        <li><a href="https://github.com/about" data-ga-click="Footer, go to about, text:about" target="_blank" rel="external">About</a></li><br><br>    </ul><br><br>    <a href="https://github.com" aria-label="Homepage" class="site-footer-mark" target="_blank" rel="external"><br>      <svg aria-hidden="true" class="octicon octicon-mark-github" height="24" title="GitHub " version="1.1" viewbox="0 0 16 16" width="24"><path d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59 0.4 0.07 0.55-0.17 0.55-0.38 0-0.19-0.01-0.82-0.01-1.49-2.01 0.37-2.53-0.49-2.69-0.94-0.09-0.23-0.48-0.94-0.82-1.13-0.28-0.15-0.68-0.52-0.01-0.53 0.63-0.01 1.08 0.58 1.23 0.82 0.72 1.21 1.87 0.87 2.33 0.66 0.07-0.52 0.28-0.87 0.51-1.07-1.78-0.2-3.64-0.89-3.64-3.95 0-0.87 0.31-1.59 0.82-2.15-0.08-0.2-0.36-1.02 0.08-2.12 0 0 0.67-0.21 2.2 0.82 0.64-0.18 1.32-0.27 2-0.27 0.68 0 1.36 0.09 2 0.27 1.53-1.04 2.2-0.82 2.2-0.82 0.44 1.1 0.16 1.92 0.08 2.12 0.51 0.56 0.82 1.27 0.82 2.15 0 3.07-1.87 3.75-3.65 3.95 0.29 0.25 0.54 0.73 0.54 1.48 0 1.07-0.01 1.93-0.01 2.2 0 0.21 0.15 0.46 0.55 0.38C13.71 14.53 16 11.53 16 8 16 3.58 12.42 0 8 0z"/></svg><br></a><br>    <ul class="site-footer-links"><br>      <li>&copy; 2016 <span title="0.04322s from github-fe149-cp1-prd.iad.github.net">GitHub</span>, Inc.</li><br>        <li><a href="https://github.com/site/terms" data-ga-click="Footer, go to terms, text:terms" target="_blank" rel="external">Terms</a></li><br>        <li><a href="https://github.com/site/privacy" data-ga-click="Footer, go to privacy, text:privacy" target="_blank" rel="external">Privacy</a></li><br>        <li><a href="https://github.com/security" data-ga-click="Footer, go to security, text:security" target="_blank" rel="external">Security</a></li><br>        <li><a href="https://github.com/contact" data-ga-click="Footer, go to contact, text:contact" target="_blank" rel="external">Contact</a></li><br>        <li><a href="https://help.github.com" data-ga-click="Footer, go to help, text:help" target="_blank" rel="external">Help</a></li><br>    </ul><br>  </div><br></div><br><br><br><br><br><br><br>    <div id="ajax-error-message" class="ajax-error-message flash flash-error"><br>      <svg aria-hidden="true" class="octicon octicon-alert" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M15.72 12.5l-6.85-11.98C8.69 0.21 8.36 0.02 8 0.02s-0.69 0.19-0.87 0.5l-6.85 11.98c-0.18 0.31-0.18 0.69 0 1C0.47 13.81 0.8 14 1.15 14h13.7c0.36 0 0.69-0.19 0.86-0.5S15.89 12.81 15.72 12.5zM9 12H7V10h2V12zM9 9H7V5h2V9z"/></svg><br>      <button type="button" class="flash-close js-flash-close js-ajax-error-dismiss" aria-label="Dismiss error"><br>        <svg aria-hidden="true" class="octicon octicon-x" height="16" version="1.1" viewbox="0 0 12 16" width="12"><path d="M7.48 8l3.75 3.75-1.48 1.48-3.75-3.75-3.75 3.75-1.48-1.48 3.75-3.75L0.77 4.25l1.48-1.48 3.75 3.75 3.75-3.75 1.48 1.48-3.75 3.75z"/></svg><br>      </button><br>      Something went wrong with that request. Please try again.<br>    </div><br><br><br><br>      <script crossorigin="anonymous" integrity="sha256-sMhbbqxUJs0WUt7KGbxYXmiKrOw3DEVBq38Ty1r03AA=" src="https://assets-cdn.github.com/assets/frameworks-b0c85b6eac5426cd1652deca19bc585e688aacec370c4541ab7f13cb5af4dc00.js"></script><br>      <script async="async" crossorigin="anonymous" integrity="sha256-Eks4R6YE/A4V1V6CIyGzz1JsmTva1rGR/s3gZQV1EGQ=" src="https://assets-cdn.github.com/assets/github-124b3847a604fc0e15d55e822321b3cf526c993bdad6b191fecde06505751064.js"></script><br><br><br><br><br><br>    <div class="js-stale-session-flash stale-session-flash flash flash-warn flash-banner hidden"><br>      <svg aria-hidden="true" class="octicon octicon-alert" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M15.72 12.5l-6.85-11.98C8.69 0.21 8.36 0.02 8 0.02s-0.69 0.19-0.87 0.5l-6.85 11.98c-0.18 0.31-0.18 0.69 0 1C0.47 13.81 0.8 14 1.15 14h13.7c0.36 0 0.69-0.19 0.86-0.5S15.89 12.81 15.72 12.5zM9 12H7V10h2V12zM9 9H7V5h2V9z"/></svg><br>      <span class="signed-in-tab-flash">You signed in with another tab or window. <a href="">Reload</a> to refresh your session.</span><br>      <span class="signed-out-tab-flash">You signed out in another tab or window. <a href="">Reload</a> to refresh your session.</span><br>    </div><br>    <div class="facebox" id="facebox" style="display:none;"><br>  <div class="facebox-popup"><br>    <div class="facebox-content" role="dialog" aria-labelledby="facebox-header" aria-describedby="facebox-description"><br>    </div><br>    <button type="button" class="facebox-close js-facebox-close" aria-label="Close modal"><br>      <svg aria-hidden="true" class="octicon octicon-x" height="16" version="1.1" viewbox="0 0 12 16" width="12"><path d="M7.48 8l3.75 3.75-1.48 1.48-3.75-3.75-3.75 3.75-1.48-1.48 3.75-3.75L0.77 4.25l1.48-1.48 3.75 3.75 3.75-3.75 1.48 1.48-3.75 3.75z"/></svg><br>    </button><br>  </div><br></div><br><br>  </body><br></html>


      
    </div>
    <footer class="article-footer">
      <a data-url="http://klina.github.io/2016/04/20/KnownIssues/" data-id="cin89ld5v0004roigo0xis1ic" class="article-share-link">Поделиться</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-Documentation" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2016/04/20/Documentation/" class="article-date">
  <time datetime="2016-04-20T02:46:13.363Z" itemprop="datePublished">2016-04-20</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>&lt;!DOCTYPE html&gt;</p>
<html lang="en" class=" is-copy-enabled"><br>  <head prefix="og: http://ogp.me/ns# fb: http://ogp.me/ns/fb# object: http://ogp.me/ns/object# article: http://ogp.me/ns/article# profile: http://ogp.me/ns/profile#"><br>    <meta charset="utf-8"><br><br>    <link crossorigin="anonymous" href="https://assets-cdn.github.com/assets/frameworks-4ca81a569e4b382193f26989979660344b2a86c1039cf44e471d2cdfb70c9ce4.css" integrity="sha256-TKgaVp5LOCGT8mmJl5ZgNEsqhsEDnPRORx0s37cMnOQ=" media="all" rel="stylesheet"><br>    <link crossorigin="anonymous" href="https://assets-cdn.github.com/assets/github-4129627c8cf63edb7480badb70e1a5a8eba9dd069ef776cb5f075a5f2d4047f8.css" integrity="sha256-QSlifIz2Ptt0gLrbcOGlqOup3Qae93bLXwdaXy1AR/g=" media="all" rel="stylesheet"><br><br><br><br>    <link crossorigin="anonymous" href="https://assets-cdn.github.com/assets/site-2d5d1699983d8dd7c384c67dfc183fbace8e3a24866e8822069d599f68e71fb2.css" integrity="sha256-LV0WmZg9jdfDhMZ9/Bg/us6OOiSGbogiBp1Zn2jnH7I=" media="all" rel="stylesheet"><br><br>    <link as="script" href="https://assets-cdn.github.com/assets/frameworks-b0c85b6eac5426cd1652deca19bc585e688aacec370c4541ab7f13cb5af4dc00.js" rel="preload"><br><br>    <link as="script" href="https://assets-cdn.github.com/assets/github-124b3847a604fc0e15d55e822321b3cf526c993bdad6b191fecde06505751064.js" rel="preload"><br><br>    <meta http-equiv="X-UA-Compatible" content="IE=edge"><br>    <meta http-equiv="Content-Language" content="en"><br>    <meta name="viewport" content="width=1020"><br><br><br>    <title>googletest/Documentation.md at master · google/googletest · GitHub</title><br>    <link rel="search" type="application/opensearchdescription+xml" href="/opensearch.xml" title="GitHub"><br>    <link rel="fluid-icon" href="https://github.com/fluidicon.png" title="GitHub"><br>    <link rel="apple-touch-icon" href="/apple-touch-icon.png"><br>    <link rel="apple-touch-icon" sizes="57x57" href="/apple-touch-icon-57x57.png"><br>    <link rel="apple-touch-icon" sizes="60x60" href="/apple-touch-icon-60x60.png"><br>    <link rel="apple-touch-icon" sizes="72x72" href="/apple-touch-icon-72x72.png"><br>    <link rel="apple-touch-icon" sizes="76x76" href="/apple-touch-icon-76x76.png"><br>    <link rel="apple-touch-icon" sizes="114x114" href="/apple-touch-icon-114x114.png"><br>    <link rel="apple-touch-icon" sizes="120x120" href="/apple-touch-icon-120x120.png"><br>    <link rel="apple-touch-icon" sizes="144x144" href="/apple-touch-icon-144x144.png"><br>    <link rel="apple-touch-icon" sizes="152x152" href="/apple-touch-icon-152x152.png"><br>    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon-180x180.png"><br>    <meta property="fb:app_id" content="1401488693436528"><br><br>      <meta content="https://avatars2.githubusercontent.com/u/1342004?v=3&amp;s=400" name="twitter:image:src"><meta content="@github" name="twitter:site"><meta content="summary" name="twitter:card"><meta content="google/googletest" name="twitter:title"><meta content="googletest - Google Test" name="twitter:description"><br>      <meta content="https://avatars2.githubusercontent.com/u/1342004?v=3&amp;s=400" property="og:image"><meta content="GitHub" property="og:site_name"><meta content="object" property="og:type"><meta content="google/googletest" property="og:title"><meta content="https://github.com/google/googletest" property="og:url"><meta content="googletest - Google Test" property="og:description"><br>      <meta name="browser-stats-url" content="https://api.github.com/_private/browser/stats"><br>    <meta name="browser-errors-url" content="https://api.github.com/_private/browser/errors"><br>    <link rel="assets" href="https://assets-cdn.github.com/"><br><br>    <meta name="pjax-timeout" content="1000"><br><br><br>    <meta name="msapplication-TileImage" content="/windows-tile.png"><br>    <meta name="msapplication-TileColor" content="#ffffff"><br>    <meta name="selected-link" value="repo_source" data-pjax-transient=""><br><br>    <meta name="google-site-verification" content="KT5gs8h0wvaagLKAVWq8bbeNwnZZK1r1XQysX3xurLU"><br><meta name="google-site-verification" content="ZzhVyEFwb7w3e0-uOTltm8Jsck2F5StVihD0exw2fsA"><br>    <meta name="google-analytics" content="UA-3769691-2"><br><br><meta content="collector.githubapp.com" name="octolytics-host"><meta content="github" name="octolytics-app-id"><meta content="3E9F4DA5:5EFE:1649093A:5715E700" name="octolytics-dimension-request_id"><br><meta content="/&lt;user-name&gt;/&lt;repo-name&gt;/blob/show" data-pjax-transient="true" name="analytics-location"><br><br><br><br>  <meta class="js-ga-set" name="dimension1" content="Logged Out"><br><br><br><br>        <meta name="hostname" content="github.com"><br>    <meta name="user-login" content=""><br><br>        <meta name="expected-hostname" content="github.com"><br>      <meta name="js-proxy-site-detection-payload" content="M2ZjNzQwOWFkYWY4ZDJlOWJmMTVkNWRmMDVjYmMxOTYzZmY4OTYzYmQ4NTI3M2FkYTc0YzEzNmY0YmM5N2ZmMnx7InJlbW90ZV9hZGRyZXNzIjoiNjIuMTU5Ljc3LjE2NSIsInJlcXVlc3RfaWQiOiIzRTlGNERBNTo1RUZFOjE2NDkwOTNBOjU3MTVFNzAwIiwidGltZXN0YW1wIjoxNDYxMDUzMTg0fQ=="><br><br><br>      <link rel="mask-icon" href="https://assets-cdn.github.com/pinned-octocat.svg" color="#4078c0"><br>      <link rel="icon" type="image/x-icon" href="https://assets-cdn.github.com/favicon.ico"><br><br>    <meta content="8cb1221b98aea525b7168ab311b77ee96e0e8987" name="form-nonce"><br><br>    <meta http-equiv="x-pjax-version" content="dc812ac6dabadd5440144e9805d8c8fd"><br><br><br><br>  <meta name="description" content="googletest - Google Test"><br>  <meta name="go-import" content="github.com/google/googletest git https://github.com/google/googletest.git"><br><br>  <meta content="1342004" name="octolytics-dimension-user_id"><meta content="google" name="octolytics-dimension-user_login"><meta content="39840932" name="octolytics-dimension-repository_id"><meta content="google/googletest" name="octolytics-dimension-repository_nwo"><meta content="true" name="octolytics-dimension-repository_public"><meta content="false" name="octolytics-dimension-repository_is_fork"><meta content="39840932" name="octolytics-dimension-repository_network_root_id"><meta content="google/googletest" name="octolytics-dimension-repository_network_root_nwo"><br>  <link href="https://github.com/google/googletest/commits/master.atom" rel="alternate" title="Recent Commits to googletest:master" type="application/atom+xml"><br><br><br>      <link rel="canonical" href="https://github.com/google/googletest/blob/master/googlemock/docs/Documentation.md" data-pjax-transient=""><br>  </head><br><br><br>  <body class="logged-out   env-production windows vis-public page-blob"><br>    <div id="js-pjax-loader-bar" class="pjax-loader-bar"></div><br>    <a href="#start-of-content" tabindex="1" class="accessibility-aid js-skip-to-content">Skip to content</a><br><br><br><br><br><br><br><br>          <header class="site-header js-details-container" role="banner"><br>  <div class="container-responsive"><br>    <a class="header-logo-invertocat" href="https://github.com/" aria-label="Homepage" data-ga-click="(Logged out) Header, go to homepage, icon:logo-wordmark" target="_blank" rel="external"><br>      <svg aria-hidden="true" class="octicon octicon-mark-github" height="32" version="1.1" viewbox="0 0 16 16" width="32"><path d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59 0.4 0.07 0.55-0.17 0.55-0.38 0-0.19-0.01-0.82-0.01-1.49-2.01 0.37-2.53-0.49-2.69-0.94-0.09-0.23-0.48-0.94-0.82-1.13-0.28-0.15-0.68-0.52-0.01-0.53 0.63-0.01 1.08 0.58 1.23 0.82 0.72 1.21 1.87 0.87 2.33 0.66 0.07-0.52 0.28-0.87 0.51-1.07-1.78-0.2-3.64-0.89-3.64-3.95 0-0.87 0.31-1.59 0.82-2.15-0.08-0.2-0.36-1.02 0.08-2.12 0 0 0.67-0.21 2.2 0.82 0.64-0.18 1.32-0.27 2-0.27 0.68 0 1.36 0.09 2 0.27 1.53-1.04 2.2-0.82 2.2-0.82 0.44 1.1 0.16 1.92 0.08 2.12 0.51 0.56 0.82 1.27 0.82 2.15 0 3.07-1.87 3.75-3.65 3.95 0.29 0.25 0.54 0.73 0.54 1.48 0 1.07-0.01 1.93-0.01 2.2 0 0.21 0.15 0.46 0.55 0.38C13.71 14.53 16 11.53 16 8 16 3.58 12.42 0 8 0z"/></svg><br>    </a><br><br>    <button class="btn-link right site-header-toggle js-details-target" type="button" aria-label="Toggle navigation"><br>      <svg aria-hidden="true" class="octicon octicon-three-bars" height="24" version="1.1" viewbox="0 0 12 16" width="18"><path d="M11.41 9H0.59c-0.59 0-0.59-0.41-0.59-1s0-1 0.59-1h10.81c0.59 0 0.59 0.41 0.59 1s0 1-0.59 1z m0-4H0.59c-0.59 0-0.59-0.41-0.59-1s0-1 0.59-1h10.81c0.59 0 0.59 0.41 0.59 1s0 1-0.59 1zM0.59 11h10.81c0.59 0 0.59 0.41 0.59 1s0 1-0.59 1H0.59c-0.59 0-0.59-0.41-0.59-1s0-1 0.59-1z"/></svg><br>    </button><br><br>    <div class="site-header-menu"><br>      <nav class="site-header-nav site-header-nav-main"><br>        <a href="/personal" class="js-selected-navigation-item nav-item nav-item-personal" data-ga-click="Header, click, Nav menu - item:personal" data-selected-links="/personal /personal"><br>          Personal<br></a>        <a href="/open-source" class="js-selected-navigation-item nav-item nav-item-opensource" data-ga-click="Header, click, Nav menu - item:opensource" data-selected-links="/open-source /open-source"><br>          Open source<br></a>        <a href="/business" class="js-selected-navigation-item nav-item nav-item-business" data-ga-click="Header, click, Nav menu - item:business" data-selected-links="/business /business/features /business/customers /business"><br>          Business<br></a>        <a href="/explore" class="js-selected-navigation-item nav-item nav-item-explore" data-ga-click="Header, click, Nav menu - item:explore" data-selected-links="/explore /trending /trending/developers /integrations /integrations/feature/code /integrations/feature/collaborate /integrations/feature/ship /explore"><br>          Explore<br></a>      </nav><br><br>      <div class="site-header-actions"><br>            <a class="btn btn-primary site-header-actions-btn" href="/join?source=header-repo" data-ga-click="(Logged out) Header, clicked Sign up, text:sign-up">Sign up</a><br>          <a class="btn site-header-actions-btn mr-2" href="/login?return_to=%2Fgoogle%2Fgoogletest%2Fblob%2Fmaster%2Fgooglemock%2Fdocs%2FDocumentation.md" data-ga-click="(Logged out) Header, clicked Sign in, text:sign-in">Sign in</a><br>      </div><br><br>        <nav class="site-header-nav site-header-nav-secondary"><br>          <a class="nav-item" href="/pricing">Pricing</a><br>          <a class="nav-item" href="/blog">Blog</a><br>          <a class="nav-item" href="https://help.github.com" target="_blank" rel="external">Support</a><br>          <a class="nav-item header-search-link" href="https://github.com/search" target="_blank" rel="external">Search GitHub</a><br>              <div class="header-search scoped-search site-scoped-search js-site-search" role="search"><br>  <!-- </textarea> --><!-- '"` --><form accept-charset="UTF-8" action="/google/googletest/search" class="js-site-search-form" data-scoped-search-url="/google/googletest/search" data-unscoped-search-url="/search" method="get"><div style="margin:0;padding:0;display:inline"><input name="utf8" type="hidden" value="&#x2713;"></div><br>    <label class="form-control header-search-wrapper js-chromeless-input-container"><br>      <div class="header-search-scope">This repository</div><br>      <input type="text" class="form-control header-search-input js-site-search-focus js-site-search-field is-clearable" data-hotkey="s" name="q" placeholder="Search" aria-label="Search this repository" data-unscoped-placeholder="Search GitHub" data-scoped-placeholder="Search" tabindex="1" autocapitalize="off"><br>    </label><br></form></div><br><br>        </nav><br>    </div><br>  </div><br></header><br><br><br><br>    <div id="start-of-content" class="accessibility-aid"></div><br><br>      <div id="js-flash-container"><br></div><br><br><br>    <div role="main" class="main-content"><br>        <div itemscope="" itemtype="http://schema.org/SoftwareSourceCode"><br>    <div id="js-repo-pjax-container" data-pjax-container=""><br><br><div class="pagehead repohead instapaper_ignore readability-menu experiment-repo-nav"><br>  <div class="container repohead-details-container"><br><br><br><br><ul class="pagehead-actions"><br><br>  <li><br>      <a href="/login?return_to=%2Fgoogle%2Fgoogletest" class="btn btn-sm btn-with-count tooltipped tooltipped-n" aria-label="You must be signed in to watch a repository" rel="nofollow"><br>    <svg aria-hidden="true" class="octicon octicon-eye" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M8.06 2C3 2 0 8 0 8s3 6 8.06 6c4.94 0 7.94-6 7.94-6S13 2 8.06 2z m-0.06 10c-2.2 0-4-1.78-4-4 0-2.2 1.8-4 4-4 2.22 0 4 1.8 4 4 0 2.22-1.78 4-4 4z m2-4c0 1.11-0.89 2-2 2s-2-0.89-2-2 0.89-2 2-2 2 0.89 2 2z"/></svg><br>    Watch<br>  </a><br>  <a class="social-count" href="/google/googletest/watchers"><br>    258<br>  </a><br><br>  </li><br><br>  <li><br>      <a href="/login?return_to=%2Fgoogle%2Fgoogletest" class="btn btn-sm btn-with-count tooltipped tooltipped-n" aria-label="You must be signed in to star a repository" rel="nofollow"><br>    <svg aria-hidden="true" class="octicon octicon-star" height="16" version="1.1" viewbox="0 0 14 16" width="14"><path d="M14 6l-4.9-0.64L7 1 4.9 5.36 0 6l3.6 3.26L2.67 14l4.33-2.33 4.33 2.33L10.4 9.26 14 6z"/></svg><br>    Star<br>  </a><br><br>    <a class="social-count js-social-count" href="/google/googletest/stargazers"><br>      1,987<br>    </a><br><br>  </li><br><br>  <li><br>      <a href="/login?return_to=%2Fgoogle%2Fgoogletest" class="btn btn-sm btn-with-count tooltipped tooltipped-n" aria-label="You must be signed in to fork a repository" rel="nofollow"><br>        <svg aria-hidden="true" class="octicon octicon-repo-forked" height="16" version="1.1" viewbox="0 0 10 16" width="10"><path d="M8 1c-1.11 0-2 0.89-2 2 0 0.73 0.41 1.38 1 1.72v1.28L5 8 3 6v-1.28c0.59-0.34 1-0.98 1-1.72 0-1.11-0.89-2-2-2S0 1.89 0 3c0 0.73 0.41 1.38 1 1.72v1.78l3 3v1.78c-0.59 0.34-1 0.98-1 1.72 0 1.11 0.89 2 2 2s2-0.89 2-2c0-0.73-0.41-1.38-1-1.72V9.5l3-3V4.72c0.59-0.34 1-0.98 1-1.72 0-1.11-0.89-2-2-2zM2 4.2c-0.66 0-1.2-0.55-1.2-1.2s0.55-1.2 1.2-1.2 1.2 0.55 1.2 1.2-0.55 1.2-1.2 1.2z m3 10c-0.66 0-1.2-0.55-1.2-1.2s0.55-1.2 1.2-1.2 1.2 0.55 1.2 1.2-0.55 1.2-1.2 1.2z m3-10c-0.66 0-1.2-0.55-1.2-1.2s0.55-1.2 1.2-1.2 1.2 0.55 1.2 1.2-0.55 1.2-1.2 1.2z"/></svg><br>        Fork<br>      </a><br><br>    <a href="/google/googletest/network" class="social-count"><br>      704<br>    </a><br>  </li><br></ul><br><br>    <h1 class="entry-title public "><br>  <svg aria-hidden="true" class="octicon octicon-repo" height="16" version="1.1" viewbox="0 0 12 16" width="12"><path d="M4 9h-1v-1h1v1z m0-3h-1v1h1v-1z m0-2h-1v1h1v-1z m0-2h-1v1h1v-1z m8-1v12c0 0.55-0.45 1-1 1H6v2l-1.5-1.5-1.5 1.5V14H1c-0.55 0-1-0.45-1-1V1C0 0.45 0.45 0 1 0h10c0.55 0 1 0.45 1 1z m-1 10H1v2h2v-1h3v1h5V11z m0-10H2v9h9V1z"/></svg><br>  <span class="author" itemprop="author"><a href="/google" class="url fn" rel="author">google</a></span><!--
--><span class="path-divider">/</span><!--
--><strong itemprop="name"><a href="/google/googletest" data-pjax="#js-repo-pjax-container">googletest</a></strong><br><br></h1><br><br>  </div><br>  <div class="container"><br><br><nav class="reponav js-repo-nav js-sidenav-container-pjax" itemscope="" itemtype="http://schema.org/BreadcrumbList" role="navigation" data-pjax="#js-repo-pjax-container"><br><br>  <span itemscope="" itemtype="http://schema.org/ListItem" itemprop="itemListElement"><br>    <a href="/google/googletest" aria-selected="true" class="js-selected-navigation-item selected reponav-item" data-hotkey="g c" data-selected-links="repo_source repo_downloads repo_commits repo_releases repo_tags repo_branches /google/googletest" itemprop="url"><br>      <svg aria-hidden="true" class="octicon octicon-code" height="16" version="1.1" viewbox="0 0 14 16" width="14"><path d="M9.5 3l-1.5 1.5 3.5 3.5L8 11.5l1.5 1.5 4.5-5L9.5 3zM4.5 3L0 8l4.5 5 1.5-1.5L2.5 8l3.5-3.5L4.5 3z"/></svg><br>      <span itemprop="name">Code</span><br>      <meta itemprop="position" content="1"><br></a>  </span><br><br>    <span itemscope="" itemtype="http://schema.org/ListItem" itemprop="itemListElement"><br>      <a href="/google/googletest/issues" class="js-selected-navigation-item reponav-item" data-hotkey="g i" data-selected-links="repo_issues repo_labels repo_milestones /google/googletest/issues" itemprop="url"><br>        <svg aria-hidden="true" class="octicon octicon-issue-opened" height="16" version="1.1" viewbox="0 0 14 16" width="14"><path d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7S10.14 13.7 7 13.7 1.3 11.14 1.3 8s2.56-5.7 5.7-5.7m0-1.3C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7S10.86 1 7 1z m1 3H6v5h2V4z m0 6H6v2h2V10z"/></svg><br>        <span itemprop="name">Issues</span><br>        <span class="counter">247</span><br>        <meta itemprop="position" content="2"><br></a>    </span><br><br>  <span itemscope="" itemtype="http://schema.org/ListItem" itemprop="itemListElement"><br>    <a href="/google/googletest/pulls" class="js-selected-navigation-item reponav-item" data-hotkey="g p" data-selected-links="repo_pulls /google/googletest/pulls" itemprop="url"><br>      <svg aria-hidden="true" class="octicon octicon-git-pull-request" height="16" version="1.1" viewbox="0 0 12 16" width="12"><path d="M11 11.28c0-1.73 0-6.28 0-6.28-0.03-0.78-0.34-1.47-0.94-2.06s-1.28-0.91-2.06-0.94c0 0-1.02 0-1 0V0L4 3l3 3V4h1c0.27 0.02 0.48 0.11 0.69 0.31s0.3 0.42 0.31 0.69v6.28c-0.59 0.34-1 0.98-1 1.72 0 1.11 0.89 2 2 2s2-0.89 2-2c0-0.73-0.41-1.38-1-1.72z m-1 2.92c-0.66 0-1.2-0.55-1.2-1.2s0.55-1.2 1.2-1.2 1.2 0.55 1.2 1.2-0.55 1.2-1.2 1.2zM4 3c0-1.11-0.89-2-2-2S0 1.89 0 3c0 0.73 0.41 1.38 1 1.72 0 1.55 0 5.56 0 6.56-0.59 0.34-1 0.98-1 1.72 0 1.11 0.89 2 2 2s2-0.89 2-2c0-0.73-0.41-1.38-1-1.72V4.72c0.59-0.34 1-0.98 1-1.72z m-0.8 10c0 0.66-0.55 1.2-1.2 1.2s-1.2-0.55-1.2-1.2 0.55-1.2 1.2-1.2 1.2 0.55 1.2 1.2z m-1.2-8.8c-0.66 0-1.2-0.55-1.2-1.2s0.55-1.2 1.2-1.2 1.2 0.55 1.2 1.2-0.55 1.2-1.2 1.2z"/></svg><br>      <span itemprop="name">Pull requests</span><br>      <span class="counter">42</span><br>      <meta itemprop="position" content="3"><br></a>  </span><br><br><br>  <a href="/google/googletest/pulse" class="js-selected-navigation-item reponav-item" data-selected-links="pulse /google/googletest/pulse"><br>    <svg aria-hidden="true" class="octicon octicon-pulse" height="16" version="1.1" viewbox="0 0 14 16" width="14"><path d="M11.5 8L8.8 5.4 6.6 8.5 5.5 1.6 2.38 8H0V10h3.6L4.5 8.2l0.9 5.4L9 8.5l1.6 1.5H14V8H11.5z"/></svg><br>    Pulse<br></a><br>  <a href="/google/googletest/graphs" class="js-selected-navigation-item reponav-item" data-selected-links="repo_graphs repo_contributors /google/googletest/graphs"><br>    <svg aria-hidden="true" class="octicon octicon-graph" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M16 14v1H0V0h1v14h15z m-11-1H3V8h2v5z m4 0H7V3h2v10z m4 0H11V6h2v7z"/></svg><br>    Graphs<br></a><br><br></nav><br><br>  </div><br></div><br><br><div class="container new-discussion-timeline experiment-repo-nav"><br>  <div class="repository-content"><br><br><br><br><a href="/google/googletest/blob/d225acc90bc3a8c420a9bcd1f033033c1ccd7fe0/googlemock/docs/Documentation.md" class="hidden js-permalink-shortcut" data-hotkey="y">Permalink</a><br><br><!-- blob contrib key: blob_contributors:v21:3e02691ef9bf92b83c3c75653a40ea6b --><br><br><div class="file-navigation js-zeroclipboard-container"><br><br><div class="select-menu branch-select-menu js-menu-container js-select-menu left"><br>  <button class="btn btn-sm select-menu-button js-menu-target css-truncate" data-hotkey="w" title="master" type="button" aria-label="Switch branches or tags" tabindex="0" aria-haspopup="true"><br>    <i>Branch:</i><br>    <span class="js-select-button css-truncate-target">master</span><br>  </button><br><br>  <div class="select-menu-modal-holder js-menu-content js-navigation-container" data-pjax="" aria-hidden="true"><br><br>    <div class="select-menu-modal"><br>      <div class="select-menu-header"><br>        <svg aria-label="Close" class="octicon octicon-x js-menu-close" height="16" role="img" version="1.1" viewbox="0 0 12 16" width="12"><path d="M7.48 8l3.75 3.75-1.48 1.48-3.75-3.75-3.75 3.75-1.48-1.48 3.75-3.75L0.77 4.25l1.48-1.48 3.75 3.75 3.75-3.75 1.48 1.48-3.75 3.75z"/></svg><br>        <span class="select-menu-title">Switch branches/tags</span><br>      </div><br><br>      <div class="select-menu-filters"><br>        <div class="select-menu-text-filter"><br>          <input type="text" aria-label="Filter branches/tags" id="context-commitish-filter-field" class="form-control js-filterable-field js-navigation-enable" placeholder="Filter branches/tags"><br>        </div><br>        <div class="select-menu-tabs"><br>          <ul><br>            <li class="select-menu-tab"><br>              <a href="#" data-tab-filter="branches" data-filter-placeholder="Filter branches/tags" class="js-select-menu-tab" role="tab">Branches</a><br>            </li><br>            <li class="select-menu-tab"><br>              <a href="#" data-tab-filter="tags" data-filter-placeholder="Find a tag…" class="js-select-menu-tab" role="tab">Tags</a><br>            </li><br>          </ul><br>        </div><br>      </div><br><br>      <div class="select-menu-list select-menu-tab-bucket js-select-menu-tab-bucket" data-tab-filter="branches" role="menu"><br><br>        <div data-filterable-for="context-commitish-filter-field" data-filterable-type="substring"><br><br><br>            <a class="select-menu-item js-navigation-item js-navigation-open " href="/google/googletest/blob/BillyDonahue-patch-1/googlemock/docs/Documentation.md" data-name="BillyDonahue-patch-1" data-skip-pjax="true" rel="nofollow"><br>              <svg aria-hidden="true" class="octicon octicon-check select-menu-item-icon" height="16" version="1.1" viewbox="0 0 12 16" width="12"><path d="M12 5L4 13 0 9l1.5-1.5 2.5 2.5 6.5-6.5 1.5 1.5z"/></svg><br>              <span class="select-menu-item-text css-truncate-target js-select-menu-filter-text" title="BillyDonahue-patch-1"><br>                BillyDonahue-patch-1<br>              </span><br>            </a><br>            <a class="select-menu-item js-navigation-item js-navigation-open selected" href="/google/googletest/blob/master/googlemock/docs/Documentation.md" data-name="master" data-skip-pjax="true" rel="nofollow"><br>              <svg aria-hidden="true" class="octicon octicon-check select-menu-item-icon" height="16" version="1.1" viewbox="0 0 12 16" width="12"><path d="M12 5L4 13 0 9l1.5-1.5 2.5 2.5 6.5-6.5 1.5 1.5z"/></svg><br>              <span class="select-menu-item-text css-truncate-target js-select-menu-filter-text" title="master"><br>                master<br>              </span><br>            </a><br>        </div><br><br>          <div class="select-menu-no-results">Nothing to show</div><br>      </div><br><br>      <div class="select-menu-list select-menu-tab-bucket js-select-menu-tab-bucket" data-tab-filter="tags"><br>        <div data-filterable-for="context-commitish-filter-field" data-filterable-type="substring"><br><br><br>            <a class="select-menu-item js-navigation-item js-navigation-open " href="/google/googletest/tree/release-1.7.0/googlemock/docs/Documentation.md" data-name="release-1.7.0" data-skip-pjax="true" rel="nofollow"><br>              <svg aria-hidden="true" class="octicon octicon-check select-menu-item-icon" height="16" version="1.1" viewbox="0 0 12 16" width="12"><path d="M12 5L4 13 0 9l1.5-1.5 2.5 2.5 6.5-6.5 1.5 1.5z"/></svg><br>              <span class="select-menu-item-text css-truncate-target" title="release-1.7.0"><br>                release-1.7.0<br>              </span><br>            </a><br>            <a class="select-menu-item js-navigation-item js-navigation-open " href="/google/googletest/tree/release-1.6.0/googlemock/docs/Documentation.md" data-name="release-1.6.0" data-skip-pjax="true" rel="nofollow"><br>              <svg aria-hidden="true" class="octicon octicon-check select-menu-item-icon" height="16" version="1.1" viewbox="0 0 12 16" width="12"><path d="M12 5L4 13 0 9l1.5-1.5 2.5 2.5 6.5-6.5 1.5 1.5z"/></svg><br>              <span class="select-menu-item-text css-truncate-target" title="release-1.6.0"><br>                release-1.6.0<br>              </span><br>            </a><br>            <a class="select-menu-item js-navigation-item js-navigation-open " href="/google/googletest/tree/release-1.5.0/googlemock/docs/Documentation.md" data-name="release-1.5.0" data-skip-pjax="true" rel="nofollow"><br>              <svg aria-hidden="true" class="octicon octicon-check select-menu-item-icon" height="16" version="1.1" viewbox="0 0 12 16" width="12"><path d="M12 5L4 13 0 9l1.5-1.5 2.5 2.5 6.5-6.5 1.5 1.5z"/></svg><br>              <span class="select-menu-item-text css-truncate-target" title="release-1.5.0"><br>                release-1.5.0<br>              </span><br>            </a><br>            <a class="select-menu-item js-navigation-item js-navigation-open " href="/google/googletest/tree/release-1.4.0/googlemock/docs/Documentation.md" data-name="release-1.4.0" data-skip-pjax="true" rel="nofollow"><br>              <svg aria-hidden="true" class="octicon octicon-check select-menu-item-icon" height="16" version="1.1" viewbox="0 0 12 16" width="12"><path d="M12 5L4 13 0 9l1.5-1.5 2.5 2.5 6.5-6.5 1.5 1.5z"/></svg><br>              <span class="select-menu-item-text css-truncate-target" title="release-1.4.0"><br>                release-1.4.0<br>              </span><br>            </a><br>            <a class="select-menu-item js-navigation-item js-navigation-open " href="/google/googletest/tree/release-1.3.0/googlemock/docs/Documentation.md" data-name="release-1.3.0" data-skip-pjax="true" rel="nofollow"><br>              <svg aria-hidden="true" class="octicon octicon-check select-menu-item-icon" height="16" version="1.1" viewbox="0 0 12 16" width="12"><path d="M12 5L4 13 0 9l1.5-1.5 2.5 2.5 6.5-6.5 1.5 1.5z"/></svg><br>              <span class="select-menu-item-text css-truncate-target" title="release-1.3.0"><br>                release-1.3.0<br>              </span><br>            </a><br>            <a class="select-menu-item js-navigation-item js-navigation-open " href="/google/googletest/tree/release-1.2.1/googlemock/docs/Documentation.md" data-name="release-1.2.1" data-skip-pjax="true" rel="nofollow"><br>              <svg aria-hidden="true" class="octicon octicon-check select-menu-item-icon" height="16" version="1.1" viewbox="0 0 12 16" width="12"><path d="M12 5L4 13 0 9l1.5-1.5 2.5 2.5 6.5-6.5 1.5 1.5z"/></svg><br>              <span class="select-menu-item-text css-truncate-target" title="release-1.2.1"><br>                release-1.2.1<br>              </span><br>            </a><br>            <a class="select-menu-item js-navigation-item js-navigation-open " href="/google/googletest/tree/release-1.2.0/googlemock/docs/Documentation.md" data-name="release-1.2.0" data-skip-pjax="true" rel="nofollow"><br>              <svg aria-hidden="true" class="octicon octicon-check select-menu-item-icon" height="16" version="1.1" viewbox="0 0 12 16" width="12"><path d="M12 5L4 13 0 9l1.5-1.5 2.5 2.5 6.5-6.5 1.5 1.5z"/></svg><br>              <span class="select-menu-item-text css-truncate-target" title="release-1.2.0"><br>                release-1.2.0<br>              </span><br>            </a><br>            <a class="select-menu-item js-navigation-item js-navigation-open " href="/google/googletest/tree/release-1.1.0/googlemock/docs/Documentation.md" data-name="release-1.1.0" data-skip-pjax="true" rel="nofollow"><br>              <svg aria-hidden="true" class="octicon octicon-check select-menu-item-icon" height="16" version="1.1" viewbox="0 0 12 16" width="12"><path d="M12 5L4 13 0 9l1.5-1.5 2.5 2.5 6.5-6.5 1.5 1.5z"/></svg><br>              <span class="select-menu-item-text css-truncate-target" title="release-1.1.0"><br>                release-1.1.0<br>              </span><br>            </a><br>            <a class="select-menu-item js-navigation-item js-navigation-open " href="/google/googletest/tree/release-1.0.1/googlemock/docs/Documentation.md" data-name="release-1.0.1" data-skip-pjax="true" rel="nofollow"><br>              <svg aria-hidden="true" class="octicon octicon-check select-menu-item-icon" height="16" version="1.1" viewbox="0 0 12 16" width="12"><path d="M12 5L4 13 0 9l1.5-1.5 2.5 2.5 6.5-6.5 1.5 1.5z"/></svg><br>              <span class="select-menu-item-text css-truncate-target" title="release-1.0.1"><br>                release-1.0.1<br>              </span><br>            </a><br>            <a class="select-menu-item js-navigation-item js-navigation-open " href="/google/googletest/tree/release-1.0.0/googlemock/docs/Documentation.md" data-name="release-1.0.0" data-skip-pjax="true" rel="nofollow"><br>              <svg aria-hidden="true" class="octicon octicon-check select-menu-item-icon" height="16" version="1.1" viewbox="0 0 12 16" width="12"><path d="M12 5L4 13 0 9l1.5-1.5 2.5 2.5 6.5-6.5 1.5 1.5z"/></svg><br>              <span class="select-menu-item-text css-truncate-target" title="release-1.0.0"><br>                release-1.0.0<br>              </span><br>            </a><br>        </div><br><br>        <div class="select-menu-no-results">Nothing to show</div><br>      </div><br><br>    </div><br>  </div><br></div><br><br>  <div class="btn-group right"><br>    <a href="/google/googletest/find/master" class="js-pjax-capture-input btn btn-sm" data-pjax="" data-hotkey="t"><br>      Find file<br>    </a><br>    <button aria-label="Copy file path to clipboard" class="js-zeroclipboard btn btn-sm zeroclipboard-button tooltipped tooltipped-s" data-copied-hint="Copied!" type="button">Copy path</button><br>  </div><br>  <div class="breadcrumb js-zeroclipboard-target"><br>    <span class="repo-root js-repo-root"><span class="js-path-segment"><a href="/google/googletest"><span>googletest</span></a></span></span><span class="separator">/</span><span class="js-path-segment"><a href="/google/googletest/tree/master/googlemock"><span>googlemock</span></a></span><span class="separator">/</span><span class="js-path-segment"><a href="/google/googletest/tree/master/googlemock/docs"><span>docs</span></a></span><span class="separator">/</span><strong class="final-path">Documentation.md</strong><br>  </div><br></div><br><br><br>  <div class="commit-tease"><br>      <span class="right"><br>        <a class="commit-tease-sha" href="/google/googletest/commit/a470862dbe806b4e55232d6aa637a4bd94b800f8" data-pjax=""><br>          a470862<br>        </a><br>        <time datetime="2015-12-08T15:02:50Z" is="relative-time">Dec 8, 2015</time><br>      </span><br>      <div><br>        <img alt="" class="avatar" height="20" src="https://2.gravatar.com/avatar/0c5dbc6456ec61e451fab49a1ae31091?d=https%3A%2F%2Fassets-cdn.github.com%2Fimages%2Fgravatars%2Fgravatar-user-420.png&amp;r=x&amp;s=140" width="20"><br>        <span class="user-mention">Paul Rosset</span><br>          <a href="/google/googletest/commit/a470862dbe806b4e55232d6aa637a4bd94b800f8" class="message" data-pjax="true" title="fixed link in googlemock documentation">fixed link in googlemock documentation</a><br>      </div><br><br>    <div class="commit-tease-contributors"><br>      <button type="button" class="btn-link muted-link contributors-toggle" data-facebox="#blob_contributors_box"><br>        <strong>1</strong><br>         contributor<br>      </button><br><br>    </div><br><br>    <div id="blob_contributors_box" style="display:none"><br>      <h2 class="facebox-header" data-facebox-id="facebox-header">Users who have contributed to this file</h2><br>      <ul class="facebox-user-list" data-facebox-id="facebox-description"><br>          <li class="facebox-user-list-item"><br>            <img alt="@BillyDonahue" height="24" src="https://avatars0.githubusercontent.com/u/8611652?v=3&amp;s=48" width="24"><br>            <a href="/BillyDonahue">BillyDonahue</a><br>          </li><br>      </ul><br>    </div><br>  </div><br><br><div class="file"><br>  <div class="file-header"><br>  <div class="file-actions"><br><br>    <div class="btn-group"><br>      <a href="/google/googletest/raw/master/googlemock/docs/Documentation.md" class="btn btn-sm " id="raw-url">Raw</a><br>        <a href="/google/googletest/blame/master/googlemock/docs/Documentation.md" class="btn btn-sm js-update-url-with-hash">Blame</a><br>      <a href="/google/googletest/commits/master/googlemock/docs/Documentation.md" class="btn btn-sm " rel="nofollow">History</a><br>    </div><br><br>        <a class="btn-octicon tooltipped tooltipped-nw" href="https://windows.github.com" aria-label="Open this file in GitHub Desktop" data-ga-click="Repository, open with desktop, type:windows" target="_blank" rel="external"><br>            <svg aria-hidden="true" class="octicon octicon-device-desktop" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M15 2H1c-0.55 0-1 0.45-1 1v9c0 0.55 0.45 1 1 1h5.34c-0.25 0.61-0.86 1.39-2.34 2h8c-1.48-0.61-2.09-1.39-2.34-2h5.34c0.55 0 1-0.45 1-1V3c0-0.55-0.45-1-1-1z m0 9H1V3h14v8z"/></svg><br>        </a><br><br>        <button type="button" class="btn-octicon disabled tooltipped tooltipped-nw" aria-label="You must be signed in to make or propose changes"><br>          <svg aria-hidden="true" class="octicon octicon-pencil" height="16" version="1.1" viewbox="0 0 14 16" width="14"><path d="M0 12v3h3l8-8-3-3L0 12z m3 2H1V12h1v1h1v1z m10.3-9.3l-1.3 1.3-3-3 1.3-1.3c0.39-0.39 1.02-0.39 1.41 0l1.59 1.59c0.39 0.39 0.39 1.02 0 1.41z"/></svg><br>        </button><br>        <button type="button" class="btn-octicon btn-octicon-danger disabled tooltipped tooltipped-nw" aria-label="You must be signed in to make or propose changes"><br>          <svg aria-hidden="true" class="octicon octicon-trashcan" height="16" version="1.1" viewbox="0 0 12 16" width="12"><path d="M10 2H8c0-0.55-0.45-1-1-1H4c-0.55 0-1 0.45-1 1H1c-0.55 0-1 0.45-1 1v1c0 0.55 0.45 1 1 1v9c0 0.55 0.45 1 1 1h7c0.55 0 1-0.45 1-1V5c0.55 0 1-0.45 1-1v-1c0-0.55-0.45-1-1-1z m-1 12H2V5h1v8h1V5h1v8h1V5h1v8h1V5h1v9z m1-10H1v-1h9v1z"/></svg><br>        </button><br>  </div><br><br>  <div class="file-info"><br>      13 lines (9 sloc)<br>      <span class="file-info-divider"></span><br>    766 Bytes<br>  </div><br></div><br><br><br>  <div id="readme" class="readme blob instapaper_body"><br>    <article class="markdown-body entry-content" itemprop="text"><p>This page lists all documentation wiki pages for Google Mock <strong>(the SVN trunk version)</strong></p><br><br><ul><br><li><p><strong>if you use a released version of Google Mock, please read the documentation for that specific version instead.</strong></p><br><br><ul><br><li><a href="/google/googletest/blob/master/googlemock/docs/ForDummies.md">ForDummies</a> – start here if you are new to Google Mock.</li><br><li><a href="/google/googletest/blob/master/googlemock/docs/CheatSheet.md">CheatSheet</a> – a quick reference.</li><br><li><a href="/google/googletest/blob/master/googlemock/docs/CookBook.md">CookBook</a> – recipes for doing various tasks using Google Mock.</li><br><li><a href="/google/googletest/blob/master/googlemock/docs/FrequentlyAskedQuestions.md">FrequentlyAskedQuestions</a> – check here before asking a question on the mailing list.</li><br></ul></li><br></ul><br><br><p>To contribute code to Google Mock, read:</p><br><br><ul><br><li><a href="/google/googletest/blob/master/googlemock/docs/DevGuide.md">DevGuide</a> – read this <em>before</em> writing your first patch.</li><br><li><a href="/google/googletest/blob/master/googlemock/googletest/docs/PumpManual.md">Pump Manual</a> – how we generate some of Google Mock’s source files.</li><br></ul><br></article><br>  </div><br><br></div><br><br><button type="button" data-facebox="#jump-to-line" data-facebox-class="linejump" data-hotkey="l" class="hidden">Jump to Line</button><br><div id="jump-to-line" style="display:none"><br>  <!-- </textarea> --><!-- '"` --><form accept-charset="UTF-8" action="" class="js-jump-to-line-form" method="get"><div style="margin:0;padding:0;display:inline"><input name="utf8" type="hidden" value="&#x2713;"></div><br>    <input class="form-control linejump-input js-jump-to-line-field" type="text" placeholder="Jump to line&hellip;" aria-label="Jump to line" autofocus><br>    <button type="submit" class="btn">Go</button><br></form></div><br><br>  </div><br>  <div class="modal-backdrop"></div><br></div><br><br><br>    </div><br>  </div><br><br>    </div><br><br>        <div class="container site-footer-container"><br>  <div class="site-footer" role="contentinfo"><br>    <ul class="site-footer-links right"><br>        <li><a href="https://status.github.com/" data-ga-click="Footer, go to status, text:status" target="_blank" rel="external">Status</a></li><br>      <li><a href="https://developer.github.com" data-ga-click="Footer, go to api, text:api" target="_blank" rel="external">API</a></li><br>      <li><a href="https://training.github.com" data-ga-click="Footer, go to training, text:training" target="_blank" rel="external">Training</a></li><br>      <li><a href="https://shop.github.com" data-ga-click="Footer, go to shop, text:shop" target="_blank" rel="external">Shop</a></li><br>        <li><a href="https://github.com/blog" data-ga-click="Footer, go to blog, text:blog" target="_blank" rel="external">Blog</a></li><br>        <li><a href="https://github.com/about" data-ga-click="Footer, go to about, text:about" target="_blank" rel="external">About</a></li><br><br>    </ul><br><br>    <a href="https://github.com" aria-label="Homepage" class="site-footer-mark" target="_blank" rel="external"><br>      <svg aria-hidden="true" class="octicon octicon-mark-github" height="24" title="GitHub " version="1.1" viewbox="0 0 16 16" width="24"><path d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59 0.4 0.07 0.55-0.17 0.55-0.38 0-0.19-0.01-0.82-0.01-1.49-2.01 0.37-2.53-0.49-2.69-0.94-0.09-0.23-0.48-0.94-0.82-1.13-0.28-0.15-0.68-0.52-0.01-0.53 0.63-0.01 1.08 0.58 1.23 0.82 0.72 1.21 1.87 0.87 2.33 0.66 0.07-0.52 0.28-0.87 0.51-1.07-1.78-0.2-3.64-0.89-3.64-3.95 0-0.87 0.31-1.59 0.82-2.15-0.08-0.2-0.36-1.02 0.08-2.12 0 0 0.67-0.21 2.2 0.82 0.64-0.18 1.32-0.27 2-0.27 0.68 0 1.36 0.09 2 0.27 1.53-1.04 2.2-0.82 2.2-0.82 0.44 1.1 0.16 1.92 0.08 2.12 0.51 0.56 0.82 1.27 0.82 2.15 0 3.07-1.87 3.75-3.65 3.95 0.29 0.25 0.54 0.73 0.54 1.48 0 1.07-0.01 1.93-0.01 2.2 0 0.21 0.15 0.46 0.55 0.38C13.71 14.53 16 11.53 16 8 16 3.58 12.42 0 8 0z"/></svg><br></a><br>    <ul class="site-footer-links"><br>      <li>&copy; 2016 <span title="0.04883s from github-fe116-cp1-prd.iad.github.net">GitHub</span>, Inc.</li><br>        <li><a href="https://github.com/site/terms" data-ga-click="Footer, go to terms, text:terms" target="_blank" rel="external">Terms</a></li><br>        <li><a href="https://github.com/site/privacy" data-ga-click="Footer, go to privacy, text:privacy" target="_blank" rel="external">Privacy</a></li><br>        <li><a href="https://github.com/security" data-ga-click="Footer, go to security, text:security" target="_blank" rel="external">Security</a></li><br>        <li><a href="https://github.com/contact" data-ga-click="Footer, go to contact, text:contact" target="_blank" rel="external">Contact</a></li><br>        <li><a href="https://help.github.com" data-ga-click="Footer, go to help, text:help" target="_blank" rel="external">Help</a></li><br>    </ul><br>  </div><br></div><br><br><br><br><br><br><br>    <div id="ajax-error-message" class="ajax-error-message flash flash-error"><br>      <svg aria-hidden="true" class="octicon octicon-alert" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M15.72 12.5l-6.85-11.98C8.69 0.21 8.36 0.02 8 0.02s-0.69 0.19-0.87 0.5l-6.85 11.98c-0.18 0.31-0.18 0.69 0 1C0.47 13.81 0.8 14 1.15 14h13.7c0.36 0 0.69-0.19 0.86-0.5S15.89 12.81 15.72 12.5zM9 12H7V10h2V12zM9 9H7V5h2V9z"/></svg><br>      <button type="button" class="flash-close js-flash-close js-ajax-error-dismiss" aria-label="Dismiss error"><br>        <svg aria-hidden="true" class="octicon octicon-x" height="16" version="1.1" viewbox="0 0 12 16" width="12"><path d="M7.48 8l3.75 3.75-1.48 1.48-3.75-3.75-3.75 3.75-1.48-1.48 3.75-3.75L0.77 4.25l1.48-1.48 3.75 3.75 3.75-3.75 1.48 1.48-3.75 3.75z"/></svg><br>      </button><br>      Something went wrong with that request. Please try again.<br>    </div><br><br><br><br>      <script crossorigin="anonymous" integrity="sha256-sMhbbqxUJs0WUt7KGbxYXmiKrOw3DEVBq38Ty1r03AA=" src="https://assets-cdn.github.com/assets/frameworks-b0c85b6eac5426cd1652deca19bc585e688aacec370c4541ab7f13cb5af4dc00.js"></script><br>      <script async="async" crossorigin="anonymous" integrity="sha256-Eks4R6YE/A4V1V6CIyGzz1JsmTva1rGR/s3gZQV1EGQ=" src="https://assets-cdn.github.com/assets/github-124b3847a604fc0e15d55e822321b3cf526c993bdad6b191fecde06505751064.js"></script><br><br><br><br><br><br>    <div class="js-stale-session-flash stale-session-flash flash flash-warn flash-banner hidden"><br>      <svg aria-hidden="true" class="octicon octicon-alert" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M15.72 12.5l-6.85-11.98C8.69 0.21 8.36 0.02 8 0.02s-0.69 0.19-0.87 0.5l-6.85 11.98c-0.18 0.31-0.18 0.69 0 1C0.47 13.81 0.8 14 1.15 14h13.7c0.36 0 0.69-0.19 0.86-0.5S15.89 12.81 15.72 12.5zM9 12H7V10h2V12zM9 9H7V5h2V9z"/></svg><br>      <span class="signed-in-tab-flash">You signed in with another tab or window. <a href="">Reload</a> to refresh your session.</span><br>      <span class="signed-out-tab-flash">You signed out in another tab or window. <a href="">Reload</a> to refresh your session.</span><br>    </div><br>    <div class="facebox" id="facebox" style="display:none;"><br>  <div class="facebox-popup"><br>    <div class="facebox-content" role="dialog" aria-labelledby="facebox-header" aria-describedby="facebox-description"><br>    </div><br>    <button type="button" class="facebox-close js-facebox-close" aria-label="Close modal"><br>      <svg aria-hidden="true" class="octicon octicon-x" height="16" version="1.1" viewbox="0 0 12 16" width="12"><path d="M7.48 8l3.75 3.75-1.48 1.48-3.75-3.75-3.75 3.75-1.48-1.48 3.75-3.75L0.77 4.25l1.48-1.48 3.75 3.75 3.75-3.75 1.48 1.48-3.75 3.75z"/></svg><br>    </button><br>  </div><br></div><br><br>  </body><br></html>


      
    </div>
    <footer class="article-footer">
      <a data-url="http://klina.github.io/2016/04/20/Documentation/" data-id="cin89ld5v0002roigv8b06sgr" class="article-share-link">Поделиться</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-DevGuide" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2016/04/20/DevGuide/" class="article-date">
  <time datetime="2016-04-20T02:45:55.854Z" itemprop="datePublished">2016-04-20</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>&lt;!DOCTYPE html&gt;</p>
<html lang="en" class=" is-copy-enabled"><br>  <head prefix="og: http://ogp.me/ns# fb: http://ogp.me/ns/fb# object: http://ogp.me/ns/object# article: http://ogp.me/ns/article# profile: http://ogp.me/ns/profile#"><br>    <meta charset="utf-8"><br><br>    <link crossorigin="anonymous" href="https://assets-cdn.github.com/assets/frameworks-4ca81a569e4b382193f26989979660344b2a86c1039cf44e471d2cdfb70c9ce4.css" integrity="sha256-TKgaVp5LOCGT8mmJl5ZgNEsqhsEDnPRORx0s37cMnOQ=" media="all" rel="stylesheet"><br>    <link crossorigin="anonymous" href="https://assets-cdn.github.com/assets/github-4129627c8cf63edb7480badb70e1a5a8eba9dd069ef776cb5f075a5f2d4047f8.css" integrity="sha256-QSlifIz2Ptt0gLrbcOGlqOup3Qae93bLXwdaXy1AR/g=" media="all" rel="stylesheet"><br><br><br><br>    <link crossorigin="anonymous" href="https://assets-cdn.github.com/assets/site-2d5d1699983d8dd7c384c67dfc183fbace8e3a24866e8822069d599f68e71fb2.css" integrity="sha256-LV0WmZg9jdfDhMZ9/Bg/us6OOiSGbogiBp1Zn2jnH7I=" media="all" rel="stylesheet"><br><br>    <link as="script" href="https://assets-cdn.github.com/assets/frameworks-b0c85b6eac5426cd1652deca19bc585e688aacec370c4541ab7f13cb5af4dc00.js" rel="preload"><br><br>    <link as="script" href="https://assets-cdn.github.com/assets/github-124b3847a604fc0e15d55e822321b3cf526c993bdad6b191fecde06505751064.js" rel="preload"><br><br>    <meta http-equiv="X-UA-Compatible" content="IE=edge"><br>    <meta http-equiv="Content-Language" content="en"><br>    <meta name="viewport" content="width=1020"><br><br><br>    <title>googletest/DevGuide.md at master · google/googletest · GitHub</title><br>    <link rel="search" type="application/opensearchdescription+xml" href="/opensearch.xml" title="GitHub"><br>    <link rel="fluid-icon" href="https://github.com/fluidicon.png" title="GitHub"><br>    <link rel="apple-touch-icon" href="/apple-touch-icon.png"><br>    <link rel="apple-touch-icon" sizes="57x57" href="/apple-touch-icon-57x57.png"><br>    <link rel="apple-touch-icon" sizes="60x60" href="/apple-touch-icon-60x60.png"><br>    <link rel="apple-touch-icon" sizes="72x72" href="/apple-touch-icon-72x72.png"><br>    <link rel="apple-touch-icon" sizes="76x76" href="/apple-touch-icon-76x76.png"><br>    <link rel="apple-touch-icon" sizes="114x114" href="/apple-touch-icon-114x114.png"><br>    <link rel="apple-touch-icon" sizes="120x120" href="/apple-touch-icon-120x120.png"><br>    <link rel="apple-touch-icon" sizes="144x144" href="/apple-touch-icon-144x144.png"><br>    <link rel="apple-touch-icon" sizes="152x152" href="/apple-touch-icon-152x152.png"><br>    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon-180x180.png"><br>    <meta property="fb:app_id" content="1401488693436528"><br><br>      <meta content="https://avatars2.githubusercontent.com/u/1342004?v=3&amp;s=400" name="twitter:image:src"><meta content="@github" name="twitter:site"><meta content="summary" name="twitter:card"><meta content="google/googletest" name="twitter:title"><meta content="googletest - Google Test" name="twitter:description"><br>      <meta content="https://avatars2.githubusercontent.com/u/1342004?v=3&amp;s=400" property="og:image"><meta content="GitHub" property="og:site_name"><meta content="object" property="og:type"><meta content="google/googletest" property="og:title"><meta content="https://github.com/google/googletest" property="og:url"><meta content="googletest - Google Test" property="og:description"><br>      <meta name="browser-stats-url" content="https://api.github.com/_private/browser/stats"><br>    <meta name="browser-errors-url" content="https://api.github.com/_private/browser/errors"><br>    <link rel="assets" href="https://assets-cdn.github.com/"><br><br>    <meta name="pjax-timeout" content="1000"><br><br><br>    <meta name="msapplication-TileImage" content="/windows-tile.png"><br>    <meta name="msapplication-TileColor" content="#ffffff"><br>    <meta name="selected-link" value="repo_source" data-pjax-transient=""><br><br>    <meta name="google-site-verification" content="KT5gs8h0wvaagLKAVWq8bbeNwnZZK1r1XQysX3xurLU"><br><meta name="google-site-verification" content="ZzhVyEFwb7w3e0-uOTltm8Jsck2F5StVihD0exw2fsA"><br>    <meta name="google-analytics" content="UA-3769691-2"><br><br><meta content="collector.githubapp.com" name="octolytics-host"><meta content="github" name="octolytics-app-id"><meta content="3E9F4DA5:5EFE:1648A258:5715E6AF" name="octolytics-dimension-request_id"><br><meta content="/&lt;user-name&gt;/&lt;repo-name&gt;/blob/show" data-pjax-transient="true" name="analytics-location"><br><br><br><br>  <meta class="js-ga-set" name="dimension1" content="Logged Out"><br><br><br><br>        <meta name="hostname" content="github.com"><br>    <meta name="user-login" content=""><br><br>        <meta name="expected-hostname" content="github.com"><br>      <meta name="js-proxy-site-detection-payload" content="ZmZmOTQyNTdjZjZiZmIwNzUzMzdiODEzOGI3MDZiOGU5MGFiYzEyZWIxNDgwN2ZkOTY3NDYwYjk5ODYyMGRjOXx7InJlbW90ZV9hZGRyZXNzIjoiNjIuMTU5Ljc3LjE2NSIsInJlcXVlc3RfaWQiOiIzRTlGNERBNTo1RUZFOjE2NDhBMjU4OjU3MTVFNkFGIiwidGltZXN0YW1wIjoxNDYxMDUzMTA0fQ=="><br><br><br>      <link rel="mask-icon" href="https://assets-cdn.github.com/pinned-octocat.svg" color="#4078c0"><br>      <link rel="icon" type="image/x-icon" href="https://assets-cdn.github.com/favicon.ico"><br><br>    <meta content="8cb1221b98aea525b7168ab311b77ee96e0e8987" name="form-nonce"><br><br>    <meta http-equiv="x-pjax-version" content="dc812ac6dabadd5440144e9805d8c8fd"><br><br><br><br>  <meta name="description" content="googletest - Google Test"><br>  <meta name="go-import" content="github.com/google/googletest git https://github.com/google/googletest.git"><br><br>  <meta content="1342004" name="octolytics-dimension-user_id"><meta content="google" name="octolytics-dimension-user_login"><meta content="39840932" name="octolytics-dimension-repository_id"><meta content="google/googletest" name="octolytics-dimension-repository_nwo"><meta content="true" name="octolytics-dimension-repository_public"><meta content="false" name="octolytics-dimension-repository_is_fork"><meta content="39840932" name="octolytics-dimension-repository_network_root_id"><meta content="google/googletest" name="octolytics-dimension-repository_network_root_nwo"><br>  <link href="https://github.com/google/googletest/commits/master.atom" rel="alternate" title="Recent Commits to googletest:master" type="application/atom+xml"><br><br><br>      <link rel="canonical" href="https://github.com/google/googletest/blob/master/googlemock/docs/DevGuide.md" data-pjax-transient=""><br>  </head><br><br><br>  <body class="logged-out   env-production windows vis-public page-blob"><br>    <div id="js-pjax-loader-bar" class="pjax-loader-bar"></div><br>    <a href="#start-of-content" tabindex="1" class="accessibility-aid js-skip-to-content">Skip to content</a><br><br><br><br><br><br><br><br>          <header class="site-header js-details-container" role="banner"><br>  <div class="container-responsive"><br>    <a class="header-logo-invertocat" href="https://github.com/" aria-label="Homepage" data-ga-click="(Logged out) Header, go to homepage, icon:logo-wordmark" target="_blank" rel="external"><br>      <svg aria-hidden="true" class="octicon octicon-mark-github" height="32" version="1.1" viewbox="0 0 16 16" width="32"><path d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59 0.4 0.07 0.55-0.17 0.55-0.38 0-0.19-0.01-0.82-0.01-1.49-2.01 0.37-2.53-0.49-2.69-0.94-0.09-0.23-0.48-0.94-0.82-1.13-0.28-0.15-0.68-0.52-0.01-0.53 0.63-0.01 1.08 0.58 1.23 0.82 0.72 1.21 1.87 0.87 2.33 0.66 0.07-0.52 0.28-0.87 0.51-1.07-1.78-0.2-3.64-0.89-3.64-3.95 0-0.87 0.31-1.59 0.82-2.15-0.08-0.2-0.36-1.02 0.08-2.12 0 0 0.67-0.21 2.2 0.82 0.64-0.18 1.32-0.27 2-0.27 0.68 0 1.36 0.09 2 0.27 1.53-1.04 2.2-0.82 2.2-0.82 0.44 1.1 0.16 1.92 0.08 2.12 0.51 0.56 0.82 1.27 0.82 2.15 0 3.07-1.87 3.75-3.65 3.95 0.29 0.25 0.54 0.73 0.54 1.48 0 1.07-0.01 1.93-0.01 2.2 0 0.21 0.15 0.46 0.55 0.38C13.71 14.53 16 11.53 16 8 16 3.58 12.42 0 8 0z"/></svg><br>    </a><br><br>    <button class="btn-link right site-header-toggle js-details-target" type="button" aria-label="Toggle navigation"><br>      <svg aria-hidden="true" class="octicon octicon-three-bars" height="24" version="1.1" viewbox="0 0 12 16" width="18"><path d="M11.41 9H0.59c-0.59 0-0.59-0.41-0.59-1s0-1 0.59-1h10.81c0.59 0 0.59 0.41 0.59 1s0 1-0.59 1z m0-4H0.59c-0.59 0-0.59-0.41-0.59-1s0-1 0.59-1h10.81c0.59 0 0.59 0.41 0.59 1s0 1-0.59 1zM0.59 11h10.81c0.59 0 0.59 0.41 0.59 1s0 1-0.59 1H0.59c-0.59 0-0.59-0.41-0.59-1s0-1 0.59-1z"/></svg><br>    </button><br><br>    <div class="site-header-menu"><br>      <nav class="site-header-nav site-header-nav-main"><br>        <a href="/personal" class="js-selected-navigation-item nav-item nav-item-personal" data-ga-click="Header, click, Nav menu - item:personal" data-selected-links="/personal /personal"><br>          Personal<br></a>        <a href="/open-source" class="js-selected-navigation-item nav-item nav-item-opensource" data-ga-click="Header, click, Nav menu - item:opensource" data-selected-links="/open-source /open-source"><br>          Open source<br></a>        <a href="/business" class="js-selected-navigation-item nav-item nav-item-business" data-ga-click="Header, click, Nav menu - item:business" data-selected-links="/business /business/features /business/customers /business"><br>          Business<br></a>        <a href="/explore" class="js-selected-navigation-item nav-item nav-item-explore" data-ga-click="Header, click, Nav menu - item:explore" data-selected-links="/explore /trending /trending/developers /integrations /integrations/feature/code /integrations/feature/collaborate /integrations/feature/ship /explore"><br>          Explore<br></a>      </nav><br><br>      <div class="site-header-actions"><br>            <a class="btn btn-primary site-header-actions-btn" href="/join?source=header-repo" data-ga-click="(Logged out) Header, clicked Sign up, text:sign-up">Sign up</a><br>          <a class="btn site-header-actions-btn mr-2" href="/login?return_to=%2Fgoogle%2Fgoogletest%2Fblob%2Fmaster%2Fgooglemock%2Fdocs%2FDevGuide.md" data-ga-click="(Logged out) Header, clicked Sign in, text:sign-in">Sign in</a><br>      </div><br><br>        <nav class="site-header-nav site-header-nav-secondary"><br>          <a class="nav-item" href="/pricing">Pricing</a><br>          <a class="nav-item" href="/blog">Blog</a><br>          <a class="nav-item" href="https://help.github.com" target="_blank" rel="external">Support</a><br>          <a class="nav-item header-search-link" href="https://github.com/search" target="_blank" rel="external">Search GitHub</a><br>              <div class="header-search scoped-search site-scoped-search js-site-search" role="search"><br>  <!-- </textarea> --><!-- '"` --><form accept-charset="UTF-8" action="/google/googletest/search" class="js-site-search-form" data-scoped-search-url="/google/googletest/search" data-unscoped-search-url="/search" method="get"><div style="margin:0;padding:0;display:inline"><input name="utf8" type="hidden" value="&#x2713;"></div><br>    <label class="form-control header-search-wrapper js-chromeless-input-container"><br>      <div class="header-search-scope">This repository</div><br>      <input type="text" class="form-control header-search-input js-site-search-focus js-site-search-field is-clearable" data-hotkey="s" name="q" placeholder="Search" aria-label="Search this repository" data-unscoped-placeholder="Search GitHub" data-scoped-placeholder="Search" tabindex="1" autocapitalize="off"><br>    </label><br></form></div><br><br>        </nav><br>    </div><br>  </div><br></header><br><br><br><br>    <div id="start-of-content" class="accessibility-aid"></div><br><br>      <div id="js-flash-container"><br></div><br><br><br>    <div role="main" class="main-content"><br>        <div itemscope="" itemtype="http://schema.org/SoftwareSourceCode"><br>    <div id="js-repo-pjax-container" data-pjax-container=""><br><br><div class="pagehead repohead instapaper_ignore readability-menu experiment-repo-nav"><br>  <div class="container repohead-details-container"><br><br><br><br><ul class="pagehead-actions"><br><br>  <li><br>      <a href="/login?return_to=%2Fgoogle%2Fgoogletest" class="btn btn-sm btn-with-count tooltipped tooltipped-n" aria-label="You must be signed in to watch a repository" rel="nofollow"><br>    <svg aria-hidden="true" class="octicon octicon-eye" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M8.06 2C3 2 0 8 0 8s3 6 8.06 6c4.94 0 7.94-6 7.94-6S13 2 8.06 2z m-0.06 10c-2.2 0-4-1.78-4-4 0-2.2 1.8-4 4-4 2.22 0 4 1.8 4 4 0 2.22-1.78 4-4 4z m2-4c0 1.11-0.89 2-2 2s-2-0.89-2-2 0.89-2 2-2 2 0.89 2 2z"/></svg><br>    Watch<br>  </a><br>  <a class="social-count" href="/google/googletest/watchers"><br>    258<br>  </a><br><br>  </li><br><br>  <li><br>      <a href="/login?return_to=%2Fgoogle%2Fgoogletest" class="btn btn-sm btn-with-count tooltipped tooltipped-n" aria-label="You must be signed in to star a repository" rel="nofollow"><br>    <svg aria-hidden="true" class="octicon octicon-star" height="16" version="1.1" viewbox="0 0 14 16" width="14"><path d="M14 6l-4.9-0.64L7 1 4.9 5.36 0 6l3.6 3.26L2.67 14l4.33-2.33 4.33 2.33L10.4 9.26 14 6z"/></svg><br>    Star<br>  </a><br><br>    <a class="social-count js-social-count" href="/google/googletest/stargazers"><br>      1,987<br>    </a><br><br>  </li><br><br>  <li><br>      <a href="/login?return_to=%2Fgoogle%2Fgoogletest" class="btn btn-sm btn-with-count tooltipped tooltipped-n" aria-label="You must be signed in to fork a repository" rel="nofollow"><br>        <svg aria-hidden="true" class="octicon octicon-repo-forked" height="16" version="1.1" viewbox="0 0 10 16" width="10"><path d="M8 1c-1.11 0-2 0.89-2 2 0 0.73 0.41 1.38 1 1.72v1.28L5 8 3 6v-1.28c0.59-0.34 1-0.98 1-1.72 0-1.11-0.89-2-2-2S0 1.89 0 3c0 0.73 0.41 1.38 1 1.72v1.78l3 3v1.78c-0.59 0.34-1 0.98-1 1.72 0 1.11 0.89 2 2 2s2-0.89 2-2c0-0.73-0.41-1.38-1-1.72V9.5l3-3V4.72c0.59-0.34 1-0.98 1-1.72 0-1.11-0.89-2-2-2zM2 4.2c-0.66 0-1.2-0.55-1.2-1.2s0.55-1.2 1.2-1.2 1.2 0.55 1.2 1.2-0.55 1.2-1.2 1.2z m3 10c-0.66 0-1.2-0.55-1.2-1.2s0.55-1.2 1.2-1.2 1.2 0.55 1.2 1.2-0.55 1.2-1.2 1.2z m3-10c-0.66 0-1.2-0.55-1.2-1.2s0.55-1.2 1.2-1.2 1.2 0.55 1.2 1.2-0.55 1.2-1.2 1.2z"/></svg><br>        Fork<br>      </a><br><br>    <a href="/google/googletest/network" class="social-count"><br>      704<br>    </a><br>  </li><br></ul><br><br>    <h1 class="entry-title public "><br>  <svg aria-hidden="true" class="octicon octicon-repo" height="16" version="1.1" viewbox="0 0 12 16" width="12"><path d="M4 9h-1v-1h1v1z m0-3h-1v1h1v-1z m0-2h-1v1h1v-1z m0-2h-1v1h1v-1z m8-1v12c0 0.55-0.45 1-1 1H6v2l-1.5-1.5-1.5 1.5V14H1c-0.55 0-1-0.45-1-1V1C0 0.45 0.45 0 1 0h10c0.55 0 1 0.45 1 1z m-1 10H1v2h2v-1h3v1h5V11z m0-10H2v9h9V1z"/></svg><br>  <span class="author" itemprop="author"><a href="/google" class="url fn" rel="author">google</a></span><!--
--><span class="path-divider">/</span><!--
--><strong itemprop="name"><a href="/google/googletest" data-pjax="#js-repo-pjax-container">googletest</a></strong><br><br></h1><br><br>  </div><br>  <div class="container"><br><br><nav class="reponav js-repo-nav js-sidenav-container-pjax" itemscope="" itemtype="http://schema.org/BreadcrumbList" role="navigation" data-pjax="#js-repo-pjax-container"><br><br>  <span itemscope="" itemtype="http://schema.org/ListItem" itemprop="itemListElement"><br>    <a href="/google/googletest" aria-selected="true" class="js-selected-navigation-item selected reponav-item" data-hotkey="g c" data-selected-links="repo_source repo_downloads repo_commits repo_releases repo_tags repo_branches /google/googletest" itemprop="url"><br>      <svg aria-hidden="true" class="octicon octicon-code" height="16" version="1.1" viewbox="0 0 14 16" width="14"><path d="M9.5 3l-1.5 1.5 3.5 3.5L8 11.5l1.5 1.5 4.5-5L9.5 3zM4.5 3L0 8l4.5 5 1.5-1.5L2.5 8l3.5-3.5L4.5 3z"/></svg><br>      <span itemprop="name">Code</span><br>      <meta itemprop="position" content="1"><br></a>  </span><br><br>    <span itemscope="" itemtype="http://schema.org/ListItem" itemprop="itemListElement"><br>      <a href="/google/googletest/issues" class="js-selected-navigation-item reponav-item" data-hotkey="g i" data-selected-links="repo_issues repo_labels repo_milestones /google/googletest/issues" itemprop="url"><br>        <svg aria-hidden="true" class="octicon octicon-issue-opened" height="16" version="1.1" viewbox="0 0 14 16" width="14"><path d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7S10.14 13.7 7 13.7 1.3 11.14 1.3 8s2.56-5.7 5.7-5.7m0-1.3C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7S10.86 1 7 1z m1 3H6v5h2V4z m0 6H6v2h2V10z"/></svg><br>        <span itemprop="name">Issues</span><br>        <span class="counter">247</span><br>        <meta itemprop="position" content="2"><br></a>    </span><br><br>  <span itemscope="" itemtype="http://schema.org/ListItem" itemprop="itemListElement"><br>    <a href="/google/googletest/pulls" class="js-selected-navigation-item reponav-item" data-hotkey="g p" data-selected-links="repo_pulls /google/googletest/pulls" itemprop="url"><br>      <svg aria-hidden="true" class="octicon octicon-git-pull-request" height="16" version="1.1" viewbox="0 0 12 16" width="12"><path d="M11 11.28c0-1.73 0-6.28 0-6.28-0.03-0.78-0.34-1.47-0.94-2.06s-1.28-0.91-2.06-0.94c0 0-1.02 0-1 0V0L4 3l3 3V4h1c0.27 0.02 0.48 0.11 0.69 0.31s0.3 0.42 0.31 0.69v6.28c-0.59 0.34-1 0.98-1 1.72 0 1.11 0.89 2 2 2s2-0.89 2-2c0-0.73-0.41-1.38-1-1.72z m-1 2.92c-0.66 0-1.2-0.55-1.2-1.2s0.55-1.2 1.2-1.2 1.2 0.55 1.2 1.2-0.55 1.2-1.2 1.2zM4 3c0-1.11-0.89-2-2-2S0 1.89 0 3c0 0.73 0.41 1.38 1 1.72 0 1.55 0 5.56 0 6.56-0.59 0.34-1 0.98-1 1.72 0 1.11 0.89 2 2 2s2-0.89 2-2c0-0.73-0.41-1.38-1-1.72V4.72c0.59-0.34 1-0.98 1-1.72z m-0.8 10c0 0.66-0.55 1.2-1.2 1.2s-1.2-0.55-1.2-1.2 0.55-1.2 1.2-1.2 1.2 0.55 1.2 1.2z m-1.2-8.8c-0.66 0-1.2-0.55-1.2-1.2s0.55-1.2 1.2-1.2 1.2 0.55 1.2 1.2-0.55 1.2-1.2 1.2z"/></svg><br>      <span itemprop="name">Pull requests</span><br>      <span class="counter">42</span><br>      <meta itemprop="position" content="3"><br></a>  </span><br><br><br>  <a href="/google/googletest/pulse" class="js-selected-navigation-item reponav-item" data-selected-links="pulse /google/googletest/pulse"><br>    <svg aria-hidden="true" class="octicon octicon-pulse" height="16" version="1.1" viewbox="0 0 14 16" width="14"><path d="M11.5 8L8.8 5.4 6.6 8.5 5.5 1.6 2.38 8H0V10h3.6L4.5 8.2l0.9 5.4L9 8.5l1.6 1.5H14V8H11.5z"/></svg><br>    Pulse<br></a><br>  <a href="/google/googletest/graphs" class="js-selected-navigation-item reponav-item" data-selected-links="repo_graphs repo_contributors /google/googletest/graphs"><br>    <svg aria-hidden="true" class="octicon octicon-graph" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M16 14v1H0V0h1v14h15z m-11-1H3V8h2v5z m4 0H7V3h2v10z m4 0H11V6h2v7z"/></svg><br>    Graphs<br></a><br><br></nav><br><br>  </div><br></div><br><br><div class="container new-discussion-timeline experiment-repo-nav"><br>  <div class="repository-content"><br><br><br><br><a href="/google/googletest/blob/d225acc90bc3a8c420a9bcd1f033033c1ccd7fe0/googlemock/docs/DevGuide.md" class="hidden js-permalink-shortcut" data-hotkey="y">Permalink</a><br><br><!-- blob contrib key: blob_contributors:v21:eba02b434015ab4e6e3adf31dd293966 --><br><br><div class="file-navigation js-zeroclipboard-container"><br><br><div class="select-menu branch-select-menu js-menu-container js-select-menu left"><br>  <button class="btn btn-sm select-menu-button js-menu-target css-truncate" data-hotkey="w" title="master" type="button" aria-label="Switch branches or tags" tabindex="0" aria-haspopup="true"><br>    <i>Branch:</i><br>    <span class="js-select-button css-truncate-target">master</span><br>  </button><br><br>  <div class="select-menu-modal-holder js-menu-content js-navigation-container" data-pjax="" aria-hidden="true"><br><br>    <div class="select-menu-modal"><br>      <div class="select-menu-header"><br>        <svg aria-label="Close" class="octicon octicon-x js-menu-close" height="16" role="img" version="1.1" viewbox="0 0 12 16" width="12"><path d="M7.48 8l3.75 3.75-1.48 1.48-3.75-3.75-3.75 3.75-1.48-1.48 3.75-3.75L0.77 4.25l1.48-1.48 3.75 3.75 3.75-3.75 1.48 1.48-3.75 3.75z"/></svg><br>        <span class="select-menu-title">Switch branches/tags</span><br>      </div><br><br>      <div class="select-menu-filters"><br>        <div class="select-menu-text-filter"><br>          <input type="text" aria-label="Filter branches/tags" id="context-commitish-filter-field" class="form-control js-filterable-field js-navigation-enable" placeholder="Filter branches/tags"><br>        </div><br>        <div class="select-menu-tabs"><br>          <ul><br>            <li class="select-menu-tab"><br>              <a href="#" data-tab-filter="branches" data-filter-placeholder="Filter branches/tags" class="js-select-menu-tab" role="tab">Branches</a><br>            </li><br>            <li class="select-menu-tab"><br>              <a href="#" data-tab-filter="tags" data-filter-placeholder="Find a tag…" class="js-select-menu-tab" role="tab">Tags</a><br>            </li><br>          </ul><br>        </div><br>      </div><br><br>      <div class="select-menu-list select-menu-tab-bucket js-select-menu-tab-bucket" data-tab-filter="branches" role="menu"><br><br>        <div data-filterable-for="context-commitish-filter-field" data-filterable-type="substring"><br><br><br>            <a class="select-menu-item js-navigation-item js-navigation-open " href="/google/googletest/blob/BillyDonahue-patch-1/googlemock/docs/DevGuide.md" data-name="BillyDonahue-patch-1" data-skip-pjax="true" rel="nofollow"><br>              <svg aria-hidden="true" class="octicon octicon-check select-menu-item-icon" height="16" version="1.1" viewbox="0 0 12 16" width="12"><path d="M12 5L4 13 0 9l1.5-1.5 2.5 2.5 6.5-6.5 1.5 1.5z"/></svg><br>              <span class="select-menu-item-text css-truncate-target js-select-menu-filter-text" title="BillyDonahue-patch-1"><br>                BillyDonahue-patch-1<br>              </span><br>            </a><br>            <a class="select-menu-item js-navigation-item js-navigation-open selected" href="/google/googletest/blob/master/googlemock/docs/DevGuide.md" data-name="master" data-skip-pjax="true" rel="nofollow"><br>              <svg aria-hidden="true" class="octicon octicon-check select-menu-item-icon" height="16" version="1.1" viewbox="0 0 12 16" width="12"><path d="M12 5L4 13 0 9l1.5-1.5 2.5 2.5 6.5-6.5 1.5 1.5z"/></svg><br>              <span class="select-menu-item-text css-truncate-target js-select-menu-filter-text" title="master"><br>                master<br>              </span><br>            </a><br>        </div><br><br>          <div class="select-menu-no-results">Nothing to show</div><br>      </div><br><br>      <div class="select-menu-list select-menu-tab-bucket js-select-menu-tab-bucket" data-tab-filter="tags"><br>        <div data-filterable-for="context-commitish-filter-field" data-filterable-type="substring"><br><br><br>            <a class="select-menu-item js-navigation-item js-navigation-open " href="/google/googletest/tree/release-1.7.0/googlemock/docs/DevGuide.md" data-name="release-1.7.0" data-skip-pjax="true" rel="nofollow"><br>              <svg aria-hidden="true" class="octicon octicon-check select-menu-item-icon" height="16" version="1.1" viewbox="0 0 12 16" width="12"><path d="M12 5L4 13 0 9l1.5-1.5 2.5 2.5 6.5-6.5 1.5 1.5z"/></svg><br>              <span class="select-menu-item-text css-truncate-target" title="release-1.7.0"><br>                release-1.7.0<br>              </span><br>            </a><br>            <a class="select-menu-item js-navigation-item js-navigation-open " href="/google/googletest/tree/release-1.6.0/googlemock/docs/DevGuide.md" data-name="release-1.6.0" data-skip-pjax="true" rel="nofollow"><br>              <svg aria-hidden="true" class="octicon octicon-check select-menu-item-icon" height="16" version="1.1" viewbox="0 0 12 16" width="12"><path d="M12 5L4 13 0 9l1.5-1.5 2.5 2.5 6.5-6.5 1.5 1.5z"/></svg><br>              <span class="select-menu-item-text css-truncate-target" title="release-1.6.0"><br>                release-1.6.0<br>              </span><br>            </a><br>            <a class="select-menu-item js-navigation-item js-navigation-open " href="/google/googletest/tree/release-1.5.0/googlemock/docs/DevGuide.md" data-name="release-1.5.0" data-skip-pjax="true" rel="nofollow"><br>              <svg aria-hidden="true" class="octicon octicon-check select-menu-item-icon" height="16" version="1.1" viewbox="0 0 12 16" width="12"><path d="M12 5L4 13 0 9l1.5-1.5 2.5 2.5 6.5-6.5 1.5 1.5z"/></svg><br>              <span class="select-menu-item-text css-truncate-target" title="release-1.5.0"><br>                release-1.5.0<br>              </span><br>            </a><br>            <a class="select-menu-item js-navigation-item js-navigation-open " href="/google/googletest/tree/release-1.4.0/googlemock/docs/DevGuide.md" data-name="release-1.4.0" data-skip-pjax="true" rel="nofollow"><br>              <svg aria-hidden="true" class="octicon octicon-check select-menu-item-icon" height="16" version="1.1" viewbox="0 0 12 16" width="12"><path d="M12 5L4 13 0 9l1.5-1.5 2.5 2.5 6.5-6.5 1.5 1.5z"/></svg><br>              <span class="select-menu-item-text css-truncate-target" title="release-1.4.0"><br>                release-1.4.0<br>              </span><br>            </a><br>            <a class="select-menu-item js-navigation-item js-navigation-open " href="/google/googletest/tree/release-1.3.0/googlemock/docs/DevGuide.md" data-name="release-1.3.0" data-skip-pjax="true" rel="nofollow"><br>              <svg aria-hidden="true" class="octicon octicon-check select-menu-item-icon" height="16" version="1.1" viewbox="0 0 12 16" width="12"><path d="M12 5L4 13 0 9l1.5-1.5 2.5 2.5 6.5-6.5 1.5 1.5z"/></svg><br>              <span class="select-menu-item-text css-truncate-target" title="release-1.3.0"><br>                release-1.3.0<br>              </span><br>            </a><br>            <a class="select-menu-item js-navigation-item js-navigation-open " href="/google/googletest/tree/release-1.2.1/googlemock/docs/DevGuide.md" data-name="release-1.2.1" data-skip-pjax="true" rel="nofollow"><br>              <svg aria-hidden="true" class="octicon octicon-check select-menu-item-icon" height="16" version="1.1" viewbox="0 0 12 16" width="12"><path d="M12 5L4 13 0 9l1.5-1.5 2.5 2.5 6.5-6.5 1.5 1.5z"/></svg><br>              <span class="select-menu-item-text css-truncate-target" title="release-1.2.1"><br>                release-1.2.1<br>              </span><br>            </a><br>            <a class="select-menu-item js-navigation-item js-navigation-open " href="/google/googletest/tree/release-1.2.0/googlemock/docs/DevGuide.md" data-name="release-1.2.0" data-skip-pjax="true" rel="nofollow"><br>              <svg aria-hidden="true" class="octicon octicon-check select-menu-item-icon" height="16" version="1.1" viewbox="0 0 12 16" width="12"><path d="M12 5L4 13 0 9l1.5-1.5 2.5 2.5 6.5-6.5 1.5 1.5z"/></svg><br>              <span class="select-menu-item-text css-truncate-target" title="release-1.2.0"><br>                release-1.2.0<br>              </span><br>            </a><br>            <a class="select-menu-item js-navigation-item js-navigation-open " href="/google/googletest/tree/release-1.1.0/googlemock/docs/DevGuide.md" data-name="release-1.1.0" data-skip-pjax="true" rel="nofollow"><br>              <svg aria-hidden="true" class="octicon octicon-check select-menu-item-icon" height="16" version="1.1" viewbox="0 0 12 16" width="12"><path d="M12 5L4 13 0 9l1.5-1.5 2.5 2.5 6.5-6.5 1.5 1.5z"/></svg><br>              <span class="select-menu-item-text css-truncate-target" title="release-1.1.0"><br>                release-1.1.0<br>              </span><br>            </a><br>            <a class="select-menu-item js-navigation-item js-navigation-open " href="/google/googletest/tree/release-1.0.1/googlemock/docs/DevGuide.md" data-name="release-1.0.1" data-skip-pjax="true" rel="nofollow"><br>              <svg aria-hidden="true" class="octicon octicon-check select-menu-item-icon" height="16" version="1.1" viewbox="0 0 12 16" width="12"><path d="M12 5L4 13 0 9l1.5-1.5 2.5 2.5 6.5-6.5 1.5 1.5z"/></svg><br>              <span class="select-menu-item-text css-truncate-target" title="release-1.0.1"><br>                release-1.0.1<br>              </span><br>            </a><br>            <a class="select-menu-item js-navigation-item js-navigation-open " href="/google/googletest/tree/release-1.0.0/googlemock/docs/DevGuide.md" data-name="release-1.0.0" data-skip-pjax="true" rel="nofollow"><br>              <svg aria-hidden="true" class="octicon octicon-check select-menu-item-icon" height="16" version="1.1" viewbox="0 0 12 16" width="12"><path d="M12 5L4 13 0 9l1.5-1.5 2.5 2.5 6.5-6.5 1.5 1.5z"/></svg><br>              <span class="select-menu-item-text css-truncate-target" title="release-1.0.0"><br>                release-1.0.0<br>              </span><br>            </a><br>        </div><br><br>        <div class="select-menu-no-results">Nothing to show</div><br>      </div><br><br>    </div><br>  </div><br></div><br><br>  <div class="btn-group right"><br>    <a href="/google/googletest/find/master" class="js-pjax-capture-input btn btn-sm" data-pjax="" data-hotkey="t"><br>      Find file<br>    </a><br>    <button aria-label="Copy file path to clipboard" class="js-zeroclipboard btn btn-sm zeroclipboard-button tooltipped tooltipped-s" data-copied-hint="Copied!" type="button">Copy path</button><br>  </div><br>  <div class="breadcrumb js-zeroclipboard-target"><br>    <span class="repo-root js-repo-root"><span class="js-path-segment"><a href="/google/googletest"><span>googletest</span></a></span></span><span class="separator">/</span><span class="js-path-segment"><a href="/google/googletest/tree/master/googlemock"><span>googlemock</span></a></span><span class="separator">/</span><span class="js-path-segment"><a href="/google/googletest/tree/master/googlemock/docs"><span>docs</span></a></span><span class="separator">/</span><strong class="final-path">DevGuide.md</strong><br>  </div><br></div><br><br><br>  <div class="commit-tease"><br>      <span class="right"><br>        <a class="commit-tease-sha" href="/google/googletest/commit/a470862dbe806b4e55232d6aa637a4bd94b800f8" data-pjax=""><br>          a470862<br>        </a><br>        <time datetime="2015-12-08T15:02:50Z" is="relative-time">Dec 8, 2015</time><br>      </span><br>      <div><br>        <img alt="" class="avatar" height="20" src="https://2.gravatar.com/avatar/0c5dbc6456ec61e451fab49a1ae31091?d=https%3A%2F%2Fassets-cdn.github.com%2Fimages%2Fgravatars%2Fgravatar-user-420.png&amp;r=x&amp;s=140" width="20"><br>        <span class="user-mention">Paul Rosset</span><br>          <a href="/google/googletest/commit/a470862dbe806b4e55232d6aa637a4bd94b800f8" class="message" data-pjax="true" title="fixed link in googlemock documentation">fixed link in googlemock documentation</a><br>      </div><br><br>    <div class="commit-tease-contributors"><br>      <button type="button" class="btn-link muted-link contributors-toggle" data-facebox="#blob_contributors_box"><br>        <strong>1</strong><br>         contributor<br>      </button><br><br>    </div><br><br>    <div id="blob_contributors_box" style="display:none"><br>      <h2 class="facebox-header" data-facebox-id="facebox-header">Users who have contributed to this file</h2><br>      <ul class="facebox-user-list" data-facebox-id="facebox-description"><br>          <li class="facebox-user-list-item"><br>            <img alt="@BillyDonahue" height="24" src="https://avatars0.githubusercontent.com/u/8611652?v=3&amp;s=48" width="24"><br>            <a href="/BillyDonahue">BillyDonahue</a><br>          </li><br>      </ul><br>    </div><br>  </div><br><br><div class="file"><br>  <div class="file-header"><br>  <div class="file-actions"><br><br>    <div class="btn-group"><br>      <a href="/google/googletest/raw/master/googlemock/docs/DevGuide.md" class="btn btn-sm " id="raw-url">Raw</a><br>        <a href="/google/googletest/blame/master/googlemock/docs/DevGuide.md" class="btn btn-sm js-update-url-with-hash">Blame</a><br>      <a href="/google/googletest/commits/master/googlemock/docs/DevGuide.md" class="btn btn-sm " rel="nofollow">History</a><br>    </div><br><br>        <a class="btn-octicon tooltipped tooltipped-nw" href="https://windows.github.com" aria-label="Open this file in GitHub Desktop" data-ga-click="Repository, open with desktop, type:windows" target="_blank" rel="external"><br>            <svg aria-hidden="true" class="octicon octicon-device-desktop" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M15 2H1c-0.55 0-1 0.45-1 1v9c0 0.55 0.45 1 1 1h5.34c-0.25 0.61-0.86 1.39-2.34 2h8c-1.48-0.61-2.09-1.39-2.34-2h5.34c0.55 0 1-0.45 1-1V3c0-0.55-0.45-1-1-1z m0 9H1V3h14v8z"/></svg><br>        </a><br><br>        <button type="button" class="btn-octicon disabled tooltipped tooltipped-nw" aria-label="You must be signed in to make or propose changes"><br>          <svg aria-hidden="true" class="octicon octicon-pencil" height="16" version="1.1" viewbox="0 0 14 16" width="14"><path d="M0 12v3h3l8-8-3-3L0 12z m3 2H1V12h1v1h1v1z m10.3-9.3l-1.3 1.3-3-3 1.3-1.3c0.39-0.39 1.02-0.39 1.41 0l1.59 1.59c0.39 0.39 0.39 1.02 0 1.41z"/></svg><br>        </button><br>        <button type="button" class="btn-octicon btn-octicon-danger disabled tooltipped tooltipped-nw" aria-label="You must be signed in to make or propose changes"><br>          <svg aria-hidden="true" class="octicon octicon-trashcan" height="16" version="1.1" viewbox="0 0 12 16" width="12"><path d="M10 2H8c0-0.55-0.45-1-1-1H4c-0.55 0-1 0.45-1 1H1c-0.55 0-1 0.45-1 1v1c0 0.55 0.45 1 1 1v9c0 0.55 0.45 1 1 1h7c0.55 0 1-0.45 1-1V5c0.55 0 1-0.45 1-1v-1c0-0.55-0.45-1-1-1z m-1 12H2V5h1v8h1V5h1v8h1V5h1v8h1V5h1v9z m1-10H1v-1h9v1z"/></svg><br>        </button><br>  </div><br><br>  <div class="file-info"><br>      133 lines (92 sloc)<br>      <span class="file-info-divider"></span><br>    7.15 KB<br>  </div><br></div><br><br><br>  <div id="readme" class="readme blob instapaper_body"><br>    <article class="markdown-body entry-content" itemprop="text"><p>If you are interested in understanding the internals of Google Mock,<br>building from source, or contributing ideas or modifications to the<br>project, then this document is for you.</p><br><br><h1><a id="user-content-introduction" class="anchor" href="#introduction" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"/></svg></a>Introduction</h1><br><br><p>First, let’s give you some background of the project.</p><br><br><h2><a id="user-content-licensing" class="anchor" href="#licensing" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"/></svg></a>Licensing</h2><br><br><p>All Google Mock source and pre-built packages are provided under the <a href="http://www.opensource.org/licenses/bsd-license.php" target="_blank" rel="external">New BSD License</a>.</p><br><br><h2><a id="user-content-the-google-mock-community" class="anchor" href="#the-google-mock-community" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"/></svg></a>The Google Mock Community</h2><br><br><p>The Google Mock community exists primarily through the <a href="http://groups.google.com/group/googlemock" target="_blank" rel="external">discussion group</a>, the<br><a href="https://github.com/google/googletest/issues" target="_blank" rel="external">issue tracker</a> and, to a lesser extent, the <a href="/google/googletest/blob/master/googlemock">source control repository</a>. You are definitely encouraged to contribute to the<br>discussion and you can also help us to keep the effectiveness of the<br>group high by following and promoting the guidelines listed here.</p><br><br><h3><a id="user-content-please-be-friendly" class="anchor" href="#please-be-friendly" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"/></svg></a>Please Be Friendly</h3><br><br><p>Showing courtesy and respect to others is a vital part of the Google<br>culture, and we strongly encourage everyone participating in Google<br>Mock development to join us in accepting nothing less. Of course,<br>being courteous is not the same as failing to constructively disagree<br>with each other, but it does mean that we should be respectful of each<br>other when enumerating the 42 technical reasons that a particular<br>proposal may not be the best choice. There’s never a reason to be<br>antagonistic or dismissive toward anyone who is sincerely trying to<br>contribute to a discussion.</p><br><br><p>Sure, C++ testing is serious business and all that, but it’s also<br>a lot of fun. Let’s keep it that way. Let’s strive to be one of the<br>friendliest communities in all of open source.</p><br><br><h3><a id="user-content-where-to-discuss-google-mock" class="anchor" href="#where-to-discuss-google-mock" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"/></svg></a>Where to Discuss Google Mock</h3><br><br><p>As always, discuss Google Mock in the official <a href="http://groups.google.com/group/googlemock" target="_blank" rel="external">Google C++ Mocking Framework discussion group</a>.  You don’t have to actually submit<br>code in order to sign up. Your participation itself is a valuable<br>contribution.</p><br><br><h1><a id="user-content-working-with-the-code" class="anchor" href="#working-with-the-code" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"/></svg></a>Working with the Code</h1><br><br><p>If you want to get your hands dirty with the code inside Google Mock,<br>this is the section for you.</p><br><br><h2><a id="user-content-checking-out-the-source-from-subversion" class="anchor" href="#checking-out-the-source-from-subversion" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"/></svg></a>Checking Out the Source from Subversion</h2><br><br><p>Checking out the Google Mock source is most useful if you plan to<br>tweak it yourself.  You check out the source for Google Mock using a<br><a href="http://subversion.tigris.org/" target="_blank" rel="external">Subversion</a> client as you would for any<br>other project hosted on Google Code.  Please see the instruction on<br>the <a href="/google/googletest/blob/master/googlemock">source code access page</a> for how to do it.</p><br><br><h2><a id="user-content-compiling-from-source" class="anchor" href="#compiling-from-source" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"/></svg></a>Compiling from Source</h2><br><br><p>Once you check out the code, you can find instructions on how to<br>compile it in the <a href="/google/googletest/blob/master/googlemock/README.md">README</a> file.</p><br><br><h2><a id="user-content-testing" class="anchor" href="#testing" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"/></svg></a>Testing</h2><br><br><p>A mocking framework is of no good if itself is not thoroughly tested.<br>Tests should be written for any new code, and changes should be<br>verified to not break existing tests before they are submitted for<br>review. To perform the tests, follow the instructions in <a href="http://code.google.com/p/googlemock/source/browse/trunk/README" target="_blank" rel="external">README</a> and<br>verify that there are no failures.</p><br><br><h1><a id="user-content-contributing-code" class="anchor" href="#contributing-code" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"/></svg></a>Contributing Code</h1><br><br><p>We are excited that Google Mock is now open source, and hope to get<br>great patches from the community. Before you fire up your favorite IDE<br>and begin hammering away at that new feature, though, please take the<br>time to read this section and understand the process. While it seems<br>rigorous, we want to keep a high standard of quality in the code<br>base.</p><br><br><h2><a id="user-content-contributor-license-agreements" class="anchor" href="#contributor-license-agreements" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"/></svg></a>Contributor License Agreements</h2><br><br><p>You must sign a Contributor License Agreement (CLA) before we can<br>accept any code.  The CLA protects you and us.</p><br><br><ul><br><li>If you are an individual writing original source code and you’re sure you own the intellectual property, then you’ll need to sign an <a href="http://code.google.com/legal/individual-cla-v1.0.html" target="_blank" rel="external">individual CLA</a>.</li><br><li>If you work for a company that wants to allow you to contribute your work to Google Mock, then you’ll need to sign a <a href="http://code.google.com/legal/corporate-cla-v1.0.html" target="_blank" rel="external">corporate CLA</a>.</li><br></ul><br><br><p>Follow either of the two links above to access the appropriate CLA and<br>instructions for how to sign and return it.</p><br><br><h2><a id="user-content-coding-style" class="anchor" href="#coding-style" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"/></svg></a>Coding Style</h2><br><br><p>To keep the source consistent, readable, diffable and easy to merge,<br>we use a fairly rigid coding style, as defined by the <a href="https://github.com/google/styleguide" target="_blank" rel="external">google-styleguide</a> project.  All patches will be expected<br>to conform to the style outlined <a href="https://github.com/google/styleguide/blob/gh-pages/cppguide.xml" target="_blank" rel="external">here</a>.</p><br><br><h2><a id="user-content-submitting-patches" class="anchor" href="#submitting-patches" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"/></svg></a>Submitting Patches</h2><br><br><p>Please do submit code. Here’s what you need to do:</p><br><br><ol><br><li>Normally you should make your change against the SVN trunk instead of a branch or a tag, as the latter two are for release control and should be treated mostly as read-only.</li><br><li>Decide which code you want to submit. A submission should be a set of changes that addresses one issue in the <a href="http://code.google.com/p/googlemock/issues/list" target="_blank" rel="external">Google Mock issue tracker</a>. Please don’t mix more than one logical change per submittal, because it makes the history hard to follow. If you want to make a change that doesn’t have a corresponding issue in the issue tracker, please create one.</li><br><li>Also, coordinate with team members that are listed on the issue in question. This ensures that work isn’t being duplicated and communicating your plan early also generally leads to better patches.</li><br><li>Ensure that your code adheres to the <a href="#Coding_Style.md">Google Mock source code style</a>.</li><br><li>Ensure that there are unit tests for your code.</li><br><li>Sign a Contributor License Agreement.</li><br><li>Create a patch file using <code>svn diff</code>.</li><br><li>We use <a href="http://codereview.appspot.com/" target="_blank" rel="external">Rietveld</a> to do web-based code reviews.  You can read about the tool <a href="https://github.com/rietveld-codereview/rietveld/wiki" target="_blank" rel="external">here</a>.  When you are ready, upload your patch via Rietveld and notify <code>googlemock@googlegroups.com</code> to review it.  There are several ways to upload the patch.  We recommend using the <a href="/google/googletest/blob/master/googlemock/scripts/upload_gmock.py">upload_gmock.py</a> script, which you can find in the <code>scripts/</code> folder in the SVN trunk.</li><br></ol><br><br><h2><a id="user-content-google-mock-committers" class="anchor" href="#google-mock-committers" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"/></svg></a>Google Mock Committers</h2><br><br><p>The current members of the Google Mock engineering team are the only<br>committers at present. In the great tradition of eating one’s own<br>dogfood, we will be requiring each new Google Mock engineering team<br>member to earn the right to become a committer by following the<br>procedures in this document, writing consistently great code, and<br>demonstrating repeatedly that he or she truly gets the zen of Google<br>Mock.</p><br><br><h1><a id="user-content-release-process" class="anchor" href="#release-process" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"/></svg></a>Release Process</h1><br><br><p>We follow the typical release process for Subversion-based projects:</p><br><br><ol><br><li>A release branch named <code>release-X.Y</code> is created.</li><br><li>Bugs are fixed and features are added in trunk; those individual patches are merged into the release branch until it’s stable.</li><br><li>An individual point release (the <code>Z</code> in <code>X.Y.Z</code>) is made by creating a tag from the branch.</li><br><li>Repeat steps 2 and 3 throughout one release cycle (as determined by features or time).</li><br><li>Go back to step 1 to create another release branch and so on.</li><br></ol><br><br><hr><br><br><p>This page is based on the <a href="http://code.google.com/webtoolkit/makinggwtbetter.html" target="_blank" rel="external">Making GWT Better</a> guide from the <a href="http://code.google.com/webtoolkit/" target="_blank" rel="external">Google Web Toolkit</a> project.  Except as otherwise <a href="http://code.google.com/policies.html#restrictions" target="_blank" rel="external">noted</a>, the content of this page is licensed under the <a href="http://creativecommons.org/licenses/by/2.5/" target="_blank" rel="external">Creative Commons Attribution 2.5 License</a>.</p><br></article><br>  </div><br><br></div><br><br><button type="button" data-facebox="#jump-to-line" data-facebox-class="linejump" data-hotkey="l" class="hidden">Jump to Line</button><br><div id="jump-to-line" style="display:none"><br>  <!-- </textarea> --><!-- '"` --><form accept-charset="UTF-8" action="" class="js-jump-to-line-form" method="get"><div style="margin:0;padding:0;display:inline"><input name="utf8" type="hidden" value="&#x2713;"></div><br>    <input class="form-control linejump-input js-jump-to-line-field" type="text" placeholder="Jump to line&hellip;" aria-label="Jump to line" autofocus><br>    <button type="submit" class="btn">Go</button><br></form></div><br><br>  </div><br>  <div class="modal-backdrop"></div><br></div><br><br><br>    </div><br>  </div><br><br>    </div><br><br>        <div class="container site-footer-container"><br>  <div class="site-footer" role="contentinfo"><br>    <ul class="site-footer-links right"><br>        <li><a href="https://status.github.com/" data-ga-click="Footer, go to status, text:status" target="_blank" rel="external">Status</a></li><br>      <li><a href="https://developer.github.com" data-ga-click="Footer, go to api, text:api" target="_blank" rel="external">API</a></li><br>      <li><a href="https://training.github.com" data-ga-click="Footer, go to training, text:training" target="_blank" rel="external">Training</a></li><br>      <li><a href="https://shop.github.com" data-ga-click="Footer, go to shop, text:shop" target="_blank" rel="external">Shop</a></li><br>        <li><a href="https://github.com/blog" data-ga-click="Footer, go to blog, text:blog" target="_blank" rel="external">Blog</a></li><br>        <li><a href="https://github.com/about" data-ga-click="Footer, go to about, text:about" target="_blank" rel="external">About</a></li><br><br>    </ul><br><br>    <a href="https://github.com" aria-label="Homepage" class="site-footer-mark" target="_blank" rel="external"><br>      <svg aria-hidden="true" class="octicon octicon-mark-github" height="24" title="GitHub " version="1.1" viewbox="0 0 16 16" width="24"><path d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59 0.4 0.07 0.55-0.17 0.55-0.38 0-0.19-0.01-0.82-0.01-1.49-2.01 0.37-2.53-0.49-2.69-0.94-0.09-0.23-0.48-0.94-0.82-1.13-0.28-0.15-0.68-0.52-0.01-0.53 0.63-0.01 1.08 0.58 1.23 0.82 0.72 1.21 1.87 0.87 2.33 0.66 0.07-0.52 0.28-0.87 0.51-1.07-1.78-0.2-3.64-0.89-3.64-3.95 0-0.87 0.31-1.59 0.82-2.15-0.08-0.2-0.36-1.02 0.08-2.12 0 0 0.67-0.21 2.2 0.82 0.64-0.18 1.32-0.27 2-0.27 0.68 0 1.36 0.09 2 0.27 1.53-1.04 2.2-0.82 2.2-0.82 0.44 1.1 0.16 1.92 0.08 2.12 0.51 0.56 0.82 1.27 0.82 2.15 0 3.07-1.87 3.75-3.65 3.95 0.29 0.25 0.54 0.73 0.54 1.48 0 1.07-0.01 1.93-0.01 2.2 0 0.21 0.15 0.46 0.55 0.38C13.71 14.53 16 11.53 16 8 16 3.58 12.42 0 8 0z"/></svg><br></a><br>    <ul class="site-footer-links"><br>      <li>&copy; 2016 <span title="0.08560s from github-fe154-cp1-prd.iad.github.net">GitHub</span>, Inc.</li><br>        <li><a href="https://github.com/site/terms" data-ga-click="Footer, go to terms, text:terms" target="_blank" rel="external">Terms</a></li><br>        <li><a href="https://github.com/site/privacy" data-ga-click="Footer, go to privacy, text:privacy" target="_blank" rel="external">Privacy</a></li><br>        <li><a href="https://github.com/security" data-ga-click="Footer, go to security, text:security" target="_blank" rel="external">Security</a></li><br>        <li><a href="https://github.com/contact" data-ga-click="Footer, go to contact, text:contact" target="_blank" rel="external">Contact</a></li><br>        <li><a href="https://help.github.com" data-ga-click="Footer, go to help, text:help" target="_blank" rel="external">Help</a></li><br>    </ul><br>  </div><br></div><br><br><br><br><br><br><br>    <div id="ajax-error-message" class="ajax-error-message flash flash-error"><br>      <svg aria-hidden="true" class="octicon octicon-alert" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M15.72 12.5l-6.85-11.98C8.69 0.21 8.36 0.02 8 0.02s-0.69 0.19-0.87 0.5l-6.85 11.98c-0.18 0.31-0.18 0.69 0 1C0.47 13.81 0.8 14 1.15 14h13.7c0.36 0 0.69-0.19 0.86-0.5S15.89 12.81 15.72 12.5zM9 12H7V10h2V12zM9 9H7V5h2V9z"/></svg><br>      <button type="button" class="flash-close js-flash-close js-ajax-error-dismiss" aria-label="Dismiss error"><br>        <svg aria-hidden="true" class="octicon octicon-x" height="16" version="1.1" viewbox="0 0 12 16" width="12"><path d="M7.48 8l3.75 3.75-1.48 1.48-3.75-3.75-3.75 3.75-1.48-1.48 3.75-3.75L0.77 4.25l1.48-1.48 3.75 3.75 3.75-3.75 1.48 1.48-3.75 3.75z"/></svg><br>      </button><br>      Something went wrong with that request. Please try again.<br>    </div><br><br><br><br>      <script crossorigin="anonymous" integrity="sha256-sMhbbqxUJs0WUt7KGbxYXmiKrOw3DEVBq38Ty1r03AA=" src="https://assets-cdn.github.com/assets/frameworks-b0c85b6eac5426cd1652deca19bc585e688aacec370c4541ab7f13cb5af4dc00.js"></script><br>      <script async="async" crossorigin="anonymous" integrity="sha256-Eks4R6YE/A4V1V6CIyGzz1JsmTva1rGR/s3gZQV1EGQ=" src="https://assets-cdn.github.com/assets/github-124b3847a604fc0e15d55e822321b3cf526c993bdad6b191fecde06505751064.js"></script><br><br><br><br><br><br>    <div class="js-stale-session-flash stale-session-flash flash flash-warn flash-banner hidden"><br>      <svg aria-hidden="true" class="octicon octicon-alert" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M15.72 12.5l-6.85-11.98C8.69 0.21 8.36 0.02 8 0.02s-0.69 0.19-0.87 0.5l-6.85 11.98c-0.18 0.31-0.18 0.69 0 1C0.47 13.81 0.8 14 1.15 14h13.7c0.36 0 0.69-0.19 0.86-0.5S15.89 12.81 15.72 12.5zM9 12H7V10h2V12zM9 9H7V5h2V9z"/></svg><br>      <span class="signed-in-tab-flash">You signed in with another tab or window. <a href="">Reload</a> to refresh your session.</span><br>      <span class="signed-out-tab-flash">You signed out in another tab or window. <a href="">Reload</a> to refresh your session.</span><br>    </div><br>    <div class="facebox" id="facebox" style="display:none;"><br>  <div class="facebox-popup"><br>    <div class="facebox-content" role="dialog" aria-labelledby="facebox-header" aria-describedby="facebox-description"><br>    </div><br>    <button type="button" class="facebox-close js-facebox-close" aria-label="Close modal"><br>      <svg aria-hidden="true" class="octicon octicon-x" height="16" version="1.1" viewbox="0 0 12 16" width="12"><path d="M7.48 8l3.75 3.75-1.48 1.48-3.75-3.75-3.75 3.75-1.48-1.48 3.75-3.75L0.77 4.25l1.48-1.48 3.75 3.75 3.75-3.75 1.48 1.48-3.75 3.75z"/></svg><br>    </button><br>  </div><br></div><br><br>  </body><br></html>


      
    </div>
    <footer class="article-footer">
      <a data-url="http://klina.github.io/2016/04/20/DevGuide/" data-id="cin89ld5v0001roigwl692oyg" class="article-share-link">Поделиться</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-CookBook" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2016/04/20/CookBook/" class="article-date">
  <time datetime="2016-04-20T02:45:00.800Z" itemprop="datePublished">2016-04-20</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>&lt;!DOCTYPE html&gt;</p>
<html lang="en" class=" is-copy-enabled"><br>  <head prefix="og: http://ogp.me/ns# fb: http://ogp.me/ns/fb# object: http://ogp.me/ns/object# article: http://ogp.me/ns/article# profile: http://ogp.me/ns/profile#"><br>    <meta charset="utf-8"><br><br>    <link crossorigin="anonymous" href="https://assets-cdn.github.com/assets/frameworks-4ca81a569e4b382193f26989979660344b2a86c1039cf44e471d2cdfb70c9ce4.css" integrity="sha256-TKgaVp5LOCGT8mmJl5ZgNEsqhsEDnPRORx0s37cMnOQ=" media="all" rel="stylesheet"><br>    <link crossorigin="anonymous" href="https://assets-cdn.github.com/assets/github-4129627c8cf63edb7480badb70e1a5a8eba9dd069ef776cb5f075a5f2d4047f8.css" integrity="sha256-QSlifIz2Ptt0gLrbcOGlqOup3Qae93bLXwdaXy1AR/g=" media="all" rel="stylesheet"><br><br><br><br>    <link crossorigin="anonymous" href="https://assets-cdn.github.com/assets/site-2d5d1699983d8dd7c384c67dfc183fbace8e3a24866e8822069d599f68e71fb2.css" integrity="sha256-LV0WmZg9jdfDhMZ9/Bg/us6OOiSGbogiBp1Zn2jnH7I=" media="all" rel="stylesheet"><br><br>    <link as="script" href="https://assets-cdn.github.com/assets/frameworks-b0c85b6eac5426cd1652deca19bc585e688aacec370c4541ab7f13cb5af4dc00.js" rel="preload"><br><br>    <link as="script" href="https://assets-cdn.github.com/assets/github-124b3847a604fc0e15d55e822321b3cf526c993bdad6b191fecde06505751064.js" rel="preload"><br><br>    <meta http-equiv="X-UA-Compatible" content="IE=edge"><br>    <meta http-equiv="Content-Language" content="en"><br>    <meta name="viewport" content="width=1020"><br><br><br>    <title>googletest/CookBook.md at master · google/googletest · GitHub</title><br>    <link rel="search" type="application/opensearchdescription+xml" href="/opensearch.xml" title="GitHub"><br>    <link rel="fluid-icon" href="https://github.com/fluidicon.png" title="GitHub"><br>    <link rel="apple-touch-icon" href="/apple-touch-icon.png"><br>    <link rel="apple-touch-icon" sizes="57x57" href="/apple-touch-icon-57x57.png"><br>    <link rel="apple-touch-icon" sizes="60x60" href="/apple-touch-icon-60x60.png"><br>    <link rel="apple-touch-icon" sizes="72x72" href="/apple-touch-icon-72x72.png"><br>    <link rel="apple-touch-icon" sizes="76x76" href="/apple-touch-icon-76x76.png"><br>    <link rel="apple-touch-icon" sizes="114x114" href="/apple-touch-icon-114x114.png"><br>    <link rel="apple-touch-icon" sizes="120x120" href="/apple-touch-icon-120x120.png"><br>    <link rel="apple-touch-icon" sizes="144x144" href="/apple-touch-icon-144x144.png"><br>    <link rel="apple-touch-icon" sizes="152x152" href="/apple-touch-icon-152x152.png"><br>    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon-180x180.png"><br>    <meta property="fb:app_id" content="1401488693436528"><br><br>      <meta content="https://avatars2.githubusercontent.com/u/1342004?v=3&amp;s=400" name="twitter:image:src"><meta content="@github" name="twitter:site"><meta content="summary" name="twitter:card"><meta content="google/googletest" name="twitter:title"><meta content="googletest - Google Test" name="twitter:description"><br>      <meta content="https://avatars2.githubusercontent.com/u/1342004?v=3&amp;s=400" property="og:image"><meta content="GitHub" property="og:site_name"><meta content="object" property="og:type"><meta content="google/googletest" property="og:title"><meta content="https://github.com/google/googletest" property="og:url"><meta content="googletest - Google Test" property="og:description"><br>      <meta name="browser-stats-url" content="https://api.github.com/_private/browser/stats"><br>    <meta name="browser-errors-url" content="https://api.github.com/_private/browser/errors"><br>    <link rel="assets" href="https://assets-cdn.github.com/"><br><br>    <meta name="pjax-timeout" content="1000"><br><br><br>    <meta name="msapplication-TileImage" content="/windows-tile.png"><br>    <meta name="msapplication-TileColor" content="#ffffff"><br>    <meta name="selected-link" value="repo_source" data-pjax-transient=""><br><br>    <meta name="google-site-verification" content="KT5gs8h0wvaagLKAVWq8bbeNwnZZK1r1XQysX3xurLU"><br><meta name="google-site-verification" content="ZzhVyEFwb7w3e0-uOTltm8Jsck2F5StVihD0exw2fsA"><br>    <meta name="google-analytics" content="UA-3769691-2"><br><br><meta content="collector.githubapp.com" name="octolytics-host"><meta content="github" name="octolytics-app-id"><meta content="3E9F4DA5:5EFF:1C6CDBAF:5715E70B" name="octolytics-dimension-request_id"><br><meta content="/&lt;user-name&gt;/&lt;repo-name&gt;/blob/show" data-pjax-transient="true" name="analytics-location"><br><br><br><br>  <meta class="js-ga-set" name="dimension1" content="Logged Out"><br><br><br><br>        <meta name="hostname" content="github.com"><br>    <meta name="user-login" content=""><br><br>        <meta name="expected-hostname" content="github.com"><br>      <meta name="js-proxy-site-detection-payload" content="OTA0ZTdiODZlZGQ5ZTBmOWMyOThiZmYyNjNkYTU2NzI5MjllNGNmMzg0OTY5NTNiMDc4OTI3NDMwMjYzOTlhZXx7InJlbW90ZV9hZGRyZXNzIjoiNjIuMTU5Ljc3LjE2NSIsInJlcXVlc3RfaWQiOiIzRTlGNERBNTo1RUZGOjFDNkNEQkFGOjU3MTVFNzBCIiwidGltZXN0YW1wIjoxNDYxMDUzMjA1fQ=="><br><br><br>      <link rel="mask-icon" href="https://assets-cdn.github.com/pinned-octocat.svg" color="#4078c0"><br>      <link rel="icon" type="image/x-icon" href="https://assets-cdn.github.com/favicon.ico"><br><br>    <meta content="8cb1221b98aea525b7168ab311b77ee96e0e8987" name="form-nonce"><br><br>    <meta http-equiv="x-pjax-version" content="dc812ac6dabadd5440144e9805d8c8fd"><br><br><br><br>  <meta name="description" content="googletest - Google Test"><br>  <meta name="go-import" content="github.com/google/googletest git https://github.com/google/googletest.git"><br><br>  <meta content="1342004" name="octolytics-dimension-user_id"><meta content="google" name="octolytics-dimension-user_login"><meta content="39840932" name="octolytics-dimension-repository_id"><meta content="google/googletest" name="octolytics-dimension-repository_nwo"><meta content="true" name="octolytics-dimension-repository_public"><meta content="false" name="octolytics-dimension-repository_is_fork"><meta content="39840932" name="octolytics-dimension-repository_network_root_id"><meta content="google/googletest" name="octolytics-dimension-repository_network_root_nwo"><br>  <link href="https://github.com/google/googletest/commits/master.atom" rel="alternate" title="Recent Commits to googletest:master" type="application/atom+xml"><br><br><br>      <link rel="canonical" href="https://github.com/google/googletest/blob/master/googlemock/docs/CookBook.md" data-pjax-transient=""><br>  </head><br><br><br>  <body class="logged-out   env-production windows vis-public page-blob"><br>    <div id="js-pjax-loader-bar" class="pjax-loader-bar"></div><br>    <a href="#start-of-content" tabindex="1" class="accessibility-aid js-skip-to-content">Skip to content</a><br><br><br><br><br><br><br><br>          <header class="site-header js-details-container" role="banner"><br>  <div class="container-responsive"><br>    <a class="header-logo-invertocat" href="https://github.com/" aria-label="Homepage" data-ga-click="(Logged out) Header, go to homepage, icon:logo-wordmark" target="_blank" rel="external"><br>      <svg aria-hidden="true" class="octicon octicon-mark-github" height="32" version="1.1" viewbox="0 0 16 16" width="32"><path d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59 0.4 0.07 0.55-0.17 0.55-0.38 0-0.19-0.01-0.82-0.01-1.49-2.01 0.37-2.53-0.49-2.69-0.94-0.09-0.23-0.48-0.94-0.82-1.13-0.28-0.15-0.68-0.52-0.01-0.53 0.63-0.01 1.08 0.58 1.23 0.82 0.72 1.21 1.87 0.87 2.33 0.66 0.07-0.52 0.28-0.87 0.51-1.07-1.78-0.2-3.64-0.89-3.64-3.95 0-0.87 0.31-1.59 0.82-2.15-0.08-0.2-0.36-1.02 0.08-2.12 0 0 0.67-0.21 2.2 0.82 0.64-0.18 1.32-0.27 2-0.27 0.68 0 1.36 0.09 2 0.27 1.53-1.04 2.2-0.82 2.2-0.82 0.44 1.1 0.16 1.92 0.08 2.12 0.51 0.56 0.82 1.27 0.82 2.15 0 3.07-1.87 3.75-3.65 3.95 0.29 0.25 0.54 0.73 0.54 1.48 0 1.07-0.01 1.93-0.01 2.2 0 0.21 0.15 0.46 0.55 0.38C13.71 14.53 16 11.53 16 8 16 3.58 12.42 0 8 0z"/></svg><br>    </a><br><br>    <button class="btn-link right site-header-toggle js-details-target" type="button" aria-label="Toggle navigation"><br>      <svg aria-hidden="true" class="octicon octicon-three-bars" height="24" version="1.1" viewbox="0 0 12 16" width="18"><path d="M11.41 9H0.59c-0.59 0-0.59-0.41-0.59-1s0-1 0.59-1h10.81c0.59 0 0.59 0.41 0.59 1s0 1-0.59 1z m0-4H0.59c-0.59 0-0.59-0.41-0.59-1s0-1 0.59-1h10.81c0.59 0 0.59 0.41 0.59 1s0 1-0.59 1zM0.59 11h10.81c0.59 0 0.59 0.41 0.59 1s0 1-0.59 1H0.59c-0.59 0-0.59-0.41-0.59-1s0-1 0.59-1z"/></svg><br>    </button><br><br>    <div class="site-header-menu"><br>      <nav class="site-header-nav site-header-nav-main"><br>        <a href="/personal" class="js-selected-navigation-item nav-item nav-item-personal" data-ga-click="Header, click, Nav menu - item:personal" data-selected-links="/personal /personal"><br>          Personal<br></a>        <a href="/open-source" class="js-selected-navigation-item nav-item nav-item-opensource" data-ga-click="Header, click, Nav menu - item:opensource" data-selected-links="/open-source /open-source"><br>          Open source<br></a>        <a href="/business" class="js-selected-navigation-item nav-item nav-item-business" data-ga-click="Header, click, Nav menu - item:business" data-selected-links="/business /business/features /business/customers /business"><br>          Business<br></a>        <a href="/explore" class="js-selected-navigation-item nav-item nav-item-explore" data-ga-click="Header, click, Nav menu - item:explore" data-selected-links="/explore /trending /trending/developers /integrations /integrations/feature/code /integrations/feature/collaborate /integrations/feature/ship /explore"><br>          Explore<br></a>      </nav><br><br>      <div class="site-header-actions"><br>            <a class="btn btn-primary site-header-actions-btn" href="/join?source=header-repo" data-ga-click="(Logged out) Header, clicked Sign up, text:sign-up">Sign up</a><br>          <a class="btn site-header-actions-btn mr-2" href="/login?return_to=%2Fgoogle%2Fgoogletest%2Fblob%2Fmaster%2Fgooglemock%2Fdocs%2FCookBook.md" data-ga-click="(Logged out) Header, clicked Sign in, text:sign-in">Sign in</a><br>      </div><br><br>        <nav class="site-header-nav site-header-nav-secondary"><br>          <a class="nav-item" href="/pricing">Pricing</a><br>          <a class="nav-item" href="/blog">Blog</a><br>          <a class="nav-item" href="https://help.github.com" target="_blank" rel="external">Support</a><br>          <a class="nav-item header-search-link" href="https://github.com/search" target="_blank" rel="external">Search GitHub</a><br>              <div class="header-search scoped-search site-scoped-search js-site-search" role="search"><br>  <!-- </textarea> --><!-- '"` --><form accept-charset="UTF-8" action="/google/googletest/search" class="js-site-search-form" data-scoped-search-url="/google/googletest/search" data-unscoped-search-url="/search" method="get"><div style="margin:0;padding:0;display:inline"><input name="utf8" type="hidden" value="&#x2713;"></div><br>    <label class="form-control header-search-wrapper js-chromeless-input-container"><br>      <div class="header-search-scope">This repository</div><br>      <input type="text" class="form-control header-search-input js-site-search-focus js-site-search-field is-clearable" data-hotkey="s" name="q" placeholder="Search" aria-label="Search this repository" data-unscoped-placeholder="Search GitHub" data-scoped-placeholder="Search" tabindex="1" autocapitalize="off"><br>    </label><br></form></div><br><br>        </nav><br>    </div><br>  </div><br></header><br><br><br><br>    <div id="start-of-content" class="accessibility-aid"></div><br><br>      <div id="js-flash-container"><br></div><br><br><br>    <div role="main" class="main-content"><br>        <div itemscope="" itemtype="http://schema.org/SoftwareSourceCode"><br>    <div id="js-repo-pjax-container" data-pjax-container=""><br><br><div class="pagehead repohead instapaper_ignore readability-menu experiment-repo-nav"><br>  <div class="container repohead-details-container"><br><br><br><br><ul class="pagehead-actions"><br><br>  <li><br>      <a href="/login?return_to=%2Fgoogle%2Fgoogletest" class="btn btn-sm btn-with-count tooltipped tooltipped-n" aria-label="You must be signed in to watch a repository" rel="nofollow"><br>    <svg aria-hidden="true" class="octicon octicon-eye" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M8.06 2C3 2 0 8 0 8s3 6 8.06 6c4.94 0 7.94-6 7.94-6S13 2 8.06 2z m-0.06 10c-2.2 0-4-1.78-4-4 0-2.2 1.8-4 4-4 2.22 0 4 1.8 4 4 0 2.22-1.78 4-4 4z m2-4c0 1.11-0.89 2-2 2s-2-0.89-2-2 0.89-2 2-2 2 0.89 2 2z"/></svg><br>    Watch<br>  </a><br>  <a class="social-count" href="/google/googletest/watchers"><br>    258<br>  </a><br><br>  </li><br><br>  <li><br>      <a href="/login?return_to=%2Fgoogle%2Fgoogletest" class="btn btn-sm btn-with-count tooltipped tooltipped-n" aria-label="You must be signed in to star a repository" rel="nofollow"><br>    <svg aria-hidden="true" class="octicon octicon-star" height="16" version="1.1" viewbox="0 0 14 16" width="14"><path d="M14 6l-4.9-0.64L7 1 4.9 5.36 0 6l3.6 3.26L2.67 14l4.33-2.33 4.33 2.33L10.4 9.26 14 6z"/></svg><br>    Star<br>  </a><br><br>    <a class="social-count js-social-count" href="/google/googletest/stargazers"><br>      1,987<br>    </a><br><br>  </li><br><br>  <li><br>      <a href="/login?return_to=%2Fgoogle%2Fgoogletest" class="btn btn-sm btn-with-count tooltipped tooltipped-n" aria-label="You must be signed in to fork a repository" rel="nofollow"><br>        <svg aria-hidden="true" class="octicon octicon-repo-forked" height="16" version="1.1" viewbox="0 0 10 16" width="10"><path d="M8 1c-1.11 0-2 0.89-2 2 0 0.73 0.41 1.38 1 1.72v1.28L5 8 3 6v-1.28c0.59-0.34 1-0.98 1-1.72 0-1.11-0.89-2-2-2S0 1.89 0 3c0 0.73 0.41 1.38 1 1.72v1.78l3 3v1.78c-0.59 0.34-1 0.98-1 1.72 0 1.11 0.89 2 2 2s2-0.89 2-2c0-0.73-0.41-1.38-1-1.72V9.5l3-3V4.72c0.59-0.34 1-0.98 1-1.72 0-1.11-0.89-2-2-2zM2 4.2c-0.66 0-1.2-0.55-1.2-1.2s0.55-1.2 1.2-1.2 1.2 0.55 1.2 1.2-0.55 1.2-1.2 1.2z m3 10c-0.66 0-1.2-0.55-1.2-1.2s0.55-1.2 1.2-1.2 1.2 0.55 1.2 1.2-0.55 1.2-1.2 1.2z m3-10c-0.66 0-1.2-0.55-1.2-1.2s0.55-1.2 1.2-1.2 1.2 0.55 1.2 1.2-0.55 1.2-1.2 1.2z"/></svg><br>        Fork<br>      </a><br><br>    <a href="/google/googletest/network" class="social-count"><br>      704<br>    </a><br>  </li><br></ul><br><br>    <h1 class="entry-title public "><br>  <svg aria-hidden="true" class="octicon octicon-repo" height="16" version="1.1" viewbox="0 0 12 16" width="12"><path d="M4 9h-1v-1h1v1z m0-3h-1v1h1v-1z m0-2h-1v1h1v-1z m0-2h-1v1h1v-1z m8-1v12c0 0.55-0.45 1-1 1H6v2l-1.5-1.5-1.5 1.5V14H1c-0.55 0-1-0.45-1-1V1C0 0.45 0.45 0 1 0h10c0.55 0 1 0.45 1 1z m-1 10H1v2h2v-1h3v1h5V11z m0-10H2v9h9V1z"/></svg><br>  <span class="author" itemprop="author"><a href="/google" class="url fn" rel="author">google</a></span><!--
--><span class="path-divider">/</span><!--
--><strong itemprop="name"><a href="/google/googletest" data-pjax="#js-repo-pjax-container">googletest</a></strong><br><br></h1><br><br>  </div><br>  <div class="container"><br><br><nav class="reponav js-repo-nav js-sidenav-container-pjax" itemscope="" itemtype="http://schema.org/BreadcrumbList" role="navigation" data-pjax="#js-repo-pjax-container"><br><br>  <span itemscope="" itemtype="http://schema.org/ListItem" itemprop="itemListElement"><br>    <a href="/google/googletest" aria-selected="true" class="js-selected-navigation-item selected reponav-item" data-hotkey="g c" data-selected-links="repo_source repo_downloads repo_commits repo_releases repo_tags repo_branches /google/googletest" itemprop="url"><br>      <svg aria-hidden="true" class="octicon octicon-code" height="16" version="1.1" viewbox="0 0 14 16" width="14"><path d="M9.5 3l-1.5 1.5 3.5 3.5L8 11.5l1.5 1.5 4.5-5L9.5 3zM4.5 3L0 8l4.5 5 1.5-1.5L2.5 8l3.5-3.5L4.5 3z"/></svg><br>      <span itemprop="name">Code</span><br>      <meta itemprop="position" content="1"><br></a>  </span><br><br>    <span itemscope="" itemtype="http://schema.org/ListItem" itemprop="itemListElement"><br>      <a href="/google/googletest/issues" class="js-selected-navigation-item reponav-item" data-hotkey="g i" data-selected-links="repo_issues repo_labels repo_milestones /google/googletest/issues" itemprop="url"><br>        <svg aria-hidden="true" class="octicon octicon-issue-opened" height="16" version="1.1" viewbox="0 0 14 16" width="14"><path d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7S10.14 13.7 7 13.7 1.3 11.14 1.3 8s2.56-5.7 5.7-5.7m0-1.3C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7S10.86 1 7 1z m1 3H6v5h2V4z m0 6H6v2h2V10z"/></svg><br>        <span itemprop="name">Issues</span><br>        <span class="counter">247</span><br>        <meta itemprop="position" content="2"><br></a>    </span><br><br>  <span itemscope="" itemtype="http://schema.org/ListItem" itemprop="itemListElement"><br>    <a href="/google/googletest/pulls" class="js-selected-navigation-item reponav-item" data-hotkey="g p" data-selected-links="repo_pulls /google/googletest/pulls" itemprop="url"><br>      <svg aria-hidden="true" class="octicon octicon-git-pull-request" height="16" version="1.1" viewbox="0 0 12 16" width="12"><path d="M11 11.28c0-1.73 0-6.28 0-6.28-0.03-0.78-0.34-1.47-0.94-2.06s-1.28-0.91-2.06-0.94c0 0-1.02 0-1 0V0L4 3l3 3V4h1c0.27 0.02 0.48 0.11 0.69 0.31s0.3 0.42 0.31 0.69v6.28c-0.59 0.34-1 0.98-1 1.72 0 1.11 0.89 2 2 2s2-0.89 2-2c0-0.73-0.41-1.38-1-1.72z m-1 2.92c-0.66 0-1.2-0.55-1.2-1.2s0.55-1.2 1.2-1.2 1.2 0.55 1.2 1.2-0.55 1.2-1.2 1.2zM4 3c0-1.11-0.89-2-2-2S0 1.89 0 3c0 0.73 0.41 1.38 1 1.72 0 1.55 0 5.56 0 6.56-0.59 0.34-1 0.98-1 1.72 0 1.11 0.89 2 2 2s2-0.89 2-2c0-0.73-0.41-1.38-1-1.72V4.72c0.59-0.34 1-0.98 1-1.72z m-0.8 10c0 0.66-0.55 1.2-1.2 1.2s-1.2-0.55-1.2-1.2 0.55-1.2 1.2-1.2 1.2 0.55 1.2 1.2z m-1.2-8.8c-0.66 0-1.2-0.55-1.2-1.2s0.55-1.2 1.2-1.2 1.2 0.55 1.2 1.2-0.55 1.2-1.2 1.2z"/></svg><br>      <span itemprop="name">Pull requests</span><br>      <span class="counter">42</span><br>      <meta itemprop="position" content="3"><br></a>  </span><br><br><br>  <a href="/google/googletest/pulse" class="js-selected-navigation-item reponav-item" data-selected-links="pulse /google/googletest/pulse"><br>    <svg aria-hidden="true" class="octicon octicon-pulse" height="16" version="1.1" viewbox="0 0 14 16" width="14"><path d="M11.5 8L8.8 5.4 6.6 8.5 5.5 1.6 2.38 8H0V10h3.6L4.5 8.2l0.9 5.4L9 8.5l1.6 1.5H14V8H11.5z"/></svg><br>    Pulse<br></a><br>  <a href="/google/googletest/graphs" class="js-selected-navigation-item reponav-item" data-selected-links="repo_graphs repo_contributors /google/googletest/graphs"><br>    <svg aria-hidden="true" class="octicon octicon-graph" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M16 14v1H0V0h1v14h15z m-11-1H3V8h2v5z m4 0H7V3h2v10z m4 0H11V6h2v7z"/></svg><br>    Graphs<br></a><br><br></nav><br><br>  </div><br></div><br><br><div class="container new-discussion-timeline experiment-repo-nav"><br>  <div class="repository-content"><br><br><br><br><a href="/google/googletest/blob/d225acc90bc3a8c420a9bcd1f033033c1ccd7fe0/googlemock/docs/CookBook.md" class="hidden js-permalink-shortcut" data-hotkey="y">Permalink</a><br><br><!-- blob contrib key: blob_contributors:v21:24afe63bbc8ed3c495683d6a07d465c8 --><br><br><div class="file-navigation js-zeroclipboard-container"><br><br><div class="select-menu branch-select-menu js-menu-container js-select-menu left"><br>  <button class="btn btn-sm select-menu-button js-menu-target css-truncate" data-hotkey="w" title="master" type="button" aria-label="Switch branches or tags" tabindex="0" aria-haspopup="true"><br>    <i>Branch:</i><br>    <span class="js-select-button css-truncate-target">master</span><br>  </button><br><br>  <div class="select-menu-modal-holder js-menu-content js-navigation-container" data-pjax="" aria-hidden="true"><br><br>    <div class="select-menu-modal"><br>      <div class="select-menu-header"><br>        <svg aria-label="Close" class="octicon octicon-x js-menu-close" height="16" role="img" version="1.1" viewbox="0 0 12 16" width="12"><path d="M7.48 8l3.75 3.75-1.48 1.48-3.75-3.75-3.75 3.75-1.48-1.48 3.75-3.75L0.77 4.25l1.48-1.48 3.75 3.75 3.75-3.75 1.48 1.48-3.75 3.75z"/></svg><br>        <span class="select-menu-title">Switch branches/tags</span><br>      </div><br><br>      <div class="select-menu-filters"><br>        <div class="select-menu-text-filter"><br>          <input type="text" aria-label="Filter branches/tags" id="context-commitish-filter-field" class="form-control js-filterable-field js-navigation-enable" placeholder="Filter branches/tags"><br>        </div><br>        <div class="select-menu-tabs"><br>          <ul><br>            <li class="select-menu-tab"><br>              <a href="#" data-tab-filter="branches" data-filter-placeholder="Filter branches/tags" class="js-select-menu-tab" role="tab">Branches</a><br>            </li><br>            <li class="select-menu-tab"><br>              <a href="#" data-tab-filter="tags" data-filter-placeholder="Find a tag…" class="js-select-menu-tab" role="tab">Tags</a><br>            </li><br>          </ul><br>        </div><br>      </div><br><br>      <div class="select-menu-list select-menu-tab-bucket js-select-menu-tab-bucket" data-tab-filter="branches" role="menu"><br><br>        <div data-filterable-for="context-commitish-filter-field" data-filterable-type="substring"><br><br><br>            <a class="select-menu-item js-navigation-item js-navigation-open " href="/google/googletest/blob/BillyDonahue-patch-1/googlemock/docs/CookBook.md" data-name="BillyDonahue-patch-1" data-skip-pjax="true" rel="nofollow"><br>              <svg aria-hidden="true" class="octicon octicon-check select-menu-item-icon" height="16" version="1.1" viewbox="0 0 12 16" width="12"><path d="M12 5L4 13 0 9l1.5-1.5 2.5 2.5 6.5-6.5 1.5 1.5z"/></svg><br>              <span class="select-menu-item-text css-truncate-target js-select-menu-filter-text" title="BillyDonahue-patch-1"><br>                BillyDonahue-patch-1<br>              </span><br>            </a><br>            <a class="select-menu-item js-navigation-item js-navigation-open selected" href="/google/googletest/blob/master/googlemock/docs/CookBook.md" data-name="master" data-skip-pjax="true" rel="nofollow"><br>              <svg aria-hidden="true" class="octicon octicon-check select-menu-item-icon" height="16" version="1.1" viewbox="0 0 12 16" width="12"><path d="M12 5L4 13 0 9l1.5-1.5 2.5 2.5 6.5-6.5 1.5 1.5z"/></svg><br>              <span class="select-menu-item-text css-truncate-target js-select-menu-filter-text" title="master"><br>                master<br>              </span><br>            </a><br>        </div><br><br>          <div class="select-menu-no-results">Nothing to show</div><br>      </div><br><br>      <div class="select-menu-list select-menu-tab-bucket js-select-menu-tab-bucket" data-tab-filter="tags"><br>        <div data-filterable-for="context-commitish-filter-field" data-filterable-type="substring"><br><br><br>            <a class="select-menu-item js-navigation-item js-navigation-open " href="/google/googletest/tree/release-1.7.0/googlemock/docs/CookBook.md" data-name="release-1.7.0" data-skip-pjax="true" rel="nofollow"><br>              <svg aria-hidden="true" class="octicon octicon-check select-menu-item-icon" height="16" version="1.1" viewbox="0 0 12 16" width="12"><path d="M12 5L4 13 0 9l1.5-1.5 2.5 2.5 6.5-6.5 1.5 1.5z"/></svg><br>              <span class="select-menu-item-text css-truncate-target" title="release-1.7.0"><br>                release-1.7.0<br>              </span><br>            </a><br>            <a class="select-menu-item js-navigation-item js-navigation-open " href="/google/googletest/tree/release-1.6.0/googlemock/docs/CookBook.md" data-name="release-1.6.0" data-skip-pjax="true" rel="nofollow"><br>              <svg aria-hidden="true" class="octicon octicon-check select-menu-item-icon" height="16" version="1.1" viewbox="0 0 12 16" width="12"><path d="M12 5L4 13 0 9l1.5-1.5 2.5 2.5 6.5-6.5 1.5 1.5z"/></svg><br>              <span class="select-menu-item-text css-truncate-target" title="release-1.6.0"><br>                release-1.6.0<br>              </span><br>            </a><br>            <a class="select-menu-item js-navigation-item js-navigation-open " href="/google/googletest/tree/release-1.5.0/googlemock/docs/CookBook.md" data-name="release-1.5.0" data-skip-pjax="true" rel="nofollow"><br>              <svg aria-hidden="true" class="octicon octicon-check select-menu-item-icon" height="16" version="1.1" viewbox="0 0 12 16" width="12"><path d="M12 5L4 13 0 9l1.5-1.5 2.5 2.5 6.5-6.5 1.5 1.5z"/></svg><br>              <span class="select-menu-item-text css-truncate-target" title="release-1.5.0"><br>                release-1.5.0<br>              </span><br>            </a><br>            <a class="select-menu-item js-navigation-item js-navigation-open " href="/google/googletest/tree/release-1.4.0/googlemock/docs/CookBook.md" data-name="release-1.4.0" data-skip-pjax="true" rel="nofollow"><br>              <svg aria-hidden="true" class="octicon octicon-check select-menu-item-icon" height="16" version="1.1" viewbox="0 0 12 16" width="12"><path d="M12 5L4 13 0 9l1.5-1.5 2.5 2.5 6.5-6.5 1.5 1.5z"/></svg><br>              <span class="select-menu-item-text css-truncate-target" title="release-1.4.0"><br>                release-1.4.0<br>              </span><br>            </a><br>            <a class="select-menu-item js-navigation-item js-navigation-open " href="/google/googletest/tree/release-1.3.0/googlemock/docs/CookBook.md" data-name="release-1.3.0" data-skip-pjax="true" rel="nofollow"><br>              <svg aria-hidden="true" class="octicon octicon-check select-menu-item-icon" height="16" version="1.1" viewbox="0 0 12 16" width="12"><path d="M12 5L4 13 0 9l1.5-1.5 2.5 2.5 6.5-6.5 1.5 1.5z"/></svg><br>              <span class="select-menu-item-text css-truncate-target" title="release-1.3.0"><br>                release-1.3.0<br>              </span><br>            </a><br>            <a class="select-menu-item js-navigation-item js-navigation-open " href="/google/googletest/tree/release-1.2.1/googlemock/docs/CookBook.md" data-name="release-1.2.1" data-skip-pjax="true" rel="nofollow"><br>              <svg aria-hidden="true" class="octicon octicon-check select-menu-item-icon" height="16" version="1.1" viewbox="0 0 12 16" width="12"><path d="M12 5L4 13 0 9l1.5-1.5 2.5 2.5 6.5-6.5 1.5 1.5z"/></svg><br>              <span class="select-menu-item-text css-truncate-target" title="release-1.2.1"><br>                release-1.2.1<br>              </span><br>            </a><br>            <a class="select-menu-item js-navigation-item js-navigation-open " href="/google/googletest/tree/release-1.2.0/googlemock/docs/CookBook.md" data-name="release-1.2.0" data-skip-pjax="true" rel="nofollow"><br>              <svg aria-hidden="true" class="octicon octicon-check select-menu-item-icon" height="16" version="1.1" viewbox="0 0 12 16" width="12"><path d="M12 5L4 13 0 9l1.5-1.5 2.5 2.5 6.5-6.5 1.5 1.5z"/></svg><br>              <span class="select-menu-item-text css-truncate-target" title="release-1.2.0"><br>                release-1.2.0<br>              </span><br>            </a><br>            <a class="select-menu-item js-navigation-item js-navigation-open " href="/google/googletest/tree/release-1.1.0/googlemock/docs/CookBook.md" data-name="release-1.1.0" data-skip-pjax="true" rel="nofollow"><br>              <svg aria-hidden="true" class="octicon octicon-check select-menu-item-icon" height="16" version="1.1" viewbox="0 0 12 16" width="12"><path d="M12 5L4 13 0 9l1.5-1.5 2.5 2.5 6.5-6.5 1.5 1.5z"/></svg><br>              <span class="select-menu-item-text css-truncate-target" title="release-1.1.0"><br>                release-1.1.0<br>              </span><br>            </a><br>            <a class="select-menu-item js-navigation-item js-navigation-open " href="/google/googletest/tree/release-1.0.1/googlemock/docs/CookBook.md" data-name="release-1.0.1" data-skip-pjax="true" rel="nofollow"><br>              <svg aria-hidden="true" class="octicon octicon-check select-menu-item-icon" height="16" version="1.1" viewbox="0 0 12 16" width="12"><path d="M12 5L4 13 0 9l1.5-1.5 2.5 2.5 6.5-6.5 1.5 1.5z"/></svg><br>              <span class="select-menu-item-text css-truncate-target" title="release-1.0.1"><br>                release-1.0.1<br>              </span><br>            </a><br>            <a class="select-menu-item js-navigation-item js-navigation-open " href="/google/googletest/tree/release-1.0.0/googlemock/docs/CookBook.md" data-name="release-1.0.0" data-skip-pjax="true" rel="nofollow"><br>              <svg aria-hidden="true" class="octicon octicon-check select-menu-item-icon" height="16" version="1.1" viewbox="0 0 12 16" width="12"><path d="M12 5L4 13 0 9l1.5-1.5 2.5 2.5 6.5-6.5 1.5 1.5z"/></svg><br>              <span class="select-menu-item-text css-truncate-target" title="release-1.0.0"><br>                release-1.0.0<br>              </span><br>            </a><br>        </div><br><br>        <div class="select-menu-no-results">Nothing to show</div><br>      </div><br><br>    </div><br>  </div><br></div><br><br>  <div class="btn-group right"><br>    <a href="/google/googletest/find/master" class="js-pjax-capture-input btn btn-sm" data-pjax="" data-hotkey="t"><br>      Find file<br>    </a><br>    <button aria-label="Copy file path to clipboard" class="js-zeroclipboard btn btn-sm zeroclipboard-button tooltipped tooltipped-s" data-copied-hint="Copied!" type="button">Copy path</button><br>  </div><br>  <div class="breadcrumb js-zeroclipboard-target"><br>    <span class="repo-root js-repo-root"><span class="js-path-segment"><a href="/google/googletest"><span>googletest</span></a></span></span><span class="separator">/</span><span class="js-path-segment"><a href="/google/googletest/tree/master/googlemock"><span>googlemock</span></a></span><span class="separator">/</span><span class="js-path-segment"><a href="/google/googletest/tree/master/googlemock/docs"><span>docs</span></a></span><span class="separator">/</span><strong class="final-path">CookBook.md</strong><br>  </div><br></div><br><br><br>  <div class="commit-tease"><br>      <span class="right"><br>        <a class="commit-tease-sha" href="/google/googletest/commit/0098be394ad5e5e97dd838ab21588b83ede18857" data-pjax=""><br>          0098be3<br>        </a><br>        <time datetime="2016-03-08T13:40:26Z" is="relative-time">Mar 8, 2016</time><br>      </span><br>      <div><br>        <img alt="@phad" class="avatar" height="20" src="https://avatars2.githubusercontent.com/u/874173?v=3&amp;s=40" width="20"><br>        <a href="/phad" class="user-mention" rel="contributor">phad</a><br>          <a href="/google/googletest/commit/0098be394ad5e5e97dd838ab21588b83ede18857" class="message" data-pjax="true" title="Fix typo (Inovke -&gt; Invoke)">Fix typo (Inovke -&gt; Invoke)</a><br>      </div><br><br>    <div class="commit-tease-contributors"><br>      <button type="button" class="btn-link muted-link contributors-toggle" data-facebox="#blob_contributors_box"><br>        <strong>2</strong><br>         contributors<br>      </button><br>          <a class="avatar-link tooltipped tooltipped-s" aria-label="phad" href="/google/googletest/commits/master/googlemock/docs/CookBook.md?author=phad"><img alt="@phad" class="avatar" height="20" src="https://avatars2.githubusercontent.com/u/874173?v=3&amp;s=40" width="20"> </a><br>    <a class="avatar-link tooltipped tooltipped-s" aria-label="BillyDonahue" href="/google/googletest/commits/master/googlemock/docs/CookBook.md?author=BillyDonahue"><img alt="@BillyDonahue" class="avatar" height="20" src="https://avatars2.githubusercontent.com/u/8611652?v=3&amp;s=40" width="20"> </a><br><br><br>    </div><br><br>    <div id="blob_contributors_box" style="display:none"><br>      <h2 class="facebox-header" data-facebox-id="facebox-header">Users who have contributed to this file</h2><br>      <ul class="facebox-user-list" data-facebox-id="facebox-description"><br>          <li class="facebox-user-list-item"><br>            <img alt="@phad" height="24" src="https://avatars0.githubusercontent.com/u/874173?v=3&amp;s=48" width="24"><br>            <a href="/phad">phad</a><br>          </li><br>          <li class="facebox-user-list-item"><br>            <img alt="@BillyDonahue" height="24" src="https://avatars0.githubusercontent.com/u/8611652?v=3&amp;s=48" width="24"><br>            <a href="/BillyDonahue">BillyDonahue</a><br>          </li><br>      </ul><br>    </div><br>  </div><br><br><div class="file"><br>  <div class="file-header"><br>  <div class="file-actions"><br><br>    <div class="btn-group"><br>      <a href="/google/googletest/raw/master/googlemock/docs/CookBook.md" class="btn btn-sm " id="raw-url">Raw</a><br>        <a href="/google/googletest/blame/master/googlemock/docs/CookBook.md" class="btn btn-sm js-update-url-with-hash">Blame</a><br>      <a href="/google/googletest/commits/master/googlemock/docs/CookBook.md" class="btn btn-sm " rel="nofollow">History</a><br>    </div><br><br>        <a class="btn-octicon tooltipped tooltipped-nw" href="https://windows.github.com" aria-label="Open this file in GitHub Desktop" data-ga-click="Repository, open with desktop, type:windows" target="_blank" rel="external"><br>            <svg aria-hidden="true" class="octicon octicon-device-desktop" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M15 2H1c-0.55 0-1 0.45-1 1v9c0 0.55 0.45 1 1 1h5.34c-0.25 0.61-0.86 1.39-2.34 2h8c-1.48-0.61-2.09-1.39-2.34-2h5.34c0.55 0 1-0.45 1-1V3c0-0.55-0.45-1-1-1z m0 9H1V3h14v8z"/></svg><br>        </a><br><br>        <button type="button" class="btn-octicon disabled tooltipped tooltipped-nw" aria-label="You must be signed in to make or propose changes"><br>          <svg aria-hidden="true" class="octicon octicon-pencil" height="16" version="1.1" viewbox="0 0 14 16" width="14"><path d="M0 12v3h3l8-8-3-3L0 12z m3 2H1V12h1v1h1v1z m10.3-9.3l-1.3 1.3-3-3 1.3-1.3c0.39-0.39 1.02-0.39 1.41 0l1.59 1.59c0.39 0.39 0.39 1.02 0 1.41z"/></svg><br>        </button><br>        <button type="button" class="btn-octicon btn-octicon-danger disabled tooltipped tooltipped-nw" aria-label="You must be signed in to make or propose changes"><br>          <svg aria-hidden="true" class="octicon octicon-trashcan" height="16" version="1.1" viewbox="0 0 12 16" width="12"><path d="M10 2H8c0-0.55-0.45-1-1-1H4c-0.55 0-1 0.45-1 1H1c-0.55 0-1 0.45-1 1v1c0 0.55 0.45 1 1 1v9c0 0.55 0.45 1 1 1h7c0.55 0 1-0.45 1-1V5c0.55 0 1-0.45 1-1v-1c0-0.55-0.45-1-1-1z m-1 12H2V5h1v8h1V5h1v8h1V5h1v8h1V5h1v9z m1-10H1v-1h9v1z"/></svg><br>        </button><br>  </div><br><br>  <div class="file-info"><br>      3676 lines (2910 sloc)<br>      <span class="file-info-divider"></span><br>    128 KB<br>  </div><br></div><br><br><br>  <div id="readme" class="readme blob instapaper_body"><br>    <article class="markdown-body entry-content" itemprop="text"><p>You can find recipes for using Google Mock here. If you haven’t yet,<br>please read the <a href="/google/googletest/blob/master/googlemock/docs/ForDummies.md">ForDummies</a> document first to make sure you understand<br>the basics.</p><br><br><p><strong>Note:</strong> Google Mock lives in the <code>testing</code> name space. For<br>readability, it is recommended to write <code>using ::testing::Foo;</code> once in<br>your file before using the name <code>Foo</code> defined by Google Mock. We omit<br>such <code>using</code> statements in this page for brevity, but you should do it<br>in your own code.</p><br><br><h1><a id="user-content-creating-mock-classes" class="anchor" href="#creating-mock-classes" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"/></svg></a>Creating Mock Classes</h1><br><br><h2><a id="user-content-mocking-private-or-protected-methods" class="anchor" href="#mocking-private-or-protected-methods" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"/></svg></a>Mocking Private or Protected Methods</h2><br><br><p>You must always put a mock method definition (<code>MOCK_METHOD<em></em></code>) in a<br><code>public:</code> section of the mock class, regardless of the method being<br>mocked being <code>public</code>, <code>protected</code>, or <code>private</code> in the base class.<br>This allows <code>ON_CALL</code> and <code>EXPECT_CALL</code> to reference the mock function<br>from outside of the mock class.  (Yes, C++ allows a subclass to change<br>the access level of a virtual function in the base class.)  Example:</p><br><br><pre><code>class Foo {<br> public:<br>  …<br>  virtual bool Transform(Gadget g) = 0;<br><br> protected:<br>  virtual void Resume();<br><br> private:<br>  virtual int GetTimeOut();<br>};<br><br>class MockFoo : public Foo {<br> public:<br>  …<br>  MOCK_METHOD1(Transform, bool(Gadget<em> g));<br><br>  // The following must be in the public section, even though the<br>  // methods are protected or private in the base class.<br>  MOCK_METHOD0(Resume, void());<br>  MOCK_METHOD0(GetTimeOut, int());<br>};<br></em></code></pre><br><br><h2><a id="user-content-mocking-overloaded-methods" class="anchor" href="#mocking-overloaded-methods" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"/></svg></a>Mocking Overloaded Methods</h2><br><br><p>You can mock overloaded functions as usual. No special attention is required:</p><br><br><pre><code>class Foo {<br>  …<br><br>  // Must be virtual as we’ll inherit from Foo.<br>  virtual ~Foo();<br><br>  // Overloaded on the types and/or numbers of arguments.<br>  virtual int Add(Element x);<br>  virtual int Add(int times, Element x);<br><br>  // Overloaded on the const-ness of this object.<br>  virtual Bar&amp; GetBar();<br>  virtual const Bar&amp; GetBar() const;<br>};<br><br>class MockFoo : public Foo {<br>  …<br>  MOCK_METHOD1(Add, int(Element x));<br>  MOCK_METHOD2(Add, int(int times, Element x);<br><br>  MOCK_METHOD0(GetBar, Bar&amp;());<br>  MOCK_CONST_METHOD0(GetBar, const Bar&amp;());<br>};<br></code></pre><br><br><p><strong>Note:</strong> if you don’t mock all versions of the overloaded method, the<br>compiler will give you a warning about some methods in the base class<br>being hidden. To fix that, use <code>using</code> to bring them in scope:</p><br><br><pre><code>class MockFoo : public Foo {<br>  …<br>  using Foo::Add;<br>  MOCK_METHOD1(Add, int(Element x));<br>  // We don’t want to mock int Add(int times, Element x);<br>  …<br>};<br></code></pre><br><br><h2><a id="user-content-mocking-class-templates" class="anchor" href="#mocking-class-templates" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"/></svg></a>Mocking Class Templates</h2><br><br><p>To mock a class template, append <code><em>T</em></code> to the <code>MOCK</code> macros:</p><br><br><pre><code>template &lt;typename Elem&gt;<br>class StackInterface {<br>  …<br>  // Must be virtual as we’ll inherit from StackInterface.<br>  virtual ~StackInterface();<br><br>  virtual int GetSize() const = 0;<br>  virtual void Push(const Elem&amp; x) = 0;<br>};<br><br>template &lt;typename Elem&gt;<br>class MockStack : public StackInterface&lt;Elem&gt; {<br>  …<br>  MOCK_CONST_METHOD0_T(GetSize, int());<br>  MOCK_METHOD1_T(Push, void(const Elem&amp; x));<br>};<br></code></pre><br><br><h2><a id="user-content-mocking-nonvirtual-methods" class="anchor" href="#mocking-nonvirtual-methods" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"/></svg></a>Mocking Nonvirtual Methods</h2><br><br><p>Google Mock can mock non-virtual functions to be used in what we call <em>hi-perf<br>dependency injection</em>.</p><br><br><p>In this case, instead of sharing a common base class with the real<br>class, your mock class will be <em>unrelated</em> to the real class, but<br>contain methods with the same signatures.  The syntax for mocking<br>non-virtual methods is the <em>same</em> as mocking virtual methods:</p><br><br><pre><code>// A simple packet stream class.  None of its members is virtual.<br>class ConcretePacketStream {<br> public:<br>  void AppendPacket(Packet<em> new_packet);<br>  const Packet</em> GetPacket(size_t packet_number) const;<br>  size_t NumberOfPackets() const;<br>  …<br>};<br><br>// A mock packet stream class.  It inherits from no other, but defines<br>// GetPacket() and NumberOfPackets().<br>class MockPacketStream {<br> public:<br>  MOCK_CONST_METHOD1(GetPacket, const Packet<em>(size_t packet_number));<br>  MOCK_CONST_METHOD0(NumberOfPackets, size_t());<br>  …<br>};<br></em></code></pre><br><br><p>Note that the mock class doesn’t define <code>AppendPacket()</code>, unlike the<br>real class. That’s fine as long as the test doesn’t need to call it.</p><br><br><p>Next, you need a way to say that you want to use<br><code>ConcretePacketStream</code> in production code, and use <code>MockPacketStream</code><br>in tests.  Since the functions are not virtual and the two classes are<br>unrelated, you must specify your choice at <em>compile time</em> (as opposed<br>to run time).</p><br><br><p>One way to do it is to templatize your code that needs to use a packet<br>stream.  More specifically, you will give your code a template type<br>argument for the type of the packet stream.  In production, you will<br>instantiate your template with <code>ConcretePacketStream</code> as the type<br>argument.  In tests, you will instantiate the same template with<br><code>MockPacketStream</code>.  For example, you may write:</p><br><br><pre><code>template &lt;class PacketStream&gt;<br>void CreateConnection(PacketStream stream) { … }<br><br>template &lt;class PacketStream&gt;<br>class PacketReader {<br> public:<br>  void ReadPackets(PacketStream<em> stream, size_t packet_num);<br>};<br></em></code></pre><br><br><p>Then you can use <code>CreateConnection&lt;ConcretePacketStream&gt;()</code> and<br><code>PacketReader&lt;ConcretePacketStream&gt;</code> in production code, and use<br><code>CreateConnection&lt;MockPacketStream&gt;()</code> and<br><code>PacketReader&lt;MockPacketStream&gt;</code> in tests.</p><br><br><pre><code>  MockPacketStream mock_stream;<br>  EXPECT_CALL(mock_stream, …)…;<br>  .. set more expectations on mock_stream …<br>  PacketReader&lt;MockPacketStream&gt; reader(&amp;mock_stream);<br>  … exercise reader …<br></code></pre><br><br><h2><a id="user-content-mocking-free-functions" class="anchor" href="#mocking-free-functions" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"/></svg></a>Mocking Free Functions</h2><br><br><p>It’s possible to use Google Mock to mock a free function (i.e. a<br>C-style function or a static method).  You just need to rewrite your<br>code to use an interface (abstract class).</p><br><br><p>Instead of calling a free function (say, <code>OpenFile</code>) directly,<br>introduce an interface for it and have a concrete subclass that calls<br>the free function:</p><br><br><pre><code>class FileInterface {<br> public:<br>  …<br>  virtual bool Open(const char path, const char<em> mode) = 0;<br>};<br><br>class File : public FileInterface {<br> public:<br>  …<br>  virtual bool Open(const char</em> path, const char<em> mode) {<br>    return OpenFile(path, mode);<br>  }<br>};<br></em></code></pre><br><br><p>Your code should talk to <code>FileInterface</code> to open a file.  Now it’s<br>easy to mock out the function.</p><br><br><p>This may seem much hassle, but in practice you often have multiple<br>related functions that you can put in the same interface, so the<br>per-function syntactic overhead will be much lower.</p><br><br><p>If you are concerned about the performance overhead incurred by<br>virtual functions, and profiling confirms your concern, you can<br>combine this with the recipe for <a href="#Mocking_Nonvirtual_Methods.md">mocking non-virtual methods</a>.</p><br><br><h2><a id="user-content-the-nice-the-strict-and-the-naggy" class="anchor" href="#the-nice-the-strict-and-the-naggy" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"/></svg></a>The Nice, the Strict, and the Naggy</h2><br><br><p>If a mock method has no <code>EXPECT_CALL</code> spec but is called, Google Mock<br>will print a warning about the “uninteresting call”. The rationale is:</p><br><br><ul><br><li>New methods may be added to an interface after a test is written. We shouldn’t fail a test just because a method it doesn’t know about is called.</li><br><li>However, this may also mean there’s a bug in the test, so Google Mock shouldn’t be silent either. If the user believes these calls are harmless, he can add an <code>EXPECT_CALL()</code> to suppress the warning.</li><br></ul><br><br><p>However, sometimes you may want to suppress all “uninteresting call”<br>warnings, while sometimes you may want the opposite, i.e. to treat all<br>of them as errors. Google Mock lets you make the decision on a<br>per-mock-object basis.</p><br><br><p>Suppose your test uses a mock class <code>MockFoo</code>:</p><br><br><pre><code>TEST(…) {<br>  MockFoo mock_foo;<br>  EXPECT_CALL(mock_foo, DoThis());<br>  … code that uses mock_foo …<br>}<br></code></pre><br><br><p>If a method of <code>mock_foo</code> other than <code>DoThis()</code> is called, it will be<br>reported by Google Mock as a warning. However, if you rewrite your<br>test to use <code>NiceMock&lt;MockFoo&gt;</code> instead, the warning will be gone,<br>resulting in a cleaner test output:</p><br><br><pre><code>using ::testing::NiceMock;<br><br>TEST(…) {<br>  NiceMock&lt;MockFoo&gt; mock_foo;<br>  EXPECT_CALL(mock_foo, DoThis());<br>  … code that uses mock_foo …<br>}<br></code></pre><br><br><p><code>NiceMock&lt;MockFoo&gt;</code> is a subclass of <code>MockFoo</code>, so it can be used<br>wherever <code>MockFoo</code> is accepted.</p><br><br><p>It also works if <code>MockFoo</code>‘s constructor takes some arguments, as<br><code>NiceMock&lt;MockFoo&gt;</code> “inherits” <code>MockFoo</code>‘s constructors:</p><br><br><pre><code>using ::testing::NiceMock;<br><br>TEST(…) {<br>  NiceMock&lt;MockFoo&gt; mock_foo(5, “hi”);  // Calls MockFoo(5, “hi”).<br>  EXPECT_CALL(mock_foo, DoThis());<br>  … code that uses mock_foo …<br>}<br></code></pre><br><br><p>The usage of <code>StrictMock</code> is similar, except that it makes all<br>uninteresting calls failures:</p><br><br><pre><code>using ::testing::StrictMock;<br><br>TEST(…) {<br>  StrictMock&lt;MockFoo&gt; mock_foo;<br>  EXPECT_CALL(mock_foo, DoThis());<br>  … code that uses mock_foo …<br><br>  // The test will fail if a method of mock_foo other than DoThis()<br>  // is called.<br>}<br></code></pre><br><br><p>There are some caveats though (I don’t like them just as much as the<br>next guy, but sadly they are side effects of C++’s limitations):</p><br><br><ol><br><li><code>NiceMock&lt;MockFoo&gt;</code> and <code>StrictMock&lt;MockFoo&gt;</code> only work for mock methods defined using the <code>MOCK_METHOD</code> family of macros <strong>directly</strong> in the <code>MockFoo</code> class. If a mock method is defined in a <strong>base class</strong> of <code>MockFoo</code>, the “nice” or “strict” modifier may not affect it, depending on the compiler. In particular, nesting <code>NiceMock</code> and <code>StrictMock</code> (e.g. <code>NiceMock&lt;StrictMock&lt;MockFoo&gt; &gt;</code>) is <strong>not</strong> supported.</li><br><li>The constructors of the base mock (<code>MockFoo</code>) cannot have arguments passed by non-const reference, which happens to be banned by the <a href="http://google-styleguide.googlecode.com/svn/trunk/cppguide.xml" target="_blank" rel="external">Google C++ style guide</a>.</li><br><li>During the constructor or destructor of <code>MockFoo</code>, the mock object is <em>not</em> nice or strict.  This may cause surprises if the constructor or destructor calls a mock method on <code>this</code> object. (This behavior, however, is consistent with C++’s general rule: if a constructor or destructor calls a virtual method of <code>this</code> object, that method is treated as non-virtual.  In other words, to the base class’s constructor or destructor, <code>this</code> object behaves like an instance of the base class, not the derived class.  This rule is required for safety.  Otherwise a base constructor may use members of a derived class before they are initialized, or a base destructor may use members of a derived class after they have been destroyed.)</li><br></ol><br><br><p>Finally, you should be <strong>very cautious</strong> about when to use naggy or strict mocks, as they tend to make tests more brittle and harder to maintain. When you refactor your code without changing its externally visible behavior, ideally you should’t need to update any tests. If your code interacts with a naggy mock, however, you may start to get spammed with warnings as the result of your change. Worse, if your code interacts with a strict mock, your tests may start to fail and you’ll be forced to fix them. Our general recommendation is to use nice mocks (not yet the default) most of the time, use naggy mocks (the current default) when developing or debugging tests, and use strict mocks only as the last resort.</p><br><br><h2><a id="user-content-simplifying-the-interface-without-breaking-existing-code" class="anchor" href="#simplifying-the-interface-without-breaking-existing-code" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"/></svg></a>Simplifying the Interface without Breaking Existing Code</h2><br><br><p>Sometimes a method has a long list of arguments that is mostly<br>uninteresting. For example,</p><br><br><pre><code>class LogSink {<br> public:<br>  …<br>  virtual void send(LogSeverity severity, const char<em> full_filename,<br>                    const char</em> base_filename, int line,<br>                    const struct tm<em> tm_time,<br>                    const char</em> message, size_t message_len) = 0;<br>};<br></code></pre><br><br><p>This method’s argument list is lengthy and hard to work with (let’s<br>say that the <code>message</code> argument is not even 0-terminated). If we mock<br>it as is, using the mock will be awkward. If, however, we try to<br>simplify this interface, we’ll need to fix all clients depending on<br>it, which is often infeasible.</p><br><br><p>The trick is to re-dispatch the method in the mock class:</p><br><br><pre><code>class ScopedMockLog : public LogSink {<br> public:<br>  …<br>  virtual void send(LogSeverity severity, const char<em> full_filename,<br>                    const char</em> base_filename, int line, const tm<em> tm_time,<br>                    const char</em> message, size_t message_len) {<br>    // We are only interested in the log severity, full file name, and<br>    // log message.<br>    Log(severity, full_filename, std::string(message, message_len));<br>  }<br><br>  // Implements the mock method:<br>  //<br>  //   void Log(LogSeverity severity,<br>  //            const string&amp; file_path,<br>  //            const string&amp; message);<br>  MOCK_METHOD3(Log, void(LogSeverity severity, const string&amp; file<em>path,<br>                         const string&amp; message));<br>};<br></em></code></pre><br><br><p>By defining a new mock method with a trimmed argument list, we make<br>the mock class much more user-friendly.</p><br><br><h2><a id="user-content-alternative-to-mocking-concrete-classes" class="anchor" href="#alternative-to-mocking-concrete-classes" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"/></svg></a>Alternative to Mocking Concrete Classes</h2><br><br><p>Often you may find yourself using classes that don’t implement<br>interfaces. In order to test your code that uses such a class (let’s<br>call it <code>Concrete</code>), you may be tempted to make the methods of<br><code>Concrete</code> virtual and then mock it.</p><br><br><p>Try not to do that.</p><br><br><p>Making a non-virtual function virtual is a big decision. It creates an<br>extension point where subclasses can tweak your class’ behavior. This<br>weakens your control on the class because now it’s harder to maintain<br>the class’ invariants. You should make a function virtual only when<br>there is a valid reason for a subclass to override it.</p><br><br><p>Mocking concrete classes directly is problematic as it creates a tight<br>coupling between the class and the tests - any small change in the<br>class may invalidate your tests and make test maintenance a pain.</p><br><br><p>To avoid such problems, many programmers have been practicing “coding<br>to interfaces”: instead of talking to the <code>Concrete</code> class, your code<br>would define an interface and talk to it. Then you implement that<br>interface as an adaptor on top of <code>Concrete</code>. In tests, you can easily<br>mock that interface to observe how your code is doing.</p><br><br><p>This technique incurs some overhead:</p><br><br><ul><br><li>You pay the cost of virtual function calls (usually not a problem).</li><br><li>There is more abstraction for the programmers to learn.</li><br></ul><br><br><p>However, it can also bring significant benefits in addition to better<br>testability:</p><br><br><ul><br><li><code>Concrete</code>‘s API may not fit your problem domain very well, as you may not be the only client it tries to serve. By designing your own interface, you have a chance to tailor it to your need - you may add higher-level functionalities, rename stuff, etc instead of just trimming the class. This allows you to write your code (user of the interface) in a more natural way, which means it will be more readable, more maintainable, and you’ll be more productive.</li><br><li>If <code>Concrete</code>‘s implementation ever has to change, you don’t have to rewrite everywhere it is used. Instead, you can absorb the change in your implementation of the interface, and your other code and tests will be insulated from this change.</li><br></ul><br><br><p>Some people worry that if everyone is practicing this technique, they<br>will end up writing lots of redundant code. This concern is totally<br>understandable. However, there are two reasons why it may not be the<br>case:</p><br><br><ul><br><li>Different projects may need to use <code>Concrete</code> in different ways, so the best interfaces for them will be different. Therefore, each of them will have its own domain-specific interface on top of <code>Concrete</code>, and they will not be the same code.</li><br><li>If enough projects want to use the same interface, they can always share it, just like they have been sharing <code>Concrete</code>. You can check in the interface and the adaptor somewhere near <code>Concrete</code> (perhaps in a <code>contrib</code> sub-directory) and let many projects use it.</li><br></ul><br><br><p>You need to weigh the pros and cons carefully for your particular<br>problem, but I’d like to assure you that the Java community has been<br>practicing this for a long time and it’s a proven effective technique<br>applicable in a wide variety of situations. :-)</p><br><br><h2><a id="user-content-delegating-calls-to-a-fake" class="anchor" href="#delegating-calls-to-a-fake" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"/></svg></a>Delegating Calls to a Fake</h2><br><br><p>Some times you have a non-trivial fake implementation of an<br>interface. For example:</p><br><br><pre><code>class Foo {<br> public:<br>  virtual ~Foo() {}<br>  virtual char DoThis(int n) = 0;<br>  virtual void DoThat(const char<em> s, int</em> p) = 0;<br>};<br><br>class FakeFoo : public Foo {<br> public:<br>  virtual char DoThis(int n) {<br>    return (n &gt; 0) ? ‘+’ :<br>        (n &lt; 0) ? ‘-‘ : ‘0’;<br>  }<br><br>  virtual void DoThat(const char<em> s, int</em> p) {<br>    *p = strlen(s);<br>  }<br>};<br></code></pre><br><br><p>Now you want to mock this interface such that you can set expectations<br>on it. However, you also want to use <code>FakeFoo</code> for the default<br>behavior, as duplicating it in the mock object is, well, a lot of<br>work.</p><br><br><p>When you define the mock class using Google Mock, you can have it<br>delegate its default action to a fake class you already have, using<br>this pattern:</p><br><br><pre><code>using ::testing::;<br>using ::testing::Invoke;<br><br>class MockFoo : public Foo {<br> public:<br>  // Normal mock method definitions using Google Mock.<br>  MOCK_METHOD1(DoThis, char(int n));<br>  MOCK_METHOD2(DoThat, void(const char<em> s, int</em> p));<br><br>  // Delegates the default actions of the methods to a FakeFoo object.<br>  // This must be called <em>before</em> the custom ON_CALL() statements.<br>  void DelegateToFake() {<br>    ON<em>CALL(*this, DoThis(</em>))<br>        .WillByDefault(Invoke(&amp;fake_, &amp;FakeFoo::DoThis));<br>    ON<em>CALL(*this, DoThat(</em>, <em>))<br>        .WillByDefault(Invoke(&amp;fake</em>, &amp;FakeFoo::DoThat));<br>  }<br> private:<br>  FakeFoo fake_;  // Keeps an instance of the fake in the mock.<br>};<br></code></pre><br><br><p>With that, you can use <code>MockFoo</code> in your tests as usual. Just remember<br>that if you don’t explicitly set an action in an <code>ON_CALL()</code> or<br><code>EXPECT<em>CALL()</em></code>, the fake will be called upon to do it:</p><br><br><pre><code>using ::testing::;<br><br>TEST(AbcTest, Xyz) {<br>  MockFoo foo;<br>  foo.DelegateToFake(); // Enables the fake for delegation.<br><br>  // Put your ON_CALL(foo, …)s here, if any.<br><br>  // No action specified, meaning to use the default action.<br>  EXPECT_CALL(foo, DoThis(5));<br>  EXPECT<em>CALL(foo, DoThat(</em>, _));<br><br>  int n = 0;<br>  EXPECT_EQ(‘+’, foo.DoThis(5));  // FakeFoo::DoThis() is invoked.<br>  foo.DoThat(“Hi”, &amp;n);           // FakeFoo::DoThat() is invoked.<br>  EXPECT_EQ(2, n);<br>}<br></code></pre><br><br><p><strong>Some tips:</strong></p><br><br><ul><br><li>If you want, you can still override the default action by providing your own <code>ON_CALL()</code> or using <code>.WillOnce()</code> / <code>.WillRepeatedly()</code> in <code>EXPECT_CALL()</code>.</li><br><li>In <code>DelegateToFake()</code>, you only need to delegate the methods whose fake implementation you intend to use.</li><br><li>The general technique discussed here works for overloaded methods, but you’ll need to tell the compiler which version you mean. To disambiguate a mock function (the one you specify inside the parentheses of <code>ON_CALL()</code>), see the “Selecting Between Overloaded Functions” section on this page; to disambiguate a fake function (the one you place inside <code>Invoke()</code>), use a <code>static<em>cast</em></code> to specify the function’s type. For instance, if class <code>Foo</code> has methods <code>char DoThis(int n)</code> and <code>bool DoThis(double x) const</code>, and you want to invoke the latter, you need to write <code>Invoke(&amp;fake, static<em>cast&lt;bool (FakeFoo::*)(double) const&gt;(&amp;FakeFoo::DoThis))</em></code> instead of <code>Invoke(&amp;fake, &amp;FakeFoo::DoThis)</code> (The strange-looking thing inside the angled brackets of <code>static<em>cast</em></code> is the type of a function pointer to the second <code>DoThis()</code> method.).</li><br><li>Having to mix a mock and a fake is often a sign of something gone wrong. Perhaps you haven’t got used to the interaction-based way of testing yet. Or perhaps your interface is taking on too many roles and should be split up. Therefore, <strong>don’t abuse this</strong>. We would only recommend to do it as an intermediate step when you are refactoring your code.</li><br></ul><br><br><p>Regarding the tip on mixing a mock and a fake, here’s an example on<br>why it may be a bad sign: Suppose you have a class <code>System</code> for<br>low-level system operations. In particular, it does file and I/O<br>operations. And suppose you want to test how your code uses <code>System</code><br>to do I/O, and you just want the file operations to work normally. If<br>you mock out the entire <code>System</code> class, you’ll have to provide a fake<br>implementation for the file operation part, which suggests that<br><code>System</code> is taking on too many roles.</p><br><br><p>Instead, you can define a <code>FileOps</code> interface and an <code>IOOps</code> interface<br>and split <code>System</code>‘s functionalities into the two. Then you can mock<br><code>IOOps</code> without mocking <code>FileOps</code>.</p><br><br><h2><a id="user-content-delegating-calls-to-a-real-object" class="anchor" href="#delegating-calls-to-a-real-object" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"/></svg></a>Delegating Calls to a Real Object</h2><br><br><p>When using testing doubles (mocks, fakes, stubs, and etc), sometimes<br>their behaviors will differ from those of the real objects. This<br>difference could be either intentional (as in simulating an error such<br>that you can test the error handling code) or unintentional. If your<br>mocks have different behaviors than the real objects by mistake, you<br>could end up with code that passes the tests but fails in production.</p><br><br><p>You can use the <em>delegating-to-real</em> technique to ensure that your<br>mock has the same behavior as the real object while retaining the<br>ability to validate calls. This technique is very similar to the<br>delegating-to-fake technique, the difference being that we use a real<br>object instead of a fake. Here’s an example:</p><br><br><pre><code>using ::testing::;<br>using ::testing::AtLeast;<br>using ::testing::Invoke;<br><br>class MockFoo : public Foo {<br> public:<br>  MockFoo() {<br>    // By default, all calls are delegated to the real object.<br>    ON<em>CALL(*this, DoThis())<br>        .WillByDefault(Invoke(&amp;real</em>, &amp;Foo::DoThis));<br>    ON<em>CALL(*this, DoThat(</em>))<br>        .WillByDefault(Invoke(&amp;real_, &amp;Foo::DoThat));<br>    …<br>  }<br>  MOCK_METHOD0(DoThis, …);<br>  MOCK<em>METHOD1(DoThat, …);<br>  …<br> private:<br>  Foo real</em>;<br>};<br>…<br><br>  MockFoo mock;<br><br>  EXPECT_CALL(mock, DoThis())<br>      .Times(3);<br>  EXPECT_CALL(mock, DoThat(“Hi”))<br>      .Times(AtLeast(1));<br>  … use mock in test …<br></code></pre><br><br><p>With this, Google Mock will verify that your code made the right calls<br>(with the right arguments, in the right order, called the right number<br>of times, etc), and a real object will answer the calls (so the<br>behavior will be the same as in production). This gives you the best<br>of both worlds.</p><br><br><h2><a id="user-content-delegating-calls-to-a-parent-class" class="anchor" href="#delegating-calls-to-a-parent-class" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"/></svg></a>Delegating Calls to a Parent Class</h2><br><br><p>Ideally, you should code to interfaces, whose methods are all pure<br>virtual. In reality, sometimes you do need to mock a virtual method<br>that is not pure (i.e, it already has an implementation). For example:</p><br><br><pre><code>class Foo {<br> public:<br>  virtual ~Foo();<br><br>  virtual void Pure(int n) = 0;<br>  virtual int Concrete(const char<em> str) { … }<br>};<br><br>class MockFoo : public Foo {<br> public:<br>  // Mocking a pure method.<br>  MOCK_METHOD1(Pure, void(int n));<br>  // Mocking a concrete method.  Foo::Concrete() is shadowed.<br>  MOCK_METHOD1(Concrete, int(const char</em> str));<br>};<br></code></pre><br><br><p>Sometimes you may want to call <code>Foo::Concrete()</code> instead of<br><code>MockFoo::Concrete()</code>. Perhaps you want to do it as part of a stub<br>action, or perhaps your test doesn’t need to mock <code>Concrete()</code> at all<br>(but it would be oh-so painful to have to define a new mock class<br>whenever you don’t need to mock one of its methods).</p><br><br><p>The trick is to leave a back door in your mock class for accessing the<br>real methods in the base class:</p><br><br><pre><code>class MockFoo : public Foo {<br> public:<br>  // Mocking a pure method.<br>  MOCK_METHOD1(Pure, void(int n));<br>  // Mocking a concrete method.  Foo::Concrete() is shadowed.<br>  MOCK<em>METHOD1(Concrete, int(const char<em> str));<br><br>  // Use this to call Concrete() defined in Foo.<br>  int FooConcrete(const char</em> str) { return Foo::Concrete(str); }<br>};<br></em></code></pre><br><br><p>Now, you can call <code>Foo::Concrete()</code> inside an action by:</p><br><br><pre><code>using ::testing::;<br>using ::testing::Invoke;<br>…<br>  EXPECT<em>CALL(foo, Concrete(</em>))<br>      .WillOnce(Invoke(&amp;foo, &amp;MockFoo::FooConcrete));<br></code></pre><br><br><p>or tell the mock object that you don’t want to mock <code>Concrete()</code>:</p><br><br><pre><code>using ::testing::Invoke;<br>…<br>  ON<em>CALL(foo, Concrete(</em>))<br>      .WillByDefault(Invoke(&amp;foo, &amp;MockFoo::FooConcrete));<br></code></pre><br><br><p>(Why don’t we just write <code>Invoke(&amp;foo, &amp;Foo::Concrete)</code>? If you do<br>that, <code>MockFoo::Concrete()</code> will be called (and cause an infinite<br>recursion) since <code>Foo::Concrete()</code> is virtual. That’s just how C++<br>works.)</p><br><br><h1><a id="user-content-using-matchers" class="anchor" href="#using-matchers" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"/></svg></a>Using Matchers</h1><br><br><h2><a id="user-content-matching-argument-values-exactly" class="anchor" href="#matching-argument-values-exactly" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"/></svg></a>Matching Argument Values Exactly</h2><br><br><p>You can specify exactly which arguments a mock method is expecting:</p><br><br><pre><code>using ::testing::Return;<br>…<br>  EXPECT_CALL(foo, DoThis(5))<br>      .WillOnce(Return(‘a’));<br>  EXPECT_CALL(foo, DoThat(“Hello”, bar));<br></code></pre><br><br><h2><a id="user-content-using-simple-matchers" class="anchor" href="#using-simple-matchers" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"/></svg></a>Using Simple Matchers</h2><br><br><p>You can use matchers to match arguments that have a certain property:</p><br><br><pre><code>using ::testing::Ge;<br>using ::testing::NotNull;<br>using ::testing::Return;<br>…<br>  EXPECT_CALL(foo, DoThis(Ge(5)))  // The argument must be &gt;= 5.<br>      .WillOnce(Return(‘a’));<br>  EXPECT<em>CALL(foo, DoThat(“Hello”, NotNull()));<br>  // The second argument must not be NULL.<br></em></code></pre><br><br><p>A frequently used matcher is <code></code>, which matches anything:</p><br><br><pre><code>using ::testing::_;<br>using ::testing::NotNull;<br>…<br>  EXPECT<em>CALL(foo, DoThat(</em>, NotNull()));<br></code></pre><br><br><h2><a id="user-content-combining-matchers" class="anchor" href="#combining-matchers" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"/></svg></a>Combining Matchers</h2><br><br><p>You can build complex matchers from existing ones using <code>AllOf()</code>,<br><code>AnyOf()</code>, and <code>Not()</code>:</p><br><br><pre><code>using ::testing::AllOf;<br>using ::testing::Gt;<br>using ::testing::HasSubstr;<br>using ::testing::Ne;<br>using ::testing::Not;<br>…<br>  // The argument must be &gt; 5 and != 10.<br>  EXPECT_CALL(foo, DoThis(AllOf(Gt(5),<br>                                Ne(10))));<br><br>  // The first argument must not contain sub-string “blah”.<br>  EXPECT_CALL(foo, DoThat(Not(HasSubstr(“blah”)),<br>                          NULL));<br></code></pre><br><br><h2><a id="user-content-casting-matchers" class="anchor" href="#casting-matchers" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"/></svg></a>Casting Matchers</h2><br><br><p>Google Mock matchers are statically typed, meaning that the compiler<br>can catch your mistake if you use a matcher of the wrong type (for<br>example, if you use <code>Eq(5)</code> to match a <code>string</code> argument). Good for<br>you!</p><br><br><p>Sometimes, however, you know what you’re doing and want the compiler<br>to give you some slack. One example is that you have a matcher for<br><code>long</code> and the argument you want to match is <code>int</code>. While the two<br>types aren’t exactly the same, there is nothing really wrong with<br>using a <code>Matcher&lt;long&gt;</code> to match an <code>int</code> - after all, we can first<br>convert the <code>int</code> argument to a <code>long</code> before giving it to the<br>matcher.</p><br><br><p>To support this need, Google Mock gives you the<br><code>SafeMatcherCast&lt;T&gt;(m)</code> function. It casts a matcher <code>m</code> to type<br><code>Matcher&lt;T&gt;</code>. To ensure safety, Google Mock checks that (let <code>U</code> be the<br>type <code>m</code> accepts):</p><br><br><ol><br><li>Type <code>T</code> can be implicitly cast to type <code>U</code>;</li><br><li>When both <code>T</code> and <code>U</code> are built-in arithmetic types (<code>bool</code>, integers, and floating-point numbers), the conversion from <code>T</code> to <code>U</code> is not lossy (in other words, any value representable by <code>T</code> can also be represented by <code>U</code>); and</li><br><li>When <code>U</code> is a reference, <code>T</code> must also be a reference (as the underlying matcher may be interested in the address of the <code>U</code> value).</li><br></ol><br><br><p>The code won’t compile if any of these conditions isn’t met.</p><br><br><p>Here’s one example:</p><br><br><pre><code>using ::testing::SafeMatcherCast;<br><br>// A base class and a child class.<br>class Base { … };<br>class Derived : public Base { … };<br><br>class MockFoo : public Foo {<br> public:<br>  MOCK_METHOD1(DoThis, void(Derived<em> derived));<br>};<br>…<br><br>  MockFoo foo;<br>  // m is a Matcher&lt;Base</em>&gt; we got from somewhere.<br>  EXPECT_CALL(foo, DoThis(SafeMatcherCast&lt;Derived<em>&gt;(m)));<br></em></code></pre><br><br><p>If you find <code>SafeMatcherCast&lt;T&gt;(m)</code> too limiting, you can use a similar<br>function <code>MatcherCast&lt;T&gt;(m)</code>. The difference is that <code>MatcherCast</code> works<br>as long as you can <code>static_cast</code> type <code>T</code> to type <code>U</code>.</p><br><br><p><code>MatcherCast</code> essentially lets you bypass C++’s type system<br>(<code>static_cast</code> isn’t always safe as it could throw away information,<br>for example), so be careful not to misuse/abuse it.</p><br><br><h2><a id="user-content-selecting-between-overloaded-functions" class="anchor" href="#selecting-between-overloaded-functions" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"/></svg></a>Selecting Between Overloaded Functions</h2><br><br><p>If you expect an overloaded function to be called, the compiler may<br>need some help on which overloaded version it is.</p><br><br><p>To disambiguate functions overloaded on the const-ness of this object,<br>use the <code>Const()</code> argument wrapper.</p><br><br><pre><code>using ::testing::ReturnRef;<br><br>class MockFoo : public Foo {<br>  …<br>  MOCK_METHOD0(GetBar, Bar&amp;());<br>  MOCK_CONST_METHOD0(GetBar, const Bar&amp;());<br>};<br>…<br><br>  MockFoo foo;<br>  Bar bar1, bar2;<br>  EXPECT_CALL(foo, GetBar())         // The non-const GetBar().<br>      .WillOnce(ReturnRef(bar1));<br>  EXPECT_CALL(Const(foo), GetBar())  // The const GetBar().<br>      .WillOnce(ReturnRef(bar2));<br></code></pre><br><br><p>(<code>Const()</code> is defined by Google Mock and returns a <code>const</code> reference<br>to its argument.)</p><br><br><p>To disambiguate overloaded functions with the same number of arguments<br>but different argument types, you may need to specify the exact type<br>of a matcher, either by wrapping your matcher in <code>Matcher&lt;type&gt;()</code>, or<br>using a matcher whose type is fixed (<code>TypedEq&lt;type&gt;</code>, <code>An&lt;type&gt;()</code>,<br>etc):</p><br><br><pre><code>using ::testing::An;<br>using ::testing::Lt;<br>using ::testing::Matcher;<br>using ::testing::TypedEq;<br><br>class MockPrinter : public Printer {<br> public:<br>  MOCK_METHOD1(Print, void(int n));<br>  MOCK_METHOD1(Print, void(char c));<br>};<br><br>TEST(PrinterTest, Print) {<br>  MockPrinter printer;<br><br>  EXPECT_CALL(printer, Print(An&lt;int&gt;()));            // void Print(int);<br>  EXPECT_CALL(printer, Print(Matcher&lt;int&gt;(Lt(5))));  // void Print(int);<br>  EXPECT<em>CALL(printer, Print(TypedEq&lt;char&gt;(‘a’)));   // void Print(char);<br><br>  printer.Print(3);<br>  printer.Print(6);<br>  printer.Print(‘a’);<br>}<br></em></code></pre><br><br><h2><a id="user-content-performing-different-actions-based-on-the-arguments" class="anchor" href="#performing-different-actions-based-on-the-arguments" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"/></svg></a>Performing Different Actions Based on the Arguments</h2><br><br><p>When a mock method is called, the <em>last</em> matching expectation that’s<br>still active will be selected (think “newer overrides older”). So, you<br>can make a method do different things depending on its argument values<br>like this:</p><br><br><pre><code>using ::testing::;<br>using ::testing::Lt;<br>using ::testing::Return;<br>…<br>  // The default case.<br>  EXPECT<em>CALL(foo, DoThis(</em>))<br>      .WillRepeatedly(Return(‘b’));<br><br>  // The more specific case.<br>  EXPECT<em>CALL(foo, DoThis(Lt(5)))<br>      .WillRepeatedly(Return(‘a’));<br></em></code></pre><br><br><p>Now, if <code>foo.DoThis()</code> is called with a value less than 5, <code>‘a’</code> will<br>be returned; otherwise <code>‘b’</code> will be returned.</p><br><br><h2><a id="user-content-matching-multiple-arguments-as-a-whole" class="anchor" href="#matching-multiple-arguments-as-a-whole" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"/></svg></a>Matching Multiple Arguments as a Whole</h2><br><br><p>Sometimes it’s not enough to match the arguments individually. For<br>example, we may want to say that the first argument must be less than<br>the second argument. The <code>With()</code> clause allows us to match<br>all arguments of a mock function as a whole. For example,</p><br><br><pre><code>using ::testing::;<br>using ::testing::Lt;<br>using ::testing::Ne;<br>…<br>  EXPECT<em>CALL(foo, InRange(Ne(0), </em>))<br>      .With(Lt());<br></code></pre><br><br><p>says that the first argument of <code>InRange()</code> must not be 0, and must be<br>less than the second argument.</p><br><br><p>The expression inside <code>With()</code> must be a matcher of type<br><code>Matcher&lt; ::testing::tuple&lt;A1, …, An&gt; &gt;</code>, where <code>A1</code>, …, <code>An</code> are the<br>types of the function arguments.</p><br><br><p>You can also write <code>AllArgs(m)</code> instead of <code>m</code> inside <code>.With()</code>. The<br>two forms are equivalent, but <code>.With(AllArgs(Lt()))</code> is more readable<br>than <code>.With(Lt())</code>.</p><br><br><p>You can use <code>Args&lt;k1, …, kn&gt;(m)</code> to match the <code>n</code> selected arguments<br>(as a tuple) against <code>m</code>. For example,</p><br><br><pre><code>using ::testing::_;<br>using ::testing::AllOf;<br>using ::testing::Args;<br>using ::testing::Lt;<br>…<br>  EXPECT<em>CALL(foo, Blah(</em>, <em>, </em>))<br>      .With(AllOf(Args&lt;0, 1&gt;(Lt()), Args&lt;1, 2&gt;(Lt())));<br></code></pre><br><br><p>says that <code>Blah()</code> will be called with arguments <code>x</code>, <code>y</code>, and <code>z</code> where<br><code>x &lt; y &lt; z</code>.</p><br><br><p>As a convenience and example, Google Mock provides some matchers for<br>2-tuples, including the <code>Lt()</code> matcher above. See the <a href="/google/googletest/blob/master/googlemock/docs/CheatSheet.md">CheatSheet</a> for<br>the complete list.</p><br><br><p>Note that if you want to pass the arguments to a predicate of your own<br>(e.g. <code>.With(Args&lt;0, 1&gt;(Truly(&amp;MyPredicate)))</code>), that predicate MUST be<br>written to take a <code>::testing::tuple</code> as its argument; Google Mock will pass the <code>n</code> selected arguments as <em>one</em> single tuple to the predicate.</p><br><br><h2><a id="user-content-using-matchers-as-predicates" class="anchor" href="#using-matchers-as-predicates" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"/></svg></a>Using Matchers as Predicates</h2><br><br><p>Have you noticed that a matcher is just a fancy predicate that also<br>knows how to describe itself? Many existing algorithms take predicates<br>as arguments (e.g. those defined in STL’s <code>&lt;algorithm&gt;</code> header), and<br>it would be a shame if Google Mock matchers are not allowed to<br>participate.</p><br><br><p>Luckily, you can use a matcher where a unary predicate functor is<br>expected by wrapping it inside the <code>Matches()</code> function. For example,</p><br><br><pre><code>#include &lt;algorithm&gt;<br>#include &lt;vector&gt;<br><br>std::vector&lt;int&gt; v;<br>…<br>// How many elements in v are &gt;= 10?<br>const int count = count_if(v.begin(), v.end(), Matches(Ge(10)));<br></code></pre><br><br><p>Since you can build complex matchers from simpler ones easily using<br>Google Mock, this gives you a way to conveniently construct composite<br>predicates (doing the same using STL’s <code>&lt;functional&gt;</code> header is just<br>painful). For example, here’s a predicate that’s satisfied by any<br>number that is &gt;= 0, &lt;= 100, and != 50:</p><br><br><pre><code>Matches(AllOf(Ge(0), Le(100), Ne(50)))<br></code></pre><br><br><h2><a id="user-content-using-matchers-in-google-test-assertions" class="anchor" href="#using-matchers-in-google-test-assertions" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"/></svg></a>Using Matchers in Google Test Assertions</h2><br><br><p>Since matchers are basically predicates that also know how to describe<br>themselves, there is a way to take advantage of them in<br><a href="/google/googletest/blob/master/googletest">Google Test</a> assertions. It’s<br>called <code>ASSERT_THAT</code> and <code>EXPECT_THAT</code>:</p><br><br><pre><code>  ASSERT_THAT(value, matcher);  // Asserts that value matches matcher.<br>  EXPECT_THAT(value, matcher);  // The non-fatal version.<br></code></pre><br><br><p>For example, in a Google Test test you can write:</p><br><br><pre><code>#include “gmock/gmock.h”<br><br>using ::testing::AllOf;<br>using ::testing::Ge;<br>using ::testing::Le;<br>using ::testing::MatchesRegex;<br>using ::testing::StartsWith;<br>…<br><br>  EXPECT_THAT(Foo(), StartsWith(“Hello”));<br>  EXPECT_THAT(Bar(), MatchesRegex(“Line \d+”));<br>  ASSERT_THAT(Baz(), AllOf(Ge(5), Le(10)));<br></code></pre><br><br><p>which (as you can probably guess) executes <code>Foo()</code>, <code>Bar()</code>, and<br><code>Baz()</code>, and verifies that:</p><br><br><ul><br><li><code>Foo()</code> returns a string that starts with <code>“Hello”</code>.</li><br><li><code>Bar()</code> returns a string that matches regular expression <code>“Line \d+”</code>.</li><br><li><code>Baz()</code> returns a number in the range [5, 10].</li><br></ul><br><br><p>The nice thing about these macros is that <em>they read like<br>English</em>. They generate informative messages too. For example, if the<br>first <code>EXPECT_THAT()</code> above fails, the message will be something like:</p><br><br><pre><code>Value of: Foo()<br>  Actual: “Hi, world!”<br>Expected: starts with “Hello”<br></code></pre><br><br><p><strong>Credit:</strong> The idea of <code>(ASSERT|EXPECT)_THAT</code> was stolen from the<br><a href="https://github.com/hamcrest/" target="_blank" rel="external">Hamcrest</a> project, which adds<br><code>assertThat()</code> to JUnit.</p><br><br><h2><a id="user-content-using-predicates-as-matchers" class="anchor" href="#using-predicates-as-matchers" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"/></svg></a>Using Predicates as Matchers</h2><br><br><p>Google Mock provides a built-in set of matchers. In case you find them<br>lacking, you can use an arbitray unary predicate function or functor<br>as a matcher - as long as the predicate accepts a value of the type<br>you want. You do this by wrapping the predicate inside the <code>Truly()</code><br>function, for example:</p><br><br><pre><code>using ::testing::Truly;<br><br>int IsEven(int n) { return (n % 2) == 0 ? 1 : 0; }<br>…<br><br>  // Bar() must be called with an even number.<br>  EXPECT_CALL(foo, Bar(Truly(IsEven)));<br></code></pre><br><br><p>Note that the predicate function / functor doesn’t have to return<br><code>bool</code>. It works as long as the return value can be used as the<br>condition in statement <code>if (condition) …</code>.</p><br><br><h2><a id="user-content-matching-arguments-that-are-not-copyable" class="anchor" href="#matching-arguments-that-are-not-copyable" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"/></svg></a>Matching Arguments that Are Not Copyable</h2><br><br><p>When you do an <code>EXPECT_CALL(mock_obj, Foo(bar))</code>, Google Mock saves<br>away a copy of <code>bar</code>. When <code>Foo()</code> is called later, Google Mock<br>compares the argument to <code>Foo()</code> with the saved copy of <code>bar</code>. This<br>way, you don’t need to worry about <code>bar</code> being modified or destroyed<br>after the <code>EXPECT_CALL()</code> is executed. The same is true when you use<br>matchers like <code>Eq(bar)</code>, <code>Le(bar)</code>, and so on.</p><br><br><p>But what if <code>bar</code> cannot be copied (i.e. has no copy constructor)? You<br>could define your own matcher function and use it with <code>Truly()</code>, as<br>the previous couple of recipes have shown. Or, you may be able to get<br>away from it if you can guarantee that <code>bar</code> won’t be changed after<br>the <code>EXPECT_CALL()</code> is executed. Just tell Google Mock that it should<br>save a reference to <code>bar</code>, instead of a copy of it. Here’s how:</p><br><br><pre><code>using ::testing::Eq;<br>using ::testing::ByRef;<br>using ::testing::Lt;<br>…<br>  // Expects that Foo()’s argument == bar.<br>  EXPECT_CALL(mock_obj, Foo(Eq(ByRef(bar))));<br><br>  // Expects that Foo()’s argument &lt; bar.<br>  EXPECT_CALL(mock_obj, Foo(Lt(ByRef(bar))));<br></code></pre><br><br><p>Remember: if you do this, don’t change <code>bar</code> after the<br><code>EXPECT_CALL()</code>, or the result is undefined.</p><br><br><h2><a id="user-content-validating-a-member-of-an-object" class="anchor" href="#validating-a-member-of-an-object" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"/></svg></a>Validating a Member of an Object</h2><br><br><p>Often a mock function takes a reference to object as an argument. When<br>matching the argument, you may not want to compare the entire object<br>against a fixed object, as that may be over-specification. Instead,<br>you may need to validate a certain member variable or the result of a<br>certain getter method of the object. You can do this with <code>Field()</code><br>and <code>Property()</code>. More specifically,</p><br><br><pre><code>Field(&amp;Foo::bar, m)<br></code></pre><br><br><p>is a matcher that matches a <code>Foo</code> object whose <code>bar</code> member variable<br>satisfies matcher <code>m</code>.</p><br><br><pre><code>Property(&amp;Foo::baz, m)<br></code></pre><br><br><p>is a matcher that matches a <code>Foo</code> object whose <code>baz()</code> method returns<br>a value that satisfies matcher <code>m</code>.</p><br><br><p>For example:</p><br><br><blockquote><br><table><thead><br><tr><br><th align="left"><code>Field(&amp;Foo::number, Ge(3))</code></th><br><th align="left">Matches <code>x</code> where <code>x.number &gt;= 3</code>.</th><br></tr><br></thead><tbody><br><tr><br><td align="left"><code>Property(&amp;Foo::name, StartsWith(“John “))</code></td><br><td align="left">Matches <code>x</code> where <code>x.name()</code> starts with <code>“John “</code>.</td><br></tr><br></tbody></table><br></blockquote><br><br><p>Note that in <code>Property(&amp;Foo::baz, …)</code>, method <code>baz()</code> must take no<br>argument and be declared as <code>const</code>.</p><br><br><p>BTW, <code>Field()</code> and <code>Property()</code> can also match plain pointers to<br>objects. For instance,</p><br><br><pre><code>Field(&amp;Foo::number, Ge(3))<br></code></pre><br><br><p>matches a plain pointer <code>p</code> where <code>p-&gt;number &gt;= 3</code>. If <code>p</code> is <code>NULL</code>,<br>the match will always fail regardless of the inner matcher.</p><br><br><p>What if you want to validate more than one members at the same time?<br>Remember that there is <code>AllOf()</code>.</p><br><br><h2><a id="user-content-validating-the-value-pointed-to-by-a-pointer-argument" class="anchor" href="#validating-the-value-pointed-to-by-a-pointer-argument" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"/></svg></a>Validating the Value Pointed to by a Pointer Argument</h2><br><br><p>C++ functions often take pointers as arguments. You can use matchers<br>like <code>IsNull()</code>, <code>NotNull()</code>, and other comparison matchers to match a<br>pointer, but what if you want to make sure the value <em>pointed to</em> by<br>the pointer, instead of the pointer itself, has a certain property?<br>Well, you can use the <code>Pointee(m)</code> matcher.</p><br><br><p><code>Pointee(m)</code> matches a pointer iff <code>m</code> matches the value the pointer<br>points to. For example:</p><br><br><pre><code>using ::testing::Ge;<br>using ::testing::Pointee;<br>…<br>  EXPECT_CALL(foo, Bar(Pointee(Ge(3))));<br></code></pre><br><br><p>expects <code>foo.Bar()</code> to be called with a pointer that points to a value<br>greater than or equal to 3.</p><br><br><p>One nice thing about <code>Pointee()</code> is that it treats a <code>NULL</code> pointer as<br>a match failure, so you can write <code>Pointee(m)</code> instead of</p><br><br><pre><code>  AllOf(NotNull(), Pointee(m))<br></code></pre><br><br><p>without worrying that a <code>NULL</code> pointer will crash your test.</p><br><br><p>Also, did we tell you that <code>Pointee()</code> works with both raw pointers<br><strong>and</strong> smart pointers (<code>linked_ptr</code>, <code>shared_ptr</code>, <code>scoped_ptr</code>, and<br>etc)?</p><br><br><p>What if you have a pointer to pointer? You guessed it - you can use<br>nested <code>Pointee()</code> to probe deeper inside the value. For example,<br><code>Pointee(Pointee(Lt(3)))</code> matches a pointer that points to a pointer<br>that points to a number less than 3 (what a mouthful…).</p><br><br><h2><a id="user-content-testing-a-certain-property-of-an-object" class="anchor" href="#testing-a-certain-property-of-an-object" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"/></svg></a>Testing a Certain Property of an Object</h2><br><br><p>Sometimes you want to specify that an object argument has a certain<br>property, but there is no existing matcher that does this. If you want<br>good error messages, you should define a matcher. If you want to do it<br>quick and dirty, you could get away with writing an ordinary function.</p><br><br><p>Let’s say you have a mock function that takes an object of type <code>Foo</code>,<br>which has an <code>int bar()</code> method and an <code>int baz()</code> method, and you<br>want to constrain that the argument’s <code>bar()</code> value plus its <code>baz()</code><br>value is a given number. Here’s how you can define a matcher to do it:</p><br><br><pre><code>using ::testing::MatcherInterface;<br>using ::testing::MatchResultListener;<br><br>class BarPlusBazEqMatcher : public MatcherInterface&lt;const Foo&amp;&gt; {<br> public:<br>  explicit BarPlusBazEqMatcher(int expected_sum)<br>      : expected<em>sum</em>(expected_sum) {}<br><br>  virtual bool MatchAndExplain(const Foo&amp; foo,<br>                               MatchResultListener listener) const {<br>    return (foo.bar() + foo.baz()) == expected<em>sum</em>;<br>  }<br><br>  virtual void DescribeTo(::std::ostream<em> os) const {
    </em>os &lt;&lt; “bar() + baz() equals “ &lt;&lt; expected<em>sum</em>;<br>  }<br><br>  virtual void DescribeNegationTo(::std::ostream<em> os) const {
    </em>os &lt;&lt; “bar() + baz() does not equal “ &lt;&lt; expected<em>sum</em>;<br>  }<br> private:<br>  const int expected<em>sum</em>;<br>};<br><br>inline Matcher&lt;const Foo&amp;&gt; BarPlusBazEq(int expected_sum) {<br>  return MakeMatcher(new BarPlusBazEqMatcher(expected_sum));<br>}<br><br>…<br><br>  EXPECT_CALL(…, DoThis(BarPlusBazEq(5)))…;<br></code></pre><br><br><h2><a id="user-content-matching-containers" class="anchor" href="#matching-containers" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"/></svg></a>Matching Containers</h2><br><br><p>Sometimes an STL container (e.g. list, vector, map, …) is passed to<br>a mock function and you may want to validate it. Since most STL<br>containers support the <code>==</code> operator, you can write<br><code>Eq(expected_container)</code> or simply <code>expected<em>container</em></code> to match a<br>container exactly.</p><br><br><p>Sometimes, though, you may want to be more flexible (for example, the<br>first element must be an exact match, but the second element can be<br>any positive number, and so on). Also, containers used in tests often<br>have a small number of elements, and having to define the expected<br>container out-of-line is a bit of a hassle.</p><br><br><p>You can use the <code>ElementsAre()</code> or <code>UnorderedElementsAre()</code> matcher in<br>such cases:</p><br><br><pre><code>using ::testing::;<br>using ::testing::ElementsAre;<br>using ::testing::Gt;<br>…<br><br>  MOCK_METHOD1(Foo, void(const vector&lt;int&gt;&amp; numbers));<br>…<br><br>  EXPECT<em>CALL(mock, Foo(ElementsAre(1, Gt(0), </em>, 5)));<br></code></pre><br><br><p>The above matcher says that the container must have 4 elements, which<br>must be 1, greater than 0, anything, and 5 respectively.</p><br><br><p>If you instead write:</p><br><br><pre><code>using ::testing::_;<br>using ::testing::Gt;<br>using ::testing::UnorderedElementsAre;<br>…<br><br>  MOCK_METHOD1(Foo, void(const vector&lt;int&gt;&amp; numbers));<br>…<br><br>  EXPECT<em>CALL(mock, Foo(UnorderedElementsAre(1, Gt(0), </em>, 5)));<br></code></pre><br><br><p>It means that the container must have 4 elements, which under some<br>permutation must be 1, greater than 0, anything, and 5 respectively.</p><br><br><p><code>ElementsAre()</code> and <code>UnorderedElementsAre()</code> are overloaded to take 0<br>to 10 arguments. If more are needed, you can place them in a C-style<br>array and use <code>ElementsAreArray()</code> or <code>UnorderedElementsAreArray()</code><br>instead:</p><br><br><pre><code>using ::testing::ElementsAreArray;<br>…<br><br>  // ElementsAreArray accepts an array of element values.<br>  const int expected_vector1[] = { 1, 5, 2, 4, … };<br>  EXPECT_CALL(mock, Foo(ElementsAreArray(expected_vector1)));<br><br>  // Or, an array of element matchers.<br>  Matcher&lt;int&gt; expected<em>vector2 = { 1, Gt(2), </em>, 3, … };<br>  EXPECT_CALL(mock, Foo(ElementsAreArray(expected_vector2)));<br></code></pre><br><br><p>In case the array needs to be dynamically created (and therefore the<br>array size cannot be inferred by the compiler), you can give<br><code>ElementsAreArray()</code> an additional argument to specify the array size:</p><br><br><pre><code>using ::testing::ElementsAreArray;<br>…<br>  int<em> const expected_vector3 = new int[count];<br>  … fill expected_vector3 with values …<br>  EXPECT_CALL(mock, Foo(ElementsAreArray(expected_vector3, count)));<br></em></code></pre><br><br><p><strong>Tips:</strong></p><br><br><ul><br><li><code>ElementsAre()</code> can be used to match <em>any</em> container that implements the STL iterator pattern (i.e. it has a <code>const_iterator</code> type and supports <code>begin()/end()</code>), not just the ones defined in STL. It will even work with container types yet to be written - as long as they follows the above pattern.</li><br><li>You can use nested <code>ElementsAre<em>()</em></code> to match nested (multi-dimensional) containers.</li><br><li>If the container is passed by pointer instead of by reference, just write <code>Pointee(ElementsAre(…))</code>.</li><br><li>The order of elements <em>matters</em> for <code>ElementsAre<em>()</em></code>. Therefore don’t use it with containers whose element order is undefined (e.g. <code>hash_map</code>).</li><br></ul><br><br><h2><a id="user-content-sharing-matchers" class="anchor" href="#sharing-matchers" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"/></svg></a>Sharing Matchers</h2><br><br><p>Under the hood, a Google Mock matcher object consists of a pointer to<br>a ref-counted implementation object. Copying matchers is allowed and<br>very efficient, as only the pointer is copied. When the last matcher<br>that references the implementation object dies, the implementation<br>object will be deleted.</p><br><br><p>Therefore, if you have some complex matcher that you want to use again<br>and again, there is no need to build it everytime. Just assign it to a<br>matcher variable and use that variable repeatedly! For example,</p><br><br><pre><code>  Matcher&lt;int&gt; in_range = AllOf(Gt(5), Le(10));<br>  … use in_range as a matcher in multiple EXPECT_CALLs …<br></code></pre><br><br><h1><a id="user-content-setting-expectations" class="anchor" href="#setting-expectations" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"/></svg></a>Setting Expectations</h1><br><br><h2><a id="user-content-knowing-when-to-expect" class="anchor" href="#knowing-when-to-expect" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"/></svg></a>Knowing When to Expect</h2><br><br><p><code>ON_CALL</code> is likely the single most under-utilized construct in Google Mock.</p><br><br><p>There are basically two constructs for defining the behavior of a mock object: <code>ON_CALL</code> and <code>EXPECT_CALL</code>. The difference? <code>ON_CALL</code> defines what happens when a mock method is called, but <em>doesn’t imply any expectation on the method being called.</em> <code>EXPECT_CALL</code> not only defines the behavior, but also sets an expectation that <em>the method will be called with the given arguments, for the given number of times</em> (and <em>in the given order</em> when you specify the order too).</p><br><br><p>Since <code>EXPECT_CALL</code> does more, isn’t it better than <code>ON_CALL</code>? Not really. Every <code>EXPECT_CALL</code> adds a constraint on the behavior of the code under test. Having more constraints than necessary is <em>baaad</em> - even worse than not having enough constraints.</p><br><br><p>This may be counter-intuitive. How could tests that verify more be worse than tests that verify less? Isn’t verification the whole point of tests?</p><br><br><p>The answer, lies in <em>what</em> a test should verify. <strong>A good test verifies the contract of the code.</strong> If a test over-specifies, it doesn’t leave enough freedom to the implementation. As a result, changing the implementation without breaking the contract (e.g. refactoring and optimization), which should be perfectly fine to do, can break such tests. Then you have to spend time fixing them, only to see them broken again the next time the implementation is changed.</p><br><br><p>Keep in mind that one doesn’t have to verify more than one property in one test. In fact, <strong>it’s a good style to verify only one thing in one test.</strong> If you do that, a bug will likely break only one or two tests instead of dozens (which case would you rather debug?). If you are also in the habit of giving tests descriptive names that tell what they verify, you can often easily guess what’s wrong just from the test log itself.</p><br><br><p>So use <code>ON_CALL</code> by default, and only use <code>EXPECT_CALL</code> when you actually intend to verify that the call is made. For example, you may have a bunch of <code>ON_CALL</code>s in your test fixture to set the common mock behavior shared by all tests in the same group, and write (scarcely) different <code>EXPECT_CALL</code>s in different <code>TEST_F</code>s to verify different aspects of the code’s behavior. Compared with the style where each <code>TEST</code> has many <code>EXPECT_CALL</code>s, this leads to tests that are more resilient to implementational changes (and thus less likely to require maintenance) and makes the intent of the tests more obvious (so they are easier to maintain when you do need to maintain them).</p><br><br><p>If you are bothered by the “Uninteresting mock function call” message printed when a mock method without an <code>EXPECT_CALL</code> is called, you may use a <code>NiceMock</code> instead to suppress all such messages for the mock object, or suppress the message for specific methods by adding <code>EXPECT_CALL(…).Times(AnyNumber())</code>. DO NOT suppress it by blindly adding an <code>EXPECT_CALL(…)</code>, or you’ll have a test that’s a pain to maintain.</p><br><br><h2><a id="user-content-ignoring-uninteresting-calls" class="anchor" href="#ignoring-uninteresting-calls" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"/></svg></a>Ignoring Uninteresting Calls</h2><br><br><p>If you are not interested in how a mock method is called, just don’t<br>say anything about it. In this case, if the method is ever called,<br>Google Mock will perform its default action to allow the test program<br>to continue. If you are not happy with the default action taken by<br>Google Mock, you can override it using <code>DefaultValue&lt;T&gt;::Set()</code><br>(described later in this document) or <code>ON_CALL()</code>.</p><br><br><p>Please note that once you expressed interest in a particular mock<br>method (via <code>EXPECT_CALL()</code>), all invocations to it must match some<br>expectation. If this function is called but the arguments don’t match<br>any <code>EXPECT<em>CALL()</em></code> statement, it will be an error.</p><br><br><h2><a id="user-content-disallowing-unexpected-calls" class="anchor" href="#disallowing-unexpected-calls" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"/></svg></a>Disallowing Unexpected Calls</h2><br><br><p>If a mock method shouldn’t be called at all, explicitly say so:</p><br><br><pre><code>using ::testing::;<br>…<br>  EXPECT<em>CALL(foo, Bar(</em>))<br>      .Times(0);<br></code></pre><br><br><p>If some calls to the method are allowed, but the rest are not, just<br>list all the expected calls:</p><br><br><pre><code>using ::testing::AnyNumber;<br>using ::testing::Gt;<br>…<br>  EXPECT_CALL(foo, Bar(5));<br>  EXPECT_CALL(foo, Bar(Gt(10)))<br>      .Times(AnyNumber());<br></code></pre><br><br><p>A call to <code>foo.Bar()</code> that doesn’t match any of the <code>EXPECT_CALL()</code><br>statements will be an error.</p><br><br><h2><a id="user-content-understanding-uninteresting-vs-unexpected-calls" class="anchor" href="#understanding-uninteresting-vs-unexpected-calls" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"/></svg></a>Understanding Uninteresting vs Unexpected Calls</h2><br><br><p><em>Uninteresting</em> calls and <em>unexpected</em> calls are different concepts in Google Mock. <em>Very</em> different.</p><br><br><p>A call <code>x.Y(…)</code> is <strong>uninteresting</strong> if there’s <em>not even a single</em> <code>EXPECT_CALL(x, Y(…))</code> set. In other words, the test isn’t interested in the <code>x.Y()</code> method at all, as evident in that the test doesn’t care to say anything about it.</p><br><br><p>A call <code>x.Y(…)</code> is <strong>unexpected</strong> if there are some <code>EXPECT_CALL(x, Y(…))s</code> set, but none of them matches the call. Put another way, the test is interested in the <code>x.Y()</code> method (therefore it <em>explicitly</em> sets some <code>EXPECT_CALL</code> to verify how it’s called); however, the verification fails as the test doesn’t expect this particular call to happen.</p><br><br><p><strong>An unexpected call is always an error,</strong> as the code under test doesn’t behave the way the test expects it to behave.</p><br><br><p><strong>By default, an uninteresting call is not an error,</strong> as it violates no constraint specified by the test. (Google Mock’s philosophy is that saying nothing means there is no constraint.) However, it leads to a warning, as it <em>might</em> indicate a problem (e.g. the test author might have forgotten to specify a constraint).</p><br><br><p>In Google Mock, <code>NiceMock</code> and <code>StrictMock</code> can be used to make a mock class “nice” or “strict”. How does this affect uninteresting calls and unexpected calls?</p><br><br><p>A <strong>nice mock</strong> suppresses uninteresting call warnings. It is less chatty than the default mock, but otherwise is the same. If a test fails with a default mock, it will also fail using a nice mock instead. And vice versa. Don’t expect making a mock nice to change the test’s result.</p><br><br><p>A <strong>strict mock</strong> turns uninteresting call warnings into errors. So making a mock strict may change the test’s result.</p><br><br><p>Let’s look at an example:</p><br><br><pre><code>TEST(…) {<br>  NiceMock&lt;MockDomainRegistry&gt; mock_registry;<br>  EXPECT_CALL(mock_registry, GetDomainOwner(“google.com”))<br>          .WillRepeatedly(Return(“Larry Page”));<br><br>  // Use mock_registry in code under test.<br>  … &amp;mock_registry …<br>}<br></code></pre><br><br><p>The sole <code>EXPECT_CALL</code> here says that all calls to <code>GetDomainOwner()</code> must have <code>“google.com”</code> as the argument. If <code>GetDomainOwner(“yahoo.com”)</code> is called, it will be an unexpected call, and thus an error. Having a nice mock doesn’t change the severity of an unexpected call.</p><br><br><p>So how do we tell Google Mock that <code>GetDomainOwner()</code> can be called with some other arguments as well? The standard technique is to add a “catch all” <code>EXPECT_CALL</code>:</p><br><br><pre><code>  EXPECT_CALL(mock<em>registry, GetDomainOwner(</em>))<br>        .Times(AnyNumber());  // catches all other calls to this method.<br>  EXPECT_CALL(mock<em>registry, GetDomainOwner(“google.com”))<br>        .WillRepeatedly(Return(“Larry Page”));<br></em></code></pre><br><br><p>Remember that <code></code> is the wildcard matcher that matches anything. With this, if <code>GetDomainOwner(“google.com”)</code> is called, it will do what the second <code>EXPECT_CALL</code> says; if it is called with a different argument, it will do what the first <code>EXPECT_CALL</code> says.</p><br><br><p>Note that the order of the two <code>EXPECT_CALLs</code> is important, as a newer <code>EXPECT_CALL</code> takes precedence over an older one.</p><br><br><p>For more on uninteresting calls, nice mocks, and strict mocks, read <a href="#the-nice-the-strict-and-the-naggy">“The Nice, the Strict, and the Naggy”</a>.</p><br><br><h2><a id="user-content-expecting-ordered-calls" class="anchor" href="#expecting-ordered-calls" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"/></svg></a>Expecting Ordered Calls</h2><br><br><p>Although an <code>EXPECT_CALL()</code> statement defined earlier takes precedence<br>when Google Mock tries to match a function call with an expectation,<br>by default calls don’t have to happen in the order <code>EXPECT_CALL()</code><br>statements are written. For example, if the arguments match the<br>matchers in the third <code>EXPECT_CALL()</code>, but not those in the first two,<br>then the third expectation will be used.</p><br><br><p>If you would rather have all calls occur in the order of the<br>expectations, put the <code>EXPECT<em>CALL()</em></code> statements in a block where you<br>define a variable of type <code>InSequence</code>:</p><br><br><pre><code>  using ::testing::;<br>  using ::testing::InSequence;<br><br>  {<br>    InSequence s;<br><br>    EXPECT_CALL(foo, DoThis(5));<br>    EXPECT<em>CALL(bar, DoThat(</em>))<br>        .Times(2);<br>    EXPECT_CALL(foo, DoThis(6));<br>  }<br></code></pre><br><br><p>In this example, we expect a call to <code>foo.DoThis(5)</code>, followed by two<br>calls to <code>bar.DoThat()</code> where the argument can be anything, which are<br>in turn followed by a call to <code>foo.DoThis(6)</code>. If a call occurred<br>out-of-order, Google Mock will report an error.</p><br><br><h2><a id="user-content-expecting-partially-ordered-calls" class="anchor" href="#expecting-partially-ordered-calls" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"/></svg></a>Expecting Partially Ordered Calls</h2><br><br><p>Sometimes requiring everything to occur in a predetermined order can<br>lead to brittle tests. For example, we may care about <code>A</code> occurring<br>before both <code>B</code> and <code>C</code>, but aren’t interested in the relative order<br>of <code>B</code> and <code>C</code>. In this case, the test should reflect our real intent,<br>instead of being overly constraining.</p><br><br><p>Google Mock allows you to impose an arbitrary DAG (directed acyclic<br>graph) on the calls. One way to express the DAG is to use the<br><a href="/google/googletest/blob/master/googlemock/docs/CheatSheet.md#the-after-clause">After</a> clause of <code>EXPECT_CALL</code>.</p><br><br><p>Another way is via the <code>InSequence()</code> clause (not the same as the<br><code>InSequence</code> class), which we borrowed from jMock 2. It’s less<br>flexible than <code>After()</code>, but more convenient when you have long chains<br>of sequential calls, as it doesn’t require you to come up with<br>different names for the expectations in the chains.  Here’s how it<br>works:</p><br><br><p>If we view <code>EXPECT_CALL()</code> statements as nodes in a graph, and add an<br>edge from node A to node B wherever A must occur before B, we can get<br>a DAG. We use the term “sequence” to mean a directed path in this<br>DAG. Now, if we decompose the DAG into sequences, we just need to know<br>which sequences each <code>EXPECT_CALL()</code> belongs to in order to be able to<br>reconstruct the orginal DAG.</p><br><br><p>So, to specify the partial order on the expectations we need to do two<br>things: first to define some <code>Sequence</code> objects, and then for each<br><code>EXPECT_CALL()</code> say which <code>Sequence</code> objects it is part<br>of. Expectations in the same sequence must occur in the order they are<br>written. For example,</p><br><br><pre><code>  using ::testing::Sequence;<br><br>  Sequence s1, s2;<br><br>  EXPECT_CALL(foo, A())<br>      .InSequence(s1, s2);<br>  EXPECT_CALL(bar, B())<br>      .InSequence(s1);<br>  EXPECT_CALL(bar, C())<br>      .InSequence(s2);<br>  EXPECT<em>CALL(foo, D())<br>      .InSequence(s2);<br></em></code></pre><br><br><p>specifies the following DAG (where <code>s1</code> is <code>A -&gt; B</code>, and <code>s2</code> is <code>A -&gt;<br>C -&gt; D</code>):</p><br><br><pre><code>       +—&gt; B<br>       |<br>  A —|<br>       |<br>       +—&gt; C —&gt; D<br></code></pre><br><br><p>This means that A must occur before B and C, and C must occur before<br>D. There’s no restriction about the order other than these.</p><br><br><h2><a id="user-content-controlling-when-an-expectation-retires" class="anchor" href="#controlling-when-an-expectation-retires" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"/></svg></a>Controlling When an Expectation Retires</h2><br><br><p>When a mock method is called, Google Mock only consider expectations<br>that are still active. An expectation is active when created, and<br>becomes inactive (aka <em>retires</em>) when a call that has to occur later<br>has occurred. For example, in</p><br><br><pre><code>  using ::testing::;<br>  using ::testing::Sequence;<br><br>  Sequence s1, s2;<br><br>  EXPECT<em>CALL(log, Log(WARNING, </em>, “File too large.”))     // #1<br>      .Times(AnyNumber())<br>      .InSequence(s1, s2);<br>  EXPECT<em>CALL(log, Log(WARNING, </em>, “Data set is empty.”))  // #2<br>      .InSequence(s1);<br>  EXPECT<em>CALL(log, Log(WARNING, </em>, “User not found.”))     // #3<br>      .InSequence(s2);<br></code></pre><br><br><p>as soon as either #2 or #3 is matched, #1 will retire. If a warning<br><code>“File too large.”</code> is logged after this, it will be an error.</p><br><br><p>Note that an expectation doesn’t retire automatically when it’s<br>saturated. For example,</p><br><br><pre><code>using ::testing::_;<br>…<br>  EXPECT<em>CALL(log, Log(WARNING, </em>, _));                  // #1<br>  EXPECT<em>CALL(log, Log(WARNING, </em>, “File too large.”));  // #2<br></code></pre><br><br><p>says that there will be exactly one warning with the message <code>“File<br>too large.”</code>. If the second warning contains this message too, #2 will<br>match again and result in an upper-bound-violated error.</p><br><br><p>If this is not what you want, you can ask an expectation to retire as<br>soon as it becomes saturated:</p><br><br><pre><code>using ::testing::_;<br>…<br>  EXPECT<em>CALL(log, Log(WARNING, </em>, _));                 // #1<br>  EXPECT<em>CALL(log, Log(WARNING, </em>, “File too large.”))  // #2<br>      .RetiresOnSaturation();<br></code></pre><br><br><p>Here #2 can be used only once, so if you have two warnings with the<br>message <code>“File too large.”</code>, the first will match #2 and the second<br>will match #1 - there will be no error.</p><br><br><h1><a id="user-content-using-actions" class="anchor" href="#using-actions" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"/></svg></a>Using Actions</h1><br><br><h2><a id="user-content-returning-references-from-mock-methods" class="anchor" href="#returning-references-from-mock-methods" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"/></svg></a>Returning References from Mock Methods</h2><br><br><p>If a mock function’s return type is a reference, you need to use<br><code>ReturnRef()</code> instead of <code>Return()</code> to return a result:</p><br><br><pre><code>using ::testing::ReturnRef;<br><br>class MockFoo : public Foo {<br> public:<br>  MOCK_METHOD0(GetBar, Bar&amp;());<br>};<br>…<br><br>  MockFoo foo;<br>  Bar bar;<br>  EXPECT_CALL(foo, GetBar())<br>      .WillOnce(ReturnRef(bar));<br></code></pre><br><br><h2><a id="user-content-returning-live-values-from-mock-methods" class="anchor" href="#returning-live-values-from-mock-methods" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"/></svg></a>Returning Live Values from Mock Methods</h2><br><br><p>The <code>Return(x)</code> action saves a copy of <code>x</code> when the action is<br><em>created</em>, and always returns the same value whenever it’s<br>executed. Sometimes you may want to instead return the <em>live</em> value of<br><code>x</code> (i.e. its value at the time when the action is <em>executed</em>.).</p><br><br><p>If the mock function’s return type is a reference, you can do it using<br><code>ReturnRef(x)</code>, as shown in the previous recipe (“Returning References<br>from Mock Methods”). However, Google Mock doesn’t let you use<br><code>ReturnRef()</code> in a mock function whose return type is not a reference,<br>as doing that usually indicates a user error. So, what shall you do?</p><br><br><p>You may be tempted to try <code>ByRef()</code>:</p><br><br><pre><code>using testing::ByRef;<br>using testing::Return;<br><br>class MockFoo : public Foo {<br> public:<br>  MOCK_METHOD0(GetValue, int());<br>};<br>…<br>  int x = 0;<br>  MockFoo foo;<br>  EXPECT_CALL(foo, GetValue())<br>      .WillRepeatedly(Return(ByRef(x)));<br>  x = 42;<br>  EXPECT_EQ(42, foo.GetValue());<br></code></pre><br><br><p>Unfortunately, it doesn’t work here. The above code will fail with error:</p><br><br><pre><code>Value of: foo.GetValue()<br>  Actual: 0<br>Expected: 42<br></code></pre><br><br><p>The reason is that <code>Return(value)</code> converts <code>value</code> to the actual<br>return type of the mock function at the time when the action is<br><em>created</em>, not when it is <em>executed</em>. (This behavior was chosen for<br>the action to be safe when <code>value</code> is a proxy object that references<br>some temporary objects.) As a result, <code>ByRef(x)</code> is converted to an<br><code>int</code> value (instead of a <code>const int&amp;</code>) when the expectation is set,<br>and <code>Return(ByRef(x))</code> will always return 0.</p><br><br><p><code>ReturnPointee(pointer)</code> was provided to solve this problem<br>specifically. It returns the value pointed to by <code>pointer</code> at the time<br>the action is <em>executed</em>:</p><br><br><pre><code>using testing::ReturnPointee;<br>…<br>  int x = 0;<br>  MockFoo foo;<br>  EXPECT_CALL(foo, GetValue())<br>      .WillRepeatedly(ReturnPointee(&amp;x));  // Note the &amp; here.<br>  x = 42;<br>  EXPECT_EQ(42, foo.GetValue());  // This will succeed now.<br></code></pre><br><br><h2><a id="user-content-combining-actions" class="anchor" href="#combining-actions" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"/></svg></a>Combining Actions</h2><br><br><p>Want to do more than one thing when a function is called? That’s<br>fine. <code>DoAll()</code> allow you to do sequence of actions every time. Only<br>the return value of the last action in the sequence will be used.</p><br><br><pre><code>using ::testing::DoAll;<br><br>class MockFoo : public Foo {<br> public:<br>  MOCK_METHOD1(Bar, bool(int n));<br>};<br>…<br><br>  EXPECT<em>CALL(foo, Bar(</em>))<br>      .WillOnce(DoAll(action_1,<br>                      action_2,<br>                      …<br>                      action_n));<br></code></pre><br><br><h2><a id="user-content-mocking-side-effects" class="anchor" href="#mocking-side-effects" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"/></svg></a>Mocking Side Effects</h2><br><br><p>Sometimes a method exhibits its effect not via returning a value but<br>via side effects. For example, it may change some global state or<br>modify an output argument. To mock side effects, in general you can<br>define your own action by implementing <code>::testing::ActionInterface</code>.</p><br><br><p>If all you need to do is to change an output argument, the built-in<br><code>SetArgPointee()</code> action is convenient:</p><br><br><pre><code>using ::testing::SetArgPointee;<br><br>class MockMutator : public Mutator {<br> public:<br>  MOCK_METHOD2(Mutate, void(bool mutate, int value));<br>  …<br>};<br>…<br><br>  MockMutator mutator;<br>  EXPECT<em>CALL(mutator, Mutate(true, </em>))<br>      .WillOnce(SetArgPointee&lt;1&gt;(5));<br></code></pre><br><br><p>In this example, when <code>mutator.Mutate()</code> is called, we will assign 5<br>to the <code>int</code> variable pointed to by argument #1<br>(0-based).</p><br><br><p><code>SetArgPointee()</code> conveniently makes an internal copy of the<br>value you pass to it, removing the need to keep the value in scope and<br>alive. The implication however is that the value must have a copy<br>constructor and assignment operator.</p><br><br><p>If the mock method also needs to return a value as well, you can chain<br><code>SetArgPointee()</code> with <code>Return()</code> using <code>DoAll()</code>:</p><br><br><pre><code>using ::testing::_;<br>using ::testing::Return;<br>using ::testing::SetArgPointee;<br><br>class MockMutator : public Mutator {<br> public:<br>  …<br>  MOCK_METHOD1(MutateInt, bool(int<em> value));<br>};<br>…<br><br>  MockMutator mutator;<br>  EXPECT<em>CALL(mutator, MutateInt(</em>))<br>      .WillOnce(DoAll(SetArgPointee&lt;0&gt;(5),<br>                      Return(true)));<br></em></code></pre><br><br><p>If the output argument is an array, use the<br><code>SetArrayArgument&lt;N&gt;(first, last)</code> action instead. It copies the<br>elements in source range <code>[first, last)</code> to the array pointed to by<br>the <code>N</code>-th (0-based) argument:</p><br><br><pre><code>using ::testing::NotNull;<br>using ::testing::SetArrayArgument;<br><br>class MockArrayMutator : public ArrayMutator {<br> public:<br>  MOCK_METHOD2(Mutate, void(int values, int num_values));<br>  …<br>};<br>…<br><br>  MockArrayMutator mutator;<br>  int values[5] = { 1, 2, 3, 4, 5 };<br>  EXPECT<em>CALL(mutator, Mutate(NotNull(), 5))<br>      .WillOnce(SetArrayArgument&lt;0&gt;(values, values + 5));<br></em></code></pre><br><br><p>This also works when the argument is an output iterator:</p><br><br><pre><code>using ::testing::;<br>using ::testing::SeArrayArgument;<br><br>class MockRolodex : public Rolodex {<br> public:<br>  MOCK_METHOD1(GetNames, void(std::back_insert_iterator&lt;vector&lt;string&gt; &gt;));<br>  …<br>};<br>…<br><br>  MockRolodex rolodex;<br>  vector&lt;string&gt; names;<br>  names.push_back(“George”);<br>  names.push_back(“John”);<br>  names.push_back(“Thomas”);<br>  EXPECT<em>CALL(rolodex, GetNames(</em>))<br>      .WillOnce(SetArrayArgument&lt;0&gt;(names.begin(), names.end()));<br></code></pre><br><br><h2><a id="user-content-changing-a-mock-objects-behavior-based-on-the-state" class="anchor" href="#changing-a-mock-objects-behavior-based-on-the-state" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"/></svg></a>Changing a Mock Object’s Behavior Based on the State</h2><br><br><p>If you expect a call to change the behavior of a mock object, you can use <code>::testing::InSequence</code> to specify different behaviors before and after the call:</p><br><br><pre><code>using ::testing::InSequence;<br>using ::testing::Return;<br><br>…<br>  {<br>    InSequence seq;<br>    EXPECT_CALL(my_mock, IsDirty())<br>        .WillRepeatedly(Return(true));<br>    EXPECT_CALL(my_mock, Flush());<br>    EXPECT_CALL(my_mock, IsDirty())<br>        .WillRepeatedly(Return(false));<br>  }<br>  my_mock.FlushIfDirty();<br></code></pre><br><br><p>This makes <code>my_mock.IsDirty()</code> return <code>true</code> before <code>my<em>mock.Flush()</em></code> is called and return <code>false</code> afterwards.</p><br><br><p>If the behavior change is more complex, you can store the effects in a variable and make a mock method get its return value from that variable:</p><br><br><pre><code>using ::testing::;<br>using ::testing::SaveArg;<br>using ::testing::Return;<br><br>ACTION_P(ReturnPointee, p) { return <em>p; }<br>…<br>  int previous_value = 0;<br>  EXPECT_CALL(my_mock, GetPrevValue())<br>      .WillRepeatedly(ReturnPointee(&amp;previous_value));<br>  EXPECT_CALL(my<em>mock, UpdateValue(</em>))<br>      .WillRepeatedly(SaveArg&lt;0&gt;(&amp;previous_value));<br>  my_mock.DoSomethingToUpdateValue();<br></em></code></pre><br><br><p>Here <code>my_mock.GetPrevValue()</code> will always return the argument of the last <code>UpdateValue()</code> call.</p><br><br><h2><a id="user-content-setting-the-default-value-for-a-return-type" class="anchor" href="#setting-the-default-value-for-a-return-type" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"/></svg></a>Setting the Default Value for a Return Type</h2><br><br><p>If a mock method’s return type is a built-in C++ type or pointer, by<br>default it will return 0 when invoked. Also, in C++ 11 and above, a mock<br>method whose return type has a default constructor will return a default-constructed<br>value by default.  You only need to specify an<br>action if this default value doesn’t work for you.</p><br><br><p>Sometimes, you may want to change this default value, or you may want<br>to specify a default value for types Google Mock doesn’t know<br>about. You can do this using the <code>::testing::DefaultValue</code> class<br>template:</p><br><br><pre><code>class MockFoo : public Foo {<br> public:<br>  MOCK_METHOD0(CalculateBar, Bar());<br>};<br>…<br><br>  Bar default_bar;<br>  // Sets the default return value for type Bar.<br>  DefaultValue&lt;Bar&gt;::Set(default_bar);<br><br>  MockFoo foo;<br><br>  // We don’t need to specify an action here, as the default<br>  // return value works for us.<br>  EXPECT_CALL(foo, CalculateBar());<br><br>  foo.CalculateBar();  // This should return default_bar.<br><br>  // Unsets the default return value.<br>  DefaultValue&lt;Bar&gt;::Clear();<br></code></pre><br><br><p>Please note that changing the default value for a type can make you<br>tests hard to understand. We recommend you to use this feature<br>judiciously. For example, you may want to make sure the <code>Set()</code> and<br><code>Clear()</code> calls are right next to the code that uses your mock.</p><br><br><h2><a id="user-content-setting-the-default-actions-for-a-mock-method" class="anchor" href="#setting-the-default-actions-for-a-mock-method" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"/></svg></a>Setting the Default Actions for a Mock Method</h2><br><br><p>You’ve learned how to change the default value of a given<br>type. However, this may be too coarse for your purpose: perhaps you<br>have two mock methods with the same return type and you want them to<br>have different behaviors. The <code>ON<em>CALL()</em></code> macro allows you to<br>customize your mock’s behavior at the method level:</p><br><br><pre><code>using ::testing::;<br>using ::testing::AnyNumber;<br>using ::testing::Gt;<br>using ::testing::Return;<br>…<br>  ON<em>CALL(foo, Sign(</em>))<br>      .WillByDefault(Return(-1));<br>  ON_CALL(foo, Sign(0))<br>      .WillByDefault(Return(0));<br>  ON_CALL(foo, Sign(Gt(0)))<br>      .WillByDefault(Return(1));<br><br>  EXPECT<em>CALL(foo, Sign(</em>))<br>      .Times(AnyNumber());<br><br>  foo.Sign(5);   // This should return 1.<br>  foo.Sign(-9);  // This should return -1.<br>  foo.Sign(0);   // This should return 0.<br></code></pre><br><br><p>As you may have guessed, when there are more than one <code>ON<em>CALL()</em></code><br>statements, the news order take precedence over the older ones. In<br>other words, the <strong>last</strong> one that matches the function arguments will<br>be used. This matching order allows you to set up the common behavior<br>in a mock object’s constructor or the test fixture’s set-up phase and<br>specialize the mock’s behavior later.</p><br><br><h2><a id="user-content-using-functionsmethodsfunctors-as-actions" class="anchor" href="#using-functionsmethodsfunctors-as-actions" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"/></svg></a>Using Functions/Methods/Functors as Actions</h2><br><br><p>If the built-in actions don’t suit you, you can easily use an existing<br>function, method, or functor as an action:</p><br><br><pre><code>using ::testing::;<br>using ::testing::Invoke;<br><br>class MockFoo : public Foo {<br> public:<br>  MOCK_METHOD2(Sum, int(int x, int y));<br>  MOCK_METHOD1(ComplexJob, bool(int x));<br>};<br><br>int CalculateSum(int x, int y) { return x + y; }<br><br>class Helper {<br> public:<br>  bool ComplexJob(int x);<br>};<br>…<br><br>  MockFoo foo;<br>  Helper helper;<br>  EXPECT<em>CALL(foo, Sum(</em>, _))<br>      .WillOnce(Invoke(CalculateSum));<br>  EXPECT<em>CALL(foo, ComplexJob(</em>))<br>      .WillOnce(Invoke(&amp;helper, &amp;Helper::ComplexJob));<br><br>  foo.Sum(5, 6);       // Invokes CalculateSum(5, 6).<br>  foo.ComplexJob(10);  // Invokes helper.ComplexJob(10);<br></code></pre><br><br><p>The only requirement is that the type of the function, etc must be<br><em>compatible</em> with the signature of the mock function, meaning that the<br>latter’s arguments can be implicitly converted to the corresponding<br>arguments of the former, and the former’s return type can be<br>implicitly converted to that of the latter. So, you can invoke<br>something whose type is <em>not</em> exactly the same as the mock function,<br>as long as it’s safe to do so - nice, huh?</p><br><br><h2><a id="user-content-invoking-a-functionmethodfunctor-without-arguments" class="anchor" href="#invoking-a-functionmethodfunctor-without-arguments" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"/></svg></a>Invoking a Function/Method/Functor Without Arguments</h2><br><br><p><code>Invoke()</code> is very useful for doing actions that are more complex. It<br>passes the mock function’s arguments to the function or functor being<br>invoked such that the callee has the full context of the call to work<br>with. If the invoked function is not interested in some or all of the<br>arguments, it can simply ignore them.</p><br><br><p>Yet, a common pattern is that a test author wants to invoke a function<br>without the arguments of the mock function. <code>Invoke()</code> allows her to<br>do that using a wrapper function that throws away the arguments before<br>invoking an underlining nullary function. Needless to say, this can be<br>tedious and obscures the intent of the test.</p><br><br><p><code>InvokeWithoutArgs()</code> solves this problem. It’s like <code>Invoke()</code> except<br>that it doesn’t pass the mock function’s arguments to the<br>callee. Here’s an example:</p><br><br><pre><code>using ::testing::_;<br>using ::testing::InvokeWithoutArgs;<br><br>class MockFoo : public Foo {<br> public:<br>  MOCK_METHOD1(ComplexJob, bool(int n));<br>};<br><br>bool Job1() { … }<br>…<br><br>  MockFoo foo;<br>  EXPECT<em>CALL(foo, ComplexJob(</em>))<br>      .WillOnce(InvokeWithoutArgs(Job1));<br><br>  foo.ComplexJob(10);  // Invokes Job1().<br></code></pre><br><br><h2><a id="user-content-invoking-an-argument-of-the-mock-function" class="anchor" href="#invoking-an-argument-of-the-mock-function" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"/></svg></a>Invoking an Argument of the Mock Function</h2><br><br><p>Sometimes a mock function will receive a function pointer or a functor<br>(in other words, a “callable”) as an argument, e.g.</p><br><br><pre><code>class MockFoo : public Foo {<br> public:<br>  MOCK_METHOD2(DoThis, bool(int n, bool (fp)(int)));<br>};<br></code></pre><br><br><p>and you may want to invoke this callable argument:</p><br><br><pre><code>using ::testing::_;<br>…<br>  MockFoo foo;<br>  EXPECT<em>CALL(foo, DoThis(</em>, _))<br>      .WillOnce(…);<br>  // Will execute (<em>fp)(5), where fp is the<br>  // second argument DoThis() receives.<br></em></code></pre><br><br><p>Arghh, you need to refer to a mock function argument but C++ has no<br>lambda (yet), so you have to define your own action. :-( Or do you<br>really?</p><br><br><p>Well, Google Mock has an action to solve <em>exactly</em> this problem:</p><br><br><pre><code>  InvokeArgument&lt;N&gt;(arg_1, arg_2, …, arg_m)<br></code></pre><br><br><p>will invoke the <code>N</code>-th (0-based) argument the mock function receives,<br>with <code>arg_1</code>, <code>arg_2</code>, …, and <code>arg<em>m</em></code>. No matter if the argument is<br>a function pointer or a functor, Google Mock handles them both.</p><br><br><p>With that, you could write:</p><br><br><pre><code>using ::testing::;<br>using ::testing::InvokeArgument;<br>…<br>  EXPECT<em>CALL(foo, DoThis(</em>, _))<br>      .WillOnce(InvokeArgument&lt;1&gt;(5));<br>  // Will execute (fp)(5), where fp is the<br>  // second argument DoThis() receives.<br></code></pre><br><br><p>What if the callable takes an argument by reference? No problem - just<br>wrap it inside <code>ByRef()</code>:</p><br><br><pre><code>…<br>  MOCK<em>METHOD1(Bar, bool(bool (*fp)(int, const Helper&amp;)));<br>…<br>using ::testing::</em>;<br>using ::testing::ByRef;<br>using ::testing::InvokeArgument;<br>…<br><br>  MockFoo foo;<br>  Helper helper;<br>  …<br>  EXPECT<em>CALL(foo, Bar(</em>))<br>      .WillOnce(InvokeArgument&lt;0&gt;(5, ByRef(helper)));<br>  // ByRef(helper) guarantees that a reference to helper, not a copy of it,<br>  // will be passed to the callable.<br></code></pre><br><br><p>What if the callable takes an argument by reference and we do <strong>not</strong><br>wrap the argument in <code>ByRef()</code>? Then <code>InvokeArgument()</code> will <em>make a<br>copy</em> of the argument, and pass a <em>reference to the copy</em>, instead of<br>a reference to the original value, to the callable. This is especially<br>handy when the argument is a temporary value:</p><br><br><pre><code>…<br>  MOCK<em>METHOD1(DoThat, bool(bool (*f)(const double&amp; x, const string&amp; s)));<br>…<br>using ::testing::</em>;<br>using ::testing::InvokeArgument;<br>…<br><br>  MockFoo foo;<br>  …<br>  EXPECT<em>CALL(foo, DoThat(</em>))<br>      .WillOnce(InvokeArgument&lt;0&gt;(5.0, string(“Hi”)));<br>  // Will execute (<em>f)(5.0, string(“Hi”)), where f is the function pointer<br>  // DoThat() receives.  Note that the values 5.0 and string(“Hi”) are<br>  // temporary and dead once the EXPECT<em>CALL() statement finishes.  Yet<br>  // it’s fine to perform this action later, since a copy of the values<br>  // are kept inside the InvokeArgument action.<br></em></em></code></pre><br><br><h2><a id="user-content-ignoring-an-actions-result" class="anchor" href="#ignoring-an-actions-result" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"/></svg></a>Ignoring an Action’s Result</h2><br><br><p>Sometimes you have an action that returns <em>something</em>, but you need an<br>action that returns <code>void</code> (perhaps you want to use it in a mock<br>function that returns <code>void</code>, or perhaps it needs to be used in<br><code>DoAll()</code> and it’s not the last in the list). <code>IgnoreResult()</code> lets<br>you do that. For example:</p><br><br><pre><code>using ::testing::;<br>using ::testing::Invoke;<br>using ::testing::Return;<br><br>int Process(const MyData&amp; data);<br>string DoSomething();<br><br>class MockFoo : public Foo {<br> public:<br>  MOCK_METHOD1(Abc, void(const MyData&amp; data));<br>  MOCK_METHOD0(Xyz, bool());<br>};<br>…<br><br>  MockFoo foo;<br>  EXPECT<em>CALL(foo, Abc(</em>))<br>  // .WillOnce(Invoke(Process));<br>  // The above line won’t compile as Process() returns int but Abc() needs<br>  // to return void.<br>      .WillOnce(IgnoreResult(Invoke(Process)));<br><br>  EXPECT<em>CALL(foo, Xyz())<br>      .WillOnce(DoAll(IgnoreResult(Invoke(DoSomething)),<br>      // Ignores the string DoSomething() returns.<br>                      Return(true)));<br></em></code></pre><br><br><p>Note that you <strong>cannot</strong> use <code>IgnoreResult()</code> on an action that already<br>returns <code>void</code>. Doing so will lead to ugly compiler errors.</p><br><br><h2><a id="user-content-selecting-an-actions-arguments" class="anchor" href="#selecting-an-actions-arguments" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"/></svg></a>Selecting an Action’s Arguments</h2><br><br><p>Say you have a mock function <code>Foo()</code> that takes seven arguments, and<br>you have a custom action that you want to invoke when <code>Foo()</code> is<br>called. Trouble is, the custom action only wants three arguments:</p><br><br><pre><code>using ::testing::;<br>using ::testing::Invoke;<br>…<br>  MOCK_METHOD7(Foo, bool(bool visible, const string&amp; name, int x, int y,<br>                         const map&lt;pair&lt;int, int&gt;, double&gt;&amp; weight,<br>                         double min_weight, double max_wight));<br>…<br><br>bool IsVisibleInQuadrant1(bool visible, int x, int y) {<br>  return visible &amp;&amp; x &gt;= 0 &amp;&amp; y &gt;= 0;<br>}<br>…<br><br>  EXPECT<em>CALL(mock, Foo(</em>, <em>, </em>, <em>, </em>, <em>, </em>))<br>      .WillOnce(Invoke(IsVisibleInQuadrant1));  // Uh, won’t compile. :-(<br></code></pre><br><br><p>To please the compiler God, you can to define an “adaptor” that has<br>the same signature as <code>Foo()</code> and calls the custom action with the<br>right arguments:</p><br><br><pre><code>using ::testing::_;<br>using ::testing::Invoke;<br><br>bool MyIsVisibleInQuadrant1(bool visible, const string&amp; name, int x, int y,<br>                            const map&lt;pair&lt;int, int&gt;, double&gt;&amp; weight,<br>                            double min_weight, double max_wight) {<br>  return IsVisibleInQuadrant1(visible, x, y);<br>}<br>…<br><br>  EXPECT<em>CALL(mock, Foo(</em>, <em>, </em>, <em>, </em>, <em>, </em>))<br>      .WillOnce(Invoke(MyIsVisibleInQuadrant1));  // Now it works.<br></code></pre><br><br><p>But isn’t this awkward?</p><br><br><p>Google Mock provides a generic <em>action adaptor</em>, so you can spend your<br>time minding more important business than writing your own<br>adaptors. Here’s the syntax:</p><br><br><pre><code>  WithArgs&lt;N1, N2, …, Nk&gt;(action)<br></code></pre><br><br><p>creates an action that passes the arguments of the mock function at<br>the given indices (0-based) to the inner <code>action</code> and performs<br>it. Using <code>WithArgs</code>, our original example can be written as:</p><br><br><pre><code>using ::testing::_;<br>using ::testing::Invoke;<br>using ::testing::WithArgs;<br>…<br>  EXPECT<em>CALL(mock, Foo(</em>, <em>, </em>, <em>, </em>, <em>, </em>))<br>      .WillOnce(WithArgs&lt;0, 2, 3&gt;(Invoke(IsVisibleInQuadrant1)));<br>      // No need to define your own adaptor.<br></code></pre><br><br><p>For better readability, Google Mock also gives you:</p><br><br><ul><br><li><code>WithoutArgs(action)</code> when the inner <code>action</code> takes <em>no</em> argument, and</li><br><li><code>WithArg&lt;N&gt;(action)</code> (no <code>s</code> after <code>Arg</code>) when the inner <code>action</code> takes <em>one</em> argument.</li><br></ul><br><br><p>As you may have realized, <code>InvokeWithoutArgs(…)</code> is just syntactic<br>sugar for <code>WithoutArgs(Invoke(…))</code>.</p><br><br><p>Here are more tips:</p><br><br><ul><br><li>The inner action used in <code>WithArgs</code> and friends does not have to be <code>Invoke()</code> – it can be anything.</li><br><li>You can repeat an argument in the argument list if necessary, e.g. <code>WithArgs&lt;2, 3, 3, 5&gt;(…)</code>.</li><br><li>You can change the order of the arguments, e.g. <code>WithArgs&lt;3, 2, 1&gt;(…)</code>.</li><br><li>The types of the selected arguments do <em>not</em> have to match the signature of the inner action exactly. It works as long as they can be implicitly converted to the corresponding arguments of the inner action. For example, if the 4-th argument of the mock function is an <code>int</code> and <code>my_action</code> takes a <code>double</code>, <code>WithArg&lt;4&gt;(my_action)</code> will work.</li><br></ul><br><br><h2><a id="user-content-ignoring-arguments-in-action-functions" class="anchor" href="#ignoring-arguments-in-action-functions" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"/></svg></a>Ignoring Arguments in Action Functions</h2><br><br><p>The selecting-an-action’s-arguments recipe showed us one way to make a<br>mock function and an action with incompatible argument lists fit<br>together. The downside is that wrapping the action in<br><code>WithArgs&lt;…&gt;()</code> can get tedious for people writing the tests.</p><br><br><p>If you are defining a function, method, or functor to be used with<br><code>Invoke()</code>, and you are not interested in some of its arguments, an<br>alternative to <code>WithArgs</code> is to declare the uninteresting arguments as<br><code>Unused</code>. This makes the definition less cluttered and less fragile in<br>case the types of the uninteresting arguments change. It could also<br>increase the chance the action function can be reused. For example,<br>given</p><br><br><pre><code>  MOCK_METHOD3(Foo, double(const string&amp; label, double x, double y));<br>  MOCK<em>METHOD3(Bar, double(int index, double x, double y));<br></em></code></pre><br><br><p>instead of</p><br><br><pre><code>using ::testing::;<br>using ::testing::Invoke;<br><br>double DistanceToOriginWithLabel(const string&amp; label, double x, double y) {<br>  return sqrt(x<em>x + y</em>y);<br>}<br><br>double DistanceToOriginWithIndex(int index, double x, double y) {<br>  return sqrt(x<em>x + y</em>y);<br>}<br>…<br><br>  EXEPCT<em>CALL(mock, Foo(“abc”, </em>, _))<br>      .WillOnce(Invoke(DistanceToOriginWithLabel));<br>  EXEPCT<em>CALL(mock, Bar(5, </em>, <em>))<br>      .WillOnce(Invoke(DistanceToOriginWithIndex));<br></em></code></pre><br><br><p>you could write</p><br><br><pre><code>using ::testing::;<br>using ::testing::Invoke;<br>using ::testing::Unused;<br><br>double DistanceToOrigin(Unused, double x, double y) {<br>  return sqrt(x<em>x + y</em>y);<br>}<br>…<br><br>  EXEPCT<em>CALL(mock, Foo(“abc”, </em>, _))<br>      .WillOnce(Invoke(DistanceToOrigin));<br>  EXEPCT<em>CALL(mock, Bar(5, </em>, _))<br>      .WillOnce(Invoke(DistanceToOrigin));<br></code></pre><br><br><h2><a id="user-content-sharing-actions" class="anchor" href="#sharing-actions" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"/></svg></a>Sharing Actions</h2><br><br><p>Just like matchers, a Google Mock action object consists of a pointer<br>to a ref-counted implementation object. Therefore copying actions is<br>also allowed and very efficient. When the last action that references<br>the implementation object dies, the implementation object will be<br>deleted.</p><br><br><p>If you have some complex action that you want to use again and again,<br>you may not have to build it from scratch everytime. If the action<br>doesn’t have an internal state (i.e. if it always does the same thing<br>no matter how many times it has been called), you can assign it to an<br>action variable and use that variable repeatedly. For example:</p><br><br><pre><code>  Action&lt;bool(int<em>)&gt; set_flag = DoAll(SetArgPointee&lt;0&gt;(5),<br>                                      Return(true));<br>  … use set_flag in .WillOnce() and .WillRepeatedly() …<br></em></code></pre><br><br><p>However, if the action has its own state, you may be surprised if you<br>share the action object. Suppose you have an action factory<br><code>IncrementCounter(init)</code> which creates an action that increments and<br>returns a counter whose initial value is <code>init</code>, using two actions<br>created from the same expression and using a shared action will<br>exihibit different behaviors. Example:</p><br><br><pre><code>  EXPECT_CALL(foo, DoThis())<br>      .WillRepeatedly(IncrementCounter(0));<br>  EXPECT_CALL(foo, DoThat())<br>      .WillRepeatedly(IncrementCounter(0));<br>  foo.DoThis();  // Returns 1.<br>  foo.DoThis();  // Returns 2.<br>  foo.DoThat();  // Returns 1 - Blah() uses a different<br>                 // counter than Bar()’s.<br></code></pre><br><br><p>versus</p><br><br><pre><code>  Action&lt;int()&gt; increment = IncrementCounter(0);<br><br>  EXPECT_CALL(foo, DoThis())<br>      .WillRepeatedly(increment);<br>  EXPECT_CALL(foo, DoThat())<br>      .WillRepeatedly(increment);<br>  foo.DoThis();  // Returns 1.<br>  foo.DoThis();  // Returns 2.<br>  foo.DoThat();  // Returns 3 - the counter is shared.<br></code></pre><br><br><h1><a id="user-content-misc-recipes-on-using-google-mock" class="anchor" href="#misc-recipes-on-using-google-mock" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"/></svg></a>Misc Recipes on Using Google Mock</h1><br><br><h2><a id="user-content-mocking-methods-that-use-move-only-types" class="anchor" href="#mocking-methods-that-use-move-only-types" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"/></svg></a>Mocking Methods That Use Move-Only Types</h2><br><br><p>C++11 introduced <em>move-only types</em>.  A move-only-typed value can be moved from one object to another, but cannot be copied.  <code>std::unique_ptr&lt;T&gt;</code> is probably the most commonly used move-only type.</p><br><br><p>Mocking a method that takes and/or returns move-only types presents some challenges, but nothing insurmountable.  This recipe shows you how you can do it.</p><br><br><p>Let’s say we are working on a fictional project that lets one post and share snippets called “buzzes”.  Your code uses these types:</p><br><br><pre><code>enum class AccessLevel { kInternal, kPublic };<br><br>class Buzz {<br> public:<br>  explicit Buzz(AccessLevel access) { … }<br>  …<br>};<br><br>class Buzzer {<br> public:<br>  virtual ~Buzzer() {}<br>  virtual std::unique_ptr&lt;Buzz&gt; MakeBuzz(const std::string&amp; text) = 0;<br>  virtual bool ShareBuzz(std::unique_ptr&lt;Buzz&gt; buzz, Time timestamp) = 0;<br>  …<br>};<br></code></pre><br><br><p>A <code>Buzz</code> object represents a snippet being posted.  A class that implements the <code>Buzzer</code> interface is capable of creating and sharing <code>Buzz</code>.  Methods in <code>Buzzer</code> may return a <code>unique_ptr&lt;Buzz&gt;</code> or take a <code>unique_ptr&lt;Buzz&gt;</code>.  Now we need to mock <code>Buzzer</code> in our tests.</p><br><br><p>To mock a method that returns a move-only type, you just use the familiar <code>MOCK_METHOD</code> syntax as usual:</p><br><br><pre><code>class MockBuzzer : public Buzzer {<br> public:<br>  MOCK_METHOD1(MakeBuzz, std::unique_ptr&lt;Buzz&gt;(const std::string&amp; text));<br>  …<br>};<br></code></pre><br><br><p>However, if you attempt to use the same <code>MOCK_METHOD</code> pattern to mock a method that takes a move-only parameter, you’ll get a compiler error currently:</p><br><br><pre><code>  // Does NOT compile!<br>  MOCK_METHOD2(ShareBuzz, bool(std::unique_ptr&lt;Buzz&gt; buzz, Time timestamp));<br></code></pre><br><br><p>While it’s highly desirable to make this syntax just work, it’s not trivial and the work hasn’t been done yet.  Fortunately, there is a trick you can apply today to get something that works nearly as well as this.</p><br><br><p>The trick, is to delegate the <code>ShareBuzz()</code> method to a mock method (let’s call it <code>DoShareBuzz()</code>) that does not take move-only parameters:</p><br><br><pre><code>class MockBuzzer : public Buzzer {<br> public:<br>  MOCK_METHOD1(MakeBuzz, std::unique_ptr&lt;Buzz&gt;(const std::string&amp; text));<br>  MOCK_METHOD2(DoShareBuzz, bool(Buzz buzz, Time timestamp));<br>  bool ShareBuzz(std::unique_ptr&lt;Buzz&gt; buzz, Time timestamp) {<br>    return DoShareBuzz(buzz.get(), timestamp);<br>  }<br>};<br></code></pre><br><br><p>Note that there’s no need to define or declare <code>DoShareBuzz()</code> in a base class.  You only need to define it as a <code>MOCK_METHOD</code> in the mock class.</p><br><br><p>Now that we have the mock class defined, we can use it in tests.  In the following code examples, we assume that we have defined a <code>MockBuzzer</code> object named <code>mock<em>buzzer</em></code>:</p><br><br><pre><code>  MockBuzzer mock<em>buzzer</em>;<br></code></pre><br><br><p>First let’s see how we can set expectations on the <code>MakeBuzz()</code> method, which returns a <code>unique_ptr&lt;Buzz&gt;</code>.</p><br><br><p>As usual, if you set an expectation without an action (i.e. the <code>.WillOnce()</code> or <code>.WillRepeated()</code> clause), when that expectation fires, the default action for that method will be taken.  Since <code>unique_ptr&lt;&gt;</code> has a default constructor that returns a null <code>unique_ptr</code>, that’s what you’ll get if you don’t specify an action:</p><br><br><pre><code>  // Use the default action.<br>  EXPECT_CALL(mock<em>buzzer</em>, MakeBuzz(“hello”));<br><br>  // Triggers the previous EXPECT_CALL.<br>  EXPECT_EQ(nullptr, mock<em>buzzer</em>.MakeBuzz(“hello”));<br></code></pre><br><br><p>If you are not happy with the default action, you can tweak it.  Depending on what you need, you may either tweak the default action for a specific (mock object, mock method) combination using <code>ON_CALL()</code>, or you may tweak the default action for all mock methods that return a specific type.  The usage of <code>ON_CALL()</code> is similar to <code>EXPECT_CALL()</code>, so we’ll skip it and just explain how to do the latter (tweaking the default action for a specific return type).  You do this via the <code>DefaultValue&lt;&gt;::SetFactory()</code> and <code>DefaultValue&lt;&gt;::Clear()</code> API:</p><br><br><pre><code>  // Sets the default action for return type std::unique_ptr&lt;Buzz&gt; to<br>  // creating a new Buzz every time.<br>  DefaultValue&lt;std::unique_ptr&lt;Buzz&gt;&gt;::SetFactory(<br>      [] { return MakeUnique&lt;Buzz&gt;(AccessLevel::kInternal); });<br><br>  // When this fires, the default action of MakeBuzz() will run, which<br>  // will return a new Buzz object.<br>  EXPECT_CALL(mock<em>buzzer</em>, MakeBuzz(“hello”)).Times(AnyNumber());<br><br>  auto buzz1 = mock<em>buzzer</em>.MakeBuzz(“hello”);<br>  auto buzz2 = mock<em>buzzer</em>.MakeBuzz(“hello”);<br>  EXPECT_NE(nullptr, buzz1);<br>  EXPECT_NE(nullptr, buzz2);<br>  EXPECT_NE(buzz1, buzz2);<br><br>  // Resets the default action for return type std::unique_ptr&lt;Buzz&gt;,<br>  // to avoid interfere with other tests.<br>  DefaultValue&lt;std::unique_ptr&lt;Buzz&gt;&gt;::Clear();<br></code></pre><br><br><p>What if you want the method to do something other than the default action?  If you just need to return a pre-defined move-only value, you can use the <code>Return(ByMove(…))</code> action:</p><br><br><pre><code>  // When this fires, the unique_ptr&lt;&gt; specified by ByMove(…) will<br>  // be returned.<br>  EXPECT_CALL(mock<em>buzzer</em>, MakeBuzz(“world”))<br>      .WillOnce(Return(ByMove(MakeUnique&lt;Buzz&gt;(AccessLevel::kInternal))));<br><br>  EXPECT_NE(nullptr, mock<em>buzzer</em>.MakeBuzz(“world”));<br></code></pre><br><br><p>Note that <code>ByMove()</code> is essential here - if you drop it, the code won’t compile.</p><br><br><p>Quiz time!  What do you think will happen if a <code>Return(ByMove(…))</code> action is performed more than once (e.g. you write <code>….WillRepeatedly(Return(ByMove(…)));</code>)?  Come think of it, after the first time the action runs, the source value will be consumed (since it’s a move-only value), so the next time around, there’s no value to move from – you’ll get a run-time error that <code>Return(ByMove(…))</code> can only be run once.</p><br><br><p>If you need your mock method to do more than just moving a pre-defined value, remember that you can always use <code>Invoke()</code> to call a lambda or a callable object, which can do pretty much anything you want:</p><br><br><pre><code>  EXPECT_CALL(mock<em>buzzer</em>, MakeBuzz(“x”))<br>      .WillRepeatedly(Invoke(<a href="const std::string&amp; text"></a> {<br>        return std::make_unique&lt;Buzz&gt;(AccessLevel::kInternal);<br>      }));<br><br>  EXPECT_NE(nullptr, mock<em>buzzer</em>.MakeBuzz(“x”));<br>  EXPECT_NE(nullptr, mock<em>buzzer</em>.MakeBuzz(“x”));<br></code></pre><br><br><p>Every time this <code>EXPECT_CALL</code> fires, a new <code>unique_ptr&lt;Buzz&gt;</code> will be created and returned.  You cannot do this with <code>Return(ByMove(…))</code>.</p><br><br><p>Now there’s one topic we haven’t covered: how do you set expectations on <code>ShareBuzz()</code>, which takes a move-only-typed parameter?  The answer is you don’t.  Instead, you set expectations on the <code>DoShareBuzz()</code> mock method (remember that we defined a <code>MOCK_METHOD</code> for <code>DoShareBuzz()</code>, not <code>ShareBuzz()</code>):</p><br><br><pre><code>  EXPECT_CALL(mock<em>buzzer</em>, DoShareBuzz(NotNull(), _));<br><br>  // When one calls ShareBuzz() on the MockBuzzer like this, the call is<br>  // forwarded to DoShareBuzz(), which is mocked.  Therefore this statement<br>  // will trigger the above EXPECT_CALL.<br>  mock<em>buzzer</em>.ShareBuzz(MakeUnique&amp;lt;Buzz&amp;gt;(AccessLevel::kInternal),<br>                         ::base::Now());<br></code></pre><br><br><p>Some of you may have spotted one problem with this approach: the <code>DoShareBuzz()</code> mock method differs from the real <code>ShareBuzz()</code> method in that it cannot take ownership of the buzz parameter - <code>ShareBuzz()</code> will always delete buzz after <code>DoShareBuzz()</code> returns.  What if you need to save the buzz object somewhere for later use when <code>ShareBuzz()</code> is called?  Indeed, you’d be stuck.</p><br><br><p>Another problem with the <code>DoShareBuzz()</code> we had is that it can surprise people reading or maintaining the test, as one would expect that <code>DoShareBuzz()</code> has (logically) the same contract as <code>ShareBuzz()</code>.</p><br><br><p>Fortunately, these problems can be fixed with a bit more code.  Let’s try to get it right this time:</p><br><br><pre><code>class MockBuzzer : public Buzzer {<br> public:<br>  MockBuzzer() {<br>    // Since DoShareBuzz(buzz, time) is supposed to take ownership of<br>    // buzz, define a default behavior for DoShareBuzz(buzz, time) to<br>    // delete buzz.<br>    ON<em>CALL(*this, DoShareBuzz(</em>, _))<br>        .WillByDefault(Invoke(<a href="Buzz* buzz, Time timestamp"></a> {<br>          delete buzz;<br>          return true;<br>        }));<br>  }<br><br>  MOCK_METHOD1(MakeBuzz, std::unique_ptr&lt;Buzz&gt;(const std::string&amp; text));<br><br>  // Takes ownership of buzz.<br>  MOCK_METHOD2(DoShareBuzz, bool(Buzz<em> buzz, Time timestamp));<br>  bool ShareBuzz(std::unique_ptr&lt;Buzz&gt; buzz, Time timestamp) {<br>    return DoShareBuzz(buzz.release(), timestamp);<br>  }<br>};<br></em></code></pre><br><br><p>Now, the mock <code>DoShareBuzz()</code> method is free to save the buzz argument for later use if this is what you want:</p><br><br><pre><code>  std::unique_ptr&lt;Buzz&gt; intercepted_buzz;<br>  EXPECT_CALL(mock<em>buzzer</em>, DoShareBuzz(NotNull(), _))<br>      .WillOnce(Invoke([&amp;amp;intercepted_buzz](Buzz buzz, Time timestamp) {<br>        // Save buzz in intercepted_buzz for analysis later.<br>        intercepted_buzz.reset(buzz);<br>        return false;<br>      }));<br><br>  mock<em>buzzer</em>.ShareBuzz(std::make_unique&lt;Buzz&gt;(AccessLevel::kInternal),<br>                         Now());<br>  EXPECT_NE(nullptr, intercepted_buzz);<br></code></pre><br><br><p>Using the tricks covered in this recipe, you are now able to mock methods that take and/or return move-only types.  Put your newly-acquired power to good use - when you design a new API, you can now feel comfortable using <code>unique_ptrs</code> as appropriate, without fearing that doing so will compromise your tests.</p><br><br><h2><a id="user-content-making-the-compilation-faster" class="anchor" href="#making-the-compilation-faster" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"/></svg></a>Making the Compilation Faster</h2><br><br><p>Believe it or not, the <em>vast majority</em> of the time spent on compiling<br>a mock class is in generating its constructor and destructor, as they<br>perform non-trivial tasks (e.g. verification of the<br>expectations). What’s more, mock methods with different signatures<br>have different types and thus their constructors/destructors need to<br>be generated by the compiler separately. As a result, if you mock many<br>different types of methods, compiling your mock class can get really<br>slow.</p><br><br><p>If you are experiencing slow compilation, you can move the definition<br>of your mock class’ constructor and destructor out of the class body<br>and into a <code>.cpp</code> file. This way, even if you <code>#include</code> your mock<br>class in N files, the compiler only needs to generate its constructor<br>and destructor once, resulting in a much faster compilation.</p><br><br><p>Let’s illustrate the idea using an example. Here’s the definition of a<br>mock class before applying this recipe:</p><br><br><pre><code>// File mock_foo.h.<br>…<br>class MockFoo : public Foo {<br> public:<br>  // Since we don’t declare the constructor or the destructor,<br>  // the compiler will generate them in every translation unit<br>  // where this mock class is used.<br><br>  MOCK_METHOD0(DoThis, int());<br>  MOCK_METHOD1(DoThat, bool(const char<em> str));<br>  … more mock methods …<br>};<br></em></code></pre><br><br><p>After the change, it would look like:</p><br><br><pre><code>// File mock_foo.h.<br>…<br>class MockFoo : public Foo {<br> public:<br>  // The constructor and destructor are declared, but not defined, here.<br>  MockFoo();<br>  virtual ~MockFoo();<br><br>  MOCK_METHOD0(DoThis, int());<br>  MOCK_METHOD1(DoThat, bool(const char str));<br>  … more mock methods …<br>};<br></code></pre><br><br><p>and</p><br><br><pre><code>// File mock_foo.cpp.<br>#include “path/to/mock_foo.h”<br><br>// The definitions may appear trivial, but the functions actually do a<br>// lot of things through the constructors/destructors of the member<br>// variables used to implement the mock methods.<br>MockFoo::MockFoo() {}<br>MockFoo::~MockFoo() {}<br></code></pre><br><br><h2><a id="user-content-forcing-a-verification" class="anchor" href="#forcing-a-verification" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"/></svg></a>Forcing a Verification</h2><br><br><p>When it’s being destoyed, your friendly mock object will automatically<br>verify that all expectations on it have been satisfied, and will<br>generate <a href="/google/googletest/blob/master/googletest">Google Test</a> failures<br>if not. This is convenient as it leaves you with one less thing to<br>worry about. That is, unless you are not sure if your mock object will<br>be destoyed.</p><br><br><p>How could it be that your mock object won’t eventually be destroyed?<br>Well, it might be created on the heap and owned by the code you are<br>testing. Suppose there’s a bug in that code and it doesn’t delete the<br>mock object properly - you could end up with a passing test when<br>there’s actually a bug.</p><br><br><p>Using a heap checker is a good idea and can alleviate the concern, but<br>its implementation may not be 100% reliable. So, sometimes you do want<br>to <em>force</em> Google Mock to verify a mock object before it is<br>(hopefully) destructed. You can do this with<br><code>Mock::VerifyAndClearExpectations(&amp;mock_object)</code>:</p><br><br><pre><code>TEST(MyServerTest, ProcessesRequest) {<br>  using ::testing::Mock;<br><br>  MockFoo<em> const foo = new MockFoo;<br>  EXPECT_CALL(</em>foo, …)…;<br>  // … other expectations …<br><br>  // server now owns foo.<br>  MyServer server(foo);<br>  server.ProcessRequest(…);<br><br>  // In case that server’s destructor will forget to delete foo,<br>  // this will verify the expectations anyway.<br>  Mock::VerifyAndClearExpectations(foo);<br>}  // server is destroyed when it goes out of scope here.<br></code></pre><br><br><p><strong>Tip:</strong> The <code>Mock::VerifyAndClearExpectations()</code> function returns a<br><code>bool</code> to indicate whether the verification was successful (<code>true</code> for<br>yes), so you can wrap that function call inside a <code>ASSERT_TRUE()</code> if<br>there is no point going further when the verification has failed.</p><br><br><h2><a id="user-content-using-check-points" class="anchor" href="#using-check-points" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"/></svg></a>Using Check Points</h2><br><br><p>Sometimes you may want to “reset” a mock object at various check<br>points in your test: at each check point, you verify that all existing<br>expectations on the mock object have been satisfied, and then you set<br>some new expectations on it as if it’s newly created. This allows you<br>to work with a mock object in “phases” whose sizes are each<br>manageable.</p><br><br><p>One such scenario is that in your test’s <code>SetUp()</code> function, you may<br>want to put the object you are testing into a certain state, with the<br>help from a mock object. Once in the desired state, you want to clear<br>all expectations on the mock, such that in the <code>TEST_F</code> body you can<br>set fresh expectations on it.</p><br><br><p>As you may have figured out, the <code>Mock::VerifyAndClearExpectations()</code><br>function we saw in the previous recipe can help you here. Or, if you<br>are using <code>ON_CALL()</code> to set default actions on the mock object and<br>want to clear the default actions as well, use<br><code>Mock::VerifyAndClear(&amp;mock_object)</code> instead. This function does what<br><code>Mock::VerifyAndClearExpectations(&amp;mock_object)</code> does and returns the<br>same <code>bool</code>, <strong>plus</strong> it clears the <code>ON_CALL()</code> statements on<br><code>mock_object</code> too.</p><br><br><p>Another trick you can use to achieve the same effect is to put the<br>expectations in sequences and insert calls to a dummy “check-point”<br>function at specific places. Then you can verify that the mock<br>function calls do happen at the right time. For example, if you are<br>exercising code:</p><br><br><pre><code>Foo(1);<br>Foo(2);<br>Foo(3);<br></code></pre><br><br><p>and want to verify that <code>Foo(1)</code> and <code>Foo(3)</code> both invoke<br><code>mock.Bar(“a”)</code>, but <code>Foo(2)</code> doesn’t invoke anything. You can write:</p><br><br><pre><code>using ::testing::MockFunction;<br><br>TEST(FooTest, InvokesBarCorrectly) {<br>  MyMock mock;<br>  // Class MockFunction&lt;F&gt; has exactly one mock method.  It is named<br>  // Call() and has type F.<br>  MockFunction&lt;void(string check_point_name)&gt; check;<br>  {<br>    InSequence s;<br><br>    EXPECT_CALL(mock, Bar(“a”));<br>    EXPECT_CALL(check, Call(“1”));<br>    EXPECT_CALL(check, Call(“2”));<br>    EXPECT_CALL(mock, Bar(“a”));<br>  }<br>  Foo(1);<br>  check.Call(“1”);<br>  Foo(2);<br>  check.Call(“2”);<br>  Foo(3);<br>}<br></code></pre><br><br><p>The expectation spec says that the first <code>Bar(“a”)</code> must happen before<br>check point “1”, the second <code>Bar(“a”)</code> must happen after check point “2”,<br>and nothing should happen between the two check points. The explicit<br>check points make it easy to tell which <code>Bar(“a”)</code> is called by which<br>call to <code>Foo()</code>.</p><br><br><h2><a id="user-content-mocking-destructors" class="anchor" href="#mocking-destructors" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"/></svg></a>Mocking Destructors</h2><br><br><p>Sometimes you want to make sure a mock object is destructed at the<br>right time, e.g. after <code>bar-&gt;A()</code> is called but before <code>bar-&gt;B()</code> is<br>called. We already know that you can specify constraints on the order<br>of mock function calls, so all we need to do is to mock the destructor<br>of the mock function.</p><br><br><p>This sounds simple, except for one problem: a destructor is a special<br>function with special syntax and special semantics, and the<br><code>MOCK_METHOD0</code> macro doesn’t work for it:</p><br><br><pre><code>  MOCK_METHOD0(~MockFoo, void());  // Won’t compile!<br></code></pre><br><br><p>The good news is that you can use a simple pattern to achieve the same<br>effect. First, add a mock function <code>Die()</code> to your mock class and call<br>it in the destructor, like this:</p><br><br><pre><code>class MockFoo : public Foo {<br>  …<br>  // Add the following two lines to the mock class.<br>  MOCK_METHOD0(Die, void());<br>  virtual ~MockFoo() { Die(); }<br>};<br></code></pre><br><br><p>(If the name <code>Die()</code> clashes with an existing symbol, choose another<br>name.) Now, we have translated the problem of testing when a <code>MockFoo</code><br>object dies to testing when its <code>Die()</code> method is called:</p><br><br><pre><code>  MockFoo<em> foo = new MockFoo;<br>  MockBar</em> bar = new MockBar;<br>  …<br>  {<br>    InSequence s;<br><br>    // Expects <em>foo to die after bar-&gt;A() and before bar-&gt;B().<br>    EXPECT_CALL(</em>bar, A());<br>    EXPECT_CALL(<em>foo, Die());<br>    EXPECT_CALL(</em>bar, B());<br>  }<br></code></pre><br><br><p>And that’s that.</p><br><br><h2><a id="user-content-using-google-mock-and-threads" class="anchor" href="#using-google-mock-and-threads" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"/></svg></a>Using Google Mock and Threads</h2><br><br><p><strong>IMPORTANT NOTE:</strong> What we describe in this recipe is <strong>ONLY</strong> true on<br>platforms where Google Mock is thread-safe. Currently these are only<br>platforms that support the pthreads library (this includes Linux and Mac).<br>To make it thread-safe on other platforms we only need to implement<br>some synchronization operations in <code>“gtest/internal/gtest-port.h”</code>.</p><br><br><p>In a <strong>unit</strong> test, it’s best if you could isolate and test a piece of<br>code in a single-threaded context. That avoids race conditions and<br>dead locks, and makes debugging your test much easier.</p><br><br><p>Yet many programs are multi-threaded, and sometimes to test something<br>we need to pound on it from more than one thread. Google Mock works<br>for this purpose too.</p><br><br><p>Remember the steps for using a mock:</p><br><br><ol><br><li>Create a mock object <code>foo</code>.</li><br><li>Set its default actions and expectations using <code>ON_CALL()</code> and <code>EXPECT_CALL()</code>.</li><br><li>The code under test calls methods of <code>foo</code>.</li><br><li>Optionally, verify and reset the mock.</li><br><li>Destroy the mock yourself, or let the code under test destroy it. The destructor will automatically verify it.</li><br></ol><br><br><p>If you follow the following simple rules, your mocks and threads can<br>live happily together:</p><br><br><ul><br><li>Execute your <em>test code</em> (as opposed to the code being tested) in <em>one</em> thread. This makes your test easy to follow.</li><br><li>Obviously, you can do step #1 without locking.</li><br><li>When doing step #2 and #5, make sure no other thread is accessing <code>foo</code>. Obvious too, huh?</li><br><li>#3 and #4 can be done either in one thread or in multiple threads - anyway you want. Google Mock takes care of the locking, so you don’t have to do any - unless required by your test logic.</li><br></ul><br><br><p>If you violate the rules (for example, if you set expectations on a<br>mock while another thread is calling its methods), you get undefined<br>behavior. That’s not fun, so don’t do it.</p><br><br><p>Google Mock guarantees that the action for a mock function is done in<br>the same thread that called the mock function. For example, in</p><br><br><pre><code>  EXPECT_CALL(mock, Foo(1))<br>      .WillOnce(action1);<br>  EXPECT_CALL(mock, Foo(2))<br>      .WillOnce(action2);<br></code></pre><br><br><p>if <code>Foo(1)</code> is called in thread 1 and <code>Foo(2)</code> is called in thread 2,<br>Google Mock will execute <code>action1</code> in thread 1 and <code>action2</code> in thread<br>2.</p><br><br><p>Google Mock does <em>not</em> impose a sequence on actions performed in<br>different threads (doing so may create deadlocks as the actions may<br>need to cooperate). This means that the execution of <code>action1</code> and<br><code>action2</code> in the above example <em>may</em> interleave. If this is a problem,<br>you should add proper synchronization logic to <code>action1</code> and <code>action2</code><br>to make the test thread-safe.</p><br><br><p>Also, remember that <code>DefaultValue&lt;T&gt;</code> is a global resource that<br>potentially affects <em>all</em> living mock objects in your<br>program. Naturally, you won’t want to mess with it from multiple<br>threads or when there still are mocks in action.</p><br><br><h2><a id="user-content-controlling-how-much-information-google-mock-prints" class="anchor" href="#controlling-how-much-information-google-mock-prints" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"/></svg></a>Controlling How Much Information Google Mock Prints</h2><br><br><p>When Google Mock sees something that has the potential of being an<br>error (e.g. a mock function with no expectation is called, a.k.a. an<br>uninteresting call, which is allowed but perhaps you forgot to<br>explicitly ban the call), it prints some warning messages, including<br>the arguments of the function and the return value. Hopefully this<br>will remind you to take a look and see if there is indeed a problem.</p><br><br><p>Sometimes you are confident that your tests are correct and may not<br>appreciate such friendly messages. Some other times, you are debugging<br>your tests or learning about the behavior of the code you are testing,<br>and wish you could observe every mock call that happens (including<br>argument values and the return value). Clearly, one size doesn’t fit<br>all.</p><br><br><p>You can control how much Google Mock tells you using the<br><code>–gmock_verbose=LEVEL</code> command-line flag, where <code>LEVEL</code> is a string<br>with three possible values:</p><br><br><ul><br><li><code>info</code>: Google Mock will print all informational messages, warnings, and errors (most verbose). At this setting, Google Mock will also log any calls to the <code>ON_CALL/EXPECT_CALL</code> macros.</li><br><li><code>warning</code>: Google Mock will print both warnings and errors (less verbose). This is the default.</li><br><li><code>error</code>: Google Mock will print errors only (least verbose).</li><br></ul><br><br><p>Alternatively, you can adjust the value of that flag from within your<br>tests like so:</p><br><br><pre><code>  ::testing::FLAGS_gmock_verbose = “error”;<br></code></pre><br><br><p>Now, judiciously use the right flag to enable Google Mock serve you better!</p><br><br><h2><a id="user-content-gaining-super-vision-into-mock-calls" class="anchor" href="#gaining-super-vision-into-mock-calls" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"/></svg></a>Gaining Super Vision into Mock Calls</h2><br><br><p>You have a test using Google Mock. It fails: Google Mock tells you<br>that some expectations aren’t satisfied. However, you aren’t sure why:<br>Is there a typo somewhere in the matchers? Did you mess up the order<br>of the <code>EXPECT_CALL</code>s? Or is the code under test doing something<br>wrong?  How can you find out the cause?</p><br><br><p>Won’t it be nice if you have X-ray vision and can actually see the<br>trace of all <code>EXPECT_CALL</code>s and mock method calls as they are made?<br>For each call, would you like to see its actual argument values and<br>which <code>EXPECT_CALL</code> Google Mock thinks it matches?</p><br><br><p>You can unlock this power by running your test with the<br><code>–gmock<em>verbose=info</em></code> flag. For example, given the test program:</p><br><br><pre><code>using testing::;<br>using testing::HasSubstr;<br>using testing::Return;<br><br>class MockFoo {<br> public:<br>  MOCK_METHOD2(F, void(const string&amp; x, const string&amp; y));<br>};<br><br>TEST(Foo, Bar) {<br>  MockFoo mock;<br>  EXPECT<em>CALL(mock, F(</em>, _)).WillRepeatedly(Return());<br>  EXPECT_CALL(mock, F(“a”, “b”));<br>  EXPECT_CALL(mock, F(“c”, HasSubstr(“d”)));<br><br>  mock.F(“a”, “good”);<br>  mock.F(“a”, “b”);<br>}<br></code></pre><br><br><p>if you run it with <code>–gmock_verbose=info</code>, you will see this output:</p><br><br><pre><code>[ RUN      ] Foo.Bar<br><br>foo_test.cc:14: EXPECT<em>CALL(mock, F(</em>, _)) invoked<br>foo_test.cc:15: EXPECT_CALL(mock, F(“a”, “b”)) invoked<br>foo_test.cc:16: EXPECT_CALL(mock, F(“c”, HasSubstr(“d”))) invoked<br>foo_test.cc:14: Mock function call matches EXPECT<em>CALL(mock, F(</em>, _))…<br>    Function call: F(@0x7fff7c8dad40”a”, @0x7fff7c8dad10”good”)<br>foo_test.cc:15: Mock function call matches EXPECT_CALL(mock, F(“a”, “b”))…<br>    Function call: F(@0x7fff7c8dada0”a”, @0x7fff7c8dad70”b”)<br>foo_test.cc:16: Failure<br>Actual function call count doesn’t match EXPECT_CALL(mock, F(“c”, HasSubstr(“d”)))…<br>         Expected: to be called once<br>           Actual: never called - unsatisfied and active<br>[  FAILED  ] Foo.Bar<br></code></pre><br><br><p>Suppose the bug is that the <code>“c”</code> in the third <code>EXPECT_CALL</code> is a typo<br>and should actually be <code>“a”</code>. With the above message, you should see<br>that the actual <code>F(“a”, “good”)</code> call is matched by the first<br><code>EXPECT_CALL</code>, not the third as you thought. From that it should be<br>obvious that the third <code>EXPECT_CALL</code> is written wrong. Case solved.</p><br><br><h2><a id="user-content-running-tests-in-emacs" class="anchor" href="#running-tests-in-emacs" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"/></svg></a>Running Tests in Emacs</h2><br><br><p>If you build and run your tests in Emacs, the source file locations of<br>Google Mock and <a href="/google/googletest/blob/master/googletest">Google Test</a><br>errors will be highlighted. Just press <code>&lt;Enter&gt;</code> on one of them and<br>you’ll be taken to the offending line. Or, you can just type <code>C-x</code><code>to jump to the next error.&lt;/p&gt;

&lt;p&gt;To make it even easier, you can add the following lines to your
&lt;code&gt;~/.emacs&lt;/code&gt; file:&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;(global-set-key &quot;\M-m&quot;   &#39;compile)  ; m is for make
(global-set-key [M-down] &#39;next-error)
(global-set-key [M-up]   &#39;(lambda () (interactive) (next-error -1)))
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;Then you can type &lt;code&gt;M-m&lt;/code&gt; to start a build, or &lt;code&gt;M-up&lt;/code&gt;/&lt;code&gt;M-down&lt;/code&gt; to move
back and forth between errors.&lt;/p&gt;

&lt;h2&gt;&lt;a id=&quot;user-content-fusing-google-mock-source-files&quot; class=&quot;anchor&quot; href=&quot;#fusing-google-mock-source-files&quot; aria-hidden=&quot;true&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; class=&quot;octicon octicon-link&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path d=&quot;M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Fusing Google Mock Source Files&lt;/h2&gt;

&lt;p&gt;Google Mock&#39;s implementation consists of dozens of files (excluding
its own tests).  Sometimes you may want them to be packaged up in
fewer files instead, such that you can easily copy them to a new
machine and start hacking there.  For this we provide an experimental
Python script &lt;code&gt;fuse_gmock_files.py&lt;/code&gt; in the &lt;code&gt;scripts/&lt;/code&gt; directory
(starting with release 1.2.0).  Assuming you have Python 2.4 or above
installed on your machine, just go to that directory and run&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;python fuse_gmock_files.py OUTPUT_DIR
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;and you should see an &lt;code&gt;OUTPUT_DIR&lt;/code&gt; directory being created with files
&lt;code&gt;gtest/gtest.h&lt;/code&gt;, &lt;code&gt;gmock/gmock.h&lt;/code&gt;, and &lt;code&gt;gmock-gtest-all.cc&lt;/code&gt; in it.
These three files contain everything you need to use Google Mock (and
Google Test).  Just copy them to anywhere you want and you are ready
to write tests and use mocks.  You can use the
&lt;a href=&quot;/google/googletest/blob/master/googlemock/scripts/test/Makefile&quot;&gt;scrpts/test/Makefile&lt;/a&gt; file as an example on how to compile your tests
against them.&lt;/p&gt;

&lt;h1&gt;&lt;a id=&quot;user-content-extending-google-mock&quot; class=&quot;anchor&quot; href=&quot;#extending-google-mock&quot; aria-hidden=&quot;true&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; class=&quot;octicon octicon-link&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path d=&quot;M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Extending Google Mock&lt;/h1&gt;

&lt;h2&gt;&lt;a id=&quot;user-content-writing-new-matchers-quickly&quot; class=&quot;anchor&quot; href=&quot;#writing-new-matchers-quickly&quot; aria-hidden=&quot;true&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; class=&quot;octicon octicon-link&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path d=&quot;M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Writing New Matchers Quickly&lt;/h2&gt;

&lt;p&gt;The &lt;code&gt;MATCHER*&lt;/code&gt; family of macros can be used to define custom matchers
easily.  The syntax:&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;MATCHER(name, description_string_expression) { statements; }
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;will define a matcher with the given name that executes the
statements, which must return a &lt;code&gt;bool&lt;/code&gt; to indicate if the match
succeeds.  Inside the statements, you can refer to the value being
matched by &lt;code&gt;arg&lt;/code&gt;, and refer to its type by &lt;code&gt;arg_type&lt;/code&gt;.&lt;/p&gt;

&lt;p&gt;The description string is a &lt;code&gt;string&lt;/code&gt;-typed expression that documents
what the matcher does, and is used to generate the failure message
when the match fails.  It can (and should) reference the special
&lt;code&gt;bool&lt;/code&gt; variable &lt;code&gt;negation&lt;/code&gt;, and should evaluate to the description of
the matcher when &lt;code&gt;negation&lt;/code&gt; is &lt;code&gt;false&lt;/code&gt;, or that of the matcher&#39;s
negation when &lt;code&gt;negation&lt;/code&gt; is &lt;code&gt;true&lt;/code&gt;.&lt;/p&gt;

&lt;p&gt;For convenience, we allow the description string to be empty (&lt;code&gt;&quot;&quot;&lt;/code&gt;),
in which case Google Mock will use the sequence of words in the
matcher name as the description.&lt;/p&gt;

&lt;p&gt;For example:&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;MATCHER(IsDivisibleBy7, &quot;&quot;) { return (arg % 7) == 0; }
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;allows you to write&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;  // Expects mock_foo.Bar(n) to be called where n is divisible by 7.
  EXPECT_CALL(mock_foo, Bar(IsDivisibleBy7()));
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;or,&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;using ::testing::Not;
...
  EXPECT_THAT(some_expression, IsDivisibleBy7());
  EXPECT_THAT(some_other_expression, Not(IsDivisibleBy7()));
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;If the above assertions fail, they will print something like:&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;  Value of: some_expression
  Expected: is divisible by 7
    Actual: 27
...
  Value of: some_other_expression
  Expected: not (is divisible by 7)
    Actual: 21
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;where the descriptions &lt;code&gt;&quot;is divisible by 7&quot;&lt;/code&gt; and &lt;code&gt;&quot;not (is divisible
by 7)&quot;&lt;/code&gt; are automatically calculated from the matcher name
&lt;code&gt;IsDivisibleBy7&lt;/code&gt;.&lt;/p&gt;

&lt;p&gt;As you may have noticed, the auto-generated descriptions (especially
those for the negation) may not be so great. You can always override
them with a string expression of your own:&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;MATCHER(IsDivisibleBy7, std::string(negation ? &quot;isn&#39;t&quot; : &quot;is&quot;) +
                        &quot; divisible by 7&quot;) {
  return (arg % 7) == 0;
}
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;Optionally, you can stream additional information to a hidden argument
named &lt;code&gt;result_listener&lt;/code&gt; to explain the match result. For example, a
better definition of &lt;code&gt;IsDivisibleBy7&lt;/code&gt; is:&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;MATCHER(IsDivisibleBy7, &quot;&quot;) {
  if ((arg % 7) == 0)
    return true;

  *result_listener &amp;lt;&amp;lt; &quot;the remainder is &quot; &amp;lt;&amp;lt; (arg % 7);
  return false;
}
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;With this definition, the above assertion will give a better message:&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;  Value of: some_expression
  Expected: is divisible by 7
    Actual: 27 (the remainder is 6)
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;You should let &lt;code&gt;MatchAndExplain()&lt;/code&gt; print &lt;em&gt;any additional information&lt;/em&gt;
that can help a user understand the match result. Note that it should
explain why the match succeeds in case of a success (unless it&#39;s
obvious) - this is useful when the matcher is used inside
&lt;code&gt;Not()&lt;/code&gt;. There is no need to print the argument value itself, as
Google Mock already prints it for you.&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;Notes:&lt;/strong&gt;&lt;/p&gt;

&lt;ol&gt;
&lt;li&gt;The type of the value being matched (&lt;code&gt;arg_type&lt;/code&gt;) is determined by the context in which you use the matcher and is supplied to you by the compiler, so you don&#39;t need to worry about declaring it (nor can you).  This allows the matcher to be polymorphic.  For example, &lt;code&gt;IsDivisibleBy7()&lt;/code&gt; can be used to match any type where the value of &lt;code&gt;(arg % 7) == 0&lt;/code&gt; can be implicitly converted to a &lt;code&gt;bool&lt;/code&gt;.  In the &lt;code&gt;Bar(IsDivisibleBy7())&lt;/code&gt; example above, if method &lt;code&gt;Bar()&lt;/code&gt; takes an &lt;code&gt;int&lt;/code&gt;, &lt;code&gt;arg_type&lt;/code&gt; will be &lt;code&gt;int&lt;/code&gt;; if it takes an &lt;code&gt;unsigned long&lt;/code&gt;, &lt;code&gt;arg_type&lt;/code&gt; will be &lt;code&gt;unsigned long&lt;/code&gt;; and so on.&lt;/li&gt;
&lt;li&gt;Google Mock doesn&#39;t guarantee when or how many times a matcher will be invoked. Therefore the matcher logic must be &lt;em&gt;purely functional&lt;/em&gt; (i.e. it cannot have any side effect, and the result must not depend on anything other than the value being matched and the matcher parameters). This requirement must be satisfied no matter how you define the matcher (e.g. using one of the methods described in the following recipes). In particular, a matcher can never call a mock function, as that will affect the state of the mock object and Google Mock.&lt;/li&gt;
&lt;/ol&gt;

&lt;h2&gt;&lt;a id=&quot;user-content-writing-new-parameterized-matchers-quickly&quot; class=&quot;anchor&quot; href=&quot;#writing-new-parameterized-matchers-quickly&quot; aria-hidden=&quot;true&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; class=&quot;octicon octicon-link&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path d=&quot;M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Writing New Parameterized Matchers Quickly&lt;/h2&gt;

&lt;p&gt;Sometimes you&#39;ll want to define a matcher that has parameters.  For that you
can use the macro:&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;MATCHER_P(name, param_name, description_string) { statements; }
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;where the description string can be either &lt;code&gt;&quot;&quot;&lt;/code&gt; or a string expression
that references &lt;code&gt;negation&lt;/code&gt; and &lt;code&gt;param_name&lt;/code&gt;.&lt;/p&gt;

&lt;p&gt;For example:&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;MATCHER_P(HasAbsoluteValue, value, &quot;&quot;) { return abs(arg) == value; }
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;will allow you to write:&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;  EXPECT_THAT(Blah(&quot;a&quot;), HasAbsoluteValue(n));
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;which may lead to this message (assuming &lt;code&gt;n&lt;/code&gt; is 10):&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;  Value of: Blah(&quot;a&quot;)
  Expected: has absolute value 10
    Actual: -9
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;Note that both the matcher description and its parameter are
printed, making the message human-friendly.&lt;/p&gt;

&lt;p&gt;In the matcher definition body, you can write &lt;code&gt;foo_type&lt;/code&gt; to
reference the type of a parameter named &lt;code&gt;foo&lt;/code&gt;.  For example, in the
body of &lt;code&gt;MATCHER_P(HasAbsoluteValue, value)&lt;/code&gt; above, you can write
&lt;code&gt;value_type&lt;/code&gt; to refer to the type of &lt;code&gt;value&lt;/code&gt;.&lt;/p&gt;

&lt;p&gt;Google Mock also provides &lt;code&gt;MATCHER_P2&lt;/code&gt;, &lt;code&gt;MATCHER_P3&lt;/code&gt;, ..., up to
&lt;code&gt;MATCHER_P10&lt;/code&gt; to support multi-parameter matchers:&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;MATCHER_Pk(name, param_1, ..., param_k, description_string) { statements; }
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;Please note that the custom description string is for a particular
&lt;strong&gt;instance&lt;/strong&gt; of the matcher, where the parameters have been bound to
actual values.  Therefore usually you&#39;ll want the parameter values to
be part of the description.  Google Mock lets you do that by
referencing the matcher parameters in the description string
expression.&lt;/p&gt;

&lt;p&gt;For example,&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;  using ::testing::PrintToString;
  MATCHER_P2(InClosedRange, low, hi,
             std::string(negation ? &quot;isn&#39;t&quot; : &quot;is&quot;) + &quot; in range [&quot; +
             PrintToString(low) + &quot;, &quot; + PrintToString(hi) + &quot;]&quot;) {
    return low &amp;lt;= arg &amp;amp;&amp;amp; arg &amp;lt;= hi;
  }
  ...
  EXPECT_THAT(3, InClosedRange(4, 6));
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;would generate a failure that contains the message:&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;  Expected: is in range [4, 6]
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;If you specify &lt;code&gt;&quot;&quot;&lt;/code&gt; as the description, the failure message will
contain the sequence of words in the matcher name followed by the
parameter values printed as a tuple.  For example,&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;  MATCHER_P2(InClosedRange, low, hi, &quot;&quot;) { ... }
  ...
  EXPECT_THAT(3, InClosedRange(4, 6));
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;would generate a failure that contains the text:&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;  Expected: in closed range (4, 6)
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;For the purpose of typing, you can view&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;MATCHER_Pk(Foo, p1, ..., pk, description_string) { ... }
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;as shorthand for&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;template &amp;lt;typename p1_type, ..., typename pk_type&amp;gt;
FooMatcherPk&amp;lt;p1_type, ..., pk_type&amp;gt;
Foo(p1_type p1, ..., pk_type pk) { ... }
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;When you write &lt;code&gt;Foo(v1, ..., vk)&lt;/code&gt;, the compiler infers the types of
the parameters &lt;code&gt;v1&lt;/code&gt;, ..., and &lt;code&gt;vk&lt;/code&gt; for you.  If you are not happy with
the result of the type inference, you can specify the types by
explicitly instantiating the template, as in &lt;code&gt;Foo&amp;lt;long, bool&amp;gt;(5, false)&lt;/code&gt;.
As said earlier, you don&#39;t get to (or need to) specify
&lt;code&gt;arg_type&lt;/code&gt; as that&#39;s determined by the context in which the matcher
is used.&lt;/p&gt;

&lt;p&gt;You can assign the result of expression &lt;code&gt;Foo(p1, ..., pk)&lt;/code&gt; to a
variable of type &lt;code&gt;FooMatcherPk&amp;lt;p1_type, ..., pk_type&amp;gt;&lt;/code&gt;.  This can be
useful when composing matchers.  Matchers that don&#39;t have a parameter
or have only one parameter have special types: you can assign &lt;code&gt;Foo()&lt;/code&gt;
to a &lt;code&gt;FooMatcher&lt;/code&gt;-typed variable, and assign &lt;code&gt;Foo(p)&lt;/code&gt; to a
&lt;code&gt;FooMatcherP&amp;lt;p_type&amp;gt;&lt;/code&gt;-typed variable.&lt;/p&gt;

&lt;p&gt;While you can instantiate a matcher template with reference types,
passing the parameters by pointer usually makes your code more
readable.  If, however, you still want to pass a parameter by
reference, be aware that in the failure message generated by the
matcher you will see the value of the referenced object but not its
address.&lt;/p&gt;

&lt;p&gt;You can overload matchers with different numbers of parameters:&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;MATCHER_P(Blah, a, description_string_1) { ... }
MATCHER_P2(Blah, a, b, description_string_2) { ... }
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;While it&#39;s tempting to always use the &lt;code&gt;MATCHER*&lt;/code&gt; macros when defining
a new matcher, you should also consider implementing
&lt;code&gt;MatcherInterface&lt;/code&gt; or using &lt;code&gt;MakePolymorphicMatcher()&lt;/code&gt; instead (see
the recipes that follow), especially if you need to use the matcher a
lot.  While these approaches require more work, they give you more
control on the types of the value being matched and the matcher
parameters, which in general leads to better compiler error messages
that pay off in the long run.  They also allow overloading matchers
based on parameter types (as opposed to just based on the number of
parameters).&lt;/p&gt;

&lt;h2&gt;&lt;a id=&quot;user-content-writing-new-monomorphic-matchers&quot; class=&quot;anchor&quot; href=&quot;#writing-new-monomorphic-matchers&quot; aria-hidden=&quot;true&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; class=&quot;octicon octicon-link&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path d=&quot;M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Writing New Monomorphic Matchers&lt;/h2&gt;

&lt;p&gt;A matcher of argument type &lt;code&gt;T&lt;/code&gt; implements
&lt;code&gt;::testing::MatcherInterface&amp;lt;T&amp;gt;&lt;/code&gt; and does two things: it tests whether a
value of type &lt;code&gt;T&lt;/code&gt; matches the matcher, and can describe what kind of
values it matches. The latter ability is used for generating readable
error messages when expectations are violated.&lt;/p&gt;

&lt;p&gt;The interface looks like this:&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;class MatchResultListener {
 public:
  ...
  // Streams x to the underlying ostream; does nothing if the ostream
  // is NULL.
  template &amp;lt;typename T&amp;gt;
  MatchResultListener&amp;amp; operator&amp;lt;&amp;lt;(const T&amp;amp; x);

  // Returns the underlying ostream.
  ::std::ostream* stream();
};

template &amp;lt;typename T&amp;gt;
class MatcherInterface {
 public:
  virtual ~MatcherInterface();

  // Returns true iff the matcher matches x; also explains the match
  // result to &#39;listener&#39;.
  virtual bool MatchAndExplain(T x, MatchResultListener* listener) const = 0;

  // Describes this matcher to an ostream.
  virtual void DescribeTo(::std::ostream* os) const = 0;

  // Describes the negation of this matcher to an ostream.
  virtual void DescribeNegationTo(::std::ostream* os) const;
};
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;If you need a custom matcher but &lt;code&gt;Truly()&lt;/code&gt; is not a good option (for
example, you may not be happy with the way &lt;code&gt;Truly(predicate)&lt;/code&gt;
describes itself, or you may want your matcher to be polymorphic as
&lt;code&gt;Eq(value)&lt;/code&gt; is), you can define a matcher to do whatever you want in
two steps: first implement the matcher interface, and then define a
factory function to create a matcher instance. The second step is not
strictly needed but it makes the syntax of using the matcher nicer.&lt;/p&gt;

&lt;p&gt;For example, you can define a matcher to test whether an &lt;code&gt;int&lt;/code&gt; is
divisible by 7 and then use it like this:&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;using ::testing::MakeMatcher;
using ::testing::Matcher;
using ::testing::MatcherInterface;
using ::testing::MatchResultListener;

class DivisibleBy7Matcher : public MatcherInterface&amp;lt;int&amp;gt; {
 public:
  virtual bool MatchAndExplain(int n, MatchResultListener* listener) const {
    return (n % 7) == 0;
  }

  virtual void DescribeTo(::std::ostream* os) const {
    *os &amp;lt;&amp;lt; &quot;is divisible by 7&quot;;
  }

  virtual void DescribeNegationTo(::std::ostream* os) const {
    *os &amp;lt;&amp;lt; &quot;is not divisible by 7&quot;;
  }
};

inline Matcher&amp;lt;int&amp;gt; DivisibleBy7() {
  return MakeMatcher(new DivisibleBy7Matcher);
}
...

  EXPECT_CALL(foo, Bar(DivisibleBy7()));
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;You may improve the matcher message by streaming additional
information to the &lt;code&gt;listener&lt;/code&gt; argument in &lt;code&gt;MatchAndExplain()&lt;/code&gt;:&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;class DivisibleBy7Matcher : public MatcherInterface&amp;lt;int&amp;gt; {
 public:
  virtual bool MatchAndExplain(int n,
                               MatchResultListener* listener) const {
    const int remainder = n % 7;
    if (remainder != 0) {
      *listener &amp;lt;&amp;lt; &quot;the remainder is &quot; &amp;lt;&amp;lt; remainder;
    }
    return remainder == 0;
  }
  ...
};
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;Then, &lt;code&gt;EXPECT_THAT(x, DivisibleBy7());&lt;/code&gt; may general a message like this:&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;Value of: x
Expected: is divisible by 7
  Actual: 23 (the remainder is 2)
&lt;/code&gt;&lt;/pre&gt;

&lt;h2&gt;&lt;a id=&quot;user-content-writing-new-polymorphic-matchers&quot; class=&quot;anchor&quot; href=&quot;#writing-new-polymorphic-matchers&quot; aria-hidden=&quot;true&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; class=&quot;octicon octicon-link&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path d=&quot;M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Writing New Polymorphic Matchers&lt;/h2&gt;

&lt;p&gt;You&#39;ve learned how to write your own matchers in the previous
recipe. Just one problem: a matcher created using &lt;code&gt;MakeMatcher()&lt;/code&gt; only
works for one particular type of arguments. If you want a
&lt;em&gt;polymorphic&lt;/em&gt; matcher that works with arguments of several types (for
instance, &lt;code&gt;Eq(x)&lt;/code&gt; can be used to match a &lt;code&gt;value&lt;/code&gt; as long as &lt;code&gt;value&lt;/code&gt; ==
&lt;code&gt;x&lt;/code&gt; compiles -- &lt;code&gt;value&lt;/code&gt; and &lt;code&gt;x&lt;/code&gt; don&#39;t have to share the same type),
you can learn the trick from &lt;code&gt;&quot;gmock/gmock-matchers.h&quot;&lt;/code&gt; but it&#39;s a bit
involved.&lt;/p&gt;

&lt;p&gt;Fortunately, most of the time you can define a polymorphic matcher
easily with the help of &lt;code&gt;MakePolymorphicMatcher()&lt;/code&gt;. Here&#39;s how you can
define &lt;code&gt;NotNull()&lt;/code&gt; as an example:&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;using ::testing::MakePolymorphicMatcher;
using ::testing::MatchResultListener;
using ::testing::NotNull;
using ::testing::PolymorphicMatcher;

class NotNullMatcher {
 public:
  // To implement a polymorphic matcher, first define a COPYABLE class
  // that has three members MatchAndExplain(), DescribeTo(), and
  // DescribeNegationTo(), like the following.

  // In this example, we want to use NotNull() with any pointer, so
  // MatchAndExplain() accepts a pointer of any type as its first argument.
  // In general, you can define MatchAndExplain() as an ordinary method or
  // a method template, or even overload it.
  template &amp;lt;typename T&amp;gt;
  bool MatchAndExplain(T* p,
                       MatchResultListener* /* listener */) const {
    return p != NULL;
  }

  // Describes the property of a value matching this matcher.
  void DescribeTo(::std::ostream* os) const { *os &amp;lt;&amp;lt; &quot;is not NULL&quot;; }

  // Describes the property of a value NOT matching this matcher.
  void DescribeNegationTo(::std::ostream* os) const { *os &amp;lt;&amp;lt; &quot;is NULL&quot;; }
};

// To construct a polymorphic matcher, pass an instance of the class
// to MakePolymorphicMatcher().  Note the return type.
inline PolymorphicMatcher&amp;lt;NotNullMatcher&amp;gt; NotNull() {
  return MakePolymorphicMatcher(NotNullMatcher());
}
...

  EXPECT_CALL(foo, Bar(NotNull()));  // The argument must be a non-NULL pointer.
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;&lt;strong&gt;Note:&lt;/strong&gt; Your polymorphic matcher class does &lt;strong&gt;not&lt;/strong&gt; need to inherit from
&lt;code&gt;MatcherInterface&lt;/code&gt; or any other class, and its methods do &lt;strong&gt;not&lt;/strong&gt; need
to be virtual.&lt;/p&gt;

&lt;p&gt;Like in a monomorphic matcher, you may explain the match result by
streaming additional information to the &lt;code&gt;listener&lt;/code&gt; argument in
&lt;code&gt;MatchAndExplain()&lt;/code&gt;.&lt;/p&gt;

&lt;h2&gt;&lt;a id=&quot;user-content-writing-new-cardinalities&quot; class=&quot;anchor&quot; href=&quot;#writing-new-cardinalities&quot; aria-hidden=&quot;true&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; class=&quot;octicon octicon-link&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path d=&quot;M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Writing New Cardinalities&lt;/h2&gt;

&lt;p&gt;A cardinality is used in &lt;code&gt;Times()&lt;/code&gt; to tell Google Mock how many times
you expect a call to occur. It doesn&#39;t have to be exact. For example,
you can say &lt;code&gt;AtLeast(5)&lt;/code&gt; or &lt;code&gt;Between(2, 4)&lt;/code&gt;.&lt;/p&gt;

&lt;p&gt;If the built-in set of cardinalities doesn&#39;t suit you, you are free to
define your own by implementing the following interface (in namespace
&lt;code&gt;testing&lt;/code&gt;):&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;class CardinalityInterface {
 public:
  virtual ~CardinalityInterface();

  // Returns true iff call_count calls will satisfy this cardinality.
  virtual bool IsSatisfiedByCallCount(int call_count) const = 0;

  // Returns true iff call_count calls will saturate this cardinality.
  virtual bool IsSaturatedByCallCount(int call_count) const = 0;

  // Describes self to an ostream.
  virtual void DescribeTo(::std::ostream* os) const = 0;
};
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;For example, to specify that a call must occur even number of times,
you can write&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;using ::testing::Cardinality;
using ::testing::CardinalityInterface;
using ::testing::MakeCardinality;

class EvenNumberCardinality : public CardinalityInterface {
 public:
  virtual bool IsSatisfiedByCallCount(int call_count) const {
    return (call_count % 2) == 0;
  }

  virtual bool IsSaturatedByCallCount(int call_count) const {
    return false;
  }

  virtual void DescribeTo(::std::ostream* os) const {
    *os &amp;lt;&amp;lt; &quot;called even number of times&quot;;
  }
};

Cardinality EvenNumber() {
  return MakeCardinality(new EvenNumberCardinality);
}
...

  EXPECT_CALL(foo, Bar(3))
      .Times(EvenNumber());
&lt;/code&gt;&lt;/pre&gt;

&lt;h2&gt;&lt;a id=&quot;user-content-writing-new-actions-quickly&quot; class=&quot;anchor&quot; href=&quot;#writing-new-actions-quickly&quot; aria-hidden=&quot;true&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; class=&quot;octicon octicon-link&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path d=&quot;M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Writing New Actions Quickly&lt;/h2&gt;

&lt;p&gt;If the built-in actions don&#39;t work for you, and you find it
inconvenient to use &lt;code&gt;Invoke()&lt;/code&gt;, you can use a macro from the &lt;code&gt;ACTION*&lt;/code&gt;
family to quickly define a new action that can be used in your code as
if it&#39;s a built-in action.&lt;/p&gt;

&lt;p&gt;By writing&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;ACTION(name) { statements; }
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;in a namespace scope (i.e. not inside a class or function), you will
define an action with the given name that executes the statements.
The value returned by &lt;code&gt;statements&lt;/code&gt; will be used as the return value of
the action.  Inside the statements, you can refer to the K-th
(0-based) argument of the mock function as &lt;code&gt;argK&lt;/code&gt;.  For example:&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;ACTION(IncrementArg1) { return ++(*arg1); }
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;allows you to write&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;... WillOnce(IncrementArg1());
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;Note that you don&#39;t need to specify the types of the mock function
arguments.  Rest assured that your code is type-safe though:
you&#39;ll get a compiler error if &lt;code&gt;*arg1&lt;/code&gt; doesn&#39;t support the &lt;code&gt;++&lt;/code&gt;
operator, or if the type of &lt;code&gt;++(*arg1)&lt;/code&gt; isn&#39;t compatible with the mock
function&#39;s return type.&lt;/p&gt;

&lt;p&gt;Another example:&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;ACTION(Foo) {
  (*arg2)(5);
  Blah();
  *arg1 = 0;
  return arg0;
}
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;defines an action &lt;code&gt;Foo()&lt;/code&gt; that invokes argument #2 (a function pointer)
with 5, calls function &lt;code&gt;Blah()&lt;/code&gt;, sets the value pointed to by argument&lt;/p&gt;

&lt;h1&gt;&lt;a id=&quot;user-content-1-to-0-and-returns-argument-0&quot; class=&quot;anchor&quot; href=&quot;#1-to-0-and-returns-argument-0&quot; aria-hidden=&quot;true&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; class=&quot;octicon octicon-link&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path d=&quot;M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;1 to 0, and returns argument #0.&lt;/h1&gt;

&lt;p&gt;For more convenience and flexibility, you can also use the following
pre-defined symbols in the body of &lt;code&gt;ACTION&lt;/code&gt;:&lt;/p&gt;

&lt;table&gt;&lt;thead&gt;
&lt;tr&gt;
&lt;th align=&quot;left&quot;&gt;&lt;code&gt;argK_type&lt;/code&gt;&lt;/th&gt;
&lt;th align=&quot;left&quot;&gt;The type of the K-th (0-based) argument of the mock function&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;&lt;tbody&gt;
&lt;tr&gt;
&lt;td align=&quot;left&quot;&gt;&lt;code&gt;args&lt;/code&gt;&lt;/td&gt;
&lt;td align=&quot;left&quot;&gt;All arguments of the mock function as a tuple&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td align=&quot;left&quot;&gt;&lt;code&gt;args_type&lt;/code&gt;&lt;/td&gt;
&lt;td align=&quot;left&quot;&gt;The type of all arguments of the mock function as a tuple&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td align=&quot;left&quot;&gt;&lt;code&gt;return_type&lt;/code&gt;&lt;/td&gt;
&lt;td align=&quot;left&quot;&gt;The return type of the mock function&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td align=&quot;left&quot;&gt;&lt;code&gt;function_type&lt;/code&gt;&lt;/td&gt;
&lt;td align=&quot;left&quot;&gt;The type of the mock function&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;

&lt;p&gt;For example, when using an &lt;code&gt;ACTION&lt;/code&gt; as a stub action for mock function:&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;int DoSomething(bool flag, int* ptr);
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;we have:
| &lt;strong&gt;Pre-defined Symbol&lt;/strong&gt; | &lt;strong&gt;Is Bound To&lt;/strong&gt; |
|:-----------------------|:----------------|
| &lt;code&gt;arg0&lt;/code&gt;                 | the value of &lt;code&gt;flag&lt;/code&gt; |
| &lt;code&gt;arg0_type&lt;/code&gt;            | the type &lt;code&gt;bool&lt;/code&gt; |
| &lt;code&gt;arg1&lt;/code&gt;                 | the value of &lt;code&gt;ptr&lt;/code&gt; |
| &lt;code&gt;arg1_type&lt;/code&gt;            | the type &lt;code&gt;int*&lt;/code&gt; |
| &lt;code&gt;args&lt;/code&gt;                 | the tuple &lt;code&gt;(flag, ptr)&lt;/code&gt; |
| &lt;code&gt;args_type&lt;/code&gt;            | the type &lt;code&gt;::testing::tuple&amp;lt;bool, int*&amp;gt;&lt;/code&gt; |
| &lt;code&gt;return_type&lt;/code&gt;          | the type &lt;code&gt;int&lt;/code&gt;  |
| &lt;code&gt;function_type&lt;/code&gt;        | the type &lt;code&gt;int(bool, int*)&lt;/code&gt; |&lt;/p&gt;

&lt;h2&gt;&lt;a id=&quot;user-content-writing-new-parameterized-actions-quickly&quot; class=&quot;anchor&quot; href=&quot;#writing-new-parameterized-actions-quickly&quot; aria-hidden=&quot;true&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; class=&quot;octicon octicon-link&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path d=&quot;M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Writing New Parameterized Actions Quickly&lt;/h2&gt;

&lt;p&gt;Sometimes you&#39;ll want to parameterize an action you define.  For that
we have another macro&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;ACTION_P(name, param) { statements; }
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;For example,&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;ACTION_P(Add, n) { return arg0 + n; }
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;will allow you to write&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;// Returns argument #0 + 5.
... WillOnce(Add(5));
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;For convenience, we use the term &lt;em&gt;arguments&lt;/em&gt; for the values used to
invoke the mock function, and the term &lt;em&gt;parameters&lt;/em&gt; for the values
used to instantiate an action.&lt;/p&gt;

&lt;p&gt;Note that you don&#39;t need to provide the type of the parameter either.
Suppose the parameter is named &lt;code&gt;param&lt;/code&gt;, you can also use the
Google-Mock-defined symbol &lt;code&gt;param_type&lt;/code&gt; to refer to the type of the
parameter as inferred by the compiler.  For example, in the body of
&lt;code&gt;ACTION_P(Add, n)&lt;/code&gt; above, you can write &lt;code&gt;n_type&lt;/code&gt; for the type of &lt;code&gt;n&lt;/code&gt;.&lt;/p&gt;

&lt;p&gt;Google Mock also provides &lt;code&gt;ACTION_P2&lt;/code&gt;, &lt;code&gt;ACTION_P3&lt;/code&gt;, and etc to support
multi-parameter actions.  For example,&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;ACTION_P2(ReturnDistanceTo, x, y) {
  double dx = arg0 - x;
  double dy = arg1 - y;
  return sqrt(dx*dx + dy*dy);
}
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;lets you write&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;... WillOnce(ReturnDistanceTo(5.0, 26.5));
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;You can view &lt;code&gt;ACTION&lt;/code&gt; as a degenerated parameterized action where the
number of parameters is 0.&lt;/p&gt;

&lt;p&gt;You can also easily define actions overloaded on the number of parameters:&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;ACTION_P(Plus, a) { ... }
ACTION_P2(Plus, a, b) { ... }
&lt;/code&gt;&lt;/pre&gt;

&lt;h2&gt;&lt;a id=&quot;user-content-restricting-the-type-of-an-argument-or-parameter-in-an-action&quot; class=&quot;anchor&quot; href=&quot;#restricting-the-type-of-an-argument-or-parameter-in-an-action&quot; aria-hidden=&quot;true&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; class=&quot;octicon octicon-link&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path d=&quot;M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Restricting the Type of an Argument or Parameter in an ACTION&lt;/h2&gt;

&lt;p&gt;For maximum brevity and reusability, the &lt;code&gt;ACTION*&lt;/code&gt; macros don&#39;t ask
you to provide the types of the mock function arguments and the action
parameters.  Instead, we let the compiler infer the types for us.&lt;/p&gt;

&lt;p&gt;Sometimes, however, we may want to be more explicit about the types.
There are several tricks to do that.  For example:&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;ACTION(Foo) {
  // Makes sure arg0 can be converted to int.
  int n = arg0;
  ... use n instead of arg0 here ...
}

ACTION_P(Bar, param) {
  // Makes sure the type of arg1 is const char*.
  ::testing::StaticAssertTypeEq&amp;lt;const char*, arg1_type&amp;gt;();

  // Makes sure param can be converted to bool.
  bool flag = param;
}
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;where &lt;code&gt;StaticAssertTypeEq&lt;/code&gt; is a compile-time assertion in Google Test
that verifies two types are the same.&lt;/p&gt;

&lt;h2&gt;&lt;a id=&quot;user-content-writing-new-action-templates-quickly&quot; class=&quot;anchor&quot; href=&quot;#writing-new-action-templates-quickly&quot; aria-hidden=&quot;true&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; class=&quot;octicon octicon-link&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path d=&quot;M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Writing New Action Templates Quickly&lt;/h2&gt;

&lt;p&gt;Sometimes you want to give an action explicit template parameters that
cannot be inferred from its value parameters.  &lt;code&gt;ACTION_TEMPLATE()&lt;/code&gt;
supports that and can be viewed as an extension to &lt;code&gt;ACTION()&lt;/code&gt; and
&lt;code&gt;ACTION_P*()&lt;/code&gt;.&lt;/p&gt;

&lt;p&gt;The syntax:&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;ACTION_TEMPLATE(ActionName,
                HAS_m_TEMPLATE_PARAMS(kind1, name1, ..., kind_m, name_m),
                AND_n_VALUE_PARAMS(p1, ..., p_n)) { statements; }
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;defines an action template that takes &lt;em&gt;m&lt;/em&gt; explicit template parameters
and &lt;em&gt;n&lt;/em&gt; value parameters, where &lt;em&gt;m&lt;/em&gt; is between 1 and 10, and &lt;em&gt;n&lt;/em&gt; is
between 0 and 10.  &lt;code&gt;name_i&lt;/code&gt; is the name of the i-th template
parameter, and &lt;code&gt;kind_i&lt;/code&gt; specifies whether it&#39;s a &lt;code&gt;typename&lt;/code&gt;, an
integral constant, or a template.  &lt;code&gt;p_i&lt;/code&gt; is the name of the i-th value
parameter.&lt;/p&gt;

&lt;p&gt;Example:&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;// DuplicateArg&amp;lt;k, T&amp;gt;(output) converts the k-th argument of the mock
// function to type T and copies it to *output.
ACTION_TEMPLATE(DuplicateArg,
                // Note the comma between int and k:
                HAS_2_TEMPLATE_PARAMS(int, k, typename, T),
                AND_1_VALUE_PARAMS(output)) {
  *output = T(::testing::get&amp;lt;k&amp;gt;(args));
}
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;To create an instance of an action template, write:&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;  ActionName&amp;lt;t1, ..., t_m&amp;gt;(v1, ..., v_n)
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;where the &lt;code&gt;t&lt;/code&gt;s are the template arguments and the
&lt;code&gt;v&lt;/code&gt;s are the value arguments.  The value argument
types are inferred by the compiler.  For example:&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;using ::testing::_;
...
  int n;
  EXPECT_CALL(mock, Foo(_, _))
      .WillOnce(DuplicateArg&amp;lt;1, unsigned char&amp;gt;(&amp;amp;n));
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;If you want to explicitly specify the value argument types, you can
provide additional template arguments:&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;  ActionName&amp;lt;t1, ..., t_m, u1, ..., u_k&amp;gt;(v1, ..., v_n)
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;where &lt;code&gt;u_i&lt;/code&gt; is the desired type of &lt;code&gt;v_i&lt;/code&gt;.&lt;/p&gt;

&lt;p&gt;&lt;code&gt;ACTION_TEMPLATE&lt;/code&gt; and &lt;code&gt;ACTION&lt;/code&gt;/&lt;code&gt;ACTION_P*&lt;/code&gt; can be overloaded on the
number of value parameters, but not on the number of template
parameters.  Without the restriction, the meaning of the following is
unclear:&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;  OverloadedAction&amp;lt;int, bool&amp;gt;(x);
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;Are we using a single-template-parameter action where &lt;code&gt;bool&lt;/code&gt; refers to
the type of &lt;code&gt;x&lt;/code&gt;, or a two-template-parameter action where the compiler
is asked to infer the type of &lt;code&gt;x&lt;/code&gt;?&lt;/p&gt;

&lt;h2&gt;&lt;a id=&quot;user-content-using-the-action-objects-type&quot; class=&quot;anchor&quot; href=&quot;#using-the-action-objects-type&quot; aria-hidden=&quot;true&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; class=&quot;octicon octicon-link&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path d=&quot;M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Using the ACTION Object&#39;s Type&lt;/h2&gt;

&lt;p&gt;If you are writing a function that returns an &lt;code&gt;ACTION&lt;/code&gt; object, you&#39;ll
need to know its type.  The type depends on the macro used to define
the action and the parameter types.  The rule is relatively simple:
| &lt;strong&gt;Given Definition&lt;/strong&gt; | &lt;strong&gt;Expression&lt;/strong&gt; | &lt;strong&gt;Has Type&lt;/strong&gt; |
|:---------------------|:---------------|:-------------|
| &lt;code&gt;ACTION(Foo)&lt;/code&gt;        | &lt;code&gt;Foo()&lt;/code&gt;        | &lt;code&gt;FooAction&lt;/code&gt;  |
| &lt;code&gt;ACTION_TEMPLATE(Foo, HAS_m_TEMPLATE_PARAMS(...), AND_0_VALUE_PARAMS())&lt;/code&gt; |    &lt;code&gt;Foo&amp;lt;t1, ..., t_m&amp;gt;()&lt;/code&gt; | &lt;code&gt;FooAction&amp;lt;t1, ..., t_m&amp;gt;&lt;/code&gt; |
| &lt;code&gt;ACTION_P(Bar, param)&lt;/code&gt; | &lt;code&gt;Bar(int_value)&lt;/code&gt; | &lt;code&gt;BarActionP&amp;lt;int&amp;gt;&lt;/code&gt; |
| &lt;code&gt;ACTION_TEMPLATE(Bar, HAS_m_TEMPLATE_PARAMS(...), AND_1_VALUE_PARAMS(p1))&lt;/code&gt; | &lt;code&gt;Bar&amp;lt;t1, ..., t_m&amp;gt;(int_value)&lt;/code&gt; | &lt;code&gt;FooActionP&amp;lt;t1, ..., t_m, int&amp;gt;&lt;/code&gt; |
| &lt;code&gt;ACTION_P2(Baz, p1, p2)&lt;/code&gt; | &lt;code&gt;Baz(bool_value, int_value)&lt;/code&gt; | &lt;code&gt;BazActionP2&amp;lt;bool, int&amp;gt;&lt;/code&gt; |
| &lt;code&gt;ACTION_TEMPLATE(Baz, HAS_m_TEMPLATE_PARAMS(...), AND_2_VALUE_PARAMS(p1, p2))&lt;/code&gt; | &lt;code&gt;Baz&amp;lt;t1, ..., t_m&amp;gt;(bool_value, int_value)&lt;/code&gt; | &lt;code&gt;FooActionP2&amp;lt;t1, ..., t_m, bool, int&amp;gt;&lt;/code&gt; |
| ...                  | ...            | ...          |&lt;/p&gt;

&lt;p&gt;Note that we have to pick different suffixes (&lt;code&gt;Action&lt;/code&gt;, &lt;code&gt;ActionP&lt;/code&gt;,
&lt;code&gt;ActionP2&lt;/code&gt;, and etc) for actions with different numbers of value
parameters, or the action definitions cannot be overloaded on the
number of them.&lt;/p&gt;

&lt;h2&gt;&lt;a id=&quot;user-content-writing-new-monomorphic-actions&quot; class=&quot;anchor&quot; href=&quot;#writing-new-monomorphic-actions&quot; aria-hidden=&quot;true&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; class=&quot;octicon octicon-link&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path d=&quot;M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Writing New Monomorphic Actions&lt;/h2&gt;

&lt;p&gt;While the &lt;code&gt;ACTION*&lt;/code&gt; macros are very convenient, sometimes they are
inappropriate.  For example, despite the tricks shown in the previous
recipes, they don&#39;t let you directly specify the types of the mock
function arguments and the action parameters, which in general leads
to unoptimized compiler error messages that can baffle unfamiliar
users.  They also don&#39;t allow overloading actions based on parameter
types without jumping through some hoops.&lt;/p&gt;

&lt;p&gt;An alternative to the &lt;code&gt;ACTION*&lt;/code&gt; macros is to implement
&lt;code&gt;::testing::ActionInterface&amp;lt;F&amp;gt;&lt;/code&gt;, where &lt;code&gt;F&lt;/code&gt; is the type of the mock
function in which the action will be used. For example:&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;template &amp;lt;typename F&amp;gt;class ActionInterface {
 public:
  virtual ~ActionInterface();

  // Performs the action.  Result is the return type of function type
  // F, and ArgumentTuple is the tuple of arguments of F.
  //
  // For example, if F is int(bool, const string&amp;amp;), then Result would
  // be int, and ArgumentTuple would be ::testing::tuple&amp;lt;bool, const string&amp;amp;&amp;gt;.
  virtual Result Perform(const ArgumentTuple&amp;amp; args) = 0;
};

using ::testing::_;
using ::testing::Action;
using ::testing::ActionInterface;
using ::testing::MakeAction;

typedef int IncrementMethod(int*);

class IncrementArgumentAction : public ActionInterface&amp;lt;IncrementMethod&amp;gt; {
 public:
  virtual int Perform(const ::testing::tuple&amp;lt;int*&amp;gt;&amp;amp; args) {
    int* p = ::testing::get&amp;lt;0&amp;gt;(args);  // Grabs the first argument.
    return *p++;
  }
};

Action&amp;lt;IncrementMethod&amp;gt; IncrementArgument() {
  return MakeAction(new IncrementArgumentAction);
}
...

  EXPECT_CALL(foo, Baz(_))
      .WillOnce(IncrementArgument());

  int n = 5;
  foo.Baz(&amp;amp;n);  // Should return 5 and change n to 6.
&lt;/code&gt;&lt;/pre&gt;

&lt;h2&gt;&lt;a id=&quot;user-content-writing-new-polymorphic-actions&quot; class=&quot;anchor&quot; href=&quot;#writing-new-polymorphic-actions&quot; aria-hidden=&quot;true&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; class=&quot;octicon octicon-link&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path d=&quot;M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Writing New Polymorphic Actions&lt;/h2&gt;

&lt;p&gt;The previous recipe showed you how to define your own action. This is
all good, except that you need to know the type of the function in
which the action will be used. Sometimes that can be a problem. For
example, if you want to use the action in functions with &lt;em&gt;different&lt;/em&gt;
types (e.g. like &lt;code&gt;Return()&lt;/code&gt; and &lt;code&gt;SetArgPointee()&lt;/code&gt;).&lt;/p&gt;

&lt;p&gt;If an action can be used in several types of mock functions, we say
it&#39;s &lt;em&gt;polymorphic&lt;/em&gt;. The &lt;code&gt;MakePolymorphicAction()&lt;/code&gt; function template
makes it easy to define such an action:&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;namespace testing {

template &amp;lt;typename Impl&amp;gt;
PolymorphicAction&amp;lt;Impl&amp;gt; MakePolymorphicAction(const Impl&amp;amp; impl);

}  // namespace testing
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;As an example, let&#39;s define an action that returns the second argument
in the mock function&#39;s argument list. The first step is to define an
implementation class:&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;class ReturnSecondArgumentAction {
 public:
  template &amp;lt;typename Result, typename ArgumentTuple&amp;gt;
  Result Perform(const ArgumentTuple&amp;amp; args) const {
    // To get the i-th (0-based) argument, use ::testing::get&amp;lt;i&amp;gt;(args).
    return ::testing::get&amp;lt;1&amp;gt;(args);
  }
};
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;This implementation class does &lt;em&gt;not&lt;/em&gt; need to inherit from any
particular class. What matters is that it must have a &lt;code&gt;Perform()&lt;/code&gt;
method template. This method template takes the mock function&#39;s
arguments as a tuple in a &lt;strong&gt;single&lt;/strong&gt; argument, and returns the result of
the action. It can be either &lt;code&gt;const&lt;/code&gt; or not, but must be invokable
with exactly one template argument, which is the result type. In other
words, you must be able to call &lt;code&gt;Perform&amp;lt;R&amp;gt;(args)&lt;/code&gt; where &lt;code&gt;R&lt;/code&gt; is the
mock function&#39;s return type and &lt;code&gt;args&lt;/code&gt; is its arguments in a tuple.&lt;/p&gt;

&lt;p&gt;Next, we use &lt;code&gt;MakePolymorphicAction()&lt;/code&gt; to turn an instance of the
implementation class into the polymorphic action we need. It will be
convenient to have a wrapper for this:&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;using ::testing::MakePolymorphicAction;
using ::testing::PolymorphicAction;

PolymorphicAction&amp;lt;ReturnSecondArgumentAction&amp;gt; ReturnSecondArgument() {
  return MakePolymorphicAction(ReturnSecondArgumentAction());
}
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;Now, you can use this polymorphic action the same way you use the
built-in ones:&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;using ::testing::_;

class MockFoo : public Foo {
 public:
  MOCK_METHOD2(DoThis, int(bool flag, int n));
  MOCK_METHOD3(DoThat, string(int x, const char* str1, const char* str2));
};
...

  MockFoo foo;
  EXPECT_CALL(foo, DoThis(_, _))
      .WillOnce(ReturnSecondArgument());
  EXPECT_CALL(foo, DoThat(_, _, _))
      .WillOnce(ReturnSecondArgument());
  ...
  foo.DoThis(true, 5);         // Will return 5.
  foo.DoThat(1, &quot;Hi&quot;, &quot;Bye&quot;);  // Will return &quot;Hi&quot;.
&lt;/code&gt;&lt;/pre&gt;

&lt;h2&gt;&lt;a id=&quot;user-content-teaching-google-mock-how-to-print-your-values&quot; class=&quot;anchor&quot; href=&quot;#teaching-google-mock-how-to-print-your-values&quot; aria-hidden=&quot;true&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; class=&quot;octicon octicon-link&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path d=&quot;M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Teaching Google Mock How to Print Your Values&lt;/h2&gt;

&lt;p&gt;When an uninteresting or unexpected call occurs, Google Mock prints the
argument values and the stack trace to help you debug.  Assertion
macros like &lt;code&gt;EXPECT_THAT&lt;/code&gt; and &lt;code&gt;EXPECT_EQ&lt;/code&gt; also print the values in
question when the assertion fails.  Google Mock and Google Test do this using
Google Test&#39;s user-extensible value printer.&lt;/p&gt;

&lt;p&gt;This printer knows how to print built-in C++ types, native arrays, STL
containers, and any type that supports the &lt;code&gt;&amp;lt;&amp;lt;&lt;/code&gt; operator.  For other
types, it prints the raw bytes in the value and hopes that you the
user can figure it out.
&lt;a href=&quot;/google/googletest/blob/master/googletest/docs/AdvancedGuide.md#teaching-google-test-how-to-print-your-values&quot;&gt;Google Test&#39;s advanced guide&lt;/a&gt;
explains how to extend the printer to do a better job at
printing your particular type than to dump the bytes.&lt;/p&gt;
&lt;/article&gt;
  &lt;/div&gt;

&lt;/div&gt;

&lt;button type=&quot;button&quot; data-facebox=&quot;#jump-to-line&quot; data-facebox-class=&quot;linejump&quot; data-hotkey=&quot;l&quot; class=&quot;hidden&quot;&gt;Jump to Line&lt;/button&gt;
&lt;div id=&quot;jump-to-line&quot; style=&quot;display:none&quot;&gt;
  &lt;!-- &lt;/textarea&gt; --&gt;&lt;!-- &#39;&quot;</code> –&gt;<form accept-charset="UTF-8" action="" class="js-jump-to-line-form" method="get"><div style="margin:0;padding:0;display:inline"><input name="utf8" type="hidden" value="&#x2713;"></div><br>    <input class="form-control linejump-input js-jump-to-line-field" type="text" placeholder="Jump to line&hellip;" aria-label="Jump to line" autofocus><br>    <button type="submit" class="btn">Go</button><br></form></p></article></div><br><br>  </div><br>  <div class="modal-backdrop"></div><br></div><br><br><br>    </div><br>  </div><br><br>    </div><br><br>        <div class="container site-footer-container"><br>  <div class="site-footer" role="contentinfo"><br>    <ul class="site-footer-links right"><br>        <li><a href="https://status.github.com/" data-ga-click="Footer, go to status, text:status" target="_blank" rel="external">Status</a></li><br>      <li><a href="https://developer.github.com" data-ga-click="Footer, go to api, text:api" target="_blank" rel="external">API</a></li><br>      <li><a href="https://training.github.com" data-ga-click="Footer, go to training, text:training" target="_blank" rel="external">Training</a></li><br>      <li><a href="https://shop.github.com" data-ga-click="Footer, go to shop, text:shop" target="_blank" rel="external">Shop</a></li><br>        <li><a href="https://github.com/blog" data-ga-click="Footer, go to blog, text:blog" target="_blank" rel="external">Blog</a></li><br>        <li><a href="https://github.com/about" data-ga-click="Footer, go to about, text:about" target="_blank" rel="external">About</a></li><br><br>    </ul><br><br>    <a href="https://github.com" aria-label="Homepage" class="site-footer-mark" target="_blank" rel="external"><br>      <svg aria-hidden="true" class="octicon octicon-mark-github" height="24" title="GitHub " version="1.1" viewbox="0 0 16 16" width="24"><path d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59 0.4 0.07 0.55-0.17 0.55-0.38 0-0.19-0.01-0.82-0.01-1.49-2.01 0.37-2.53-0.49-2.69-0.94-0.09-0.23-0.48-0.94-0.82-1.13-0.28-0.15-0.68-0.52-0.01-0.53 0.63-0.01 1.08 0.58 1.23 0.82 0.72 1.21 1.87 0.87 2.33 0.66 0.07-0.52 0.28-0.87 0.51-1.07-1.78-0.2-3.64-0.89-3.64-3.95 0-0.87 0.31-1.59 0.82-2.15-0.08-0.2-0.36-1.02 0.08-2.12 0 0 0.67-0.21 2.2 0.82 0.64-0.18 1.32-0.27 2-0.27 0.68 0 1.36 0.09 2 0.27 1.53-1.04 2.2-0.82 2.2-0.82 0.44 1.1 0.16 1.92 0.08 2.12 0.51 0.56 0.82 1.27 0.82 2.15 0 3.07-1.87 3.75-3.65 3.95 0.29 0.25 0.54 0.73 0.54 1.48 0 1.07-0.01 1.93-0.01 2.2 0 0.21 0.15 0.46 0.55 0.38C13.71 14.53 16 11.53 16 8 16 3.58 12.42 0 8 0z"/></svg><br></a><br>    <ul class="site-footer-links"><br>      <li>&copy; 2016 <span title="0.04784s from github-fe130-cp1-prd.iad.github.net">GitHub</span>, Inc.</li><br>        <li><a href="https://github.com/site/terms" data-ga-click="Footer, go to terms, text:terms" target="_blank" rel="external">Terms</a></li><br>        <li><a href="https://github.com/site/privacy" data-ga-click="Footer, go to privacy, text:privacy" target="_blank" rel="external">Privacy</a></li><br>        <li><a href="https://github.com/security" data-ga-click="Footer, go to security, text:security" target="_blank" rel="external">Security</a></li><br>        <li><a href="https://github.com/contact" data-ga-click="Footer, go to contact, text:contact" target="_blank" rel="external">Contact</a></li><br>        <li><a href="https://help.github.com" data-ga-click="Footer, go to help, text:help" target="_blank" rel="external">Help</a></li><br>    </ul><br>  </div><br></div><br><br><br><br><br><br><br>    <div id="ajax-error-message" class="ajax-error-message flash flash-error"><br>      <svg aria-hidden="true" class="octicon octicon-alert" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M15.72 12.5l-6.85-11.98C8.69 0.21 8.36 0.02 8 0.02s-0.69 0.19-0.87 0.5l-6.85 11.98c-0.18 0.31-0.18 0.69 0 1C0.47 13.81 0.8 14 1.15 14h13.7c0.36 0 0.69-0.19 0.86-0.5S15.89 12.81 15.72 12.5zM9 12H7V10h2V12zM9 9H7V5h2V9z"/></svg><br>      <button type="button" class="flash-close js-flash-close js-ajax-error-dismiss" aria-label="Dismiss error"><br>        <svg aria-hidden="true" class="octicon octicon-x" height="16" version="1.1" viewbox="0 0 12 16" width="12"><path d="M7.48 8l3.75 3.75-1.48 1.48-3.75-3.75-3.75 3.75-1.48-1.48 3.75-3.75L0.77 4.25l1.48-1.48 3.75 3.75 3.75-3.75 1.48 1.48-3.75 3.75z"/></svg><br>      </button><br>      Something went wrong with that request. Please try again.<br>    </div><br><br><br><br>      <script crossorigin="anonymous" integrity="sha256-sMhbbqxUJs0WUt7KGbxYXmiKrOw3DEVBq38Ty1r03AA=" src="https://assets-cdn.github.com/assets/frameworks-b0c85b6eac5426cd1652deca19bc585e688aacec370c4541ab7f13cb5af4dc00.js"></script><br>      <script async="async" crossorigin="anonymous" integrity="sha256-Eks4R6YE/A4V1V6CIyGzz1JsmTva1rGR/s3gZQV1EGQ=" src="https://assets-cdn.github.com/assets/github-124b3847a604fc0e15d55e822321b3cf526c993bdad6b191fecde06505751064.js"></script><br><br><br><br><br><br>    <div class="js-stale-session-flash stale-session-flash flash flash-warn flash-banner hidden"><br>      <svg aria-hidden="true" class="octicon octicon-alert" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M15.72 12.5l-6.85-11.98C8.69 0.21 8.36 0.02 8 0.02s-0.69 0.19-0.87 0.5l-6.85 11.98c-0.18 0.31-0.18 0.69 0 1C0.47 13.81 0.8 14 1.15 14h13.7c0.36 0 0.69-0.19 0.86-0.5S15.89 12.81 15.72 12.5zM9 12H7V10h2V12zM9 9H7V5h2V9z"/></svg><br>      <span class="signed-in-tab-flash">You signed in with another tab or window. <a href="">Reload</a> to refresh your session.</span><br>      <span class="signed-out-tab-flash">You signed out in another tab or window. <a href="">Reload</a> to refresh your session.</span><br>    </div><br>    <div class="facebox" id="facebox" style="display:none;"><br>  <div class="facebox-popup"><br>    <div class="facebox-content" role="dialog" aria-labelledby="facebox-header" aria-describedby="facebox-description"><br>    </div><br>    <button type="button" class="facebox-close js-facebox-close" aria-label="Close modal"><br>      <svg aria-hidden="true" class="octicon octicon-x" height="16" version="1.1" viewbox="0 0 12 16" width="12"><path d="M7.48 8l3.75 3.75-1.48 1.48-3.75-3.75-3.75 3.75-1.48-1.48 3.75-3.75L0.77 4.25l1.48-1.48 3.75 3.75 3.75-3.75 1.48 1.48-3.75 3.75z"/></svg><br>    </button><br>  </div><br></div><br><br>  </div></body><br></html>


      
    </div>
    <footer class="article-footer">
      <a data-url="http://klina.github.io/2016/04/20/CookBook/" data-id="cin89ld6f0007roig40wy6rjw" class="article-share-link">Поделиться</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-CheatSheet" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2016/04/19/CheatSheet/" class="article-date">
  <time datetime="2016-04-19T08:06:38.698Z" itemprop="datePublished">2016-04-19</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>&lt;!DOCTYPE html&gt;</p>
<html lang="en" class=" is-copy-enabled"><br>  <head prefix="og: http://ogp.me/ns# fb: http://ogp.me/ns/fb# object: http://ogp.me/ns/object# article: http://ogp.me/ns/article# profile: http://ogp.me/ns/profile#"><br>    <meta charset="utf-8"><br><br>    <link crossorigin="anonymous" href="https://assets-cdn.github.com/assets/frameworks-4ca81a569e4b382193f26989979660344b2a86c1039cf44e471d2cdfb70c9ce4.css" integrity="sha256-TKgaVp5LOCGT8mmJl5ZgNEsqhsEDnPRORx0s37cMnOQ=" media="all" rel="stylesheet"><br>    <link crossorigin="anonymous" href="https://assets-cdn.github.com/assets/github-4129627c8cf63edb7480badb70e1a5a8eba9dd069ef776cb5f075a5f2d4047f8.css" integrity="sha256-QSlifIz2Ptt0gLrbcOGlqOup3Qae93bLXwdaXy1AR/g=" media="all" rel="stylesheet"><br><br><br><br>    <link crossorigin="anonymous" href="https://assets-cdn.github.com/assets/site-2d5d1699983d8dd7c384c67dfc183fbace8e3a24866e8822069d599f68e71fb2.css" integrity="sha256-LV0WmZg9jdfDhMZ9/Bg/us6OOiSGbogiBp1Zn2jnH7I=" media="all" rel="stylesheet"><br><br>    <link as="script" href="https://assets-cdn.github.com/assets/frameworks-b0c85b6eac5426cd1652deca19bc585e688aacec370c4541ab7f13cb5af4dc00.js" rel="preload"><br><br>    <link as="script" href="https://assets-cdn.github.com/assets/github-124b3847a604fc0e15d55e822321b3cf526c993bdad6b191fecde06505751064.js" rel="preload"><br><br>    <meta http-equiv="X-UA-Compatible" content="IE=edge"><br>    <meta http-equiv="Content-Language" content="en"><br>    <meta name="viewport" content="width=1020"><br><br><br>    <title>googletest/CheatSheet.md at master · google/googletest · GitHub</title><br>    <link rel="search" type="application/opensearchdescription+xml" href="/opensearch.xml" title="GitHub"><br>    <link rel="fluid-icon" href="https://github.com/fluidicon.png" title="GitHub"><br>    <link rel="apple-touch-icon" href="/apple-touch-icon.png"><br>    <link rel="apple-touch-icon" sizes="57x57" href="/apple-touch-icon-57x57.png"><br>    <link rel="apple-touch-icon" sizes="60x60" href="/apple-touch-icon-60x60.png"><br>    <link rel="apple-touch-icon" sizes="72x72" href="/apple-touch-icon-72x72.png"><br>    <link rel="apple-touch-icon" sizes="76x76" href="/apple-touch-icon-76x76.png"><br>    <link rel="apple-touch-icon" sizes="114x114" href="/apple-touch-icon-114x114.png"><br>    <link rel="apple-touch-icon" sizes="120x120" href="/apple-touch-icon-120x120.png"><br>    <link rel="apple-touch-icon" sizes="144x144" href="/apple-touch-icon-144x144.png"><br>    <link rel="apple-touch-icon" sizes="152x152" href="/apple-touch-icon-152x152.png"><br>    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon-180x180.png"><br>    <meta property="fb:app_id" content="1401488693436528"><br><br>      <meta content="https://avatars2.githubusercontent.com/u/1342004?v=3&amp;s=400" name="twitter:image:src"><meta content="@github" name="twitter:site"><meta content="summary" name="twitter:card"><meta content="google/googletest" name="twitter:title"><meta content="googletest - Google Test" name="twitter:description"><br>      <meta content="https://avatars2.githubusercontent.com/u/1342004?v=3&amp;s=400" property="og:image"><meta content="GitHub" property="og:site_name"><meta content="object" property="og:type"><meta content="google/googletest" property="og:title"><meta content="https://github.com/google/googletest" property="og:url"><meta content="googletest - Google Test" property="og:description"><br>      <meta name="browser-stats-url" content="https://api.github.com/_private/browser/stats"><br>    <meta name="browser-errors-url" content="https://api.github.com/_private/browser/errors"><br>    <link rel="assets" href="https://assets-cdn.github.com/"><br><br>    <meta name="pjax-timeout" content="1000"><br><br><br>    <meta name="msapplication-TileImage" content="/windows-tile.png"><br>    <meta name="msapplication-TileColor" content="#ffffff"><br>    <meta name="selected-link" value="repo_source" data-pjax-transient=""><br><br>    <meta name="google-site-verification" content="KT5gs8h0wvaagLKAVWq8bbeNwnZZK1r1XQysX3xurLU"><br><meta name="google-site-verification" content="ZzhVyEFwb7w3e0-uOTltm8Jsck2F5StVihD0exw2fsA"><br>    <meta name="google-analytics" content="UA-3769691-2"><br><br><meta content="collector.githubapp.com" name="octolytics-host"><meta content="github" name="octolytics-app-id"><meta content="3E9F4DA5:5EFF:1C6CDAEA:5715E70B" name="octolytics-dimension-request_id"><br><meta content="/&lt;user-name&gt;/&lt;repo-name&gt;/blob/show" data-pjax-transient="true" name="analytics-location"><br><br><br><br>  <meta class="js-ga-set" name="dimension1" content="Logged Out"><br><br><br><br>        <meta name="hostname" content="github.com"><br>    <meta name="user-login" content=""><br><br>        <meta name="expected-hostname" content="github.com"><br>      <meta name="js-proxy-site-detection-payload" content="ZGZjMjU1MDg0N2IyYjRjNGE4Y2RhNDcwOTI3YjFlNjYxZTdlNmU5Nzk2NmM0OWIyNGMzY2UyYzhkNTRlOWVkZnx7InJlbW90ZV9hZGRyZXNzIjoiNjIuMTU5Ljc3LjE2NSIsInJlcXVlc3RfaWQiOiIzRTlGNERBNTo1RUZGOjFDNkNEQUVBOjU3MTVFNzBCIiwidGltZXN0YW1wIjoxNDYxMDUzMTk1fQ=="><br><br><br>      <link rel="mask-icon" href="https://assets-cdn.github.com/pinned-octocat.svg" color="#4078c0"><br>      <link rel="icon" type="image/x-icon" href="https://assets-cdn.github.com/favicon.ico"><br><br>    <meta content="8cb1221b98aea525b7168ab311b77ee96e0e8987" name="form-nonce"><br><br>    <meta http-equiv="x-pjax-version" content="dc812ac6dabadd5440144e9805d8c8fd"><br><br><br><br>  <meta name="description" content="googletest - Google Test"><br>  <meta name="go-import" content="github.com/google/googletest git https://github.com/google/googletest.git"><br><br>  <meta content="1342004" name="octolytics-dimension-user_id"><meta content="google" name="octolytics-dimension-user_login"><meta content="39840932" name="octolytics-dimension-repository_id"><meta content="google/googletest" name="octolytics-dimension-repository_nwo"><meta content="true" name="octolytics-dimension-repository_public"><meta content="false" name="octolytics-dimension-repository_is_fork"><meta content="39840932" name="octolytics-dimension-repository_network_root_id"><meta content="google/googletest" name="octolytics-dimension-repository_network_root_nwo"><br>  <link href="https://github.com/google/googletest/commits/master.atom" rel="alternate" title="Recent Commits to googletest:master" type="application/atom+xml"><br><br><br>      <link rel="canonical" href="https://github.com/google/googletest/blob/master/googlemock/docs/CheatSheet.md" data-pjax-transient=""><br>  </head><br><br><br>  <body class="logged-out   env-production windows vis-public page-blob"><br>    <div id="js-pjax-loader-bar" class="pjax-loader-bar"></div><br>    <a href="#start-of-content" tabindex="1" class="accessibility-aid js-skip-to-content">Skip to content</a><br><br><br><br><br><br><br><br>          <header class="site-header js-details-container" role="banner"><br>  <div class="container-responsive"><br>    <a class="header-logo-invertocat" href="https://github.com/" aria-label="Homepage" data-ga-click="(Logged out) Header, go to homepage, icon:logo-wordmark" target="_blank" rel="external"><br>      <svg aria-hidden="true" class="octicon octicon-mark-github" height="32" version="1.1" viewbox="0 0 16 16" width="32"><path d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59 0.4 0.07 0.55-0.17 0.55-0.38 0-0.19-0.01-0.82-0.01-1.49-2.01 0.37-2.53-0.49-2.69-0.94-0.09-0.23-0.48-0.94-0.82-1.13-0.28-0.15-0.68-0.52-0.01-0.53 0.63-0.01 1.08 0.58 1.23 0.82 0.72 1.21 1.87 0.87 2.33 0.66 0.07-0.52 0.28-0.87 0.51-1.07-1.78-0.2-3.64-0.89-3.64-3.95 0-0.87 0.31-1.59 0.82-2.15-0.08-0.2-0.36-1.02 0.08-2.12 0 0 0.67-0.21 2.2 0.82 0.64-0.18 1.32-0.27 2-0.27 0.68 0 1.36 0.09 2 0.27 1.53-1.04 2.2-0.82 2.2-0.82 0.44 1.1 0.16 1.92 0.08 2.12 0.51 0.56 0.82 1.27 0.82 2.15 0 3.07-1.87 3.75-3.65 3.95 0.29 0.25 0.54 0.73 0.54 1.48 0 1.07-0.01 1.93-0.01 2.2 0 0.21 0.15 0.46 0.55 0.38C13.71 14.53 16 11.53 16 8 16 3.58 12.42 0 8 0z"/></svg><br>    </a><br><br>    <button class="btn-link right site-header-toggle js-details-target" type="button" aria-label="Toggle navigation"><br>      <svg aria-hidden="true" class="octicon octicon-three-bars" height="24" version="1.1" viewbox="0 0 12 16" width="18"><path d="M11.41 9H0.59c-0.59 0-0.59-0.41-0.59-1s0-1 0.59-1h10.81c0.59 0 0.59 0.41 0.59 1s0 1-0.59 1z m0-4H0.59c-0.59 0-0.59-0.41-0.59-1s0-1 0.59-1h10.81c0.59 0 0.59 0.41 0.59 1s0 1-0.59 1zM0.59 11h10.81c0.59 0 0.59 0.41 0.59 1s0 1-0.59 1H0.59c-0.59 0-0.59-0.41-0.59-1s0-1 0.59-1z"/></svg><br>    </button><br><br>    <div class="site-header-menu"><br>      <nav class="site-header-nav site-header-nav-main"><br>        <a href="/personal" class="js-selected-navigation-item nav-item nav-item-personal" data-ga-click="Header, click, Nav menu - item:personal" data-selected-links="/personal /personal"><br>          Personal<br></a>        <a href="/open-source" class="js-selected-navigation-item nav-item nav-item-opensource" data-ga-click="Header, click, Nav menu - item:opensource" data-selected-links="/open-source /open-source"><br>          Open source<br></a>        <a href="/business" class="js-selected-navigation-item nav-item nav-item-business" data-ga-click="Header, click, Nav menu - item:business" data-selected-links="/business /business/features /business/customers /business"><br>          Business<br></a>        <a href="/explore" class="js-selected-navigation-item nav-item nav-item-explore" data-ga-click="Header, click, Nav menu - item:explore" data-selected-links="/explore /trending /trending/developers /integrations /integrations/feature/code /integrations/feature/collaborate /integrations/feature/ship /explore"><br>          Explore<br></a>      </nav><br><br>      <div class="site-header-actions"><br>            <a class="btn btn-primary site-header-actions-btn" href="/join?source=header-repo" data-ga-click="(Logged out) Header, clicked Sign up, text:sign-up">Sign up</a><br>          <a class="btn site-header-actions-btn mr-2" href="/login?return_to=%2Fgoogle%2Fgoogletest%2Fblob%2Fmaster%2Fgooglemock%2Fdocs%2FCheatSheet.md" data-ga-click="(Logged out) Header, clicked Sign in, text:sign-in">Sign in</a><br>      </div><br><br>        <nav class="site-header-nav site-header-nav-secondary"><br>          <a class="nav-item" href="/pricing">Pricing</a><br>          <a class="nav-item" href="/blog">Blog</a><br>          <a class="nav-item" href="https://help.github.com" target="_blank" rel="external">Support</a><br>          <a class="nav-item header-search-link" href="https://github.com/search" target="_blank" rel="external">Search GitHub</a><br>              <div class="header-search scoped-search site-scoped-search js-site-search" role="search"><br>  <!-- </textarea> --><!-- '"` --><form accept-charset="UTF-8" action="/google/googletest/search" class="js-site-search-form" data-scoped-search-url="/google/googletest/search" data-unscoped-search-url="/search" method="get"><div style="margin:0;padding:0;display:inline"><input name="utf8" type="hidden" value="&#x2713;"></div><br>    <label class="form-control header-search-wrapper js-chromeless-input-container"><br>      <div class="header-search-scope">This repository</div><br>      <input type="text" class="form-control header-search-input js-site-search-focus js-site-search-field is-clearable" data-hotkey="s" name="q" placeholder="Search" aria-label="Search this repository" data-unscoped-placeholder="Search GitHub" data-scoped-placeholder="Search" tabindex="1" autocapitalize="off"><br>    </label><br></form></div><br><br>        </nav><br>    </div><br>  </div><br></header><br><br><br><br>    <div id="start-of-content" class="accessibility-aid"></div><br><br>      <div id="js-flash-container"><br></div><br><br><br>    <div role="main" class="main-content"><br>        <div itemscope="" itemtype="http://schema.org/SoftwareSourceCode"><br>    <div id="js-repo-pjax-container" data-pjax-container=""><br><br><div class="pagehead repohead instapaper_ignore readability-menu experiment-repo-nav"><br>  <div class="container repohead-details-container"><br><br><br><br><ul class="pagehead-actions"><br><br>  <li><br>      <a href="/login?return_to=%2Fgoogle%2Fgoogletest" class="btn btn-sm btn-with-count tooltipped tooltipped-n" aria-label="You must be signed in to watch a repository" rel="nofollow"><br>    <svg aria-hidden="true" class="octicon octicon-eye" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M8.06 2C3 2 0 8 0 8s3 6 8.06 6c4.94 0 7.94-6 7.94-6S13 2 8.06 2z m-0.06 10c-2.2 0-4-1.78-4-4 0-2.2 1.8-4 4-4 2.22 0 4 1.8 4 4 0 2.22-1.78 4-4 4z m2-4c0 1.11-0.89 2-2 2s-2-0.89-2-2 0.89-2 2-2 2 0.89 2 2z"/></svg><br>    Watch<br>  </a><br>  <a class="social-count" href="/google/googletest/watchers"><br>    258<br>  </a><br><br>  </li><br><br>  <li><br>      <a href="/login?return_to=%2Fgoogle%2Fgoogletest" class="btn btn-sm btn-with-count tooltipped tooltipped-n" aria-label="You must be signed in to star a repository" rel="nofollow"><br>    <svg aria-hidden="true" class="octicon octicon-star" height="16" version="1.1" viewbox="0 0 14 16" width="14"><path d="M14 6l-4.9-0.64L7 1 4.9 5.36 0 6l3.6 3.26L2.67 14l4.33-2.33 4.33 2.33L10.4 9.26 14 6z"/></svg><br>    Star<br>  </a><br><br>    <a class="social-count js-social-count" href="/google/googletest/stargazers"><br>      1,987<br>    </a><br><br>  </li><br><br>  <li><br>      <a href="/login?return_to=%2Fgoogle%2Fgoogletest" class="btn btn-sm btn-with-count tooltipped tooltipped-n" aria-label="You must be signed in to fork a repository" rel="nofollow"><br>        <svg aria-hidden="true" class="octicon octicon-repo-forked" height="16" version="1.1" viewbox="0 0 10 16" width="10"><path d="M8 1c-1.11 0-2 0.89-2 2 0 0.73 0.41 1.38 1 1.72v1.28L5 8 3 6v-1.28c0.59-0.34 1-0.98 1-1.72 0-1.11-0.89-2-2-2S0 1.89 0 3c0 0.73 0.41 1.38 1 1.72v1.78l3 3v1.78c-0.59 0.34-1 0.98-1 1.72 0 1.11 0.89 2 2 2s2-0.89 2-2c0-0.73-0.41-1.38-1-1.72V9.5l3-3V4.72c0.59-0.34 1-0.98 1-1.72 0-1.11-0.89-2-2-2zM2 4.2c-0.66 0-1.2-0.55-1.2-1.2s0.55-1.2 1.2-1.2 1.2 0.55 1.2 1.2-0.55 1.2-1.2 1.2z m3 10c-0.66 0-1.2-0.55-1.2-1.2s0.55-1.2 1.2-1.2 1.2 0.55 1.2 1.2-0.55 1.2-1.2 1.2z m3-10c-0.66 0-1.2-0.55-1.2-1.2s0.55-1.2 1.2-1.2 1.2 0.55 1.2 1.2-0.55 1.2-1.2 1.2z"/></svg><br>        Fork<br>      </a><br><br>    <a href="/google/googletest/network" class="social-count"><br>      704<br>    </a><br>  </li><br></ul><br><br>    <h1 class="entry-title public "><br>  <svg aria-hidden="true" class="octicon octicon-repo" height="16" version="1.1" viewbox="0 0 12 16" width="12"><path d="M4 9h-1v-1h1v1z m0-3h-1v1h1v-1z m0-2h-1v1h1v-1z m0-2h-1v1h1v-1z m8-1v12c0 0.55-0.45 1-1 1H6v2l-1.5-1.5-1.5 1.5V14H1c-0.55 0-1-0.45-1-1V1C0 0.45 0.45 0 1 0h10c0.55 0 1 0.45 1 1z m-1 10H1v2h2v-1h3v1h5V11z m0-10H2v9h9V1z"/></svg><br>  <span class="author" itemprop="author"><a href="/google" class="url fn" rel="author">google</a></span><!--
--><span class="path-divider">/</span><!--
--><strong itemprop="name"><a href="/google/googletest" data-pjax="#js-repo-pjax-container">googletest</a></strong><br><br></h1><br><br>  </div><br>  <div class="container"><br><br><nav class="reponav js-repo-nav js-sidenav-container-pjax" itemscope="" itemtype="http://schema.org/BreadcrumbList" role="navigation" data-pjax="#js-repo-pjax-container"><br><br>  <span itemscope="" itemtype="http://schema.org/ListItem" itemprop="itemListElement"><br>    <a href="/google/googletest" aria-selected="true" class="js-selected-navigation-item selected reponav-item" data-hotkey="g c" data-selected-links="repo_source repo_downloads repo_commits repo_releases repo_tags repo_branches /google/googletest" itemprop="url"><br>      <svg aria-hidden="true" class="octicon octicon-code" height="16" version="1.1" viewbox="0 0 14 16" width="14"><path d="M9.5 3l-1.5 1.5 3.5 3.5L8 11.5l1.5 1.5 4.5-5L9.5 3zM4.5 3L0 8l4.5 5 1.5-1.5L2.5 8l3.5-3.5L4.5 3z"/></svg><br>      <span itemprop="name">Code</span><br>      <meta itemprop="position" content="1"><br></a>  </span><br><br>    <span itemscope="" itemtype="http://schema.org/ListItem" itemprop="itemListElement"><br>      <a href="/google/googletest/issues" class="js-selected-navigation-item reponav-item" data-hotkey="g i" data-selected-links="repo_issues repo_labels repo_milestones /google/googletest/issues" itemprop="url"><br>        <svg aria-hidden="true" class="octicon octicon-issue-opened" height="16" version="1.1" viewbox="0 0 14 16" width="14"><path d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7S10.14 13.7 7 13.7 1.3 11.14 1.3 8s2.56-5.7 5.7-5.7m0-1.3C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7S10.86 1 7 1z m1 3H6v5h2V4z m0 6H6v2h2V10z"/></svg><br>        <span itemprop="name">Issues</span><br>        <span class="counter">247</span><br>        <meta itemprop="position" content="2"><br></a>    </span><br><br>  <span itemscope="" itemtype="http://schema.org/ListItem" itemprop="itemListElement"><br>    <a href="/google/googletest/pulls" class="js-selected-navigation-item reponav-item" data-hotkey="g p" data-selected-links="repo_pulls /google/googletest/pulls" itemprop="url"><br>      <svg aria-hidden="true" class="octicon octicon-git-pull-request" height="16" version="1.1" viewbox="0 0 12 16" width="12"><path d="M11 11.28c0-1.73 0-6.28 0-6.28-0.03-0.78-0.34-1.47-0.94-2.06s-1.28-0.91-2.06-0.94c0 0-1.02 0-1 0V0L4 3l3 3V4h1c0.27 0.02 0.48 0.11 0.69 0.31s0.3 0.42 0.31 0.69v6.28c-0.59 0.34-1 0.98-1 1.72 0 1.11 0.89 2 2 2s2-0.89 2-2c0-0.73-0.41-1.38-1-1.72z m-1 2.92c-0.66 0-1.2-0.55-1.2-1.2s0.55-1.2 1.2-1.2 1.2 0.55 1.2 1.2-0.55 1.2-1.2 1.2zM4 3c0-1.11-0.89-2-2-2S0 1.89 0 3c0 0.73 0.41 1.38 1 1.72 0 1.55 0 5.56 0 6.56-0.59 0.34-1 0.98-1 1.72 0 1.11 0.89 2 2 2s2-0.89 2-2c0-0.73-0.41-1.38-1-1.72V4.72c0.59-0.34 1-0.98 1-1.72z m-0.8 10c0 0.66-0.55 1.2-1.2 1.2s-1.2-0.55-1.2-1.2 0.55-1.2 1.2-1.2 1.2 0.55 1.2 1.2z m-1.2-8.8c-0.66 0-1.2-0.55-1.2-1.2s0.55-1.2 1.2-1.2 1.2 0.55 1.2 1.2-0.55 1.2-1.2 1.2z"/></svg><br>      <span itemprop="name">Pull requests</span><br>      <span class="counter">42</span><br>      <meta itemprop="position" content="3"><br></a>  </span><br><br><br>  <a href="/google/googletest/pulse" class="js-selected-navigation-item reponav-item" data-selected-links="pulse /google/googletest/pulse"><br>    <svg aria-hidden="true" class="octicon octicon-pulse" height="16" version="1.1" viewbox="0 0 14 16" width="14"><path d="M11.5 8L8.8 5.4 6.6 8.5 5.5 1.6 2.38 8H0V10h3.6L4.5 8.2l0.9 5.4L9 8.5l1.6 1.5H14V8H11.5z"/></svg><br>    Pulse<br></a><br>  <a href="/google/googletest/graphs" class="js-selected-navigation-item reponav-item" data-selected-links="repo_graphs repo_contributors /google/googletest/graphs"><br>    <svg aria-hidden="true" class="octicon octicon-graph" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M16 14v1H0V0h1v14h15z m-11-1H3V8h2v5z m4 0H7V3h2v10z m4 0H11V6h2v7z"/></svg><br>    Graphs<br></a><br><br></nav><br><br>  </div><br></div><br><br><div class="container new-discussion-timeline experiment-repo-nav"><br>  <div class="repository-content"><br><br><br><br><a href="/google/googletest/blob/d225acc90bc3a8c420a9bcd1f033033c1ccd7fe0/googlemock/docs/CheatSheet.md" class="hidden js-permalink-shortcut" data-hotkey="y">Permalink</a><br><br><!-- blob contrib key: blob_contributors:v21:af4016724e3fee03c6112eefaa8570c1 --><br><br><div class="file-navigation js-zeroclipboard-container"><br><br><div class="select-menu branch-select-menu js-menu-container js-select-menu left"><br>  <button class="btn btn-sm select-menu-button js-menu-target css-truncate" data-hotkey="w" title="master" type="button" aria-label="Switch branches or tags" tabindex="0" aria-haspopup="true"><br>    <i>Branch:</i><br>    <span class="js-select-button css-truncate-target">master</span><br>  </button><br><br>  <div class="select-menu-modal-holder js-menu-content js-navigation-container" data-pjax="" aria-hidden="true"><br><br>    <div class="select-menu-modal"><br>      <div class="select-menu-header"><br>        <svg aria-label="Close" class="octicon octicon-x js-menu-close" height="16" role="img" version="1.1" viewbox="0 0 12 16" width="12"><path d="M7.48 8l3.75 3.75-1.48 1.48-3.75-3.75-3.75 3.75-1.48-1.48 3.75-3.75L0.77 4.25l1.48-1.48 3.75 3.75 3.75-3.75 1.48 1.48-3.75 3.75z"/></svg><br>        <span class="select-menu-title">Switch branches/tags</span><br>      </div><br><br>      <div class="select-menu-filters"><br>        <div class="select-menu-text-filter"><br>          <input type="text" aria-label="Filter branches/tags" id="context-commitish-filter-field" class="form-control js-filterable-field js-navigation-enable" placeholder="Filter branches/tags"><br>        </div><br>        <div class="select-menu-tabs"><br>          <ul><br>            <li class="select-menu-tab"><br>              <a href="#" data-tab-filter="branches" data-filter-placeholder="Filter branches/tags" class="js-select-menu-tab" role="tab">Branches</a><br>            </li><br>            <li class="select-menu-tab"><br>              <a href="#" data-tab-filter="tags" data-filter-placeholder="Find a tag…" class="js-select-menu-tab" role="tab">Tags</a><br>            </li><br>          </ul><br>        </div><br>      </div><br><br>      <div class="select-menu-list select-menu-tab-bucket js-select-menu-tab-bucket" data-tab-filter="branches" role="menu"><br><br>        <div data-filterable-for="context-commitish-filter-field" data-filterable-type="substring"><br><br><br>            <a class="select-menu-item js-navigation-item js-navigation-open " href="/google/googletest/blob/BillyDonahue-patch-1/googlemock/docs/CheatSheet.md" data-name="BillyDonahue-patch-1" data-skip-pjax="true" rel="nofollow"><br>              <svg aria-hidden="true" class="octicon octicon-check select-menu-item-icon" height="16" version="1.1" viewbox="0 0 12 16" width="12"><path d="M12 5L4 13 0 9l1.5-1.5 2.5 2.5 6.5-6.5 1.5 1.5z"/></svg><br>              <span class="select-menu-item-text css-truncate-target js-select-menu-filter-text" title="BillyDonahue-patch-1"><br>                BillyDonahue-patch-1<br>              </span><br>            </a><br>            <a class="select-menu-item js-navigation-item js-navigation-open selected" href="/google/googletest/blob/master/googlemock/docs/CheatSheet.md" data-name="master" data-skip-pjax="true" rel="nofollow"><br>              <svg aria-hidden="true" class="octicon octicon-check select-menu-item-icon" height="16" version="1.1" viewbox="0 0 12 16" width="12"><path d="M12 5L4 13 0 9l1.5-1.5 2.5 2.5 6.5-6.5 1.5 1.5z"/></svg><br>              <span class="select-menu-item-text css-truncate-target js-select-menu-filter-text" title="master"><br>                master<br>              </span><br>            </a><br>        </div><br><br>          <div class="select-menu-no-results">Nothing to show</div><br>      </div><br><br>      <div class="select-menu-list select-menu-tab-bucket js-select-menu-tab-bucket" data-tab-filter="tags"><br>        <div data-filterable-for="context-commitish-filter-field" data-filterable-type="substring"><br><br><br>            <a class="select-menu-item js-navigation-item js-navigation-open " href="/google/googletest/tree/release-1.7.0/googlemock/docs/CheatSheet.md" data-name="release-1.7.0" data-skip-pjax="true" rel="nofollow"><br>              <svg aria-hidden="true" class="octicon octicon-check select-menu-item-icon" height="16" version="1.1" viewbox="0 0 12 16" width="12"><path d="M12 5L4 13 0 9l1.5-1.5 2.5 2.5 6.5-6.5 1.5 1.5z"/></svg><br>              <span class="select-menu-item-text css-truncate-target" title="release-1.7.0"><br>                release-1.7.0<br>              </span><br>            </a><br>            <a class="select-menu-item js-navigation-item js-navigation-open " href="/google/googletest/tree/release-1.6.0/googlemock/docs/CheatSheet.md" data-name="release-1.6.0" data-skip-pjax="true" rel="nofollow"><br>              <svg aria-hidden="true" class="octicon octicon-check select-menu-item-icon" height="16" version="1.1" viewbox="0 0 12 16" width="12"><path d="M12 5L4 13 0 9l1.5-1.5 2.5 2.5 6.5-6.5 1.5 1.5z"/></svg><br>              <span class="select-menu-item-text css-truncate-target" title="release-1.6.0"><br>                release-1.6.0<br>              </span><br>            </a><br>            <a class="select-menu-item js-navigation-item js-navigation-open " href="/google/googletest/tree/release-1.5.0/googlemock/docs/CheatSheet.md" data-name="release-1.5.0" data-skip-pjax="true" rel="nofollow"><br>              <svg aria-hidden="true" class="octicon octicon-check select-menu-item-icon" height="16" version="1.1" viewbox="0 0 12 16" width="12"><path d="M12 5L4 13 0 9l1.5-1.5 2.5 2.5 6.5-6.5 1.5 1.5z"/></svg><br>              <span class="select-menu-item-text css-truncate-target" title="release-1.5.0"><br>                release-1.5.0<br>              </span><br>            </a><br>            <a class="select-menu-item js-navigation-item js-navigation-open " href="/google/googletest/tree/release-1.4.0/googlemock/docs/CheatSheet.md" data-name="release-1.4.0" data-skip-pjax="true" rel="nofollow"><br>              <svg aria-hidden="true" class="octicon octicon-check select-menu-item-icon" height="16" version="1.1" viewbox="0 0 12 16" width="12"><path d="M12 5L4 13 0 9l1.5-1.5 2.5 2.5 6.5-6.5 1.5 1.5z"/></svg><br>              <span class="select-menu-item-text css-truncate-target" title="release-1.4.0"><br>                release-1.4.0<br>              </span><br>            </a><br>            <a class="select-menu-item js-navigation-item js-navigation-open " href="/google/googletest/tree/release-1.3.0/googlemock/docs/CheatSheet.md" data-name="release-1.3.0" data-skip-pjax="true" rel="nofollow"><br>              <svg aria-hidden="true" class="octicon octicon-check select-menu-item-icon" height="16" version="1.1" viewbox="0 0 12 16" width="12"><path d="M12 5L4 13 0 9l1.5-1.5 2.5 2.5 6.5-6.5 1.5 1.5z"/></svg><br>              <span class="select-menu-item-text css-truncate-target" title="release-1.3.0"><br>                release-1.3.0<br>              </span><br>            </a><br>            <a class="select-menu-item js-navigation-item js-navigation-open " href="/google/googletest/tree/release-1.2.1/googlemock/docs/CheatSheet.md" data-name="release-1.2.1" data-skip-pjax="true" rel="nofollow"><br>              <svg aria-hidden="true" class="octicon octicon-check select-menu-item-icon" height="16" version="1.1" viewbox="0 0 12 16" width="12"><path d="M12 5L4 13 0 9l1.5-1.5 2.5 2.5 6.5-6.5 1.5 1.5z"/></svg><br>              <span class="select-menu-item-text css-truncate-target" title="release-1.2.1"><br>                release-1.2.1<br>              </span><br>            </a><br>            <a class="select-menu-item js-navigation-item js-navigation-open " href="/google/googletest/tree/release-1.2.0/googlemock/docs/CheatSheet.md" data-name="release-1.2.0" data-skip-pjax="true" rel="nofollow"><br>              <svg aria-hidden="true" class="octicon octicon-check select-menu-item-icon" height="16" version="1.1" viewbox="0 0 12 16" width="12"><path d="M12 5L4 13 0 9l1.5-1.5 2.5 2.5 6.5-6.5 1.5 1.5z"/></svg><br>              <span class="select-menu-item-text css-truncate-target" title="release-1.2.0"><br>                release-1.2.0<br>              </span><br>            </a><br>            <a class="select-menu-item js-navigation-item js-navigation-open " href="/google/googletest/tree/release-1.1.0/googlemock/docs/CheatSheet.md" data-name="release-1.1.0" data-skip-pjax="true" rel="nofollow"><br>              <svg aria-hidden="true" class="octicon octicon-check select-menu-item-icon" height="16" version="1.1" viewbox="0 0 12 16" width="12"><path d="M12 5L4 13 0 9l1.5-1.5 2.5 2.5 6.5-6.5 1.5 1.5z"/></svg><br>              <span class="select-menu-item-text css-truncate-target" title="release-1.1.0"><br>                release-1.1.0<br>              </span><br>            </a><br>            <a class="select-menu-item js-navigation-item js-navigation-open " href="/google/googletest/tree/release-1.0.1/googlemock/docs/CheatSheet.md" data-name="release-1.0.1" data-skip-pjax="true" rel="nofollow"><br>              <svg aria-hidden="true" class="octicon octicon-check select-menu-item-icon" height="16" version="1.1" viewbox="0 0 12 16" width="12"><path d="M12 5L4 13 0 9l1.5-1.5 2.5 2.5 6.5-6.5 1.5 1.5z"/></svg><br>              <span class="select-menu-item-text css-truncate-target" title="release-1.0.1"><br>                release-1.0.1<br>              </span><br>            </a><br>            <a class="select-menu-item js-navigation-item js-navigation-open " href="/google/googletest/tree/release-1.0.0/googlemock/docs/CheatSheet.md" data-name="release-1.0.0" data-skip-pjax="true" rel="nofollow"><br>              <svg aria-hidden="true" class="octicon octicon-check select-menu-item-icon" height="16" version="1.1" viewbox="0 0 12 16" width="12"><path d="M12 5L4 13 0 9l1.5-1.5 2.5 2.5 6.5-6.5 1.5 1.5z"/></svg><br>              <span class="select-menu-item-text css-truncate-target" title="release-1.0.0"><br>                release-1.0.0<br>              </span><br>            </a><br>        </div><br><br>        <div class="select-menu-no-results">Nothing to show</div><br>      </div><br><br>    </div><br>  </div><br></div><br><br>  <div class="btn-group right"><br>    <a href="/google/googletest/find/master" class="js-pjax-capture-input btn btn-sm" data-pjax="" data-hotkey="t"><br>      Find file<br>    </a><br>    <button aria-label="Copy file path to clipboard" class="js-zeroclipboard btn btn-sm zeroclipboard-button tooltipped tooltipped-s" data-copied-hint="Copied!" type="button">Copy path</button><br>  </div><br>  <div class="breadcrumb js-zeroclipboard-target"><br>    <span class="repo-root js-repo-root"><span class="js-path-segment"><a href="/google/googletest"><span>googletest</span></a></span></span><span class="separator">/</span><span class="js-path-segment"><a href="/google/googletest/tree/master/googlemock"><span>googlemock</span></a></span><span class="separator">/</span><span class="js-path-segment"><a href="/google/googletest/tree/master/googlemock/docs"><span>docs</span></a></span><span class="separator">/</span><strong class="final-path">CheatSheet.md</strong><br>  </div><br></div><br><br><br>  <div class="commit-tease"><br>      <span class="right"><br>        <a class="commit-tease-sha" href="/google/googletest/commit/a470862dbe806b4e55232d6aa637a4bd94b800f8" data-pjax=""><br>          a470862<br>        </a><br>        <time datetime="2015-12-08T15:02:50Z" is="relative-time">Dec 8, 2015</time><br>      </span><br>      <div><br>        <img alt="" class="avatar" height="20" src="https://2.gravatar.com/avatar/0c5dbc6456ec61e451fab49a1ae31091?d=https%3A%2F%2Fassets-cdn.github.com%2Fimages%2Fgravatars%2Fgravatar-user-420.png&amp;r=x&amp;s=140" width="20"><br>        <span class="user-mention">Paul Rosset</span><br>          <a href="/google/googletest/commit/a470862dbe806b4e55232d6aa637a4bd94b800f8" class="message" data-pjax="true" title="fixed link in googlemock documentation">fixed link in googlemock documentation</a><br>      </div><br><br>    <div class="commit-tease-contributors"><br>      <button type="button" class="btn-link muted-link contributors-toggle" data-facebox="#blob_contributors_box"><br>        <strong>1</strong><br>         contributor<br>      </button><br><br>    </div><br><br>    <div id="blob_contributors_box" style="display:none"><br>      <h2 class="facebox-header" data-facebox-id="facebox-header">Users who have contributed to this file</h2><br>      <ul class="facebox-user-list" data-facebox-id="facebox-description"><br>          <li class="facebox-user-list-item"><br>            <img alt="@BillyDonahue" height="24" src="https://avatars0.githubusercontent.com/u/8611652?v=3&amp;s=48" width="24"><br>            <a href="/BillyDonahue">BillyDonahue</a><br>          </li><br>      </ul><br>    </div><br>  </div><br><br><div class="file"><br>  <div class="file-header"><br>  <div class="file-actions"><br><br>    <div class="btn-group"><br>      <a href="/google/googletest/raw/master/googlemock/docs/CheatSheet.md" class="btn btn-sm " id="raw-url">Raw</a><br>        <a href="/google/googletest/blame/master/googlemock/docs/CheatSheet.md" class="btn btn-sm js-update-url-with-hash">Blame</a><br>      <a href="/google/googletest/commits/master/googlemock/docs/CheatSheet.md" class="btn btn-sm " rel="nofollow">History</a><br>    </div><br><br>        <a class="btn-octicon tooltipped tooltipped-nw" href="https://windows.github.com" aria-label="Open this file in GitHub Desktop" data-ga-click="Repository, open with desktop, type:windows" target="_blank" rel="external"><br>            <svg aria-hidden="true" class="octicon octicon-device-desktop" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M15 2H1c-0.55 0-1 0.45-1 1v9c0 0.55 0.45 1 1 1h5.34c-0.25 0.61-0.86 1.39-2.34 2h8c-1.48-0.61-2.09-1.39-2.34-2h5.34c0.55 0 1-0.45 1-1V3c0-0.55-0.45-1-1-1z m0 9H1V3h14v8z"/></svg><br>        </a><br><br>        <button type="button" class="btn-octicon disabled tooltipped tooltipped-nw" aria-label="You must be signed in to make or propose changes"><br>          <svg aria-hidden="true" class="octicon octicon-pencil" height="16" version="1.1" viewbox="0 0 14 16" width="14"><path d="M0 12v3h3l8-8-3-3L0 12z m3 2H1V12h1v1h1v1z m10.3-9.3l-1.3 1.3-3-3 1.3-1.3c0.39-0.39 1.02-0.39 1.41 0l1.59 1.59c0.39 0.39 0.39 1.02 0 1.41z"/></svg><br>        </button><br>        <button type="button" class="btn-octicon btn-octicon-danger disabled tooltipped tooltipped-nw" aria-label="You must be signed in to make or propose changes"><br>          <svg aria-hidden="true" class="octicon octicon-trashcan" height="16" version="1.1" viewbox="0 0 12 16" width="12"><path d="M10 2H8c0-0.55-0.45-1-1-1H4c-0.55 0-1 0.45-1 1H1c-0.55 0-1 0.45-1 1v1c0 0.55 0.45 1 1 1v9c0 0.55 0.45 1 1 1h7c0.55 0 1-0.45 1-1V5c0.55 0 1-0.45 1-1v-1c0-0.55-0.45-1-1-1z m-1 12H2V5h1v8h1V5h1v8h1V5h1v8h1V5h1v9z m1-10H1v-1h9v1z"/></svg><br>        </button><br>  </div><br><br>  <div class="file-info"><br>      563 lines (448 sloc)<br>      <span class="file-info-divider"></span><br>    27.5 KB<br>  </div><br></div><br><br><br>  <div id="readme" class="readme blob instapaper_body"><br>    <article class="markdown-body entry-content" itemprop="text"><h1><a id="user-content-defining-a-mock-class" class="anchor" href="#defining-a-mock-class" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"/></svg></a>Defining a Mock Class</h1><br><br><h2><a id="user-content-mocking-a-normal-class" class="anchor" href="#mocking-a-normal-class" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"/></svg></a>Mocking a Normal Class</h2><br><br><p>Given</p><br><br><pre><code>class Foo {<br>  …<br>  virtual ~Foo();<br>  virtual int GetSize() const = 0;<br>  virtual string Describe(const char<em> name) = 0;<br>  virtual string Describe(int type) = 0;<br>  virtual bool Process(Bar elem, int count) = 0;<br>};<br></em></code></pre><br><br><p>(note that <code>~Foo()</code> <strong>must</strong> be virtual) we can define its mock as</p><br><br><pre><code>#include “gmock/gmock.h”<br><br>class MockFoo : public Foo {<br>  MOCK_CONST_METHOD0(GetSize, int());<br>  MOCK_METHOD1(Describe, string(const char name));<br>  MOCK_METHOD1(Describe, string(int type));<br>  MOCK_METHOD2(Process, bool(Bar elem, int count));<br>};<br></code></pre><br><br><p>To create a “nice” mock object which ignores all uninteresting calls,<br>or a “strict” mock object, which treats them as failures:</p><br><br><pre><code>NiceMock&lt;MockFoo&gt; nice_foo;     // The type is a subclass of MockFoo.<br>StrictMock&lt;MockFoo&gt; strict_foo; // The type is a subclass of MockFoo.<br></code></pre><br><br><h2><a id="user-content-mocking-a-class-template" class="anchor" href="#mocking-a-class-template" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"/></svg></a>Mocking a Class Template</h2><br><br><p>To mock</p><br><br><pre><code>template &lt;typename Elem&gt;<br>class StackInterface {<br> public:<br>  …<br>  virtual ~StackInterface();<br>  virtual int GetSize() const = 0;<br>  virtual void Push(const Elem&amp; x) = 0;<br>};<br></code></pre><br><br><p>(note that <code>~StackInterface()</code> <strong>must</strong> be virtual) just append <code><em>T</em></code> to the <code>MOCK<em></em></code> macros:</p><br><br><pre><code>template &lt;typename Elem&gt;<br>class MockStack : public StackInterface&lt;Elem&gt; {<br> public:<br>  …<br>  MOCK_CONST_METHOD0_T(GetSize, int());<br>  MOCK_METHOD1_T(Push, void(const Elem&amp; x));<br>};<br></code></pre><br><br><h2><a id="user-content-specifying-calling-conventions-for-mock-functions" class="anchor" href="#specifying-calling-conventions-for-mock-functions" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"/></svg></a>Specifying Calling Conventions for Mock Functions</h2><br><br><p>If your mock function doesn’t use the default calling convention, you<br>can specify it by appending <code>_WITH_CALLTYPE</code> to any of the macros<br>described in the previous two sections and supplying the calling<br>convention as the first argument to the macro. For example,</p><br><br><pre><code>  MOCK_METHOD_1_WITH_CALLTYPE(STDMETHODCALLTYPE, Foo, bool(int n));<br>  MOCK_CONST_METHOD2_WITH_CALLTYPE(STDMETHODCALLTYPE, Bar, int(double x, double y));<br></code></pre><br><br><p>where <code>STDMETHODCALLTYPE</code> is defined by <code>&lt;objbase.h&gt;</code> on Windows.</p><br><br><h1><a id="user-content-using-mocks-in-tests" class="anchor" href="#using-mocks-in-tests" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"/></svg></a>Using Mocks in Tests</h1><br><br><p>The typical flow is:</p><br><br><ol><br><li>Import the Google Mock names you need to use. All Google Mock names are in the <code>testing</code> namespace unless they are macros or otherwise noted.</li><br><li>Create the mock objects.</li><br><li>Optionally, set the default actions of the mock objects.</li><br><li>Set your expectations on the mock objects (How will they be called? What wil they do?).</li><br><li>Exercise code that uses the mock objects; if necessary, check the result using <a href="/google/googletest/blob/master/googletest">Google Test</a> assertions.</li><br><li>When a mock objects is destructed, Google Mock automatically verifies that all expectations on it have been satisfied.</li><br></ol><br><br><p>Here is an example:</p><br><br><pre><code>using ::testing::Return;                            // #1<br><br>TEST(BarTest, DoesThis) {<br>  MockFoo foo;                                    // #2<br><br>  ON_CALL(foo, GetSize())                         // #3<br>      .WillByDefault(Return(1));<br>  // … other default actions …<br><br>  EXPECT_CALL(foo, Describe(5))                   // #4<br>      .Times(3)<br>      .WillRepeatedly(Return(“Category 5”));<br>  // … other expectations …<br><br>  EXPECT_EQ(“good”, MyProductionFunction(&amp;foo));  // #5<br>}                                                 // #6<br></code></pre><br><br><h1><a id="user-content-setting-default-actions" class="anchor" href="#setting-default-actions" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"/></svg></a>Setting Default Actions</h1><br><br><p>Google Mock has a <strong>built-in default action</strong> for any function that<br>returns <code>void</code>, <code>bool</code>, a numeric value, or a pointer.</p><br><br><p>To customize the default action for functions with return type <code>T</code> globally:</p><br><br><pre><code>using ::testing::DefaultValue;<br><br>// Sets the default value to be returned. T must be CopyConstructible.<br>DefaultValue&lt;T&gt;::Set(value);<br>// Sets a factory. Will be invoked on demand. T must be MoveConstructible.<br>//   T MakeT();<br>DefaultValue&lt;T&gt;::SetFactory(&amp;MakeT);<br>// … use the mocks …<br>// Resets the default value.<br>DefaultValue&lt;T&gt;::Clear();<br></code></pre><br><br><p>To customize the default action for a particular method, use <code>ON_CALL()</code>:</p><br><br><pre><code>ON_CALL(mock_object, method(matchers))<br>    .With(multi_argument_matcher)  ?<br>    .WillByDefault(action);<br></code></pre><br><br><h1><a id="user-content-setting-expectations" class="anchor" href="#setting-expectations" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"/></svg></a>Setting Expectations</h1><br><br><p><code>EXPECT_CALL()</code> sets <strong>expectations</strong> on a mock method (How will it be<br>called? What will it do?):</p><br><br><pre><code>EXPECT_CALL(mock_object, method(matchers))<br>    .With(multi_argument_matcher)  ?<br>    .Times(cardinality)            ?<br>    .InSequence(sequences)         <br>    .After(expectations)           <em><br>    .WillOnce(action)              </em><br>    .WillRepeatedly(action)        ?<br>    .RetiresOnSaturation();        ?<br></code></pre><br><br><p>If <code>Times()</code> is omitted, the cardinality is assumed to be:</p><br><br><ul><br><li><code>Times(1)</code> when there is neither <code>WillOnce()</code> nor <code>WillRepeatedly()</code>;</li><br><li><code>Times(n)</code> when there are <code>n WillOnce()</code>s but no <code>WillRepeatedly()</code>, where <code>n</code> &gt;= 1; or</li><br><li><code>Times(AtLeast(n))</code> when there are <code>n WillOnce()</code>s and a <code>WillRepeatedly()</code>, where <code>n</code> &gt;= 0.</li><br></ul><br><br><p>A method with no <code>EXPECT_CALL()</code> is free to be invoked <em>any number of times</em>, and the default action will be taken each time.</p><br><br><h1><a id="user-content-matchers" class="anchor" href="#matchers" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"/></svg></a>Matchers</h1><br><br><p>A <strong>matcher</strong> matches a <em>single</em> argument.  You can use it inside<br><code>ON_CALL()</code> or <code>EXPECT_CALL()</code>, or use it to validate a value<br>directly:</p><br><br><table><thead><br><tr><br><th align="left"><code>EXPECT_THAT(value, matcher)</code></th><br><th align="left">Asserts that <code>value</code> matches <code>matcher</code>.</th><br></tr><br></thead><tbody><br><tr><br><td align="left"><code>ASSERT_THAT(value, matcher)</code></td><br><td align="left">The same as <code>EXPECT<em>THAT(value, matcher)</em></code>, except that it generates a <strong>fatal</strong> failure.</td><br></tr><br></tbody></table><br><br><p>Built-in matchers (where <code>argument</code> is the function argument) are<br>divided into several categories:</p><br><br><h2><a id="user-content-wildcard" class="anchor" href="#wildcard" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"/></svg></a>Wildcard</h2><br><br><table><thead><br><tr><br><th align="left"><code></code></th><br><th align="left"><code>argument</code> can be any value of the correct type.</th><br></tr><br></thead><tbody><br><tr><br><td align="left"><code>A&lt;type&gt;()</code> or <code>An&lt;type&gt;()</code></td><br><td align="left"><code>argument</code> can be any value of type <code>type</code>.</td><br></tr><br></tbody></table><br><br><h2><a id="user-content-generic-comparison" class="anchor" href="#generic-comparison" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"/></svg></a>Generic Comparison</h2><br><br><table><thead><br><tr><br><th align="left"><code>Eq(value)</code> or <code>value</code></th><br><th align="left"><code>argument == value</code></th><br></tr><br></thead><tbody><br><tr><br><td align="left"><code>Ge(value)</code></td><br><td align="left"><code>argument &gt;= value</code></td><br></tr><br><tr><br><td align="left"><code>Gt(value)</code></td><br><td align="left"><code>argument &gt; value</code></td><br></tr><br><tr><br><td align="left"><code>Le(value)</code></td><br><td align="left"><code>argument &lt;= value</code></td><br></tr><br><tr><br><td align="left"><code>Lt(value)</code></td><br><td align="left"><code>argument &lt; value</code></td><br></tr><br><tr><br><td align="left"><code>Ne(value)</code></td><br><td align="left"><code>argument != value</code></td><br></tr><br><tr><br><td align="left"><code>IsNull()</code></td><br><td align="left"><code>argument</code> is a <code>NULL</code> pointer (raw or smart).</td><br></tr><br><tr><br><td align="left"><code>NotNull()</code></td><br><td align="left"><code>argument</code> is a non-null pointer (raw or smart).</td><br></tr><br><tr><br><td align="left"><code>Ref(variable)</code></td><br><td align="left"><code>argument</code> is a reference to <code>variable</code>.</td><br></tr><br><tr><br><td align="left"><code>TypedEq&lt;type&gt;(value)</code></td><br><td align="left"><code>argument</code> has type <code>type</code> and is equal to <code>value</code>. You may need to use this instead of <code>Eq(value)</code> when the mock function is overloaded.</td><br></tr><br></tbody></table><br><br><p>Except <code>Ref()</code>, these matchers make a <em>copy</em> of <code>value</code> in case it’s<br>modified or destructed later. If the compiler complains that <code>value</code><br>doesn’t have a public copy constructor, try wrap it in <code>ByRef()</code>,<br>e.g. <code>Eq(ByRef(non_copyable_value))</code>. If you do that, make sure<br><code>non_copyable_value</code> is not changed afterwards, or the meaning of your<br>matcher will be changed.</p><br><br><h2><a id="user-content-floating-point-matchers" class="anchor" href="#floating-point-matchers" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"/></svg></a>Floating-Point Matchers</h2><br><br><table><thead><br><tr><br><th align="left"><code>DoubleEq(a_double)</code></th><br><th align="left"><code>argument</code> is a <code>double</code> value approximately equal to <code>a_double</code>, treating two NaNs as unequal.</th><br></tr><br></thead><tbody><br><tr><br><td align="left"><code>FloatEq(a_float)</code></td><br><td align="left"><code>argument</code> is a <code>float</code> value approximately equal to <code>a_float</code>, treating two NaNs as unequal.</td><br></tr><br><tr><br><td align="left"><code>NanSensitiveDoubleEq(a_double)</code></td><br><td align="left"><code>argument</code> is a <code>double</code> value approximately equal to <code>a_double</code>, treating two NaNs as equal.</td><br></tr><br><tr><br><td align="left"><code>NanSensitiveFloatEq(a_float)</code></td><br><td align="left"><code>argument</code> is a <code>float</code> value approximately equal to <code>a_float</code>, treating two NaNs as equal.</td><br></tr><br></tbody></table><br><br><p>The above matchers use ULP-based comparison (the same as used in<br><a href="/google/googletest/blob/master/googletest">Google Test</a>). They<br>automatically pick a reasonable error bound based on the absolute<br>value of the expected value.  <code>DoubleEq()</code> and <code>FloatEq()</code> conform to<br>the IEEE standard, which requires comparing two NaNs for equality to<br>return false. The <code>NanSensitive<em></em></code> version instead treats two NaNs as<br>equal, which is often what a user wants.</p><br><br><table><thead><br><tr><br><th align="left"><code>DoubleNear(a_double, max_abs_error)</code></th><br><th align="left"><code>argument</code> is a <code>double</code> value close to <code>a_double</code> (absolute error &lt;= <code>max_abs_error</code>), treating two NaNs as unequal.</th><br></tr><br></thead><tbody><br><tr><br><td align="left"><code>FloatNear(a_float, max_abs_error)</code></td><br><td align="left"><code>argument</code> is a <code>float</code> value close to <code>a_float</code> (absolute error &lt;= <code>max_abs_error</code>), treating two NaNs as unequal.</td><br></tr><br><tr><br><td align="left"><code>NanSensitiveDoubleNear(a_double, max_abs_error)</code></td><br><td align="left"><code>argument</code> is a <code>double</code> value close to <code>a_double</code> (absolute error &lt;= <code>max_abs_error</code>), treating two NaNs as equal.</td><br></tr><br><tr><br><td align="left"><code>NanSensitiveFloatNear(a_float, max_abs_error)</code></td><br><td align="left"><code>argument</code> is a <code>float</code> value close to <code>a_float</code> (absolute error &lt;= <code>max_abs_error</code>), treating two NaNs as equal.</td><br></tr><br></tbody></table><br><br><h2><a id="user-content-string-matchers" class="anchor" href="#string-matchers" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"/></svg></a>String Matchers</h2><br><br><p>The <code>argument</code> can be either a C string or a C++ string object:</p><br><br><table><thead><br><tr><br><th align="left"><code>ContainsRegex(string)</code></th><br><th align="left"><code>argument</code> matches the given regular expression.</th><br></tr><br></thead><tbody><br><tr><br><td align="left"><code>EndsWith(suffix)</code></td><br><td align="left"><code>argument</code> ends with string <code>suffix</code>.</td><br></tr><br><tr><br><td align="left"><code>HasSubstr(string)</code></td><br><td align="left"><code>argument</code> contains <code>string</code> as a sub-string.</td><br></tr><br><tr><br><td align="left"><code>MatchesRegex(string)</code></td><br><td align="left"><code>argument</code> matches the given regular expression with the match starting at the first character and ending at the last character.</td><br></tr><br><tr><br><td align="left"><code>StartsWith(prefix)</code></td><br><td align="left"><code>argument</code> starts with string <code>prefix</code>.</td><br></tr><br><tr><br><td align="left"><code>StrCaseEq(string)</code></td><br><td align="left"><code>argument</code> is equal to <code>string</code>, ignoring case.</td><br></tr><br><tr><br><td align="left"><code>StrCaseNe(string)</code></td><br><td align="left"><code>argument</code> is not equal to <code>string</code>, ignoring case.</td><br></tr><br><tr><br><td align="left"><code>StrEq(string)</code></td><br><td align="left"><code>argument</code> is equal to <code>string</code>.</td><br></tr><br><tr><br><td align="left"><code>StrNe(string)</code></td><br><td align="left"><code>argument</code> is not equal to <code>string</code>.</td><br></tr><br></tbody></table><br><br><p><code>ContainsRegex()</code> and <code>MatchesRegex()</code> use the regular expression<br>syntax defined<br><a href="/google/googletest/blob/master/googletest/docs/AdvancedGuide.md#regular-expression-syntax">here</a>.<br><code>StrCaseEq()</code>, <code>StrCaseNe()</code>, <code>StrEq()</code>, and <code>StrNe()</code> work for wide<br>strings as well.</p><br><br><h2><a id="user-content-container-matchers" class="anchor" href="#container-matchers" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"/></svg></a>Container Matchers</h2><br><br><p>Most STL-style containers support <code>==</code>, so you can use<br><code>Eq(expected_container)</code> or simply <code>expected_container</code> to match a<br>container exactly.   If you want to write the elements in-line,<br>match them more flexibly, or get more informative messages, you can use:</p><br><br><table><thead><br><tr><br><th align="left"><code>ContainerEq(container)</code></th><br><th align="left">The same as <code>Eq(container)</code> except that the failure message also includes which elements are in one container but not the other.</th><br></tr><br></thead><tbody><br><tr><br><td align="left"><code>Contains(e)</code></td><br><td align="left"><code>argument</code> contains an element that matches <code>e</code>, which can be either a value or a matcher.</td><br></tr><br><tr><br><td align="left"><code>Each(e)</code></td><br><td align="left"><code>argument</code> is a container where <em>every</em> element matches <code>e</code>, which can be either a value or a matcher.</td><br></tr><br><tr><br><td align="left"><code>ElementsAre(e0, e1, …, en)</code></td><br><td align="left"><code>argument</code> has <code>n + 1</code> elements, where the i-th element matches <code>ei</code>, which can be a value or a matcher. 0 to 10 arguments are allowed.</td><br></tr><br><tr><br><td align="left"><code>ElementsAreArray({ e0, e1, …, en })</code>, <code>ElementsAreArray(array)</code>, or <code>ElementsAreArray(array, count)</code></td><br><td align="left">The same as <code>ElementsAre()</code> except that the expected element values/matchers come from an initializer list, STL-style container, or C-style array.</td><br></tr><br><tr><br><td align="left"><code>IsEmpty()</code></td><br><td align="left"><code>argument</code> is an empty container (<code>container.empty()</code>).</td><br></tr><br><tr><br><td align="left"><code>Pointwise(m, container)</code></td><br><td align="left"><code>argument</code> contains the same number of elements as in <code>container</code>, and for all i, (the i-th element in <code>argument</code>, the i-th element in <code>container</code>) match <code>m</code>, which is a matcher on 2-tuples. E.g. <code>Pointwise(Le(), upper_bounds)</code> verifies that each element in <code>argument</code> doesn’t exceed the corresponding element in <code>upper_bounds</code>. See more detail below.</td><br></tr><br><tr><br><td align="left"><code>SizeIs(m)</code></td><br><td align="left"><code>argument</code> is a container whose size matches <code>m</code>. E.g. <code>SizeIs(2)</code> or <code>SizeIs(Lt(2))</code>.</td><br></tr><br><tr><br><td align="left"><code>UnorderedElementsAre(e0, e1, …, en)</code></td><br><td align="left"><code>argument</code> has <code>n + 1</code> elements, and under some permutation each element matches an <code>ei</code> (for a different <code>i</code>), which can be a value or a matcher. 0 to 10 arguments are allowed.</td><br></tr><br><tr><br><td align="left"><code>UnorderedElementsAreArray({ e0, e1, …, en })</code>, <code>UnorderedElementsAreArray(array)</code>, or <code>UnorderedElementsAreArray(array, count)</code></td><br><td align="left">The same as <code>UnorderedElementsAre()</code> except that the expected element values/matchers come from an initializer list, STL-style container, or C-style array.</td><br></tr><br><tr><br><td align="left"><code>WhenSorted(m)</code></td><br><td align="left">When <code>argument</code> is sorted using the <code>&lt;</code> operator, it matches container matcher <code>m</code>. E.g. <code>WhenSorted(UnorderedElementsAre(1, 2, 3))</code> verifies that <code>argument</code> contains elements <code>1</code>, <code>2</code>, and <code>3</code>, ignoring order.</td><br></tr><br><tr><br><td align="left"><code>WhenSortedBy(comparator, m)</code></td><br><td align="left">The same as <code>WhenSorted(m)</code>, except that the given comparator instead of <code>&lt;</code> is used to sort <code>argument</code>. E.g. <code>WhenSortedBy(std::greater&lt;int&gt;(), ElementsAre(3, 2, 1))</code>.</td><br></tr><br></tbody></table><br><br><p>Notes:</p><br><br><ul><br><li>These matchers can also match:<br><br><ol><br><li>a native array passed by reference (e.g. in <code>Foo(const int (&amp;a)[5])</code>), and</li><br><li>an array passed as a pointer and a count (e.g. in <code>Bar(const T buffer, int len)</code> – see <a href="#Multiargument_Matchers.md">Multi-argument Matchers</a>).</li><br></ol></li><br><li>The array being matched may be multi-dimensional (i.e. its elements can be arrays).</li><br><li><code>m</code> in <code>Pointwise(m, …)</code> should be a matcher for <code>::testing::tuple&lt;T, U&gt;</code> where <code>T</code> and <code>U</code> are the element type of the actual container and the expected container, respectively. For example, to compare two <code>Foo</code> containers where <code>Foo</code> doesn’t support <code>operator==</code> but has an <code>Equals()</code> method, one might write:</li><br></ul><br><br><pre><code>using ::testing::get;<br>MATCHER(FooEq, “”) {<br>  return get&lt;0&gt;(arg).Equals(get&lt;1&gt;(arg));<br>}<br>…<br>EXPECT_THAT(actual_foos, Pointwise(FooEq(), expected_foos));<br></code></pre><br><br><h2><a id="user-content-member-matchers" class="anchor" href="#member-matchers" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"/></svg></a>Member Matchers</h2><br><br><table><thead><br><tr><br><th align="left"><code>Field(&amp;class::field, m)</code></th><br><th align="left"><code>argument.field</code> (or <code>argument-&gt;field</code> when <code>argument</code> is a plain pointer) matches matcher <code>m</code>, where <code>argument</code> is an object of type <em>class</em>.</th><br></tr><br></thead><tbody><br><tr><br><td align="left"><code>Key(e)</code></td><br><td align="left"><code>argument.first</code> matches <code>e</code>, which can be either a value or a matcher. E.g. <code>Contains(Key(Le(5)))</code> can verify that a <code>map</code> contains a key <code>&lt;= 5</code>.</td><br></tr><br><tr><br><td align="left"><code>Pair(m1, m2)</code></td><br><td align="left"><code>argument</code> is an <code>std::pair</code> whose <code>first</code> field matches <code>m1</code> and <code>second</code> field matches <code>m2</code>.</td><br></tr><br><tr><br><td align="left"><code>Property(&amp;class::property, m)</code></td><br><td align="left"><code>argument.property()</code> (or <code>argument-&gt;property()</code> when <code>argument</code> is a plain pointer) matches matcher <code>m</code>, where <code>argument</code> is an object of type <em>class</em>.</td><br></tr><br></tbody></table><br><br><h2><a id="user-content-matching-the-result-of-a-function-or-functor" class="anchor" href="#matching-the-result-of-a-function-or-functor" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"/></svg></a>Matching the Result of a Function or Functor</h2><br><br><table><thead><br><tr><br><th align="left"><code>ResultOf(f, m)</code></th><br><th align="left"><code>f(argument)</code> matches matcher <code>m</code>, where <code>f</code> is a function or functor.</th><br></tr><br></thead><tbody><br></tbody></table><br><br><h2><a id="user-content-pointer-matchers" class="anchor" href="#pointer-matchers" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"/></svg></a>Pointer Matchers</h2><br><br><table><thead><br><tr><br><th align="left"><code>Pointee(m)</code></th><br><th align="left"><code>argument</code> (either a smart pointer or a raw pointer) points to a value that matches matcher <code>m</code>.</th><br></tr><br></thead><tbody><br><tr><br><td align="left"><code>WhenDynamicCastTo&lt;T&gt;(m)</code></td><br><td align="left">when <code>argument</code> is passed through <code>dynamic_cast&lt;T&gt;()</code>, it matches matcher <code>m</code>.</td><br></tr><br></tbody></table><br><br><h2><a id="user-content-multiargument-matchers" class="anchor" href="#multiargument-matchers" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"/></svg></a>Multiargument Matchers</h2><br><br><p>Technically, all matchers match a <em>single</em> value. A “multi-argument”<br>matcher is just one that matches a <em>tuple</em>. The following matchers can<br>be used to match a tuple <code>(x, y)</code>:</p><br><br><table><thead><br><tr><br><th align="left"><code>Eq()</code></th><br><th align="left"><code>x == y</code></th><br></tr><br></thead><tbody><br><tr><br><td align="left"><code>Ge()</code></td><br><td align="left"><code>x &gt;= y</code></td><br></tr><br><tr><br><td align="left"><code>Gt()</code></td><br><td align="left"><code>x &gt; y</code></td><br></tr><br><tr><br><td align="left"><code>Le()</code></td><br><td align="left"><code>x &lt;= y</code></td><br></tr><br><tr><br><td align="left"><code>Lt()</code></td><br><td align="left"><code>x &lt; y</code></td><br></tr><br><tr><br><td align="left"><code>Ne()</code></td><br><td align="left"><code>x != y</code></td><br></tr><br></tbody></table><br><br><p>You can use the following selectors to pick a subset of the arguments<br>(or reorder them) to participate in the matching:</p><br><br><table><thead><br><tr><br><th align="left"><code>AllArgs(m)</code></th><br><th align="left">Equivalent to <code>m</code>. Useful as syntactic sugar in <code>.With(AllArgs(m))</code>.</th><br></tr><br></thead><tbody><br><tr><br><td align="left"><code>Args&lt;N1, N2, …, Nk&gt;(m)</code></td><br><td align="left">The tuple of the <code>k</code> selected (using 0-based indices) arguments matches <code>m</code>, e.g. <code>Args&lt;1, 2&gt;(Eq())</code>.</td><br></tr><br></tbody></table><br><br><h2><a id="user-content-composite-matchers" class="anchor" href="#composite-matchers" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"/></svg></a>Composite Matchers</h2><br><br><p>You can make a matcher from one or more other matchers:</p><br><br><table><thead><br><tr><br><th align="left"><code>AllOf(m1, m2, …, mn)</code></th><br><th align="left"><code>argument</code> matches all of the matchers <code>m1</code> to <code>mn</code>.</th><br></tr><br></thead><tbody><br><tr><br><td align="left"><code>AnyOf(m1, m2, …, mn)</code></td><br><td align="left"><code>argument</code> matches at least one of the matchers <code>m1</code> to <code>mn</code>.</td><br></tr><br><tr><br><td align="left"><code>Not(m)</code></td><br><td align="left"><code>argument</code> doesn’t match matcher <code>m</code>.</td><br></tr><br></tbody></table><br><br><h2><a id="user-content-adapters-for-matchers" class="anchor" href="#adapters-for-matchers" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"/></svg></a>Adapters for Matchers</h2><br><br><table><thead><br><tr><br><th align="left"><code>MatcherCast&lt;T&gt;(m)</code></th><br><th align="left">casts matcher <code>m</code> to type <code>Matcher&lt;T&gt;</code>.</th><br></tr><br></thead><tbody><br><tr><br><td align="left"><code>SafeMatcherCast&lt;T&gt;(m)</code></td><br><td align="left"><a href="/google/googletest/blob/master/googlemock/docs/CookBook.md#casting-matchers">safely casts</a> matcher <code>m</code> to type <code>Matcher&lt;T&gt;</code>.</td><br></tr><br><tr><br><td align="left"><code>Truly(predicate)</code></td><br><td align="left"><code>predicate(argument)</code> returns something considered by C++ to be true, where <code>predicate</code> is a function or functor.</td><br></tr><br></tbody></table><br><br><h2><a id="user-content-matchers-as-predicates" class="anchor" href="#matchers-as-predicates" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"/></svg></a>Matchers as Predicates</h2><br><br><table><thead><br><tr><br><th align="left"><code>Matches(m)(value)</code></th><br><th align="left">evaluates to <code>true</code> if <code>value</code> matches <code>m</code>. You can use <code>Matches(m)</code> alone as a unary functor.</th><br></tr><br></thead><tbody><br><tr><br><td align="left"><code>ExplainMatchResult(m, value, result_listener)</code></td><br><td align="left">evaluates to <code>true</code> if <code>value</code> matches <code>m</code>, explaining the result to <code>result_listener</code>.</td><br></tr><br><tr><br><td align="left"><code>Value(value, m)</code></td><br><td align="left">evaluates to <code>true</code> if <code>value</code> matches <code>m</code>.</td><br></tr><br></tbody></table><br><br><h2><a id="user-content-defining-matchers" class="anchor" href="#defining-matchers" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"/></svg></a>Defining Matchers</h2><br><br><table><thead><br><tr><br><th align="left"><code>MATCHER(IsEven, “”) { return (arg % 2) == 0; }</code></th><br><th align="left">Defines a matcher <code>IsEven()</code> to match an even number.</th><br></tr><br></thead><tbody><br><tr><br><td align="left"><code>MATCHER_P(IsDivisibleBy, n, “”) { <em>result_listener &lt;&lt; “where the remainder is “ &lt;&lt; (arg % n); return (arg % n) == 0; }</em></code></td><br><td align="left">Defines a macher <code>IsDivisibleBy(n)</code> to match a number divisible by <code>n</code>.</td><br></tr><br><tr><br><td align="left"><code>MATCHER_P2(IsBetween, a, b, std::string(negation ? “isn’t” : “is”) + “ between “ + PrintToString(a) + “ and “ + PrintToString(b)) { return a &lt;= arg &amp;&amp; arg &lt;= b; }</code></td><br><td align="left">Defines a matcher <code>IsBetween(a, b)</code> to match a value in the range [<code>a</code>, <code>b</code>].</td><br></tr><br></tbody></table><br><br><p><strong>Notes:</strong></p><br><br><ol><br><li>The <code>MATCHER</code> macros cannot be used inside a function or class.</li><br><li>The matcher body must be <em>purely functional</em> (i.e. it cannot have any side effect, and the result must not depend on anything other than the value being matched and the matcher parameters).</li><br><li>You can use <code>PrintToString(x)</code> to convert a value <code>x</code> of any type to a string.</li><br></ol><br><br><h2><a id="user-content-matchers-as-test-assertions" class="anchor" href="#matchers-as-test-assertions" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"/></svg></a>Matchers as Test Assertions</h2><br><br><table><thead><br><tr><br><th align="left"><code>ASSERT_THAT(expression, m)</code></th><br><th align="left">Generates a <a href="/google/googletest/blob/master/googletest/docs/Primer.md#assertions">fatal failure</a> if the value of <code>expression</code> doesn’t match matcher <code>m</code>.</th><br></tr><br></thead><tbody><br><tr><br><td align="left"><code>EXPECT_THAT(expression, m)</code></td><br><td align="left">Generates a non-fatal failure if the value of <code>expression</code> doesn’t match matcher <code>m</code>.</td><br></tr><br></tbody></table><br><br><h1><a id="user-content-actions" class="anchor" href="#actions" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"/></svg></a>Actions</h1><br><br><p><strong>Actions</strong> specify what a mock function should do when invoked.</p><br><br><h2><a id="user-content-returning-a-value" class="anchor" href="#returning-a-value" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"/></svg></a>Returning a Value</h2><br><br><table><thead><br><tr><br><th align="left"><code>Return()</code></th><br><th align="left">Return from a <code>void</code> mock function.</th><br></tr><br></thead><tbody><br><tr><br><td align="left"><code>Return(value)</code></td><br><td align="left">Return <code>value</code>. If the type of <code>value</code> is different to the mock function’s return type, <code>value</code> is converted to the latter type <i>at the time the expectation is set</i>, not when the action is executed.</td><br></tr><br><tr><br><td align="left"><code>ReturnArg&lt;N&gt;()</code></td><br><td align="left">Return the <code>N</code>-th (0-based) argument.</td><br></tr><br><tr><br><td align="left"><code>ReturnNew&lt;T&gt;(a1, …, ak)</code></td><br><td align="left">Return <code>new T(a1, …, ak)</code>; a different object is created each time.</td><br></tr><br><tr><br><td align="left"><code>ReturnNull()</code></td><br><td align="left">Return a null pointer.</td><br></tr><br><tr><br><td align="left"><code>ReturnPointee(ptr)</code></td><br><td align="left">Return the value pointed to by <code>ptr</code>.</td><br></tr><br><tr><br><td align="left"><code>ReturnRef(variable)</code></td><br><td align="left">Return a reference to <code>variable</code>.</td><br></tr><br><tr><br><td align="left"><code>ReturnRefOfCopy(value)</code></td><br><td align="left">Return a reference to a copy of <code>value</code>; the copy lives as long as the action.</td><br></tr><br></tbody></table><br><br><h2><a id="user-content-side-effects" class="anchor" href="#side-effects" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"/></svg></a>Side Effects</h2><br><br><table><thead><br><tr><br><th align="left"><code>Assign(&amp;variable, value)</code></th><br><th align="left">Assign <code>value</code> to variable.</th><br></tr><br></thead><tbody><br><tr><br><td align="left"><code>DeleteArg&lt;N&gt;()</code></td><br><td align="left">Delete the <code>N</code>-th (0-based) argument, which must be a pointer.</td><br></tr><br><tr><br><td align="left"><code>SaveArg&lt;N&gt;(pointer)</code></td><br><td align="left">Save the <code>N</code>-th (0-based) argument to <code><em>pointer</em></code>.</td><br></tr><br><tr><br><td align="left"><code>SaveArgPointee&lt;N&gt;(pointer)</code></td><br><td align="left">Save the value pointed to by the <code>N</code>-th (0-based) argument to <code>pointer</code>.</td><br></tr><br><tr><br><td align="left"><code>SetArgReferee&lt;N&gt;(value)</code></td><br><td align="left">Assign value to the variable referenced by the <code>N</code>-th (0-based) argument.</td><br></tr><br><tr><br><td align="left"><code>SetArgPointee&lt;N&gt;(value)</code></td><br><td align="left">Assign <code>value</code> to the variable pointed by the <code>N</code>-th (0-based) argument.</td><br></tr><br><tr><br><td align="left"><code>SetArgumentPointee&lt;N&gt;(value)</code></td><br><td align="left">Same as <code>SetArgPointee&lt;N&gt;(value)</code>. Deprecated. Will be removed in v1.7.0.</td><br></tr><br><tr><br><td align="left"><code>SetArrayArgument&lt;N&gt;(first, last)</code></td><br><td align="left">Copies the elements in source range [<code>first</code>, <code>last</code>) to the array pointed to by the <code>N</code>-th (0-based) argument, which can be either a pointer or an iterator. The action does not take ownership of the elements in the source range.</td><br></tr><br><tr><br><td align="left"><code>SetErrnoAndReturn(error, value)</code></td><br><td align="left">Set <code>errno</code> to <code>error</code> and return <code>value</code>.</td><br></tr><br><tr><br><td align="left"><code>Throw(exception)</code></td><br><td align="left">Throws the given exception, which can be any copyable value. Available since v1.1.0.</td><br></tr><br></tbody></table><br><br><h2><a id="user-content-using-a-function-or-a-functor-as-an-action" class="anchor" href="#using-a-function-or-a-functor-as-an-action" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"/></svg></a>Using a Function or a Functor as an Action</h2><br><br><table><thead><br><tr><br><th align="left"><code>Invoke(f)</code></th><br><th align="left">Invoke <code>f</code> with the arguments passed to the mock function, where <code>f</code> can be a global/static function or a functor.</th><br></tr><br></thead><tbody><br><tr><br><td align="left"><code>Invoke(object_pointer, &amp;class::method)</code></td><br><td align="left">Invoke the {method on the object with the arguments passed to the mock function.</td><br></tr><br><tr><br><td align="left"><code>InvokeWithoutArgs(f)</code></td><br><td align="left">Invoke <code>f</code>, which can be a global/static function or a functor. <code>f</code> must take no arguments.</td><br></tr><br><tr><br><td align="left"><code>InvokeWithoutArgs(object_pointer, &amp;class::method)</code></td><br><td align="left">Invoke the method on the object, which takes no arguments.</td><br></tr><br><tr><br><td align="left"><code>InvokeArgument&lt;N&gt;(arg1, arg2, …, argk)</code></td><br><td align="left">Invoke the mock function’s <code>N</code>-th (0-based) argument, which must be a function or a functor, with the <code>k</code> arguments.</td><br></tr><br></tbody></table><br><br><p>The return value of the invoked function is used as the return value<br>of the action.</p><br><br><p>When defining a function or functor to be used with <code>Invoke<em>()</em></code>, you can declare any unused parameters as <code>Unused</code>:</p><br><br><pre><code>  double Distance(Unused, double x, double y) { return sqrt(xx + y<em>y); }<br>  …<br>  EXPECT<em>CALL(mock, Foo(“Hi”, </em>, _)).WillOnce(Invoke(Distance));<br></em></code></pre><br><br><p>In <code>InvokeArgument&lt;N&gt;(…)</code>, if an argument needs to be passed by reference, wrap it inside <code>ByRef()</code>. For example,</p><br><br><pre><code>  InvokeArgument&lt;2&gt;(5, string(“Hi”), ByRef(foo))<br></code></pre><br><br><p>calls the mock function’s #2 argument, passing to it <code>5</code> and <code>string(“Hi”)</code> by value, and <code>foo</code> by reference.</p><br><br><h2><a id="user-content-default-action" class="anchor" href="#default-action" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"/></svg></a>Default Action</h2><br><br><table><thead><br><tr><br><th align="left"><code>DoDefault()</code></th><br><th align="left">Do the default action (specified by <code>ON_CALL()</code> or the built-in one).</th><br></tr><br></thead><tbody><br></tbody></table><br><br><p><strong>Note:</strong> due to technical reasons, <code>DoDefault()</code> cannot be used inside  a composite action - trying to do so will result in a run-time error.</p><br><br><h2><a id="user-content-composite-actions" class="anchor" href="#composite-actions" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"/></svg></a>Composite Actions</h2><br><br><table><thead><br><tr><br><th align="left"><code>DoAll(a1, a2, …, an)</code></th><br><th align="left">Do all actions <code>a1</code> to <code>an</code> and return the result of <code>an</code> in each invocation. The first <code>n - 1</code> sub-actions must return void.</th><br></tr><br></thead><tbody><br><tr><br><td align="left"><code>IgnoreResult(a)</code></td><br><td align="left">Perform action <code>a</code> and ignore its result. <code>a</code> must not return void.</td><br></tr><br><tr><br><td align="left"><code>WithArg&lt;N&gt;(a)</code></td><br><td align="left">Pass the <code>N</code>-th (0-based) argument of the mock function to action <code>a</code> and perform it.</td><br></tr><br><tr><br><td align="left"><code>WithArgs&lt;N1, N2, …, Nk&gt;(a)</code></td><br><td align="left">Pass the selected (0-based) arguments of the mock function to action <code>a</code> and perform it.</td><br></tr><br><tr><br><td align="left"><code>WithoutArgs(a)</code></td><br><td align="left">Perform action <code>a</code> without any arguments.</td><br></tr><br></tbody></table><br><br><h2><a id="user-content-defining-actions" class="anchor" href="#defining-actions" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"/></svg></a>Defining Actions</h2><br><br><table><thead><br><tr><br><th align="left"><code>ACTION(Sum) { return arg0 + arg1; }</code></th><br><th align="left">Defines an action <code>Sum()</code> to return the sum of the mock function’s argument #0 and #1.</th><br></tr><br></thead><tbody><br><tr><br><td align="left"><code>ACTION_P(Plus, n) { return arg0 + n; }</code></td><br><td align="left">Defines an action <code>Plus(n)</code> to return the sum of the mock function’s argument #0 and <code>n</code>.</td><br></tr><br><tr><br><td align="left"><code>ACTION_Pk(Foo, p1, …, pk) { statements; }</code></td><br><td align="left">Defines a parameterized action <code>Foo(p1, …, pk)</code> to execute the given <code>statements</code>.</td><br></tr><br></tbody></table><br><br><p>The <code>ACTION</code> macros cannot be used inside a function or class.</p><br><br><h1><a id="user-content-cardinalities" class="anchor" href="#cardinalities" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"/></svg></a>Cardinalities</h1><br><br><p>These are used in <code>Times()</code> to specify how many times a mock function will be called:</p><br><br><table><thead><br><tr><br><th align="left"><code>AnyNumber()</code></th><br><th align="left">The function can be called any number of times.</th><br></tr><br></thead><tbody><br><tr><br><td align="left"><code>AtLeast(n)</code></td><br><td align="left">The call is expected at least <code>n</code> times.</td><br></tr><br><tr><br><td align="left"><code>AtMost(n)</code></td><br><td align="left">The call is expected at most <code>n</code> times.</td><br></tr><br><tr><br><td align="left"><code>Between(m, n)</code></td><br><td align="left">The call is expected between <code>m</code> and <code>n</code> (inclusive) times.</td><br></tr><br><tr><br><td align="left"><code>Exactly(n) or n</code></td><br><td align="left">The call is expected exactly <code>n</code> times. In particular, the call should never happen when <code>n</code> is 0.</td><br></tr><br></tbody></table><br><br><h1><a id="user-content-expectation-order" class="anchor" href="#expectation-order" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"/></svg></a>Expectation Order</h1><br><br><p>By default, the expectations can be matched in <em>any</em> order.  If some<br>or all expectations must be matched in a given order, there are two<br>ways to specify it.  They can be used either independently or<br>together.</p><br><br><h2><a id="user-content-the-after-clause" class="anchor" href="#the-after-clause" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"/></svg></a>The After Clause</h2><br><br><pre><code>using ::testing::Expectation;<br>…<br>Expectation init_x = EXPECT_CALL(foo, InitX());<br>Expectation init_y = EXPECT_CALL(foo, InitY());<br>EXPECT_CALL(foo, Bar())<br>    .After(init_x, init_y);<br></code></pre><br><br><p>says that <code>Bar()</code> can be called only after both <code>InitX()</code> and<br><code>InitY()</code> have been called.</p><br><br><p>If you don’t know how many pre-requisites an expectation has when you<br>write it, you can use an <code>ExpectationSet</code> to collect them:</p><br><br><pre><code>using ::testing::ExpectationSet;<br>…<br>ExpectationSet all_inits;<br>for (int i = 0; i &lt; element_count; i++) {<br>  all_inits += EXPECT_CALL(foo, InitElement(i));<br>}<br>EXPECT_CALL(foo, Bar())<br>    .After(all_inits);<br></code></pre><br><br><p>says that <code>Bar()</code> can be called only after all elements have been<br>initialized (but we don’t care about which elements get initialized<br>before the others).</p><br><br><p>Modifying an <code>ExpectationSet</code> after using it in an <code>.After()</code> doesn’t<br>affect the meaning of the <code>.After()</code>.</p><br><br><h2><a id="user-content-sequences" class="anchor" href="#sequences" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"/></svg></a>Sequences</h2><br><br><p>When you have a long chain of sequential expectations, it’s easier to<br>specify the order using <strong>sequences</strong>, which don’t require you to given<br>each expectation in the chain a different name.  <i>All expected<br><br>calls</i> in the same sequence must occur in the order they are<br>specified.</p><br><br><pre><code>using ::testing::Sequence;<br>Sequence s1, s2;<br>…<br>EXPECT_CALL(foo, Reset())<br>    .InSequence(s1, s2)<br>    .WillOnce(Return(true));<br>EXPECT_CALL(foo, GetSize())<br>    .InSequence(s1)<br>    .WillOnce(Return(1));<br>EXPECT_CALL(foo, Describe(A&lt;const char*&gt;()))<br>    .InSequence(s2)<br>    .WillOnce(Return(“dummy”));<br></code></pre><br><br><p>says that <code>Reset()</code> must be called before <em>both</em> <code>GetSize()</code> <em>and</em><br><code>Describe()</code>, and the latter two can occur in any order.</p><br><br><p>To put many expectations in a sequence conveniently:</p><br><br><pre><code>using ::testing::InSequence;<br>{<br>  InSequence dummy;<br><br>  EXPECT_CALL(…)…;<br>  EXPECT_CALL(…)…;<br>  …<br>  EXPECT_CALL(…)…;<br>}<br></code></pre><br><br><p>says that all expected calls in the scope of <code>dummy</code> must occur in<br>strict order. The name <code>dummy</code> is irrelevant.)</p><br><br><h1><a id="user-content-verifying-and-resetting-a-mock" class="anchor" href="#verifying-and-resetting-a-mock" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"/></svg></a>Verifying and Resetting a Mock</h1><br><br><p>Google Mock will verify the expectations on a mock object when it is destructed, or you can do it earlier:</p><br><br><pre><code>using ::testing::Mock;<br>…<br>// Verifies and removes the expectations on mock_obj;<br>// returns true iff successful.<br>Mock::VerifyAndClearExpectations(&amp;mock_obj);<br>…<br>// Verifies and removes the expectations on mock_obj;<br>// also removes the default actions set by ON_CALL();<br>// returns true iff successful.<br>Mock::VerifyAndClear(&amp;mock_obj);<br></code></pre><br><br><p>You can also tell Google Mock that a mock object can be leaked and doesn’t<br>need to be verified:</p><br><br><pre><code>Mock::AllowLeak(&amp;mock_obj);<br></code></pre><br><br><h1><a id="user-content-mock-classes" class="anchor" href="#mock-classes" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"/></svg></a>Mock Classes</h1><br><br><p>Google Mock defines a convenient mock class template</p><br><br><pre><code>class MockFunction&lt;R(A1, …, An)&gt; {<br> public:<br>  MOCK_METHODn(Call, R(A1, …, An));<br>};<br></code></pre><br><br><p>See this <a href="/google/googletest/blob/master/googlemock/docs/CookBook.md#using-check-points">recipe</a> for one application of it.</p><br><br><h1><a id="user-content-flags" class="anchor" href="#flags" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"/></svg></a>Flags</h1><br><br><table><thead><br><tr><br><th align="left"><code>–gmock_catch_leaked_mocks=0</code></th><br><th align="left">Don’t report leaked mock objects as failures.</th><br></tr><br></thead><tbody><br><tr><br><td align="left"><code>–gmock_verbose=LEVEL</code></td><br><td align="left">Sets the default verbosity level (<code>info</code>, <code>warning</code>, or <code>error</code>) of Google Mock messages.</td><br></tr><br></tbody></table><br></article><br>  </div><br><br></div><br><br><button type="button" data-facebox="#jump-to-line" data-facebox-class="linejump" data-hotkey="l" class="hidden">Jump to Line</button><br><div id="jump-to-line" style="display:none"><br>  <!-- </textarea> --><!-- '"` --><form accept-charset="UTF-8" action="" class="js-jump-to-line-form" method="get"><div style="margin:0;padding:0;display:inline"><input name="utf8" type="hidden" value="&#x2713;"></div><br>    <input class="form-control linejump-input js-jump-to-line-field" type="text" placeholder="Jump to line&hellip;" aria-label="Jump to line" autofocus><br>    <button type="submit" class="btn">Go</button><br></form></div><br><br>  </div><br>  <div class="modal-backdrop"></div><br></div><br><br><br>    </div><br>  </div><br><br>    </div><br><br>        <div class="container site-footer-container"><br>  <div class="site-footer" role="contentinfo"><br>    <ul class="site-footer-links right"><br>        <li><a href="https://status.github.com/" data-ga-click="Footer, go to status, text:status" target="_blank" rel="external">Status</a></li><br>      <li><a href="https://developer.github.com" data-ga-click="Footer, go to api, text:api" target="_blank" rel="external">API</a></li><br>      <li><a href="https://training.github.com" data-ga-click="Footer, go to training, text:training" target="_blank" rel="external">Training</a></li><br>      <li><a href="https://shop.github.com" data-ga-click="Footer, go to shop, text:shop" target="_blank" rel="external">Shop</a></li><br>        <li><a href="https://github.com/blog" data-ga-click="Footer, go to blog, text:blog" target="_blank" rel="external">Blog</a></li><br>        <li><a href="https://github.com/about" data-ga-click="Footer, go to about, text:about" target="_blank" rel="external">About</a></li><br><br>    </ul><br><br>    <a href="https://github.com" aria-label="Homepage" class="site-footer-mark" target="_blank" rel="external"><br>      <svg aria-hidden="true" class="octicon octicon-mark-github" height="24" title="GitHub " version="1.1" viewbox="0 0 16 16" width="24"><path d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59 0.4 0.07 0.55-0.17 0.55-0.38 0-0.19-0.01-0.82-0.01-1.49-2.01 0.37-2.53-0.49-2.69-0.94-0.09-0.23-0.48-0.94-0.82-1.13-0.28-0.15-0.68-0.52-0.01-0.53 0.63-0.01 1.08 0.58 1.23 0.82 0.72 1.21 1.87 0.87 2.33 0.66 0.07-0.52 0.28-0.87 0.51-1.07-1.78-0.2-3.64-0.89-3.64-3.95 0-0.87 0.31-1.59 0.82-2.15-0.08-0.2-0.36-1.02 0.08-2.12 0 0 0.67-0.21 2.2 0.82 0.64-0.18 1.32-0.27 2-0.27 0.68 0 1.36 0.09 2 0.27 1.53-1.04 2.2-0.82 2.2-0.82 0.44 1.1 0.16 1.92 0.08 2.12 0.51 0.56 0.82 1.27 0.82 2.15 0 3.07-1.87 3.75-3.65 3.95 0.29 0.25 0.54 0.73 0.54 1.48 0 1.07-0.01 1.93-0.01 2.2 0 0.21 0.15 0.46 0.55 0.38C13.71 14.53 16 11.53 16 8 16 3.58 12.42 0 8 0z"/></svg><br></a><br>    <ul class="site-footer-links"><br>      <li>&copy; 2016 <span title="0.04569s from github-fe122-cp1-prd.iad.github.net">GitHub</span>, Inc.</li><br>        <li><a href="https://github.com/site/terms" data-ga-click="Footer, go to terms, text:terms" target="_blank" rel="external">Terms</a></li><br>        <li><a href="https://github.com/site/privacy" data-ga-click="Footer, go to privacy, text:privacy" target="_blank" rel="external">Privacy</a></li><br>        <li><a href="https://github.com/security" data-ga-click="Footer, go to security, text:security" target="_blank" rel="external">Security</a></li><br>        <li><a href="https://github.com/contact" data-ga-click="Footer, go to contact, text:contact" target="_blank" rel="external">Contact</a></li><br>        <li><a href="https://help.github.com" data-ga-click="Footer, go to help, text:help" target="_blank" rel="external">Help</a></li><br>    </ul><br>  </div><br></div><br><br><br><br><br><br><br>    <div id="ajax-error-message" class="ajax-error-message flash flash-error"><br>      <svg aria-hidden="true" class="octicon octicon-alert" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M15.72 12.5l-6.85-11.98C8.69 0.21 8.36 0.02 8 0.02s-0.69 0.19-0.87 0.5l-6.85 11.98c-0.18 0.31-0.18 0.69 0 1C0.47 13.81 0.8 14 1.15 14h13.7c0.36 0 0.69-0.19 0.86-0.5S15.89 12.81 15.72 12.5zM9 12H7V10h2V12zM9 9H7V5h2V9z"/></svg><br>      <button type="button" class="flash-close js-flash-close js-ajax-error-dismiss" aria-label="Dismiss error"><br>        <svg aria-hidden="true" class="octicon octicon-x" height="16" version="1.1" viewbox="0 0 12 16" width="12"><path d="M7.48 8l3.75 3.75-1.48 1.48-3.75-3.75-3.75 3.75-1.48-1.48 3.75-3.75L0.77 4.25l1.48-1.48 3.75 3.75 3.75-3.75 1.48 1.48-3.75 3.75z"/></svg><br>      </button><br>      Something went wrong with that request. Please try again.<br>    </div><br><br><br><br>      <script crossorigin="anonymous" integrity="sha256-sMhbbqxUJs0WUt7KGbxYXmiKrOw3DEVBq38Ty1r03AA=" src="https://assets-cdn.github.com/assets/frameworks-b0c85b6eac5426cd1652deca19bc585e688aacec370c4541ab7f13cb5af4dc00.js"></script><br>      <script async="async" crossorigin="anonymous" integrity="sha256-Eks4R6YE/A4V1V6CIyGzz1JsmTva1rGR/s3gZQV1EGQ=" src="https://assets-cdn.github.com/assets/github-124b3847a604fc0e15d55e822321b3cf526c993bdad6b191fecde06505751064.js"></script><br><br><br><br><br><br>    <div class="js-stale-session-flash stale-session-flash flash flash-warn flash-banner hidden"><br>      <svg aria-hidden="true" class="octicon octicon-alert" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M15.72 12.5l-6.85-11.98C8.69 0.21 8.36 0.02 8 0.02s-0.69 0.19-0.87 0.5l-6.85 11.98c-0.18 0.31-0.18 0.69 0 1C0.47 13.81 0.8 14 1.15 14h13.7c0.36 0 0.69-0.19 0.86-0.5S15.89 12.81 15.72 12.5zM9 12H7V10h2V12zM9 9H7V5h2V9z"/></svg><br>      <span class="signed-in-tab-flash">You signed in with another tab or window. <a href="">Reload</a> to refresh your session.</span><br>      <span class="signed-out-tab-flash">You signed out in another tab or window. <a href="">Reload</a> to refresh your session.</span><br>    </div><br>    <div class="facebox" id="facebox" style="display:none;"><br>  <div class="facebox-popup"><br>    <div class="facebox-content" role="dialog" aria-labelledby="facebox-header" aria-describedby="facebox-description"><br>    </div><br>    <button type="button" class="facebox-close js-facebox-close" aria-label="Close modal"><br>      <svg aria-hidden="true" class="octicon octicon-x" height="16" version="1.1" viewbox="0 0 12 16" width="12"><path d="M7.48 8l3.75 3.75-1.48 1.48-3.75-3.75-3.75 3.75-1.48-1.48 3.75-3.75L0.77 4.25l1.48-1.48 3.75 3.75 3.75-3.75 1.48 1.48-3.75 3.75z"/></svg><br>    </button><br>  </div><br></div><br><br>  </body><br></html>


      
    </div>
    <footer class="article-footer">
      <a data-url="http://klina.github.io/2016/04/19/CheatSheet/" data-id="cin89ld5l0000roigd555cgg5" class="article-share-link">Поделиться</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-第一篇笔记-1" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2016/03/21/第一篇笔记-1/" class="article-date">
  <time datetime="2016-03-21T08:49:30.000Z" itemprop="datePublished">2016-03-21</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/03/21/第一篇笔记-1/">第一篇笔记</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>最近得了拖延症和严重抑郁（嘎嘎），准备做点东西，抗拒每晚想无限遍review吸血鬼日记的冲动，决定用空闲时间做点什么。</p>
<h3 id="1-记录今天给我这个冲动和帮助的几个网址："><a href="#1-记录今天给我这个冲动和帮助的几个网址：" class="headerlink" title="1. 记录今天给我这个冲动和帮助的几个网址："></a>1. 记录今天给我这个冲动和帮助的几个网址：</h3><ul>
<li><p>我偶像钟柱大神的博客：<br><a href="http://zhongzhu.github.io/2016/03/09/useful-tools-on-windows/" target="_blank" rel="external">http://zhongzhu.github.io/2016/03/09/useful-tools-on-windows/</a></p>
</li>
<li><p>MarkdownPad的介绍：<br><a href="https://www.zybuluo.com/mdeditor" target="_blank" rel="external">https://www.zybuluo.com/mdeditor</a></p>
</li>
</ul>
<h3 id="2-下载了sublime和印象笔记，以及现在用的MarkDownPad。"><a href="#2-下载了sublime和印象笔记，以及现在用的MarkDownPad。" class="headerlink" title="2.下载了sublime和印象笔记，以及现在用的MarkDownPad。"></a>2.下载了sublime和印象笔记，以及现在用的MarkDownPad。</h3><ul>
<li>现在这篇笔记将会转存到印象笔记，以便长期保存。将其等我会像偶像那样自己写个博客，就开始把这些当做博文放上去。</li>
</ul>
<p>目标</p>
<h4 id="kk五月份生日之时让其在app-store上下载老妈亲自为其定制的super简单的小游戏。但保证有声音有图片，不然怎能match我大kk满两岁的智商。"><a href="#kk五月份生日之时让其在app-store上下载老妈亲自为其定制的super简单的小游戏。但保证有声音有图片，不然怎能match我大kk满两岁的智商。" class="headerlink" title="kk五月份生日之时让其在app store上下载老妈亲自为其定制的super简单的小游戏。但保证有声音有图片，不然怎能match我大kk满两岁的智商。"></a>kk五月份生日之时让其在app store上下载老妈亲自为其定制的super简单的小游戏。但保证有声音有图片，不然怎能match我大kk满两岁的智商。</h4>
      
    </div>
    <footer class="article-footer">
      <a data-url="http://klina.github.io/2016/03/21/第一篇笔记-1/" data-id="cin89ld5v0003roig801b469v" class="article-share-link">Поделиться</a>
      
      
    </footer>
  </div>
  
</article>


  

</section>
        
          <aside id="sidebar">
  
    

  
    

  
    
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Архив</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/04/">April 2016</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/03/">March 2016</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Недавние записи</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2016/04/20/ForDummies/">(no title)</a>
          </li>
        
          <li>
            <a href="/2016/04/20/FrequentlyAskedQuestions/">(no title)</a>
          </li>
        
          <li>
            <a href="/2016/04/20/KnownIssues/">(no title)</a>
          </li>
        
          <li>
            <a href="/2016/04/20/Documentation/">(no title)</a>
          </li>
        
          <li>
            <a href="/2016/04/20/DevGuide/">(no title)</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2016 klina<br>
      Создано с помощью <a href="http://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>
    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    

<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>


  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css">
  <script src="/fancybox/jquery.fancybox.pack.js"></script>


<script src="/js/script.js"></script>

  </div>
</body>
</html>